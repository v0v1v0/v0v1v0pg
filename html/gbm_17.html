<div class="container">

<table style="width: 100%;"><tr>
<td>gbmCrossVal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-validate a gbm</h2>

<h3>Description</h3>

<p>Functions for cross-validating gbm. These functions are used internally and
are not intended for end-user direct usage.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gbmCrossVal(
  cv.folds,
  nTrain,
  n.cores,
  class.stratify.cv,
  data,
  x,
  y,
  offset,
  distribution,
  w,
  var.monotone,
  n.trees,
  interaction.depth,
  n.minobsinnode,
  shrinkage,
  bag.fraction,
  var.names,
  response.name,
  group
)

gbmCrossValErr(cv.models, cv.folds, cv.group, nTrain, n.trees)

gbmCrossValPredictions(
  cv.models,
  cv.folds,
  cv.group,
  best.iter.cv,
  distribution,
  data,
  y
)

gbmCrossValModelBuild(
  cv.folds,
  cv.group,
  n.cores,
  i.train,
  x,
  y,
  offset,
  distribution,
  w,
  var.monotone,
  n.trees,
  interaction.depth,
  n.minobsinnode,
  shrinkage,
  bag.fraction,
  var.names,
  response.name,
  group
)

gbmDoFold(
  X,
  i.train,
  x,
  y,
  offset,
  distribution,
  w,
  var.monotone,
  n.trees,
  interaction.depth,
  n.minobsinnode,
  shrinkage,
  bag.fraction,
  cv.group,
  var.names,
  response.name,
  group,
  s
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cv.folds</code></td>
<td>
<p>The number of cross-validation folds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nTrain</code></td>
<td>
<p>The number of training samples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.cores</code></td>
<td>
<p>The number of cores to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class.stratify.cv</code></td>
<td>
<p>Whether or not stratified cross-validation samples
are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The model matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>The offset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution</code></td>
<td>
<p>The type of loss function. See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>Observation weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var.monotone</code></td>
<td>
<p>See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.trees</code></td>
<td>
<p>The number of trees to fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interaction.depth</code></td>
<td>
<p>The degree of allowed interactions. See
<code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.minobsinnode</code></td>
<td>
<p>See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shrinkage</code></td>
<td>
<p>See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bag.fraction</code></td>
<td>
<p>See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var.names</code></td>
<td>
<p>See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response.name</code></td>
<td>
<p>See <code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>Used when <code>distribution = "pairwise"</code>. See
<code>gbm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv.models</code></td>
<td>
<p>A list containing the models for each fold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv.group</code></td>
<td>
<p>A vector indicating the cross-validation fold for each
member of the training set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>best.iter.cv</code></td>
<td>
<p>The iteration with lowest cross-validation error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i.train</code></td>
<td>
<p>Items in the training set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Index (cross-validation fold) on which to subset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>Random seed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are not intended for end-user direct usage, but are used
internally by <code>gbm</code>.
</p>


<h3>Value</h3>

<p>A list containing the cross-validation error and predictions.
</p>


<h3>Author(s)</h3>

<p>Greg Ridgeway <a href="mailto:gregridgeway@gmail.com">gregridgeway@gmail.com</a>
</p>


<h3>References</h3>

<p>J.H. Friedman (2001). "Greedy Function Approximation: A Gradient
Boosting Machine," Annals of Statistics 29(5):1189-1232.
</p>
<p>L. Breiman (2001).
<a href="https://www.stat.berkeley.edu/users/breiman/randomforest2001.pdf">https://www.stat.berkeley.edu/users/breiman/randomforest2001.pdf</a>.
</p>


<h3>See Also</h3>

<p><code>gbm</code>
</p>


</div>