<div class="container">

<table style="width: 100%;"><tr>
<td>Rd_fun</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Return all or selected sections of a help topic as an Rd object
</h2>

<h3>Description</h3>

<p>Return all or selected sections of a help topic as an Rd object.  The
help topic may be an Rd object, a character string (for the help
function), or the value returned by the help function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Rd_fun(x, topic, pkgname = "", help_type = "text", verbose = FALSE,
          try.all.packages = FALSE, keep_section = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the help object. Its class may be "Rd", "character", or
"help_files_with_topic".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>topic</code></td>
<td>
<p>unused, see Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkgname</code></td>
<td>
<p>unused, see Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>help_type</code></td>
<td>
<p>type of help, see Details and <code>help</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical value, see <code>help</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>try.all.packages</code></td>
<td>
<p>logical value, see <code>help</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_section</code></td>
<td>
<p>the section(s) to keep. If it is a
character vector of length at least one, the sections listed in it
(plus <code style="white-space: pre;">⁠\title⁠</code> and <code style="white-space: pre;">⁠\name⁠</code>) are kept in the result, the rest are
dropped. Otherwise all sections are returned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the class of <code>x</code> is neither "Rd" nor "help_files_with_topic",
<code>x</code> is assumed to be appropriate for a call to
<code>help</code>. The call is made to obtain an object of class
"help_files_with_topic", which is then processed as below.
Arguments <code>help_type</code>, <code>verbose</code> and <code>try.all.packages</code>
are used only in this case.
</p>
<p>If the class of <code>x</code> is "help_files_with_topic"
(usually the result of a call to <code>help</code>), then an Rd object is
obtained using <code>tools:::fetchRdDB</code>.
</p>
<p>The Rd object (<code>x</code> itself or the one obtained as described above)
is examined and sections are retained or dropped as specified by
argument <code>keep_section</code>.
Sections <code style="white-space: pre;">⁠\title⁠</code> and <code style="white-space: pre;">⁠\name⁠</code> are always kept in the
returned value since otherwise the Rd object is considered invalid by
(some of?) the system functions.
</p>


<h3>Value</h3>

<p>an Rd object
</p>


<h3>Note</h3>

<p>Note that <code>help</code> works with ‘installed’ help. So, when the Rd
object is obtained via a call to help it will not necessarilly
be the one that would be obtained from the original Rd file if that
contains <code style="white-space: pre;">⁠\Sexpr⁠</code> instructions with <code>stage=build</code> or
<code>stage=install</code> optional argument. This is not a problem for the
intended purpose of this package to allow for extraction of pieces of
the help for selective display and related run-time actions.
For manipulation of source Rd files one can supply an Rd object
obtained by <code>parse_Rd</code>-ying it.
</p>
<p>FIXME: I wrote this function in a hurry when it turned out that the
help system has changed in R version 2.10, needs clean up.
</p>
<p>todo:
In recent versions of R, <code>help</code> may return more than one file
(see <code>paths</code> in this function's source), this needs to be
handled.
</p>


<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>Examples</h3>

<pre><code class="language-R"># 1st arg is name of a function
Rd_fun("data.frame",keep_section="\\arguments")
Rd_fun("seq",keep_section="\\arguments")

# 1st arg is the value of a call to help()
h1 &lt;- help("seq")
class(h1)
Rd_fun(h1,keep_section="\\title") # note: in Rd file the number of
Rd_fun(h1,keep_section="\\arguments") # backslashes is twice that in
                                        # the rendered doc.
</code></pre>


</div>