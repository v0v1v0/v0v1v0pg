<div class="container">

<table style="width: 100%;"><tr>
<td>dspl</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Builds Dataset Publication Language (DSPL) metadata file</h2>

<h3>Description</h3>

<p>Parsing <em>csv</em>, <em>tab</em> or <em>xls(x)</em> files at a specific
directory path, dspl generates a complete DSPL file.  If an output string is
specified, the function generates the complete ZIP (DSPL file plus csv
files) ready to be uploaded to Google Public Data Explorer.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dspl(path, output = NA, replace = F, targetNamespace = "",
  timeFormat = "yyyy", lang = c("es", "en"), name = NA,
  description = NA, url = NA, providerName = NA, providerURL = NA,
  sep = ";", dec = ".", encoding = getOption("encoding"),
  moreinfo = NULL)

new_dspl(path, output = NA, replace = F, targetNamespace = "",
  timeFormat = "yyyy", lang = c("es", "en"), name = NA,
  description = NA, url = NA, providerName = NA, providerURL = NA,
  sep = ";", dec = ".", encoding = getOption("encoding"),
  moreinfo = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>String. Path to the folder where the tables (csv|tab|xls) are
at.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>String, optional. Path to the output ZIP file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>Logical. If <code>output</code> ZIP file is defined exists,
<code>dspl</code> replaces it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targetNamespace</code></td>
<td>
<p>String. As DSPL documentation states “Provides a URI
that identifies your dataset. This URI is not required to point to an actual
resource, but it's a good idea to have the URI resolve to a document
describing your content or dataset”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeFormat</code></td>
<td>
<p>String. The corresponding time format of the collection.
Should be specified accordingly to joda-time format. See the Details section
for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lang</code></td>
<td>
<p>A list of strings of the languages supported by the dataset.
Could be only one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>List of strings. The name of the dataset as defined accordingly
to the <code>lang</code> list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>List of strings. Description of the dataset. It also
supports multiple description as the <code>name</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>url</code></td>
<td>
<p>The corresponding URL for the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>providerName</code></td>
<td>
<p>List of strings. The data provider name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>providerURL</code></td>
<td>
<p>List of strings. The data provider website url.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>The separation character of the tables in the 'path' folder.
Currently supports introducing the following arguments: “,” or “;” (for
.csv files), “\t” (for .tab files) and “xls” or “xlsx” (for Microsoft's
excel files).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec</code></td>
<td>
<p>String. Decimal point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>The char encoding of the input tables. Currently ignored for
Microsoft excel files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>moreinfo</code></td>
<td>
<p>A special tab file generated by the function
<code>genMoreInfo</code> that contains a dataframe of the dataset concepts
with more specifications such as description, topic, url, etc.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If there isn't any output defined the function returns a list of class
<code>dspl</code> that among its contents has a xml object (DSPL file); otherwise,
if an output is defined, the results consists on two things, an already ZIP
file containing a all the necessary to be uploaded at
<a href="publicdata.google.com">publicdata.google.com</a> (a collection of csv files and the XML DSPL
written file) and a message (character object).
</p>
<p>Internally, the parsing process consists on the following steps:
</p>

<ol>
<li>
<p> Loading the data, 
</p>
</li>
<li>
<p> Generating each column corresponding id, 
</p>
</li>
<li>
<p> Identifying the data types, 
</p>
</li>
<li>
<p> Building concepts, 
</p>
</li>
<li>
<p> Identifying dimensional concepts and distinguishing between categorical,
geographical and time dimensions, and
</p>
</li>
<li>
<p> Executing internal checks.
</p>
</li>
</ol>
<p>In order to properly load the zip file (DSPL file plus CSV data files), the
function executes a series of internal checks upon the data structure. The
detailed list:
</p>

<ul>
<li> <p><strong>Slices with the same dimensions</strong>: DSPL
requires that each slice represents one dimensional cut, this is, there
should not be more than one data table with the same dimensions.
</p>
</li>
<li> <p><strong>Duplicated concepts</strong>: As a result of multiple data types, e.g a single
concept (statistic) as integer in one table and float in other, <code>dspl</code>
may get confused, so during the parsing process, if there is a chance, it
collapses duplicated concepts into only one concept and assigns it the
common data type (float).
</p>
</li>
<li> <p><strong>Correct time format definition</strong>: Using <code>checkTimeFormat</code>
ensures that the time format specified is
compatible with DSPL.
</p>
</li>
</ul>
<h3>Value</h3>

<p>If there isn't any <code>output</code> defined, <code>dspl</code> returns list
of <code>class</code> "<code>dspl</code>".
</p>
<p>An object of class "<code>dspl</code>" is a list containing:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>dspl</code></td>
<td>
<p>A character string containing the DSPL XML document as defined
by the <code>saveXML</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>concepts.by.table</code></td>
<td>
<p>A data frame object of concepts stored by table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimtabs</code></td>
<td>
<p>A data frame containing dimensional tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slices</code></td>
<td>
<p>A data frame of slices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>concepts</code></td>
<td>
<p>A data frame of concepts (all of them).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimensions</code></td>
<td>
<p>A data frame of dimensional concepts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statistics</code></td>
<td>
<p>A matrix of statistics.</p>
</td>
</tr>
</table>
<p>otherwise the function will build a ZIP file as specified in the output
containing the CSV and DSPL (XML) files.
</p>


<h3>Author(s)</h3>

<p>George G. Vega Yon
</p>


<h3>References</h3>

 <ul><li>
<p> Google Public Data Explorer Tutorial:
<a href="https://developers.google.com/public-data/docs/tutorial">https://developers.google.com/public-data/docs/tutorial</a> </p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">
demo(dspl)
  

</code></pre>


</div>