<div class="container">

<table style="width: 100%;"><tr>
<td>SuppressDominantCells</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Suppress magnitude tables using dominance <code style="white-space: pre;">⁠(n,k)⁠</code> or p% rule for primary suppression.</h2>

<h3>Description</h3>

<p>Suppress magnitude tables using dominance <code style="white-space: pre;">⁠(n,k)⁠</code> or p% rule for primary suppression.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SuppressDominantCells(
  data,
  n = 1:length(k),
  k = NULL,
  pPercent = NULL,
  allDominance = FALSE,
  dominanceVar = NULL,
  numVar = NULL,
  dimVar = NULL,
  hierarchies = NULL,
  formula = NULL,
  contributorVar = NULL,
  sWeightVar = NULL,
  ...,
  candidatesVar = NULL,
  singletonZeros = FALSE,
  spec = PackageSpecs("dominanceSpec")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Input data as a data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Parameter <code>n</code> in dominance rule. Default is <code>1:length(k)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Parameter <code>k</code> in dominance rule.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pPercent</code></td>
<td>
<p>Parameter in the p% rule, when non-NULL.
Parameters <code>n</code> and  <code>k</code> will then be ignored.
Technically, calculations are performed internally as if
<code>n = 1:2</code>. The results of these intermediate calculations can
be viewed by setting <code>allDominance = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allDominance</code></td>
<td>
<p>Logical parameter. If <code>TRUE</code>, adds primary columns for each
pair of parameters n,k in the dominance rules</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dominanceVar</code></td>
<td>
<p>Numerical variable to be used in dominance rule.
The first <code>numVar</code> variable will be used if it is not specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numVar</code></td>
<td>
<p>Numerical variable to be aggregated.
Any <code>dominanceVar</code> and <code>candidatesVar</code> that are specified and
not included in <code>numVar</code> will be aggregated accordingly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimVar</code></td>
<td>
<p>The main dimensional variables and additional aggregating variables. This parameter can be  useful when hierarchies and formula are unspecified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hierarchies</code></td>
<td>
<p>List of hierarchies, which can be converted by <code>AutoHierarchies</code>.
Thus, the variables can also be coded by <code>"rowFactor"</code> or <code>""</code>, which correspond to using the categories in the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A model formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contributorVar</code></td>
<td>
<p>Extra variables to be used as grouping elements in the dominance rule.
Typically, the variable contains the contributor IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sWeightVar</code></td>
<td>
<p>Name of variable which represents sampling weights to be used
in dominance rule</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to the supplied functions and to <code>ModelMatrix</code> (such as <code>inputInOutput</code> and <code>removeEmpty</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>candidatesVar</code></td>
<td>
<p>Variable to be used in the candidate function to prioritize cells for
publication and thus not suppression. If not specified, the same variable that is
used for the dominance rule will be applied (see <code>dominanceVar</code> and <code>numVar</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>singletonZeros</code></td>
<td>
<p>When negative values cannot occur, one can determine from a
non-suppressed marginal cell with the value 0 that all underlying cells also have the
value 0. The use of <code>singletonZeros = TRUE</code> is intended to prevent this phenomenon from
causing suppressed cells to be revealable. It is the zeros in the <code>dominanceVar</code> variable
that are examined. Specifically, the ordinary singleton method is combined with a method
that is actually designed for frequency tables. This approach also works for volume
tables when <code>SingletonUniqueContributor0</code> is utilized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p><code>NULL</code> or a named list of arguments that will act as default values.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data frame containing aggregated data and suppression information.
</p>


<h3>Examples</h3>

<pre><code class="language-R">num &lt;- c(100,
         90, 10,
         80, 20,
         70, 30,
         50, 25, 25,
         40, 20, 20, 20,
         25, 25, 25, 25)
v1 &lt;- c("v1",
        rep(c("v2", "v3", "v4"), each = 2),
        rep("v5", 3),
        rep(c("v6", "v7"), each = 4))
sweight &lt;- c(1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1)
d &lt;- data.frame(v1 = v1, num = num, sweight = sweight)

# basic use
SuppressDominantCells(d, n = c(1,2), k = c(80,70), numVar = "num", formula = ~v1 -1)
SuppressDominantCells(d, k = c(80,70), numVar = "num", formula = ~v1 -1) # same as above
SuppressDominantCells(d, pPercent = 7, numVar = "num", formula = ~v1 -1) 

# with weights
SuppressDominantCells(d, n = c(1,2), k = c(80,70), numVar = "num",
dimVar = "v1", sWeightVar = "sweight")

# overwriting some parameters in default spec
SuppressDominantCells(d, n = c(1,2), k = c(80,70), numVar = "num",
dimVar = "v1", sWeightVar = "sweight", domWeightMethod = "tauargus")

# using dominance and few contributors rule together, see second example compared to first
SuppressDominantCells(d, n = c(1,2), k = c(80,70), numVar = "num", formula = ~v1 -1,
primary = c(DominanceRule, NContributorsRule), maxN = 3, allDominance = TRUE)

SuppressDominantCells(d, n = c(1,2), k = c(80,70), numVar = "num", formula = ~v1 -1,
primary = c(DominanceRule, NContributorsRule), maxN = 4, allDominance = TRUE)


d2 &lt;- SSBtoolsData("d2")
set.seed(123)
d2$v &lt;- rnorm(nrow(d2))^2

# Hierarchical region variables are detected automatically -&gt; same output column
SuppressDominantCells(data = d2, n = c(1, 2), k = c(70, 95), numVar = "v", 
                      dimVar = c("region", "county", "k_group"), allDominance = TRUE)

# Formula. Hierarchical variables still detected automatically.
SuppressDominantCells(data = d2, n = c(1, 2), k = c(70, 95), numVar = "v", 
                      formula = ~main_income * k_group + region + county - k_group)

# With hierarchies created manually
ml &lt;- data.frame(levels = c("@", "@@", "@@@", "@@@", "@@@", "@@"), 
        codes = c("Total", "not_assistance", "other", "pensions", "wages", "assistance"))
SuppressDominantCells(data = d2, n = c(1, 2), k = c(70, 95), numVar = "v", 
                      hierarchies = list(main_income = ml, k_group = "Total_Norway"))
</code></pre>


</div>