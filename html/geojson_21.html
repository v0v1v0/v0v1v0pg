<div class="container">

<table style="width: 100%;"><tr>
<td>geobuf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Geobuf serialization</h2>

<h3>Description</h3>

<p>Geobuf serialization
</p>


<h3>Usage</h3>

<pre><code class="language-R">from_geobuf(x, pretty = FALSE)

to_geobuf(x, file = NULL, decimals = 6)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>(character) a file or raw object for <code>from_geobuf</code>, and
json string for <code>to_geobuf</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pretty</code></td>
<td>
<p>(logical) pretty print JSON. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>(character) file to write protobuf to. if NULL, geobuf
raw binary returned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p>(integer) how many decimals (digits behind the dot) to
store for numbers</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>from_geobuf</code> uses <code>protolite::geobuf2json()</code>,
while <code>to_geobuf</code> uses <code>protolite::json2geobuf()</code>
</p>
<p>Note that <span class="pkg">protolite</span> expects either a <strong>Feature</strong>,
<strong>FeatureCollection</strong>, or <strong>Geometry</strong> class geojson
object, Thus, for <code>to_geobuf</code> we check the geojson class, and
convert to a <strong>Feature</strong> if the class is something other than
the acceptable set.
</p>


<h3>Value</h3>

<p>for <code>from_geobuf</code> JSON as a character string, and for
<code>to_geobuf</code> raw or file written to disk
</p>


<h3>References</h3>

<p>Geobuf is a compact binary encoding for geographic data
using protocol buffers https://github.com/mapbox/geobuf
</p>


<h3>Examples</h3>

<pre><code class="language-R">file &lt;- system.file("examples/test.pb", package = "geojson")
(json &lt;- from_geobuf(file))
from_geobuf(file, pretty = TRUE)
pb &lt;- to_geobuf(json)
f &lt;- tempfile(fileext = ".pb")
to_geobuf(json, f)
from_geobuf(f)

object.size(json)
object.size(pb)
file.info(file)$size
file.info(f)$size

file &lt;- system.file("examples/featurecollection1.geojson",
  package = "geojson")
json &lt;- paste0(readLines(file), collapse = "")
to_geobuf(json)

# other geojson class objects
x &lt;- '{ "type": "Polygon",
"coordinates": [
  [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ]
  ]
}'
(y &lt;- polygon(x))
to_geobuf(y)

x &lt;- '{"type": "MultiPoint", "coordinates": [ [100.0, 0.0], [101.0, 1.0] ] }'
(y &lt;- multipoint(x))
to_geobuf(y)
</code></pre>


</div>