<div class="container">

<table style="width: 100%;"><tr>
<td>sample_rev_per_session</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample Rev Per Session</h2>

<h3>Description</h3>

<p>Adds 3 new nested columns to the input_df: 'beta_params', 'gamma_params', and 'samples'
'beta_params' and 'gamma_params' in each row should be a tibble of length 2 (<code class="reqn">\alpha</code>
and <code class="reqn">\beta</code> parameters and <code class="reqn">k</code> and <code class="reqn">\theta</code> parameters)
'samples' in each row should be a tibble of length 'n_samples'
</p>


<h3>Usage</h3>

<pre><code class="language-R">sample_rev_per_session(input_df, priors, n_samples = 50000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input_df</code></td>
<td>
<p>Dataframe containing option_name (str),
sum_conversions (dbl), sum_revenue (dbl), and sum_clicks (dbl).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>priors</code></td>
<td>
<p>Optional list of priors alpha0, beta0 for Beta
and k0, theta0 for Gamma. Default <code class="reqn">Beta(1,1)</code>
and <code class="reqn">Gamma(1, 250)</code> will be use otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_samples</code></td>
<td>
<p>Optional integer value. Defaults to 50,000 samples.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See update_rules vignette for a mathematical representation.
</p>
<p style="text-align: center;"><code class="reqn">RevPerSession = RevPerOrder * OrdersPerClick</code>
</p>

<p>This is a combination of a Beta-Bernoulli update and a Gamma-Exponential update.
</p>
<p style="text-align: center;"><code class="reqn">conversion_i ~ Bernoulli(\phi)</code>
</p>

<p style="text-align: center;"><code class="reqn">revenue_i ~ Exponential(\lambda)</code>
</p>

<p style="text-align: center;"><code class="reqn">\phi ~ Beta(\alpha, \beta)</code>
</p>

<p style="text-align: center;"><code class="reqn">\lambda ~ Gamma(k, \theta)</code>
</p>

<p style="text-align: center;"><code class="reqn">revenue_i ~ Bernoulli(\phi) * Exponential(\lambda)^-1)</code>
</p>

<p style="text-align: center;"><code class="reqn">Rev Per Session ~ \phi / \lambda</code>
</p>

<p>Conversion Rate is sampled from a Beta distribution with a Binomial likelihood
of an individual converting.
</p>
<p>Average Rev Per Order is sampled from a Gamma distribution with an Exponential likelihood
of Revenue from an individual order.
This function makes sense to use if there is a distribution of possible revenue values
that can be produced from a single order or conversion.
</p>


<h3>Value</h3>

<p>input_df with 3 new nested columns 'beta_params', 'gamma_params', and 'samples'
</p>


</div>