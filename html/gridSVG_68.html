<div class="container">

<table style="width: 100%;"><tr>
<td>Opacity Masks</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Create the definition of an opacity mask.
</h2>

<h3>Description</h3>

<p>A feature of SVG is that elements can have an opacity mask applied to
it. An opacity mask is an image that, for various levels of opacity,
makes the object that is being masked inherit the same levels of
opacity. The purpose of these functions is to define an opacity mask
that will be applied until the current viewport (or context, see
<code>popContext</code>) is popped. Alternatively it can also be
applied to grobs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mask(grob,
     x = unit(0.5, "npc"), y = unit(0.5, "npc"),
     width = unit(1, "npc"), height = unit(1, "npc"),
     default.units = "npc",
     just = "centre", hjust = NULL, vjust = NULL)
registerMask(label, mask = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>grob</code></td>
<td>

<p>A grob or gTree that will be drawn as the opacity mask.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A numeric vector or unit object specifying x-location.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>A numeric vector or unit object specifying y-location.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>

<p>A numeric vector or unit object specifying width.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>

<p>A numeric vector or unit object specifying height.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default.units</code></td>
<td>

<p>A string indicating the default units to use if <code>x</code>, <code>y</code>,
<code>width</code>, or <code>height</code> are only given as numeric vectors.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>just</code></td>
<td>

<p>The justification of the pattern relative to its (x, y) location.
If there are two values, the first value specifies horizontal
justification and the second value specifies vertical justification.
Possible string values are: <code>"left"</code>, <code>"right"</code>,
<code>"centre"</code>, <code>"center"</code>, <code>"bottom"</code>, and <code>"top"</code>.
For numeric values, 0 means left alignment and 1 means right
alignment.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hjust</code></td>
<td>

<p>A numeric vector specifying horizontal justification. If specified,
overrides the <code>just</code> setting.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vjust</code></td>
<td>

<p>A numeric vector specifying vertical justification. If specified,
overrides the <code>just</code> setting.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>

<p>A character identifier that will be used to reference this
definition.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>

<p>A <code>mask</code> object that defines the mask.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Arguments to be given to <code>mask</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When registering the mask, the rectangular region that the mask
applies to will become fixed.
</p>
<p>When referring to an opacity mask, the masked content will be opaque
at the same coordinates that the mask is opaque. The same applies when
there is any level of transparency, as any transparency in the mask
will also apply in the same corresponding region of the masked object.
</p>
<p>The mask's opacity is defined as being the level of luminance present
in the mask. This means anything black is fully transparent, while
anything white is completely opaque. The background is assumed to be
black (i.e. fully transparent). The <code>alpha</code> value in a mask will
still be used, but its effect is combined with the computed opacity
from the luminance of the mask.
</p>
<p>By using an opacity mask it is possible to have a grob with
non-uniform opacity. In other words, rather than specifying an opacity
via <code>gpar</code>'s <code>alpha</code> parameter, which is uniform
across the grob, we can define varying opacities on a grob via an
opacity mask.
</p>
<p>The <code>x</code>, <code>y</code>, <code>width</code>, <code>height</code> parameters
determine the location and dimensions of the area to apply the mask
to. This means we can apply a mask to any rectangular region, relative
to the viewport in which it is defined (via <code>registerMask</code>).
</p>


<h3>Value</h3>

<p>For <code>mask</code>, a <code>mask</code> object.
</p>


<h3>Author(s)</h3>

<p>Simon Potter
</p>


<h3>See Also</h3>

<p><code>grid.mask</code>, <code>pushMask</code>,
<code>popContext</code>.
</p>


</div>