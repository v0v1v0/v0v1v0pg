<div class="container">

<table style="width: 100%;"><tr>
<td>adjust_arrival_departure</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjust the arrival and departure times of a GTFS data</h2>

<h3>Description</h3>

<p>Some GTFS.zip data have issues related to arrival and departure
time on stops. This function makes sure the GTFS has dis/embarking times at
each stop. For each stop time row, this function applies the following steps:
</p>
<p>1. If there is 'arrival_time' but no 'departure_time', it creates a departure_time 
column by summing the arrival plus a pre-defined 'min_lag'.
</p>
<p>2. If there is 'departure_time' but no 'arrival_time', it creates an arrival_time 
column by subtracting a pre-defined 'min_lag' from the departure.
</p>
<p>3. If there is an 'arrival_time' and a 'departure_time' but their difference
is smaller than 'min_lag', it reduces the 'arrival_time' and increases
'departure_time' so that the difference will be exactly 'min_lag'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">adjust_arrival_departure(gtfs_data, min_lag = 20)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gtfs_data</code></td>
<td>
<p>A GTFS data created with <code>read_gtfs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_lag</code></td>
<td>
<p>Numeric. Minimum waiting time when a vehicle arrives 
at a stop. It can be a numeric or a units value that can be converted
to seconds. Default is 20s.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A GTFS with adjusted 'arrival_time' and 'departure_time' on
data.table 'stop_times'.
</p>


<h3>Examples</h3>

<pre><code class="language-R">poa &lt;- read_gtfs(system.file("extdata/poa.zip", package="gtfs2gps"))

poa &lt;- adjust_arrival_departure(poa)
</code></pre>


</div>