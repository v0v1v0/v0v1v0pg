<div class="container">

<table style="width: 100%;"><tr>
<td>bigq</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Large sized rationals</h2>

<h3>Description</h3>

<p>Class <code>"bigq"</code> encodes rationals encoded as ratios of arbitrary
large integers (via GMP).
A simple S3 class (internally a <code>raw</code> vector), it has been
registered as formal (S4) class (via <code>setOldClass</code>), too.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.bigq(n, d = 1)
## S3 method for class 'bigq'
as.character(x, b=10,...)
## S3 method for class 'bigq'
as.double(x,...)
as.bigz.bigq(a, mod=NA)
is.bigq(x)
## S3 method for class 'bigq'
is.na(x)
## S3 method for class 'bigq'
print(x, quote=FALSE, initLine = TRUE, ...)
denominator(x)
numerator(x)
NA_bigq_
c_bigq(L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n,d</code></td>
<td>
<p>either integer, numeric or string value
(String value: either starting with <code>0x</code> for hexadecimal, <code>0b</code> for
binary or without prefix for decimal values.
Any format error results in <code>0</code>).
<code>n</code> stands for numerator, <code>d</code> for denominator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>an element of class <code>"bigq"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mod</code></td>
<td>
<p>optional modulus to convert into biginteger</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a “rational number” (vector), of class <code>"bigq"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>base: from 2 to 36</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quote</code></td>
<td>
<p>(for printing:) logical indicating if the numbers
should be quoted (as characters are);  the default used to be
<code>TRUE</code> (implicitly) till 2011.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initLine</code></td>
<td>
<p>(for printing:) logical indicating if an
<b>init</b>ial line (with the class and length or dimension) should
be printed. 


</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>a <code>list</code> where each element contains <code>"bigq"</code>
numbers, for <code>c_bigq()</code>, this allows something like an
<code>sapply()</code> for <code>"bigq"</code> vectors, see <code>sapplyQ()</code>
in the examples below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>as.bigq(x)</code> when <code>x</code> is <code>numeric</code> (aka
<code>double</code> precision) calls the ‘<span class="file">GMP</span>’ function
<code>mpq_set_d()</code> which is documented to be <em>exact</em> (every finite double
precision number is a rational number).
</p>
<p><code>as.bigz.bigq()</code> returns the smallest integers not less than the
corresponding rationals bigq.
</p>
<p><code>NA_bigq_</code> is computed on package load time as <code>as.bigq(NA)</code>.
</p>


<h3>Value</h3>

<p>An <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object of (S3) class <code>"bigq"</code> representing the parameter value.
</p>


<h3>Author(s)</h3>

<p>Antoine Lucas</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- as.bigq(21,6)
x
# 7 / 2
# Wow ! result is simplified.

y &lt;- as.bigq(5,3)

# addition works !
x + y

# You can even try multiplication, division...
x * y / 13

# and, since May 2012,
x ^ 20
stopifnot(is.bigq(x), is.bigq(x + y),
	  x ^ 20 == as.bigz(7)^20 / 2^20)

# convert to string, double
as.character(x)
as.double(x)

stopifnot( is.na(NA_bigq_) )

# Depict the "S4-class" bigq, i.e., the formal (S4) methods:
if(require("Rmpfr")) # mostly interesting there
  showMethods(class="bigq")

# an  sapply() version that works for big rationals "bigq":
sapplyQ &lt;- function(X, FUN, ...) c_bigq(lapply(X, FUN, ...))

# dummy example showing it works (here):
qq &lt;- as.bigq(1, 1:999)
q1 &lt;- sapplyQ(qq, function(q) q^2)
stopifnot( identical(q1, qq^2) )
</code></pre>


</div>