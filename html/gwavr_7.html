<div class="container">

<table style="width: 100%;"><tr>
<td>get_basin_interactively</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Watershed Basin Interactively</h2>

<h3>Description</h3>

<p>This function allows the user to delineate watershed basins interactively with a
shiny app. It uses the elevatr package to acquire the Digital Elevation Model (DEM) or user inputted DEM
and whitebox package to delineate the basin (see details).
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_basin_interactively(
  map = NULL,
  ns = "basin-ui",
  viewer = shiny::paneViewer(),
  title = "Delineate Basin",
  dem = NULL,
  threshold = 1000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>a background leaflet or mapview map to be used for editing. If NULL a blank mapview canvas will be provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ns</code></td>
<td>
<p><code>string</code> name for the Shiny <code>namespace</code> to use.  The <code>ns</code>
is unlikely to require a change.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewer</code></td>
<td>
<p><code>function</code> for the viewer.  See Shiny <code>viewer</code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing "done" or "cancel") in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.  The default
is "Delineate Basin".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dem</code></td>
<td>
<p>A 'SpatRaster' object dem. (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>A threshold for stream initiation. 1000 (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments to <code>leafletOutput()</code> in module and/or wbt_* functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>This function will throw an error if you don't draw the bounding box (rectangle) first and you didn't include your own DEM.</strong>
Once the user has drawn the bounding box (or added own DEM) then you can use the marker as a pour point location.
</p>
<p><strong>Steps</strong>
</p>

<ol>
<li>
<p> Input a well-suited DEM zoom level and threshold. (skip if own DEM is inputted)
</p>
</li>
<li>
<p> Draw bounding box (rectangle or polygon) (skip if own DEM is inputted).
</p>
</li>
<li>
<p> Use marker to place pour point(s).
</p>
</li>
<li>
<p> If necessary, change 'Cell Threshold' to change drainage density.
</p>
</li>
<li>
<p> Repeat steps 1-4 if needed.
</p>
</li>
<li>
<p> When finished, press 'done' and basins will be saved as a list in local environment.
</p>
</li>
</ol>
<p>In addition, this function uses both <code>whitebox::wbt_feature_preserving_smoothing()</code> and <code>whitebox::wbt_breach_depressions()</code>
prior to running the flow direction and flow accumulation (both d8) algorithms.
</p>


<h3>Value</h3>

<p>A sf object that contains watershed polygons
the user collected during shiny session.
</p>


<h3>Note</h3>

<p>The marker will only work for the most current stream raster. You can have multiple areas but
you need to make sure that you are on the most current raster when selecting basins or the app will crash. If
you add your own DEM then you don't need to draw a bounding box.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if(interactive()){
basin_data &lt;- get_basin_interactively()
}


</code></pre>


</div>