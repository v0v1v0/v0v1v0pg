<div class="container">

<table style="width: 100%;"><tr>
<td>breaks</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Break (bin) selection algorithms for histograms</h2>

<h3>Description</h3>

<p>Methods for determining breaks (bins) in histograms, as used in the <code>breaks</code>
argument to <code>density_histogram()</code>.
</p>
<p>Supports automatic partial function application.
</p>


<h3>Usage</h3>

<pre><code class="language-R">breaks_fixed(x, weights = NULL, width = 1)

breaks_Sturges(x, weights = NULL)

breaks_Scott(x, weights = NULL)

breaks_FD(x, weights = NULL, digits = 5)

breaks_quantiles(x, weights = NULL, max_n = "Scott", min_width = 0.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A numeric vector giving a sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numeric vector of <code>length(x)</code> giving sample weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>For <code>breaks_fixed()</code>, the desired bin width.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>For <code>breaks_FD()</code>, the number of significant digits to keep when
rounding in the Freedman-Diaconis algorithm. For an explanation of this
parameter, see the documentation of the corresponding parameter in
<code>grDevices::nclass.FD()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_n</code></td>
<td>
<p>For <code>breaks_quantiles()</code>, either a scalar numeric giving the
maximum number of bins, or another breaks function (or string giving the
suffix of the name of a function prefixed with <code>"breaks_"</code>) that will
return the maximum number of bins. <code>breaks_quantiles()</code> will construct
<em>at most</em> <code>max_n</code> bins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_width</code></td>
<td>
<p>For <code>breaks_quantiles()</code>, a scalar numeric between <code>0</code> and
<code>1</code> giving the minimum bin width as a proportion of <code>diff(range(x)) / max_n</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions take a sample and its weights and return a value suitable for
the <code>breaks</code> argument to <code>density_histogram()</code> that will determine the histogram
breaks.
</p>

<ul>
<li> <p><code>breaks_fixed()</code> allows you to manually specify a fixed bin width.
</p>
</li>
<li> <p><code>breaks_Sturges()</code>, <code>breaks_Scott()</code>, and <code>breaks_FD()</code> implement weighted
versions of their corresponding base functions. They return a scalar
numeric giving the number of bins. See <code>nclass.Sturges()</code>, <code>nclass.scott()</code>,
and <code>nclass.FD()</code>.
</p>
</li>
<li> <p><code>breaks_quantiles()</code> constructs irregularly-sized bins using <code>max_n + 1</code>
(possibly weighted) quantiles of <code>x</code>. The final number of bins is
<em>at most</em> <code>max_n</code>, as small bins (ones whose bin width is less than half
the range of the data divided by <code>max_n</code> times <code>min_width</code>) will be merged
into adjacent bins.
</p>
</li>
</ul>
<h3>Value</h3>

<p>Either a single number (giving the number of bins) or a vector
giving the edges between bins.
</p>


<h3>See Also</h3>

<p><code>density_histogram()</code>, align
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)

set.seed(1234)
x = rnorm(200, 1, 2)

# Let's compare the different break-selection algorithms on this data:
ggplot(data.frame(x), aes(x)) +
  stat_slab(
    aes(y = "breaks_fixed(width = 0.5)"),
    density = "histogram",
    breaks = breaks_fixed(width = 0.5),
    outline_bars = TRUE,
    color = "black",
  ) +
  stat_slab(
    aes(y = "breaks_Sturges()\nor 'Sturges'"),
    density = "histogram",
    breaks = "Sturges",
    outline_bars = TRUE,
    color = "black",
  ) +
  stat_slab(
    aes(y = "breaks_Scott()\nor 'Scott'"),
    density = "histogram",
    breaks = "Scott",
    outline_bars = TRUE,
    color = "black",
  ) +
  stat_slab(
    aes(y = "breaks_FD()\nor 'FD'"),
    density = "histogram",
    breaks = "FD",
    outline_bars = TRUE,
    color = "black",
  ) +
  geom_point(aes(y = 0.7), alpha = 0.5) +
  labs(
    subtitle = "ggdist::stat_slab(density = 'histogram', ...)",
    y = "breaks =",
    x = NULL
  )
</code></pre>


</div>