<div class="container">

<table style="width: 100%;"><tr>
<td>action_grow</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 growth action</h2>

<h3>Description</h3>

<p>Add growth/maturity actions to a g3 model
</p>


<h3>Usage</h3>

<pre><code class="language-R">g3a_grow_lengthvbsimple(
        linf_f = g3_parameterized('Linf', by_stock = by_stock),
        kappa_f = g3_parameterized('K', by_stock = by_stock),
        by_stock = TRUE)

g3a_grow_weightsimple(
        alpha_f = g3_parameterized('walpha', by_stock = by_stock),
        beta_f = g3_parameterized('wbeta', by_stock = by_stock),
        by_stock = TRUE)

g3a_grow_impl_bbinom(
        delta_len_f = g3a_grow_lengthvbsimple(by_stock = by_stock),
        delta_wgt_f = g3a_grow_weightsimple(by_stock = by_stock),
        beta_f = g3_parameterized('bbin', by_stock = by_stock),
        maxlengthgroupgrowth,
        by_stock = TRUE)

g3a_growmature(stock, impl_f, maturity_f = ~0, output_stocks = list(), 
    output_ratios = rep(1/length(output_stocks), times = length(output_stocks)), 
    transition_f = ~cur_step_final, run_f = ~TRUE,
    run_at = g3_action_order$grow,
    transition_at = g3_action_order$mature)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>linf_f</code></td>
<td>

<p>A formula to substitute for <code class="reqn">L_\infty</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa_f</code></td>
<td>

<p>A formula to substitute for <code class="reqn">\kappa</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_f</code></td>
<td>

<p>A formula to substitute for <code class="reqn">\alpha</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_f</code></td>
<td>

<p>A formula to substitute for <code class="reqn">\beta</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxlengthgroupgrowth</code></td>
<td>

<p>An integer with the maximum length groups an individual can jump in one step.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stock</code></td>
<td>

<p><code>g3_stock</code> to grow.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta_len_f</code></td>
<td>

<p>A formula defining a non-negative vector for mean increase in length for <code>stock</code>
for each lengthgroup, as defined by <code>g3a_grow_lengthvbsimple</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta_wgt_f</code></td>
<td>

<p>A formula defining the corresponding weight increase as a matrix of
lengthgroup to lengthgroup delta for <code>stock</code>, as defined by <code>g3a_grow_weightsimple</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_stock</code></td>
<td>

<p>Change the default parameterisation (e.g. to be by 'species'), see <code>g3_parameterized</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impl_f</code></td>
<td>

<p>A pair of formula objects, as defined by <code>g3a_grow_impl_bbinom</code>.
Both define a matrix of length groups <code>i</code> to length group deltas <code>j</code> (0..<var>maxlengthgroupgrowth</var>),
the values in the first indicate the proportion of individuals moving from <code>i</code> to <code>i + j</code>,
the values in the second indicate the corresponding weight increase of individuals moving from <code>i</code> to <code>i + j</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maturity_f</code></td>
<td>

<p>A maturity formula, as defined by <code>g3a_mature_constant</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_stocks</code></td>
<td>

<p>List of <code>g3_stock</code>s that maturing <var>stock</var> should move into.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_ratios</code></td>
<td>

<p>Vector of proportions for how to distribute into <var>output_stocks</var>, summing to 1, default evenly spread.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transition_f</code></td>
<td>

<p>formula specifying a contition for running maturation steps as well as growth, default final step of year.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run_f</code></td>
<td>

<p>formula specifying a condition for running this action, default always runs.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run_at</code></td>
<td>

<p>Integer order that actions will be run within model, see <code>g3_action_order</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transition_at</code></td>
<td>

<p>Integer order that transition actions will be run within model, see <code>g3_action_order</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A model can have any number of <code>g3a_growmature</code> actions, so long as the
calling arguments are different. For instance, <code>run_f = ~age == 5</code> and
<code>run_f = ~age == 7</code>.
</p>
<p><var>impl_f</var>'s dependent variables are analysed to see what will affect growth.
If nothing but <code>cur_step_size</code> will affect growth, then growth will only
be recalculated when the step size changes.
</p>


<h3>Value</h3>



<h4>g3a_grow_lengthvbsimple</h4>

<p>Returns a formula for use as <var>delta_len_f</var>:
</p>
<p style="text-align: center;"><code class="reqn"> {{\Delta}L}_i = ( L_\infty - L_i )(1 - e^{-\kappa{\Delta}t}) </code>
</p>

<p>Where <code class="reqn"> \Delta{t} </code> is the length of the current timestep.
</p>



<h4>g3a_grow_weightsimple</h4>

<p>Returns a formula for use as <var>delta_wgt_f</var>:
</p>
<p style="text-align: center;"><code class="reqn"> {{\Delta}W}_{i,j} = \alpha ( (L_i + {{\Delta}L}_j)^\beta - {L_i}^\beta ) </code>
</p>

<p>Where <code class="reqn"> \Delta{t} </code> is the length of the current timestep,
<code class="reqn"> {{\Delta}L} </code> is all possible length group increases i.e <code>0..maxlengthgroupgrowth</code>.
</p>



<h4>g3a_grow_impl_bbinom</h4>

<p>formula object converting mean growths using beta-binomia distribution. See <a href="https://gadget-framework.github.io/gadget2/userguide/chap-stock.html#beta-binomial">https://gadget-framework.github.io/gadget2/userguide/chap-stock.html#beta-binomial</a></p>



<h4>g3a_growmature</h4>

<p>An action (i.e. list of formula objects) that will, for the given <var>stock</var>...</p>

<ol>
<li>
<p>Move any maturing individuals into temporary storage, <code>stock__transitioning_num</code> / <code>stock__transitioning_wgt</code>
</p>
</li>
<li>
<p>Calculate increase in length/weight using <var>growth_f</var> and <var>impl_f</var>
</p>
</li>
<li>
<p>Move the contents of the temporary storage into <var>output_stocks</var>
</p>
</li>
</ol>
<h3>See Also</h3>

<p><a href="https://gadget-framework.github.io/gadget2/userguide/chap-stock.html#sec:stockgrowth">https://gadget-framework.github.io/gadget2/userguide/chap-stock.html#sec:stockgrowth</a>,
<code>g3_stock</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">ling_imm &lt;- g3_stock(c(species = 'ling', 'imm'), seq(20, 156, 4))
ling_mat &lt;- g3_stock(c(species = 'ling', 'mat'), seq(20, 156, 4))

# Growth / maturity for immature ling
growth_action &lt;- g3a_growmature(ling_imm,
    impl_f = g3a_grow_impl_bbinom(
        # Parameters will be ling.Linf, ling.K
        g3a_grow_lengthvbsimple(by_stock = 'species'),
        # Parameters will be ling_imm.walpha, ling_imm.wbeta
        g3a_grow_weightsimple(),
        maxlengthgroupgrowth = 15),
    maturity_f = g3a_mature_constant(
        alpha = g3_parameterized('ling.mat1', scale = 0.001),
        l50 = g3_parameterized('ling.mat2')),
        output_stocks = list(ling_mat))
</code></pre>


</div>