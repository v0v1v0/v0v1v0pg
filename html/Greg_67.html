<div class="container">

<table style="width: 100%;"><tr>
<td>timeSplitter</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A function for splitting a time according to time periods</h2>

<h3>Description</h3>

<p>If we have a violation of the cox proprtional hazards assumption we need to
split an individual's followup time into several. See <code>vignette("timeSplitter", package = "Greg")</code>
for a detailed description.
</p>


<h3>Usage</h3>

<pre><code class="language-R">timeSplitter(
  data,
  by,
  time_var,
  event_var,
  event_start_status,
  time_related_vars,
  time_offset
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The dataset that you want to split according to the <code>time_var</code>
option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>The time period that you want to split the dataset by. The size of the variable
must be in proportion to the the <code>time_var</code>. The by variable can also be a vector
for each time split, useful if the effect has large varyations over time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_var</code></td>
<td>
<p>The name of the main time variable in the dataset. This variable
must be a numeric variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_var</code></td>
<td>
<p>The event variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_start_status</code></td>
<td>
<p>The start status of the event status, e.g. "Alive"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_related_vars</code></td>
<td>
<p>A dataset often contains other variabels that you want
to update during the split, most commonly these are age or calendar time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_offset</code></td>
<td>
<p>If you want to skip the initial years you can offset the
entire dataset by setting this variable. See detailed description below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><em>Important note:</em> The time variables must have the same time unit. I.e. function can not dedu
if all variables are in years or if one happens to be in days.
</p>


<h3>Value</h3>

<p><code>data.frame</code> with the split data. The starting time for each period
is named <code>Start_time</code> and the ending time is called <code>Stop_time</code>. Note
that the resulting event_var will now contain the time-splitted eventvar.
</p>


<h3>The time_offset - details</h3>

<p>Both time_var and other variables will be adjusted by the time_offset,
e.g. if we the time scale is in years and we want to skip the first 4 years
we set the <code>time_offset = 4</code>. In the outputted dataset the smallest
<code>time_var</code> will be 0. <em>Note:</em> 0 will not be included as we
generally want to look at those that survived the start date, e.g. if a
patient dies on the 4-year mark we would not include him/her in our study.
</p>


<h3>Examples</h3>

<pre><code class="language-R">test_data &lt;- data.frame(
  id = 1:4,
  time = c(4, 3.5, 1, 5),
  event = c("alive", "censored", "dead", "dead"),
  age = c(62.2, 55.3, 73.7, 46.3),
  date = as.Date(
    c("2003-01-01", 
      "2010-04-01", 
      "2013-09-20",
      "2002-02-23")),
  stringsAsFactors = TRUE
)
timeSplitter(test_data, .5, 
             time_var = "time",
             time_related_vars = c("age", "date"),
             event_var = "event")
</code></pre>


</div>