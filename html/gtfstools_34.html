<div class="container">

<table style="width: 100%;"><tr>
<td>get_trip_length</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get trip length</h2>

<h3>Description</h3>

<p>Returns the length of each specified <code>trip_id</code>, based either on the <code>shapes</code>
or the <code>stop_times</code> file (or both).
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_trip_length(
  gtfs,
  trip_id = NULL,
  file = NULL,
  unit = "km",
  sort_sequence = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gtfs</code></td>
<td>
<p>A GTFS object, as created by <code>read_gtfs()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trip_id</code></td>
<td>
<p>A character vector including the <code>trip_id</code>s to have their
length calculated If <code>NULL</code> (the default), the function calculates the
length of each <code>trip_id</code> in the GTFS.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>A character vector specifying the file from which lengths should
be calculated (either one of or both <code>shapes</code> and <code>stop_times</code>). If <code>NULL</code>
(the default), the function attempts to calculate the lengths from both
files, but only raises an error if none of the files exist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>A string representing the unit in which lengths are desired.
Either <code>"km"</code> (the default) or <code>"m"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_sequence</code></td>
<td>
<p>A logical specifying whether to sort shapes and
timetables by <code>shape_pt_sequence</code> and <code>stop_sequence</code>, respectively.
Defaults to <code>FALSE</code>, otherwise spec-compliant feeds, in which
shape/timetables points are already ordered by
<code>shape_pt_sequence</code>/<code>stop_sequence</code>, would be penalized through longer
processing times. Lengths calculated from trip trajectories generated with
unordered sequences do not correctly depict the actual trip lengths.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.table</code> containing the length of each specified trip.
</p>


<h3>Details</h3>

<p>Please check <code>get_trip_geometry()</code> documentation to understand how geometry
generation, and consequently length calculation, differs depending on the
chosen file.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data_path &lt;- system.file("extdata/spo_gtfs.zip", package = "gtfstools")

gtfs &lt;- read_gtfs(data_path)

trip_length &lt;- get_trip_length(gtfs)
head(trip_length)

# the above is identical to
trip_length &lt;- get_trip_length(gtfs, file = c("shapes", "stop_times"))
head(trip_length)

trip_ids &lt;- c("CPTM L07-0", "2002-10-0")
trip_length &lt;- get_trip_length(gtfs, trip_id = trip_ids)
trip_length

</code></pre>


</div>