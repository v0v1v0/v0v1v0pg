<div class="container">

<table style="width: 100%;"><tr>
<td>gar_gce_auth_default</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Authenticate via gcloud's application-default login</h2>

<h3>Description</h3>

<p>This allows you to take gcloud's application-default login token and turns it into one that can be used by R
</p>


<h3>Usage</h3>

<pre><code class="language-R">gar_gce_auth_default(
  scopes = getOption("googleAuthR.scopes.selected",
    "https://www.googleapis.com/auth/cloud-platform")
)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>scopes</code></td>
<td>
<p>The scope you created the access_token with</p>
</td>
</tr></table>
<h3>Details</h3>

<p>When authenticating on Google Cloud Platform services, if you are using services that take the cloud scopes you can use gar_gce_auth to generate authentication.
</p>
<p>However, for other services that require a user login (such as Google Analytics API), you need a method of authentication where you can use your own email login.  You have two options - create a token offline and upload it to the instance, or <code>gcloud</code> allows you to generate your own token online via <code>gcloud auth application-default login &amp;&amp; gcloud auth application-default print-access-token</code>
</p>
<p>This function will then take the returned access token and put it within R so it can be used as normal with <code>googleAuthR</code> functions.
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/sdk/gcloud/reference/auth/application-default/print-access-token">gcloud reference</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

## in the terminal, issue this gcloud command specifying the scopes to authenticate with
gcloud auth application-default login \
  --scopes=https://www.googleapis.com/auth/analytics.readonly

## access the URL, login and create a verification code, paste in console.

## view then copy-paste the access token, to be passed into the R function
gcloud auth application-default print-access-token

## In R:
gar_gce_auth_default(&lt;token-copy-pasted&gt;, 
     scopes = 'https://www.googleapis.com/auth/analytics.readonly',
     cache_file = 'my_ga.auth')
                     
# use token to authenticate as you would normally with library

## End(Not run)


</code></pre>


</div>