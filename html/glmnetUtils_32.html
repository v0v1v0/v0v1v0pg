<div class="container">

<table style="width: 100%;"><tr>
<td>glmnet</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Formula interface for elastic net modelling with glmnet</h2>

<h3>Description</h3>

<p>Formula interface for elastic net modelling with glmnet
</p>


<h3>Usage</h3>

<pre><code class="language-R">glmnet(x, ...)

## Default S3 method:
glmnet(x, y, ...)

## S3 method for class 'formula'
glmnet(
  formula,
  data,
  family = c("gaussian", "binomial", "poisson", "multinomial", "cox", "mgaussian"),
  alpha = 1,
  ...,
  weights = NULL,
  offset = NULL,
  subset = NULL,
  na.action = getOption("na.action"),
  drop.unused.levels = FALSE,
  xlev = NULL,
  sparse = FALSE,
  use.model.frame = FALSE,
  relax = FALSE
)

## S3 method for class 'glmnet.formula'
predict(object, newdata, offset = NULL, na.action = na.pass, ...)

## S3 method for class 'glmnet.formula'
coef(object, ...)

## S3 method for class 'glmnet.formula'
print(
  x,
  digits = max(3, getOption("digits") - 3),
  print.deviance.ratios = FALSE,
  ...
)

## S3 method for class 'relaxed.formula'
print(
  x,
  digits = max(3, getOption("digits") - 3),
  print.deviance.ratios = FALSE,
  ...
)

## S3 method for class 'relaxed.formula'
predict(object, newdata, offset = NULL, na.action = na.pass, ...)

## S3 method for class 'relaxed.formula'
coef(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>For the default method, a matrix of predictor variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For <code>glmnet.formula</code> and <code>glmnet.default</code>, other arguments to be passed to glmnet::glmnet; for the <code>predict</code> and <code>coef</code> methods, arguments to be passed to their counterparts in package glmnet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>For the default method, a response vector or matrix (for a multinomial response).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A model formula; interaction terms are allowed and will be expanded per the usual rules for linear models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or matrix containing the variables in the formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>The model family. See glmnet::glmnet for how to specify this argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The elastic net mixing parameter. See glmnet::glmnet for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>An optional vector of case weights to be used in the fitting process. If missing, defaults to an unweighted fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>An optional vector of offsets, an <em>a priori</em> known component to be included in the linear predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>An optional vector specifying the subset of observations to be used to fit the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>A function which indicates what should happen when the data contains missing values. For the <code>predict</code> method, <code>na.action = na.pass</code> will predict missing values with <code>NA</code>; <code>na.omit</code> or <code>na.exclude</code> will drop them.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.unused.levels</code></td>
<td>
<p>Should factors have unused levels dropped? Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlev</code></td>
<td>
<p>A named list of character vectors giving the full set of levels to be assumed for each factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparse</code></td>
<td>
<p>Should the model matrix be in sparse format? This can save memory when dealing with many factor variables, each with many levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.model.frame</code></td>
<td>
<p>Should the base model.frame function be used when constructing the model matrix? This is the standard method that most R modelling functions use, but has some disadvantages. The default is to avoid <code>model.frame</code> and construct the model matrix term-by-term; see discussion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relax</code></td>
<td>
<p>For <code>glmnet.formula</code>, whether to perform a relaxed (non-regularised) fit after the regularised one. Requires glmnet 3.0 or later.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>For the <code>predict</code> and <code>coef</code> methods, an object of class <code>glmnet.formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>For the <code>predict</code> method, a data frame containing the observations for which to calculate predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Significant digits in printed output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.deviance.ratios</code></td>
<td>
<p>Whether to print the table of deviance ratios, as per glmnet::print.glmnet.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>glmnet</code> function in this package is an S3 generic with a formula and a default method. The former calls the latter, and the latter is simply a direct call to the <code>glmnet</code> function in package glmnet. All the arguments to <code>glmnet::glmnet</code> are (or should be) supported.
</p>
<p>There are two ways in which the matrix of predictors can be generated. The default, with <code>use.model.frame = FALSE</code>, is to process the additive terms in the formula independently. With wide datasets, this is much faster and more memory-efficient than the standard R approach which uses the <code>model.frame</code> and <code>model.matrix</code> functions. However, the resulting model object is not exactly the same as if the standard approach had been used; in particular, it lacks a bona fide terms object. If you require interoperability with other packages that assume the standard model object structure, set <code>use.model.frame = TRUE</code>. See discussion for more information on this topic.
</p>
<p>The <code>predict</code> and <code>coef</code> methods are wrappers for the corresponding methods in the glmnet package. The former constructs a predictor model matrix from its <code>newdata</code> argument and passes that as the <code>newx</code> argument to <code>glmnet:::predict.glmnet</code>.
</p>


<h3>Value</h3>

<p>For <code>glmnet.formula</code>, an object of class either <code>glmnet.formula</code> or <code>relaxed.formula</code>, based on the value of the <code>relax</code> argument. This is basically the same object created by <code>glmnet::glmnet</code>, but with extra components to allow formula usage.
</p>


<h3>See Also</h3>

<p>glmnet::glmnet, glmnet::predict.glmnet, glmnet::coef.glmnet, model.frame, model.matrix
</p>


<h3>Examples</h3>

<pre><code class="language-R">glmnet(mpg ~ ., data=mtcars)

glmnet(Species ~ ., data=iris, family="multinomial")

## Not run: 

# Leukemia example dataset from Trevor Hastie's website
download.file("https://web.stanford.edu/~hastie/glmnet/glmnetData/Leukemia.RData",
              "Leukemia.RData")
load("Leukemia.Rdata")
leuk &lt;- do.call(data.frame, Leukemia)
glmnet(y ~ ., leuk, family="binomial")

## End(Not run)
</code></pre>


</div>