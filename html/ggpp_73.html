<div class="container">

<table style="width: 100%;"><tr>
<td>position_jitternudge</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Combined positions jitter and nudge</h2>

<h3>Description</h3>

<p><code>position_jitternudge()</code> combines into one function the action of
<code>position_jitter</code> and
<code>position_nudge</code>. It is useful when labels to jittered
plots and when adding jitter to text labels linked to points plotted without
jitter. It can replace other position functions as it is backwards
compatible. Like all other position functions in 'ggpp' and 'ggrepel' it
preserves the initial position to allow drawing of segments or arrow linking
the original position to the displaced one.
</p>


<h3>Usage</h3>

<pre><code class="language-R">position_jitternudge(
  width = NULL,
  height = NULL,
  seed = NA,
  x = 0,
  y = 0,
  direction = c("as.is", "alternate", "split"),
  nudge.from = c("original", "original.x", "original.y", "jittered", "jittered.y",
    "jittered.x"),
  kept.origin = c("jittered", "original", "none")
)

position_jitter_keep(
  width = NULL,
  height = NULL,
  seed = NA,
  kept.origin = "original"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>Amount of vertical and horizontal jitter. The jitter is
added in both positive and negative directions, so the total spread is
twice the value specified here. If omitted, defaults to 40
resolution of the data: this means the jitter values will occupy 80
implied bins. Categorical data is aligned on the integers, so a width or
height of 0.5 will spread the data so it's not possible to see the
distinction between the categories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>A random seed to make the jitter reproducible. Useful if you need
to apply the same jitter twice, e.g., for a point and a corresponding
label. The random seed is reset after jittering. If <code>NA</code> (the default
value), the seed is initialised with a random value; this makes sure that
two subsequent calls start with a different seed. Use <code>NULL</code> to use
the current random seed and also avoid resetting (the behaviour of ggplot
2.2.1 and earlier).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>Amount of vertical and horizontal distance to move. A numeric
vector of length 1, or of the same length as rows there are in <code>data</code>,
with nudge values in data rows order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction</code></td>
<td>
<p>One of <code>"as.is"</code>, <code>"alternate"</code>, <code>"split"</code>,
<code>"split.x"</code> or <code>"split.y"</code>. A value of <code>"none"</code> replicates
the behavior of <code>position_nudge</code>. <code>"split"</code>
changes the sign of the nudge depending on the direction of the random
jitter applied to each individual observation, which is suitable for
nudging labels outward of the jittered data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nudge.from</code></td>
<td>
<p>One of <code>"original"</code>, <code>"jittered"</code>,
<code>"original.y"</code> (or <code>"jittered.x"</code>), <code>"original.x"</code> (or
<code>"jittered.y"</code>). A value of <code>"original"</code> applies the nudge before
jittering the observations, while <code>"jittered"</code> applies the nudging
after jittering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kept.origin</code></td>
<td>
<p>One of <code>"original"</code>, <code>"jittered"</code> or
<code>"none"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Jitter with <code>position_jitternudge()</code> is identical to that with
<code>position_jitter</code> while nudging is enhanced compared
to <code>position_nudge</code> by taking into use cases specific
to the combination of jitter and nudge.
</p>
<p>There are two posible uses for this function. First it can be used to label
jittered points in a plot. In this case, it is mandatory to use the same
arguments to <code>width</code>, <code>height</code> and <code>seed</code> when passing
<code>position_jitter()</code> to <code>geom_point()</code> and
<code>position_jitternudge()</code> to <code>geom_text()</code> or to
<code>geom_label()</code> or their repulsive equivalents. Otherwise the arrows or
segments will fail to connect to the labels. In other words jittering is
computed twice. Jitter should be identical with the same arguments as
<code>position_jitternudge()</code> as this last function calls the same code
imported from package 'ggplot2'.
</p>
<p>The second use is to jitter labels to be connected to points that have not
been jittered. The return of original positions instead of the jittered
ones is achieved by passing <code>origin = "original"</code> to override the
default <code>origin = "jittered"</code>.
</p>


<h3>Value</h3>

<p>A <code>"Position"</code> object. The layer function within it returns a
data frame, with the jittered + nudged values in columns <code>x</code> and
<code>y</code> and by default the jittered values with no nudging as
<code>x_orig</code> and <code>y_orig</code>. With <code>nudge.from = "original"</code> the
original values with no jitter and no nudge applied are returned as
<code>x_orig</code> and <code>y_orig</code>.
</p>


<h3>Note</h3>

<p>When <code>direction = "split"</code> is used together with no jitter, the
split to left and right, or up and down is done at random.
</p>


<h3>Author(s)</h3>

<p>Micha≈Ç Krassowski, edited by Pedro J. Aphalo.
</p>


<h3>Source</h3>

<p><a href="https://github.com/slowkow/ggrepel/issues/161">https://github.com/slowkow/ggrepel/issues/161</a>.
</p>


<h3>See Also</h3>

<p><code>position_jitter</code>,
<code>position_nudge</code>,
<code>position_nudge_repel</code>.
</p>
<p>Other position adjustments: 
<code>position_dodgenudge()</code>,
<code>position_nudge_center()</code>,
<code>position_nudge_keep()</code>,
<code>position_nudge_line()</code>,
<code>position_nudge_to()</code>,
<code>position_stacknudge()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
jitter &lt;- position_jitter(width = 0.2, height = 2, seed = 123)

jitter_nudge &lt;- position_jitternudge(width = 0.2, height = 2,
                                     seed = 123, x = 0.1,
                                     direction = "split",
                                     nudge.from = "jittered")
ggplot(mpg[1:20, ],
       aes(cyl, hwy, label = drv)) +
  geom_point(position = jitter) +
  geom_text_s(position = jitter_nudge)

jitter_nudge &lt;- position_jitternudge(width = 0.2, height = 2,
                                     seed = 123, x = 0.35,
                                     direction = "split",
                                     nudge.from = "original.x")
ggplot(mpg[1:20, ],
       aes(cyl, hwy, label = drv)) +
  geom_point(position = jitter) +
  geom_text_s(position = jitter_nudge)

jitter &lt;- position_jitter(width = 0, height = 2, seed = 123)

jitter_nudge &lt;- position_jitternudge(width = 0, height = 2,
                                     seed = 123, x = 0.4,
                                     direction = "split",
                                     nudge.from = "original.x")
ggplot(mpg[1:20, ],
       aes(cyl, hwy, label = drv)) +
  geom_point(position = jitter) +
  geom_text_s(position = jitter_nudge)

jitter_nudge &lt;- position_jitternudge(width = 0, height = 2,
                                     seed = 123, x = 0.4,
                                     direction = "alternate",
                                     nudge.from = "original.x")
ggplot(mpg[1:20, ],
       aes(cyl, hwy, label = drv)) +
  geom_point(position = jitter) +
  geom_text_s(position = jitter_nudge)

# No nudge, show how points have moved with jitter

ggplot(mpg[1:20, ],
       aes(cyl, hwy, label = drv)) +
  geom_point() +
  geom_point_s(position =
               position_jitter_keep(width = 0.3, height = 2, seed = 123),
               color = "red",
               arrow = grid::arrow(length = unit(0.4, "lines")))

</code></pre>


</div>