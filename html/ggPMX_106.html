<div class="container">

<table style="width: 100%;"><tr>
<td>pmx_plot_vpc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>VPC plot</h2>

<h3>Description</h3>

<p>VPC plot
</p>


<h3>Usage</h3>

<pre><code class="language-R">pmx_plot_vpc(
  ctr,
  type,
  idv,
  obs,
  pi,
  ci,
  rug,
  bin,
  is.legend,
  sim_blq,
  dname,
  filter,
  strat.facet,
  facets,
  strat.color,
  trans,
  pmxgpar,
  labels,
  axis.title,
  axis.text,
  ranges,
  is.smooth,
  smooth,
  is.band,
  band,
  is.draft,
  draft,
  is.identity_line,
  identity_line,
  scale_x_log10,
  scale_y_log10,
  color.scales,
  is.footnote,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ctr</code></td>
<td>
<p>pmx controller</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p><code>charcater</code> can be either percentile or scatter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idv</code></td>
<td>
<p><code>chracater</code> individual variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p><code>pmx_vpc_obs</code> object observation layer pmx_vpc_obs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi</code></td>
<td>
<p><code>pmx_vpc_pi</code> object percentile layer  pmx_vpc_pi</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p><code>pmx_vpc_ci</code> object confidence interval layer  pmx_vpc_ci</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p><code>pmx_vpc_rug</code> object rug layer  pmx_vpc_rug.
Note: consider not using a rug layer when bin[["within_strat"]]=TRUE,
since the rugs plotted will not reflect the bins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin</code></td>
<td>
<p><code>pmx_vpc_bin</code> object  pmx_vpc_bin specify within pmx_plot_vpc() e.g.: bin = pmx_vpc_bin(style = "kmeans", n = 10)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.legend</code></td>
<td>
<p><code>logical</code> if TRUE add legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sim_blq</code></td>
<td>
<p><code>logical</code> if TRUE uses sim_blq values for plotting. Only for Monolix 2018 and later.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dname</code></td>
<td>
<p>added for compatibility with other ggPMX plots
</p>
<p><strong>pmx_update parameters</strong></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p><code>expression</code> filter which will be applied to plotting data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat.facet</code></td>
<td>
<p><code>formula</code> optional stratification parameter by facetting.
This split plot by strats(each strat in a facet)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facets</code></td>
<td>
<p><code>list</code> facet_wrap parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat.color</code></td>
<td>
<p><code>character</code> optional stratification parameter by grouping.
This will split the plot by group (color) of strat.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trans</code></td>
<td>
<p><code>character</code> define the transformation to apply on x or y or both variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pmxgpar</code></td>
<td>
<p>a object of class pmx_gpar possibly the output of the
</p>
<p><strong>pmx_gpar: Shared basic graphics parameters</strong></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p><code>list</code> list containing plot and/or axis labels: title, subtitle, x , y</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.title</code></td>
<td>
<p><code>list</code> containing element_text attributes to customize
the axis title. (similar to ggplot2 axis.title theme)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.text</code></td>
<td>
<p><code>list</code> containing element_text attributes to customize
the axis text (similar to ggplot2 axis.text theme)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ranges</code></td>
<td>
<p><code>list</code> limits of x/y ranges</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.smooth</code></td>
<td>
<p><code>logical</code> if set to TRUE add smooth layer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p><code>list</code> geom_smooth graphical/smoothing fun parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.band</code></td>
<td>
<p><code>logical</code> if TRUE add horizontal band</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>band</code></td>
<td>
<p><code>list</code> horizontal band parameters. geom_hline graphical parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.draft</code></td>
<td>
<p><code>logical</code> if TRUE add draft layer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draft</code></td>
<td>
<p><code>list</code> draft layer parameters. geom_text graphical parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.identity_line</code></td>
<td>
<p><code>logical</code> if TRUE add an identity line</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>identity_line</code></td>
<td>
<p><code>list</code>geom_abline graphical parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_x_log10</code></td>
<td>
<p><code>logical</code> if TRUE use log10 scale for x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_y_log10</code></td>
<td>
<p><code>logical</code> if TRUE use log10 scale for y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color.scales</code></td>
<td>
<p><code>list</code> define scales parameter in case of strat.color <code>pmx_settings</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.footnote</code></td>
<td>
<p><code>logical</code> if TRUE add footnote</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>others graphics parameters passed :
</p>

<ul>
<li> <p><code>pmx_gpar</code> internal function to customize shared graphical parameters
</p>
</li>
<li> <p><code>pmx_vpc</code> pmx vpc object.
</p>
</li>
<li> <p><code>pmx_update</code> function.
</p>
</li>
</ul>
<p><strong>pmx_vpc parameters</strong></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>You can use pmx_vpc_bin to set the bin parameters. In case of stratification,
binning can be different for each strat level (case <code>within_strat</code> equal to FALSE).
</p>


<h3>Value</h3>

<p>ggplot2 or list of ggplot2 objects
</p>


<h3>See Also</h3>

<p>Other vpc: 
<code>pmx_vpc_bin()</code>,
<code>pmx_vpc_ci()</code>,
<code>pmx_vpc_obs()</code>,
<code>pmx_vpc_pi()</code>,
<code>pmx_vpc_rug()</code>,
<code>pmx_vpc()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(ggPMX)

theo_path &lt;- file.path(
  system.file(package = "ggPMX"), "testdata",
  "theophylline"
)
WORK_DIR &lt;- file.path(theo_path, "Monolix")
input_file &lt;- file.path(theo_path, "data_pk.csv")
vpc_file &lt;- file.path(theo_path, "sim.csv")

ctr &lt;- pmx_mlx(
  config = "standing",
  directory = WORK_DIR,
  input = input_file,
  dv = "Y",
  dvid = "dvid",
  cats = c("SEX"),
  conts = c("WT0", "AGE0"),
  strats = "STUD",
  settings = pmx_settings(
    use.labels=TRUE,
    cats.labels=list(
      SEX=c("0"="Male","1"="Female")
    )
  ),
  sim = pmx_sim(
    file = vpc_file,
    irun ="rep",
    idv="TIME"
  )
)


ctr %&gt;% pmx_plot_vpc(
  strat.facet=~SEX,
  facets=list(nrow=2),
  type="percentile",
  is.draft = FALSE,
  pi = pmx_vpc_pi(interval = c(0.1,0.9),
              median=list(color="green"),
              extreme= list(color="green")),
  obs = pmx_vpc_obs(color="blue",shape=18,size=2),
  ci = pmx_vpc_ci(interval = c(0.1,0.9),
              median=list(fill="pink")),
  bin=pmx_vpc_bin("kmeans",n=5)
)

ctr %&gt;% 
  pmx_plot_vpc(bin= pmx_vpc_bin(
     style = "fixed",
     fixedBreaks=c(-10,2, 5, 10,15,50))
  )

# example with legend 

ctr %&gt;% pmx_plot_vpc(
  is.legend = TRUE,
  pi = pmx_vpc_pi(interval=c(0.02,0.98),median = list(linetype="dotted")),
  ci = pmx_vpc_ci(interval = c(0.05,0.95),median=list(fill="red"))
)


</code></pre>


</div>