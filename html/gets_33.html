<div class="container">

<table style="width: 100%;"><tr>
<td>getsFun</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>General-to-Specific (GETS) modelling function</h2>

<h3>Description</h3>

<p>Auxiliary function (i.e. not intended for the average user) that enables fast and efficient GETS-modelling with user-specified estimators and models, and user-specified diagnostics and goodness-of-fit criteria. The function is called by and relied upon by <code>getsm</code>, <code>getsv</code>, <code>isat</code> and <code>blocksFun</code>.</p>


<h3>Usage</h3>

<pre><code class="language-R">getsFun(y, x, untransformed.residuals=NULL,
  user.estimator=list(name="ols"), gum.result=NULL, t.pval=0.05,
  wald.pval=t.pval, do.pet=TRUE, ar.LjungB=NULL, arch.LjungB=NULL,
  normality.JarqueB=NULL, user.diagnostics=NULL,
  gof.function=list(name="infocrit"), gof.method=c("min", "max"),
  keep=NULL, include.gum=FALSE, include.1cut=FALSE,
  include.empty=FALSE, max.paths=NULL, turbo=FALSE, tol=1e-07,
  LAPACK=FALSE, max.regs=NULL, print.searchinfo=TRUE, alarm=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a numeric vector (with no missing values, i.e. no non-numeric 'holes')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>matrix</code> or <code>NULL</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>untransformed.residuals</code></td>
<td>
<p><code>NULL</code> (default) or, when <code>ols</code> is used with <code>method=6</code> in <code>user.estimator</code>, a numeric vector containing the untransformed residuals </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.estimator</code></td>
<td>
<p>a <code>list</code>. The first item should be named <code>name</code> and contain the name (a character) of the estimation function (the default is <code>"ols"</code>). Additional items, if any, in the list <code>user.estimator</code> are passed on as arguments to the estimator in question. Optionally, the list can also contain an item named <code>envir</code>, a character, which indicates the environment in which the user-specified estimator resides. The value returned by the user-specified estimator should be a <code>list</code>, see details </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gum.result</code></td>
<td>
<p>a <code>list</code> with the estimation results of the General Unrestricted Model (GUM), or <code>NULL</code> (default). If the estimation results of the GUM are already available, then re-estimation of the GUM is skipped if the estimation results are provided via this argument</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.pval</code></td>
<td>
<p><code>numeric</code> value between 0 and 1. The significance level used for the two-sided regressor significance t-tests </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wald.pval</code></td>
<td>
<p><code>numeric</code> value between 0 and 1. The significance level used for the Parsimonious Encompassing Tests (PETs) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.pet</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code> (default), then a Parsimonious Encompassing Test (PET) against the GUM is undertaken at each regressor removal for the joint significance of all the deleted regressors along the current path. If <code>FALSE</code>, then a PET is not undertaken at each regressor removal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ar.LjungB</code></td>
<td>
<p>a two element <code>vector</code> or <code>NULL</code> (default). In the former case, the first element contains the AR-order, the second element the significance level. If <code>NULL</code>, then a test for autocorrelation is not conducted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arch.LjungB</code></td>
<td>
<p>a two element <code>vector</code> or <code>NULL</code> (default). In the former case, the first element contains the ARCH-order, the second element the significance level. If <code>NULL</code>, then a test for ARCH is not conducted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normality.JarqueB</code></td>
<td>
<p><code>NULL</code> or a <code>numeric</code> value between 0 and 1. In the latter case, a test for non-normality is conducted using a significance level equal to <code>normality.JarqueB</code>. If <code>NULL</code>, then no test for non-normality is conducted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.diagnostics</code></td>
<td>
<p><code>NULL</code> (default) or a <code>list</code> with two entries, <code>name</code> and <code>pval</code>. The first item (<code>name</code>) should contain the name of the user-defined function, and must be of class <code>character</code>. The second item should contain the chosen significance level or levels, i.e. either a scalar or a vector of length equal to the number of p-values returned by the user-defined diagnostics function, see details. Optionally, the list <code>user.diagnostics</code> can also contain a third item named <code>envir</code>, a character, which indicates the environment in which the user-defined function resides </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gof.function</code></td>
<td>
<p>a <code>list</code>. The first item should be named <code>name</code> and contain the name (a character) of the Goodness-of-Fit (GOF) function used. Additional items in the list <code>gof.function</code> are passed on as arguments to the GOF-function. The value returned by the GOF-function should be a numeric value (of length 1). Optionally, the list <code>gof.function</code> can also contain an item named <code>envir</code>, a character, which indicates the environment in which the user-defined function resides </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gof.method</code></td>
<td>
<p>a <code>character</code>. Determines whether the best Goodness-of-Fit is a minimum or maximum</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p><code>NULL</code> or an integer vector that indicates which regressors to be excluded from removal in the search</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.gum</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code>, then the GUM (i.e. the starting model) is included among the terminal models. If <code>FALSE</code> (default), then the GUM is not included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.1cut</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code>, then the 1-cut model is added to the list of terminal models. If <code>FALSE</code> (default), then the 1-cut is not added, unless it is a terminal model in one of the paths </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.empty</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code>, then the empty model is added to the list of terminal models. If <code>FALSE</code> (default), then the empty model is not added, unless it is a terminal model in one of the paths </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.paths</code></td>
<td>
<p><code>NULL</code> (default) or an integer equal to or greater than 0. If <code>NULL</code>, then there is no limit to the number of paths. If an integer, for example 1, then this integer constitutes the maximum number of paths searched </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>turbo</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code>, then (parts of) paths are not searched twice (or more) unnecessarily, thus yielding a significant potential for speed-gain. However, the checking of whether the search has arrived at a point it has already been comes with a slight computational overhead. Accordingly, if <code>turbo=TRUE</code>, then the total search time might in fact be higher than if <code>turbo=FALSE</code>. This happens if estimation is very fast, say, less than quarter of a second. Hence the default is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>numeric value (<code>default = 1e-07</code>). The tolerance for detecting linear dependencies in the columns of the variance-covariance matrix when computing the Wald-statistic used in the Parsimonious Encompassing Tests (PETs), see the <code>qr.solve</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LAPACK</code></td>
<td>
<p>currently not used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.regs</code></td>
<td>
<p><code>integer</code>. The maximum number of regressions along a deletion path. Do not alter unless you know what you are doing! </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.searchinfo</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code> (default), then a print is returned whenever simiplification along a new path is started</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alarm</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code>, then a sound or beep is emitted (in order to alert the user) when the model selection ends </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The value returned by the estimator specified in <code>user.estimator</code> should be a <code>list</code> containing at least six items: "coefficients", "df", "vcov", "logl", "n" and "k". The item "coefficients" should be a vector of length <code>NCOL(x)</code> containing the estimated coefficients. The item named "df" is used to compute the <em>p</em>-values associated with the <em>t</em>-statistics, i.e. coef/std.err. The item named "vcov" contains the (symmetric) coefficient-covariance matrix of the estimated coefficients. The items "logl" (the log-likelihood), "n" (the number of observations) and "k" (the number of estimated parameters; not necessarily equal to the number of coefficients) are used to compute the information criterion. Finally, the estimator MUST be able to handle empty regressor-matrices (i.e. <code>is.null(x)=TRUE</code> or <code>NCOL(x)=0</code>). In this case, then the first three items (i.e. "coefficients", "df" and "vcov") can - and should - be <code>NULL</code>.
</p>
<p>The argument <code>user.estimator</code> enables the user to specify an estimator that differs from the default (<code>ols</code>). To do this, the argument should be a list with at least one entry, name (of class character), that contains the name of the user-defined function. The call to this function is executed with <code>do.call</code>, whose default value on <code>envir</code> is <code>parent.frame()</code>. Usually, this will be the global environment (<code>.GlobalEnv</code>), but it can be changed by adding an entry named <code>envir</code> to the list that indicates where the user-defined function resides. 
</p>
<p>The argument <code>user.diagnostics</code> enables the user to specify additional - or alternative - diagnostics, see <code>diagnostics</code>.
</p>
<p>The argument <code>gof.function</code> enables the user to specify a goodness-of-fit function that differs from the default (<code>infocrit</code>). The principles to follow are the same as that of <code>user.estimator</code>: The argument should be a <code>list</code> with at least one entry, name, that contains the name of the user-defined function, additional entries in the list are passed on to the user-specified goodness-of-fit function, and optionally an entry named <code>envir</code> may indicate where the user-defined function resides.   
</p>


<h3>Value</h3>

<p>A <code>list</code> with the results of the specification search.</p>


<h3>Author(s)</h3>

<p>Genaro Sucarrat, <a href="http://www.sucarrat.net/">http://www.sucarrat.net/</a> </p>


<h3>References</h3>

<p>C. Jarque and A. Bera (1980): 'Efficient Tests for Normality, Homoscedasticity and Serial Independence'. Economics Letters 6, pp. 255-259
</p>
<p>G. Ljung and G. Box (1979): 'On a Measure of Lack of Fit in Time Series Models'. Biometrika 66, pp. 265-270
</p>
<p>F. Pretis, J. Reade and G. Sucarrat (2018): 'Automated General-to-Specific (GETS) Regression Modeling and Indicator Saturation for Outliers and Structural Breaks'. Journal of Statistical Software 86, Number 3, pp. 1-44
</p>
<p>G. sucarrat (2019): 'User-Specified General-to-Specific and Indicator Saturation Methods', Munich Personal RePEc Archive: <a href="https://mpra.ub.uni-muenchen.de/96653/">https://mpra.ub.uni-muenchen.de/96653/</a>
</p>


<h3>See Also</h3>

<p><code>ols</code>, <code>diagnostics</code>, <code>infocrit</code>, <code>getsv</code></p>


<h3>Examples</h3>

<pre><code class="language-R">##aim: do gets on the x-part (i.e. the covariates) of an arma-x model.
##create the user-defined estimator (essentially adding, renaming
##and re-organising the items returned by the estimator):
myEstimator &lt;- function(y, x)
{
  tmp &lt;- arima(y, order=c(1,0,1), xreg=x)

  #rename and re-organise:
  result &lt;- list()
  result$coefficients &lt;- tmp$coef[-c(1:3)]
  result$vcov &lt;- tmp$var.coef
  result$vcov &lt;- result$vcov[-c(1:3),-c(1:3)]
  result$logl &lt;- tmp$loglik
  result$n &lt;- tmp$nobs
  result$k &lt;- NCOL(x)
  result$df &lt;- result$n - result$k
  
  return(result)
}

##generate some data:
##a series w/structural break and eleven step-dummies near the break
set.seed(123)
eps &lt;- arima.sim(list(ar=0.4, ma=0.1), 60)
x &lt;- coredata(sim(eps, which.ones=25:35)) #eleven step-dummies
y &lt;- 4*x[,"sis30"] + eps #create shift upwards at observation 30
plot(y)

##estimate the gum and then do gets in a single step:
##getsFun(y, x, user.estimator=list(name="myEstimator"))

##estimate the gum and then do gets in two steps:
#mygum &lt;- myEstimator(y, x)
##getsFun(y, x, user.estimator=list(name="myEstimator"), gum.result=mygum)

</code></pre>


</div>