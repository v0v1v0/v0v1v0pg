<div class="container">

<table style="width: 100%;"><tr>
<td>ggGS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare data in <code>MPG</code> and <code>grain</code> objects for use with <code>ggplot2</code>
</h2>

<h3>Description</h3>

<p>This is an informal <code>fortify</code>-type method that prepares either
<code>RasterLayer</code> or <code>igraph</code> objects contained as slots within
<code>MPG</code> or <code>grain</code> objects for easy plotting with <code>ggplot()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ggGS(x, type = NULL, ...)

## S4 method for signature 'RasterLayer'
ggGS(x, type = NULL, ...)

## S4 method for signature 'list'
ggGS(x, type = NULL, ...)

## S4 method for signature 'mpg'
ggGS(x, type = NULL, ...)

## S4 method for signature 'grain'
ggGS(x, type = NULL, ...)

## S4 method for signature 'goc'
ggGS(x, type = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>mpg</code>, <code>grain</code>, or <code>RasterLayer</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>If a <code>mpg</code> or <code>grain</code> object is supplied, this
gives the name of the slot to prepare for plotting. Options
are discussed below. Not required if a <code>RasterLayer</code>
is supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments (not used).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.frame</code> suitable for plotting with <code>ggplot()</code>.
</p>
<p>Where <code>type</code> is a raster the <code>data.frame</code> will have the following columns:
</p>

<dl>
<dt><code>value</code></dt>
<dd>
<p>the value of the raster cell</p>
</dd>
<dt><code>x</code></dt>
<dd>
<p>the x coordinate of the centre of the raster cell</p>
</dd>
<dt><code>y</code></dt>
<dd>
<p>the y coordinate of the centre of the raster cell</p>
</dd>
</dl>
<p>Where <code>type = 'nodes'</code> the <code>data.frame</code> will have the following columns:
</p>

<dl>
<dt><code>x</code></dt>
<dd>
<p>the x coordinate of the node</p>
</dd>
<dt><code>y</code></dt>
<dd>
<p>the y coordinate of the node</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>other attributes associated with the network nodes</p>
</dd>
</dl>
<p>Where <code>type = 'links'</code> the <code>data.frame</code> will have the following columns:
</p>

<dl>
<dt><code>x1</code></dt>
<dd>
<p>the x coordinate of the first node</p>
</dd>
<dt><code>y1</code></dt>
<dd>
<p>the y coordinate of the first node</p>
</dd>
<dt><code>x2</code></dt>
<dd>
<p>the x coordinate of the second node</p>
</dd>
<dt><code>y2</code></dt>
<dd>
<p>the y coordinate of the second node</p>
</dd>
<dt><code>x1p</code></dt>
<dd>
<p>the x coordinate at the perimeter of the first node</p>
</dd>
<dt><code>y1p</code></dt>
<dd>
<p>the y coordinate at the perimeter of the first node</p>
</dd>
<dt><code>x2p</code></dt>
<dd>
<p>the x coordinate at the perimeter of the second node</p>
</dd>
<dt><code>y2p</code></dt>
<dd>
<p>the y coordinate at the perimeter of the second node</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>other attributes associated with the network links</p>
</dd>
</dl>
<h3>Note</h3>

<p><strong>Options for <code>type</code> parameter</strong>
</p>
<p>If a <code>RasterLayer</code> is supplied <code>type</code> is optional.
</p>
<p>For <code>mpg</code> <code>type</code> options are <code>"node"</code> or <code>"links"</code>.
This prepares the nodes and links of the minimum planar graph network for
plotting,  Also <code>"patchId"</code>, <code>"voronoi"</code>, <code>"lcpPerimWeight"</code>,
<code>"lcpLinkId"</code>, <code>"mpgPlot"</code> will prepare rasters for plotting.
</p>
<p>For <code>grain</code> objects <code>type</code>  options are <code>"nodes"</code> or<code>"links"</code>
to prepare the nodes and links of the grains of connectivity network  for
plotting. Also <code>"voronoi"</code> will prepare the grains of connectivity
Voronoi polygons raster for plotting.
</p>
<p>For either <code>mpg</code> or <code>grain</code> objects <code>type = "vorBound"</code>
will identify the boundaries of the Voronoi polygons for plotting.
This is potentially time consuming for large rasters.
</p>


<h3>Author(s)</h3>

<p>Paul Galpern and Alex Chubaty
</p>


<h3>See Also</h3>

<p><code>MPG()</code>, <code>GOC()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Load raster landscape
tiny &lt;- raster::raster(system.file("extdata/tiny.asc", package = "grainscape"))

## Create a resistance surface from a raster using an is-becomes reclassification
tinyCost &lt;- raster::reclassify(tiny, rcl = cbind(c(1, 2, 3, 4), c(1, 5, 10, 12)))
## Produce a patch-based MPG where patches are resistance features=1
tinyPatchMPG &lt;- MPG(cost = tinyCost, patch = tinyCost == 1)
## Extract a representative subset of 5 grains of connectivity
tinyPatchGOC &lt;- GOC(tinyPatchMPG, nThresh = 5)
if (interactive()) {
  library(ggplot2)

  ## Plot the patches in a minimum planar graph
  theme_set(theme_grainscape())
  ggplot() +
    geom_tile(data = ggGS(tinyPatchMPG, "patchId"),
              aes(x = x, y = y, fill = value))

  ## Plot the grain polygons in a grain of connectivity
  ggplot() +
    geom_tile(data = ggGS(grain(tinyPatchGOC, 3), "voronoi"),
              aes(x = x, y = y, fill = value))

  ## Plot the grain polygon boundaries
  ggplot() +
    geom_tile(data = ggGS(grain(tinyPatchGOC, 3), "vorBound"),
              aes(x = x, y = y, fill = value))

  ## Plot the patches and perimeter links of a minimum planar graph
  ggplot() +
    geom_tile(data = ggGS(tinyPatchMPG, "patchId"),
              aes(x = x, y = y, fill = value)) +
    geom_segment(data = ggGS(tinyPatchMPG, "links"),
                 aes(x = x1p, y = y1p, xend = x2p, yend = y2p))

  ## Plot the patches and linear representations of the perimeter links
  ## of a minimum planar graph
  ggplot() +
    geom_tile(data = ggGS(tinyPatchMPG, "patchId"),
              aes(x = x, y = y, fill = value)) +
    geom_segment(data = ggGS(tinyPatchMPG, "links"),
                 aes(x = x1p, y = y1p, xend = x2p, yend = y2p))

  ## Plot the nodes and links of a grains of connectivity network
  ## superimposed over the grain polygons
  focalGrain &lt;- grain(tinyPatchGOC, 3)
  ggplot() +
    geom_tile(data = ggGS(focalGrain, "vorBound"),
              aes(x = x, y = y, fill = value)) +
    geom_point(data = ggGS(focalGrain, "nodes"),
               aes(x = x, y = y)) +
    geom_segment(data = ggGS(focalGrain, "links"),
                 aes(x = x1, y = y1, xend = x2, yend = y2))
}
</code></pre>


</div>