<div class="container">

<table style="width: 100%;"><tr>
<td>get_stream_network_interactively</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Stream Network Interactively</h2>

<h3>Description</h3>

<p>This function allows the user to get stream networks and watersheds interactively with a
shiny app. It uses the elevatr package to acquire the Digital Elevation Model (DEM) or user inputted DEM
and whitebox package to delineate the stream network and watersheds (see details).
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_stream_network_interactively(
  map = NULL,
  ns = "streamnetwork-ui",
  viewer = shiny::paneViewer(),
  title = "Streamnetwork",
  dem = NULL,
  threshold = 1000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>a background leaflet or mapview map to be used for editing. If NULL a blank mapview canvas will be provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ns</code></td>
<td>
<p><code>string</code> name for the Shiny <code>namespace</code> to use.  The <code>ns</code>
is unlikely to require a change.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewer</code></td>
<td>
<p><code>function</code> for the viewer.  See Shiny <code>viewer</code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing "done" or "cancel") in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.  The default
is "Delineate Basin".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dem</code></td>
<td>
<p>A raster or terra object dem. (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>A threshold for stream initiation. 1000 (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments to <code>leafletOutput()</code> in module and/or wbt_* functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function uses the package elevatr to download the DEM (unless you provide your own).
Once the user has drawn the bounding box or inputed DEM and selected appropriate zoom (resolution) and threshold then
the app will create basins and streams.
</p>
<p><strong>Steps</strong>
</p>

<ol>
<li>
<p> Input a well-suited DEM zoom level and threshold. (skip if own DEM is inputted)
</p>
</li>
<li>
<p> Draw bounding box (rectangle or polygon) (skip if own DEM is inputted).
</p>
</li>
<li>
<p> Wait for layers to respond.
</p>
</li>
<li>
<p> Repeat steps 1-4 if needed.
</p>
</li>
<li>
<p> when finished, press 'done' and stream network and watersheds will be saved as a list in local environment with the associated
flow accumulation and flow direction.
</p>
</li>
</ol>
<p>In addition, this function uses both <code>whitebox::wbt_feature_preserving_smoothing()</code> and <code>whitebox::wbt_breach_depressions()</code>
prior to running the flow direction and flow accumulation (both d8) algorithms.
</p>


<h3>Value</h3>

<p>A list of sf objects that the user collected during shiny session as well as flow accumulation and direction paths to tif.
Each list will contain two sf objects: <code>watersheds</code> and <code>streams</code>. The <code>streams</code> object will also return these attributes:
<code>tribid</code>, <code>strahler</code>, <code>slope</code>, <code>length</code>, <code>mainstem</code>, <code>FID</code>, <code>STRM_VAL</code>.
</p>


<h3>Note</h3>

<p>If you add your own DEM then you don't need to draw a bounding box.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if(interactive()){
streamnetwork &lt;- get_stream_network_interactively()
}



</code></pre>


</div>