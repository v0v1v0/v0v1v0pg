<div class="container">

<table style="width: 100%;"><tr>
<td>vegnett_to_R</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert the Norwegian road network (NVDB Ruteplan nettverksdatasett) into network graphs in R</h2>

<h3>Description</h3>

<p>The function <code>vegnett_to_R</code> can be used to convert the Norwegian road network, downloaded from <a href="https://kartkatalog.geonorge.no/metadata/nvdb-ruteplan-nettverksdatasett/8d0f9066-34f9-4423-be12-8e8523089313">Geonorge</a>, to formats that enable network analysis in R (<code>tbl_graph</code> and <code>cppRouting</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">vegnett_to_R(
  vegnett,
  crs_out = 25833,
  year = 2022,
  fromnodeID = "FROMNODE",
  tonodeID = "TONODE",
  FT_minutes = "DRIVETIME_FW",
  TF_minutes = "DRIVETIME_BW",
  meters = "SHAPE_LENGTH",
  turn_restrictions = FALSE,
  ferry = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vegnett</code></td>
<td>
<p>The Norwegian road network as an <code>sf</code> object, downloaded from <a href="https://kartkatalog.geonorge.no/metadata/nvdb-ruteplan-nettverksdatasett/8d0f9066-34f9-4423-be12-8e8523089313">Geonorge</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs_out</code></td>
<td>
<p>Numeric vector with the chosen coordinate reference system (CRS). The default value is set to <code style="white-space: pre;">⁠CRS 25833⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>Numeric vector with the year the road network is from. Due to changes in the format of the files between 2021 and 2022, the most important thing is to choose between the "old" format (-2021) or the new format (2022-). The default value is set to 2022. Please see the example for the column names for 2021 and earlier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fromnodeID</code></td>
<td>
<p>Character vector with the name of the column indicating the from node ID. Default value is set to <code>FROMNODE</code> (column name in 2022).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tonodeID</code></td>
<td>
<p>Character vector with the name of the column indicating the to node ID. Default value is set to <code>TONODE</code> (column name in 2022).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FT_minutes</code></td>
<td>
<p>Character vector with the name of the column that contains the cost in minutes from <code>fromnodeID</code> to <code>tonodeID</code> (FT). Default value is set to <code>DRIVETIME_FW</code> (column name in 2022).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TF_minutes</code></td>
<td>
<p>Character vector with the name of the column that contains the cost in minutes from <code>tonodeID</code> to <code>fromnodeID</code> (TF). Default value is set to <code>DRIVETIME_BW</code> (column name in 2022).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meters</code></td>
<td>
<p>Character vector with the name of the column that contains the cost in meters (equal for FT and TF). Default value is set to <code>SHAPE_LENGTH</code> (column name in 2022).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>turn_restrictions</code></td>
<td>
<p>Logical. Default value is <code>FALSE</code>. If <code>TRUE</code> turn restrictions will be added to the road network. The turn restrictions layer from the road network file has to be loaded before this can be used (and the object has to be called <code>turnrestrictions_geom</code>). Due to errors in the turn restrictions file for 2022 it is not recommended to use this feature for now.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ferry</code></td>
<td>
<p>Logical/numeric vector. Default value is <code>TRUE</code> which means that all edges that involve ferries are given their original drive time (somewhere between 10 and 13 km/h). If a numeric value is supplied, the cost for all edges involving ferries will be converted to the supplied value in km/h.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List containing the following elements:
</p>
<p><code style="white-space: pre;">⁠[1] graph⁠</code>: the road network structured as a tidy graph (<code>tbl_graph</code> object).
</p>
<p><code style="white-space: pre;">⁠[2] nodes⁠</code>: the road network's nodes (<code>sf</code> object).
</p>
<p><code style="white-space: pre;">⁠[3] edges⁠</code>: road network's edges/node links (<code>data.frame</code>).
</p>
<p><code style="white-space: pre;">⁠[4] graph_cppRouting_minutes⁠</code>: the road network structured as a <code>cppRouting</code> graph with the cost of travel in minutes (<code>cppRouting</code> object).
</p>
<p><code style="white-space: pre;">⁠[5] graph_cppRouting_meters⁠</code>: the road network structured as a <code>cppRouting</code> graph with the cost of travel in meters (<code>cppRouting</code> object).
</p>


<h3>Examples</h3>

<pre><code class="language-R">vegnett_sampledata
vegnett_list &lt;- vegnett_to_R(vegnett = vegnett_sampledata,
                             year = 2021,
                             fromnodeID = "FROMNODEID",
                             tonodeID = "TONODEID",
                             FT_minutes = "FT_MINUTES",
                             TF_minutes = "TF_MINUTES",
                             meters = "SHAPE_LENGTH")

graph &lt;- vegnett_list[[1]]
nodes &lt;- vegnett_list[[2]]
edges &lt;- vegnett_list[[3]]
graph_cppRouting_minutes &lt;- vegnett_list[[4]]
graph_cppRouting_meters &lt;- vegnett_list[[5]]

graph
nodes
head(edges)
head(graph_cppRouting_minutes$data)
head(graph_cppRouting_minutes$coords)
head(graph_cppRouting_minutes$dict)
graph_cppRouting_minutes$nbnode

head(graph_cppRouting_meters$data)
head(graph_cppRouting_meters$coords)
head(graph_cppRouting_meters$dict)
graph_cppRouting_meters$nbnode

</code></pre>


</div>