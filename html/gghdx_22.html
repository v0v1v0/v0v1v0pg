<div class="container">

<table style="width: 100%;"><tr>
<td>label_number_hdx</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Format and labels numbers in HDX key figures style</h2>

<h3>Description</h3>

<p>Use <code>format_number_hdx()</code> to directly format numeric vectors, and use <code>label_number_hdx()</code>
in the same way as the <code style="white-space: pre;">⁠scales::⁠</code> family of label functions. The return value of
<code>label_number_hdx()</code> is a function, based on the <code>additional_prefix</code>. So you
should pass it in to <code>scales_...()</code> <code>labels</code> parameter in the same way as
<code>scales_...()</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">label_number_hdx(additional_prefix = "")

format_number_hdx(x, additional_prefix = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>additional_prefix</code></td>
<td>
<p>Additional prefix to add to string, that will come
between <code>sign_prefix</code> and the number. For example, <code>"$"</code> could produce a
return value of <code style="white-space: pre;">⁠-$1.1K⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric vector to format</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Numeric vectors are formatted in the HDX style for key figures, which abbreviates
numbers 1,000 and above to X.YK, 10,000 and above to XYK, 100,000 and above
to XYZK, and the same for 1,000,000 and above, replacing the K with an M, and
the same for B. Details of the data viz style can be found in the
<a href="https://data.humdata.org/dataviz-guide/dataviz-elements/#/data-visualization/text">visualization guidelines</a>
</p>
<p>Just for continuity, values are labeled with T for trillion, and that is the
maximum formatting available, anything above the trillions will continue to be
truncated to report in the trillions.
</p>
<p>Deals with negative values in case those ever need to be formatted in similar
manners. Also ensures that rounding is performed so numbers look correct.
Not to be used for percents, which should just use <code>scales::label_percent()</code>.
</p>


<h3>Value</h3>

<p><code>label_number_hdx()</code>: "labelling" function, in the same way as <code>scales::label_...()</code>
functions work, i.e. a function that takes <code>x</code> and returns a labelled character
vector of <code>length(x)</code>.
</p>
<p><code>format_number_hdx()</code>: Formatted character vector of number strings
</p>


<h3>Examples</h3>

<pre><code class="language-R"># label_number_hdx()

library(ggplot2)

# discrete scaling
p &lt;- ggplot(txhousing) +
  geom_point(
    aes(
      x = median,
      y = volume
    )
  )

p

p +
  scale_x_continuous(
    labels = label_number_hdx("$")
  ) +
  scale_y_continuous(
    labels = label_number_hdx()
  )

# number_hdx()

x &lt;- c(1234, 7654321)
format_number_hdx(x)
format_number_hdx(x, "$")

</code></pre>


</div>