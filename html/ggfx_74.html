<div class="container">

<table style="width: 100%;"><tr>
<td>with_shade</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply a gaussian blur to your layer</h2>

<h3>Description</h3>

<p>This filter adds a blur to the provided ggplot layer. The amount of blur can
be controlled and the result can optionally be put underneath the original
layer.
</p>


<h3>Usage</h3>

<pre><code class="language-R">with_shade(
  x,
  height_map,
  azimuth = 30,
  elevation = 30,
  strength = 10,
  sigma = 0,
  blend_type = "overlay",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A ggplot2 layer object, a ggplot, a grob, or a character string
naming a filter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height_map</code></td>
<td>
<p>The layer to use as a height_map. Can either be a string
identifying a registered filter, or a raster object. Will by default extract
the luminosity of the layer and use that as mask. To pick another channel use
one of the channel specification function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>azimuth, elevation</code></td>
<td>
<p>The location of the light source.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strength</code></td>
<td>
<p>The strength of the shading. A numeric larger or equal to <code>1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>The sigma used for blurring the shading before applying it.
Setting it to <code>0</code> turns off blurring. Using a high <code>strength</code> may reveal
artefacts in the calculated shading, especially if the <code>height_map</code> is
low-detail. Adding a slight blur may remove some of those artefacts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blend_type</code></td>
<td>
<p>A blend type as used in <code>with_blend()</code> for adding the
calculated shading to the layer. Should generally be left as-is</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be passed on to methods. See
the documentation of supported object for a description of
object specific arguments.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Depending on the input, either a <code>grob</code>, <code>Layer</code>, list of <code>Layer</code>s,
<code>guide</code>, or <code>element</code> object. Assume the output can be used in the same
context as the input.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)
volcano_long &lt;- data.frame(
  x = as.vector(col(volcano)),
  y  = as.vector(row(volcano)),
  z = as.vector(volcano)
)
ggplot(volcano_long, aes(y, x)) +
  as_reference(
    geom_raster(aes(alpha = z), fill = 'black', interpolate = TRUE, show.legend = FALSE),
    id = 'height_map'
  ) +
  with_shade(
    geom_contour_filled(aes(z = z, fill = after_stat(level))),
    height_map = ch_alpha('height_map'),
    azimuth = 150,
    height = 5,
    sigma = 10
  ) +
  coord_fixed() +
  guides(fill = guide_coloursteps(barheight = 10))


</code></pre>


</div>