<div class="container">

<table style="width: 100%;"><tr>
<td>layout_as_metromap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Metro Map Layout</h2>

<h3>Description</h3>

<p>Metro map layout based on multicriteria optimization
</p>


<h3>Usage</h3>

<pre><code class="language-R">layout_as_metromap(object, xy, l = 2, gr = 0.0025, w = rep(1, 5), bsize = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>original graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xy</code></td>
<td>
<p>initial layout of the original graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l</code></td>
<td>
<p>desired multiple of grid point spacing. (l*gr determines desired edge length)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gr</code></td>
<td>
<p>grid spacing. (l*gr determines desired edge length)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>weight vector for criteria (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bsize</code></td>
<td>
<p>number of grid points a station can move away rom its original position</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function optimizes the following five criteria using a hill climbing algorithm:
</p>

<ul>
<li> <p><em>Angular Resolution Criterion</em>: The angles of incident edges at each station should be maximized, because if there is only a small angle between any two adjacent edges, then it can become difficult to distinguish between them
</p>
</li>
<li> <p><em>Edge Length Criterion</em>: The edge lengths across the whole map should be approximately equal to ensure regular spacing between stations. It is based on the preferred multiple, l, of the grid spacing, g. The purpose of the criterion is to penalize edges that are longer than or shorter than lg.
</p>
</li>
<li> <p><em>Balanced Edge Length Criterion</em>: The length of edges incident to a particular station should be similar
</p>
</li>
<li> <p><em>Line Straightness Criterion</em>: (not yet implemented) Edges that form part of a line should, where possible, be co-linear either side of each station that the line passes through
</p>
</li>
<li> <p><em>Octilinearity Criterion</em>: Each edge should be drawn horizontally, vertically, or diagonally at 45 degree, so we penalize edges that are not at a desired angle
</p>
</li>
</ul>
<h3>Value</h3>

<p>new coordinates for stations
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>References</h3>

<p>Stott, Jonathan, et al. "Automatic metro map layout using multicriteria optimization." IEEE Transactions on Visualization and Computer Graphics 17.1 (2010): 101-114.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># the algorithm has problems with parallel edges
library(igraph)
g &lt;- simplify(metro_berlin)
xy &lt;- cbind(V(g)$lon, V(g)$lat) * 100

# the algorithm is not very stable. try playing with the parameters
## Not run: 
xy_new &lt;- layout_as_metromap(g, xy, l = 2, gr = 0.5, w = c(100, 100, 1, 1, 100), bsize = 35)

## End(Not run)
</code></pre>


</div>