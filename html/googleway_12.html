<div class="container">

<table style="width: 100%;"><tr>
<td>add_polygons</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add polygon</h2>

<h3>Description</h3>

<p>Add a polygon to a google map.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_polygons(
  map,
  data = get_map_data(map),
  polyline = NULL,
  lat = NULL,
  lon = NULL,
  id = NULL,
  pathId = NULL,
  stroke_colour = NULL,
  stroke_weight = NULL,
  stroke_opacity = NULL,
  fill_colour = NULL,
  fill_opacity = NULL,
  info_window = NULL,
  mouse_over = NULL,
  mouse_over_group = NULL,
  draggable = NULL,
  editable = NULL,
  update_map_view = TRUE,
  layer_id = NULL,
  z_index = NULL,
  digits = 4,
  palette = NULL,
  legend = F,
  legend_options = NULL,
  load_interval = 0,
  focus_layer = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>a googleway map object created from <code>google_map()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data frame containing at least a <code>polyline</code> column,
or a <code>lat</code> and a <code>lon</code> column. If Null, the data passed into
<code>google_map()</code> will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polyline</code></td>
<td>
<p>string specifying the column of <code>data</code> containing
the encoded polyline</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat</code></td>
<td>
<p>string specifying the column of <code>data</code> containing the 'latitude'
coordinates. If left NULL, a best-guess will be made</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lon</code></td>
<td>
<p>string specifying the column of <code>data</code> containing the 'longitude'
coordinates. If left NULL, a best-guess will be made</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>string specifying the column containing an identifier for a shape</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pathId</code></td>
<td>
<p>string specifying the column containing an identifer for each
path that forms the complete polygon. Not required when using <code>polyline</code>,
as each polyline is itself a path.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stroke_colour</code></td>
<td>
<p>either a string specifying the column of <code>data</code> containing
the stroke colour of each shape, or a valid hexadecimal numeric HTML style to
be applied to all the shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stroke_weight</code></td>
<td>
<p>either a string specifying the column of <code>data</code> containing
the stroke weight of each shape, or a number indicating the width of pixels
in the line to be applied to all the shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stroke_opacity</code></td>
<td>
<p>either a string specifying the column of <code>data</code> containing
the stroke opacity of each shape, or a value between 0 and 1 that will be
applied to all the shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_colour</code></td>
<td>
<p>either a string specifying the column of <code>data</code> containing
the fill colour of each shape, or a valid hexadecimal numeric HTML style to
be applied to all the shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_opacity</code></td>
<td>
<p>either a string specifying the column of <code>data</code> containing
the fill opacity of each shape, or a value between 0 and 1 that will be applied
to all the shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>info_window</code></td>
<td>
<p>string specifying the column of data to display in an info
window when a shape is clicked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mouse_over</code></td>
<td>
<p>string specifying the column of data to display when the
mouse rolls over the shape</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mouse_over_group</code></td>
<td>
<p>string specifying the column of data specifying which
groups of shapes to highlight on mouseover</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draggable</code></td>
<td>
<p>string specifying the column of <code>data</code> defining if
the polygon is 'draggable'. The column of data should be logical (either TRUE or FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>editable</code></td>
<td>
<p>string specifying the column of <code>data</code> defining if the polygon
is 'editable' (either TRUE or FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>update_map_view</code></td>
<td>
<p>logical specifying if the map should re-centre according to
the shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer_id</code></td>
<td>
<p>single value specifying an id for the layer. Use this value to
distinguish between shape layers for when using any <code>update_</code> function, and
for separating legends.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z_index</code></td>
<td>
<p>single value specifying where the circles appear in the layering
of the map objects. Layers with a higher <code>z_index</code> appear on top of those with
a lower <code>z_index</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>integer. Use this parameter to specify how many digits (decimal places)
should be used for the latitude / longitude coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>a function, or list of functions, that generates hex colours
given a single number as an input. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>either a logical indiciating if the legend(s) should be displayed, or
a named list indicating which colour attributes should be included in the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_options</code></td>
<td>
<p>A list of options for controlling the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load_interval</code></td>
<td>
<p>time in miliseconds to wait between plotting each shape</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>focus_layer</code></td>
<td>
<p>logical indicating if the map should re-centre according to this layer</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>z_index</code> values define the order in which objects appear on the map.
Those with a higher value appear on top of those with a lower value. The default
order of objects is (1 being underneath all other objects)
</p>

<ul>
<li>
<p>1. Polygon
</p>
</li>
<li>
<p>2. Rectangle
</p>
</li>
<li>
<p>3. Polyline
</p>
</li>
<li>
<p>4. Circle
</p>
</li>
</ul>
<p>Markers are always the top layer
</p>


<h3>palette</h3>

<p>The <code>palette</code> is used to specify the colours that will map to variables.
You can specify a single function to map to all variables, or a named list
that specifies a separate function to map to each variable. The elements must
be named either <code>fill_colour</code> or <code>stroke_colour</code>, and their values
are the colour generating functions. The default is <code>viridisLite::viridis</code>
</p>
<p>The <code>legend_options</code> can be used to control the appearance of the legend.
This should be a named list, where the names are one of
</p>

<ul>
<li>
<p>position - one of <code>c("TOP_LEFT", "TOP_CENTER", "TOP_RIGHT", "RIGHT_TOP",
  "RIGHT_CENTER", "RIGHT_BOTTOM", "BOTTOM_RIGHT", "BOTTOM_CENTER", "BOTTOM_LEFT",
  "LEFT_BOTTOM", "LEFT_CENTER", "LEFT_TOP")</code>
</p>
</li>
<li>
<p>css - a string of valid <code>css</code> for controlling the appearance of the legend
</p>
</li>
<li>
<p>title - a string to use for the title of the legend
</p>
</li>
</ul>
<p>if <code>legend_options</code> are NULL, the default values will apply
</p>
<p>If you are displaying two legends, one for <code>stroke_colour</code> and one
for <code>fill_colour</code>, you can specify different options for the different
colour attributes. See examples for add_circles.
</p>


<h3>Note</h3>

<p>A polygon represents an area enclosed by a closed path. Polygon objects
are similar to polylines in that they consist of a series of coordinates in an ordered sequence.
Polygon objects can describe complex shapes, including
</p>

<ul>
<li>
<p>Multiple non-contiguous areas defined by a single polygon
</p>
</li>
<li>
<p>Areas with holes in them
</p>
</li>
<li>
<p>Intersections of one or more areas
</p>
</li>
</ul>
<p>To define a complex shape, you use a polygon with multiple paths.
</p>
<p>To create a hole in a polygon, you need to create two paths, one inside the other.
To create the hole, the coordinates of the inner path must be wound in the opposite
order to those defining the outer path. For example, if the coordinates of
the outer path are in clockwise order, then the inner path must be anti-clockwise.
</p>
<p>You can represent a polygon in one of three ways
</p>

<ul>
<li>
<p>as a series of coordinates defining a path (or paths) with both an
<code>id</code> and <code>pathId</code> argument that make up the polygon
</p>
</li>
<li>
<p>as an encoded polyline using an <code>id</code> column to specify multiple
polylines for a polygon
</p>
</li>
<li>
<p>as a list column in a data.frame, where each row of the data.frame
contains the polylines that comprise the polygon
</p>
</li>
</ul>
<p>See Examples
</p>


<h3>See Also</h3>

<p>encode_pl
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

map_key &lt;- 'your_api_key'

## polygon with a hole - Bermuda triangle
## using one row per polygon, and a list-column of encoded polylines
pl_outer &lt;- encode_pl(lat = c(25.774, 18.466,32.321),
      lon = c(-80.190, -66.118, -64.757))

pl_inner &lt;- encode_pl(lat = c(28.745, 29.570, 27.339),
       lon = c(-70.579, -67.514, -66.668))

df &lt;- data.frame(id = c(1, 1),
       polyline = c(pl_outer, pl_inner),
       stringsAsFactors = FALSE)

df &lt;- aggregate(polyline ~ id, data = df, list)

google_map(key = map_key, height = 800) %&gt;%
    add_polygons(data = df, polyline = "polyline")

## the same polygon, but using an 'id' to specify the polygon
df &lt;- data.frame(id = c(1,1),
       polyline = c(pl_outer, pl_inner),
       stringsAsFactors = FALSE)

google_map(key = map_key, height = 800) %&gt;%
    add_polygons(data = df, polyline = "polyline", id = "id")

## the same polygon, specified using coordinates, and with a second independent
## polygon
df &lt;- data.frame(myId = c(1,1,1,1,1,1,2,2,2),
      lineId = c(1,1,1,2,2,2,1,1,1),
      lat = c(26.774, 18.466, 32.321, 28.745, 29.570, 27.339, 22, 23, 22),
      lon = c(-80.190, -66.118, -64.757, -70.579, -67.514, -66.668, -50, -49, -51),
      colour = c(rep("#00FF0F", 6), rep("#FF00FF", 3)),
      stringsAsFactors = FALSE)

google_map(key = map_key) %&gt;%
  add_polygons(data = df, lat = 'lat', lon = 'lon', id = 'myId', pathId = 'lineId',
               fill_colour = 'colour')




## End(Not run)

</code></pre>


</div>