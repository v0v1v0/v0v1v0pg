<div class="container">

<table style="width: 100%;"><tr>
<td>gbm.loop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Coefficient Of Variation surfaces for gbm.auto predictions</h2>

<h3>Description</h3>

<p>Bagging introduces stochasticity which can result in sizeable variance in
output predictions by gbm.auto for small datasets. This function runs a user-
specified number of loops through the same gbm.auto parameter combinations
and calculates the Coefficient Of Variation in the predicted abundance scores
for each site aka cell. This can be mapped, to spatially demonstrate the
output variance range.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gbm.loop(
  loops = 10,
  savedir = tempdir(),
  savecsv = TRUE,
  calcpreds = TRUE,
  varmap = TRUE,
  measure = "CPUE",
  cleanup = FALSE,
  grids = NULL,
  samples,
  expvar,
  resvar,
  randomvar = FALSE,
  tc = c(2),
  lr = c(0.01),
  bf = 0.5,
  n.trees = 50,
  ZI = "CHECK",
  fam1 = c("bernoulli", "binomial", "poisson", "laplace", "gaussian"),
  fam2 = c("gaussian", "bernoulli", "binomial", "poisson", "laplace"),
  simp = TRUE,
  gridslat = 2,
  gridslon = 1,
  multiplot = FALSE,
  cols = grey.colors(1, 1, 1),
  linesfiles = TRUE,
  smooth = FALSE,
  savegbm = FALSE,
  loadgbm = NULL,
  varint = FALSE,
  map = TRUE,
  shape = NULL,
  RSB = FALSE,
  BnW = FALSE,
  alerts = FALSE,
  pngtype = c("cairo-png", "quartz", "Xlib"),
  gaus = TRUE,
  MLEvaluate = TRUE,
  runautos = TRUE,
  Min.Inf = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>loops</code></td>
<td>
<p>The number of loops required, integer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savedir</code></td>
<td>
<p>Save outputs to a temporary directory (default) else change to
current directory e.g. "/home/me/folder". Do not use getwd() here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savecsv</code></td>
<td>
<p>Save coefficients of variation in simple &amp; extended format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calcpreds</code></td>
<td>
<p>Calculate coefficients of variation of predicted abundance?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varmap</code></td>
<td>
<p>Create a map of the coefficients of variation outputs?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>Map legend, coefficients of variation of what? Default CPUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cleanup</code></td>
<td>
<p>Remove gbm.auto-generated directory each loop? Default FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grids</code></td>
<td>
<p>See gbm.auto help for all subsequent params.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samples</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expvar</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resvar</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomvar</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tc</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lr</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bf</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.trees</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ZI</code></td>
<td>
<p>See gbm.auto help. Choose one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fam1</code></td>
<td>
<p>See gbm.auto help. Choose one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fam2</code></td>
<td>
<p>See gbm.auto help. Choose one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simp</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gridslat</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gridslon</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multiplot</code></td>
<td>
<p>See gbm.auto help. Default False</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linesfiles</code></td>
<td>
<p>See gbm.auto help; TRUE or linesfiles calculations fail.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savegbm</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loadgbm</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varint</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RSB</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BnW</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alerts</code></td>
<td>
<p>See gbm.auto help; default FALSE as frequent use can crash
RStudio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pngtype</code></td>
<td>
<p>See gbm.auto help. Choose one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gaus</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MLEvaluate</code></td>
<td>
<p>See gbm.auto help.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runautos</code></td>
<td>
<p>Run gbm.autos, default TRUE, turn off to only collate
numbered-folder results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Min.Inf</code></td>
<td>
<p>Dummy param for package testing for CRAN, ignore.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional params for gbm.auto sub-functions including gbm.step.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Thanks to a 2023 improvement to gbm.auto and gbm.loop,
</p>


<h3>Value</h3>

<p>Returns a data frame of lat, long, 1 predicted abundance per loop,
and a final variance score per cell.
</p>


<h3>Author(s)</h3>

<p>Simon Dedman, <a href="mailto:simondedman@gmail.com">simondedman@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Not run: downloads and saves external data.
library("gbm.auto")
data(grids) # load grids
data(samples) # load samples
gbmloopexample &lt;- gbm.loop(loops = 2, samples = samples,
grids = grids, expvar = c(4:10), resvar = 11, simp = F)


</code></pre>


</div>