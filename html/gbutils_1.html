<div class="container">

<table style="width: 100%;"><tr>
<td>adjacencyOfClasses</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjacency graph of classes in packages</h2>

<h3>Description</h3>

<p>Get inheritance graph of classes in one or more packages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">adjacencyOfClasses(packages, externalSubclasses = FALSE, 
                   result = c("default", "matrixOfPairs", "adjacencyMatrix"), 
                   Wolfram = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>packages</code></td>
<td>
<p>names of one or more packages, a character vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>externalSubclasses</code></td>
<td>

<p>if <code>TRUE</code>, exclude subtrees of classes not defined in any of the
packages listed in argument <code>packages</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>

<p>format of the result, can be missing or one of
<code>"default"</code>, <code>"matrixOfPairs"</code>, <code>"adjacencyMatrix"</code>,
see Details. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Wolfram</code></td>
<td>

<p>if <code>TRUE</code>, print a suitable graph expression to be run by
Mathematica, see Details.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code style="white-space: pre;">⁠
⁠</code>
</p>
<p><code>adjacencyOfClasses</code> computes a graph representation of the
dependencies of S4 classes defined in one or more packages (as
specified by argument <code>package</code>) and returns a list.  The
contents of the list returned by <code>adjacencyOfClasses</code> depend on
argument <code>result</code>.  Partial matching is used for the value of
argument <code>result</code>, e.g., "adj" is equivalent to
"adjacencyMatrix".
</p>
<p>If <code>externalSubclasses = FALSE</code>, the default, subclasses defined
outside the requested packages are excluded. This is typically what
the user will be looking for. To get a complete tree, set
<code>externalSubclasses</code> to <code>TRUE</code>.
</p>
<p>The S4 classes are represented by the vertices of the graph.
Component <code>"vertices"</code> of the result gives them as a character
vector. References below to the <code class="reqn">i</code>th class or vertex
correspond to the order in this vector. No attempt is made to arrange
the vertices in a particular order. An empty list is returned if this
vector is empty.
</p>
<p>If <code>result</code> is missing or <code>"default"</code>, the edges of the
graph are represented by a character vector. Each  edge is represented
by a string with an arrow <code>"-&gt;"</code> from a superclass to a
subclass. Here is an example that shows that this package defines one
class, which is a subclass of <code>"list"</code>:
</p>
<pre>adjacencyOfClasses("gbutils")
##: $vertices
##: [1] "objectPad" "list"     

##: $edges
##: [1] "list -&gt; objectPad"

</pre>

<p>This illustrates the effect of argument <code>"externalSubclasses"</code>:
</p>
<pre>adjacencyOfClasses("gbutils", externalSubclasses = TRUE)
##: $vertices
##: [1] "objectPad" "list"      "vector"   

##: $edges
##: [1] "list -&gt; objectPad" "vector -&gt; list"   

</pre>

<p>The edge, "vector -&gt; list" was omitted in the previous example since
this relationship is defined elsewhere. This resulted in class
<code>"vector"</code> being dropped also from the vertices, since it is not
defined in <code>"gbutils"</code> and none of the remaining edges contains
it.
</p>
<p>If <code>result</code> is <code>"matrixOfPairs"</code>, the edges of the
graph are represented by a character matrix with two columns, where each row 
represents an edge from the element in the first column to the element
in the second. In this example there is one edge, so the matrix
contains one row:
</p>
<pre>adjacencyOfClasses("gbutils", result = "matrixOfPairs")
##: $vertices
##: [1] "objectPad" "list"     

##: $edges
##:      [,1]   [,2]       
##: [1,] "list" "objectPad"

</pre>

<p>If <code>result</code> is <code>"adjacencyMatrix"</code>, the adjacency matrix of
the graph is in component "AM" of the returned list. Element <code class="reqn">(i,j)</code> of
this matrix is equal to one, if the <code class="reqn">j</code>th class is a superclass
to the <code class="reqn">i</code>th. In other words, the <code class="reqn">j</code>th column gives the
superclasses of the <code class="reqn">i</code>th class. Here the element in position
(1,2) is non-zero, so <code>"list"</code> is the superclass of <code>"objectPad"</code>:
</p>
<pre>adjacencyOfClasses("gbutils", result = "adjacencyMatrix")
##: $vertices
##: [1] "objectPad" "list"     

##: $AM
##:           objectPad list
##: objectPad         0    1
##: list              0    0

</pre>

<p>Note that including the vertices in the result is not redundant, since
some may not be in any edge. This can happen if a class does not
have any superclasses and subclasses.
</p>
<p>As described above the result is not converted to a graph object but
it can be fed to functions provided by a number of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> packages. 
</p>
<p>An additional option is to use argument <code>Wolfram</code>.  If
<code>Wolfram</code> is <code>TRUE</code>, a suitable Mathematica command is
printed. It can be evaluated in a Mathematica session (e.g., by
copy/paste) to produce a graphical representation of the graph and/or
be manipulated further by it. This feature is a side effect, the
return value of <code>adjacencyOfClasses</code> is as controlled by the
other arguments. For example, the return value below is as without
argument <code>"Wolfram"</code> but, in addition, the printed line defines a
Wolfram language graph in terms of its vertices and edges:
</p>
<pre>adjacencyOfClasses("gbutils", Wolfram = TRUE)
##: Graph[{objectPad,list}, {list -&gt; objectPad}, VertexLabels -&gt; Automatic] 

##: $vertices
##: [1] "objectPad" "list"     

##: $edges
##: [1] "list -&gt; objectPad"

</pre>

<p>Setting <code>result = "adjacencyMatrix"</code> in the last <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> command
exports the graph in terms of its adjacency matrix:
</p>
<pre>adjacencyOfClasses("gbutils", Wolfram = TRUE, result = "adjacencyMatrix")
##: AdjacencyGraph[{objectPad,list}, {{0, 0},
##: {1, 0} }
##: , VertexLabels -&gt; Automatic] 

##: $vertices
##: [1] "objectPad" "list"     

##: $AM
##:           objectPad list
##: objectPad         0    1
##: list              0    0

</pre>



<h3>Value</h3>

<p>a list with some of the following components (as described in Details):
</p>
<table>
<tr style="vertical-align: top;">
<td><code>vertices</code></td>
<td>
<p>a character vector of S4 class names,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edges</code></td>
<td>
<p>the edges of the graph, in the format controlled by
argument <code>results</code> (not present when <code>result</code> is equal to
<code>"adjacencyMatrix"</code>),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AM</code></td>
<td>
<p>the adjacency matrix of the graph (present only when
<code>result</code> is <code>"adjacencyMatrix"</code>).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>References</h3>

<p>Gentleman R, Whalen E, Huber W, Falcon S (2017).
<em>graph: A package to handle graph data structures</em>.
R package version 1.56.0.
</p>
<p>Hansen KD, Gentry J, Long L, Gentleman R, Falcon S, Hahne F, Sarkar D (2017).
<em>Rgraphviz: Provides plotting capabilities for R graph objects</em>.
R package version 2.22.0.
</p>
<p>Maechler M (2015).
<em>classGraph: Construct Graphs of S4 Class Hierarchies</em>.
(partly based on code from Robert Gentleman) R package version 0.7-5, <a href="https://CRAN.R-project.org/package=classGraph">https://CRAN.R-project.org/package=classGraph</a>.
</p>


<h3>See Also</h3>

<p><code>?methods::classesToAM</code> which is used for the main computation
here,
</p>
<p>Maechler (2015) for a suite of related functions.
Gentleman et al. (2017) for creation and manipulation of
graphs, and Hansen et al. (2017) for
visualisation of graphs.
</p>


<h3>Examples</h3>

<pre><code class="language-R">adjacencyOfClasses("gbutils")
adjacencyOfClasses("gbutils", TRUE)

adjacencyOfClasses("gbutils", FALSE, "matrixOfPairs")
adjacencyOfClasses("gbutils", TRUE,  "matrixOfPairs")

adjacencyOfClasses("gbutils", FALSE, "adjacencyMatrix")
adjacencyOfClasses("gbutils", TRUE,  "adjacencyMatrix")

## as above, also represent the graph using the edges
adjacencyOfClasses("gbutils", Wolfram = TRUE)
adjacencyOfClasses("gbutils", TRUE, Wolfram = TRUE)

## here the graph is represented by the adjacency matrix: 
adjacencyOfClasses("gbutils", FALSE, "adjacencyMatrix", Wolfram = TRUE)
adjacencyOfClasses("gbutils", TRUE,  "adjacencyMatrix", Wolfram = TRUE)

if(requireNamespace("graph", quietly = TRUE) &amp;&amp;
   requireNamespace("Rgraphviz", quietly = TRUE)) withAutoprint({
    ## another package
    adjacencyOfClasses("graph")
    ac1 &lt;- adjacencyOfClasses("graph", FALSE, "adjacencyMatrix")
    ## note the use of t() below
    gr_ac1 &lt;- graph::graphAM(adjMat = t(ac1$AM), edgemode = "directed")
    if(require("Rgraphviz", quietly = TRUE, warn.conflicts = FALSE))
        plot(gr_ac1)
    ## more than one package
    ac2 &lt;- adjacencyOfClasses(c("graph", "Rgraphviz"), FALSE, "adjacencyMatrix")
    gr_ac2 &lt;- graph::graphAM(adjMat = t(ac2$AM), edgemode = "directed")
    if(require("Rgraphviz", quietly = TRUE))
        plot(gr_ac2)
})
</code></pre>


</div>