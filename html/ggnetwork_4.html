<div class="container">

<table style="width: 100%;"><tr>
<td>fortify.network</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fortify method for networks of class <code>network</code>
</h2>

<h3>Description</h3>

<p>See the vignette at <a href="https://briatte.github.io/ggnetwork/">https://briatte.github.io/ggnetwork/</a> for a
description of both this function and the rest of the <code>ggnetwork</code>
package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'network'
fortify(
  model,
  data = NULL,
  layout = "fruchtermanreingold",
  weights = NULL,
  arrow.gap = ifelse(network::is.directed(model), 0.025, 0),
  by = NULL,
  scale = TRUE,
  stringsAsFactors = getOption("stringsAsFactors", FALSE),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>an object of class <code>network</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>not used by this method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>
<p>a network layout supplied by <code>gplot.layout</code>,
such as <code>"fruchtermanreingold"</code> (the default), or a two-column matrix
with as many rows as there are nodes in the network, in which case the
matrix is used as nodes coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>the name of an edge attribute to use as edge weights when
computing the network layout, if the layout supports such weights (see
'Details').
Defaults to <code>NULL</code> (no edge weights).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrow.gap</code></td>
<td>
<p>a parameter that will shorten the network edges in order to
avoid overplotting edge arrows and nodes; defaults to <code>0</code> when the
network is undirected (no edge shortening), or to <code>0.025</code> when the
network is directed. Small values near <code>0.025</code> will generally achieve
good results when the size of the nodes is reasonably small.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>a character vector that matches an edge attribute, which will be
used to generate a data frame that can be plotted with
<code>facet_wrap</code> or <code>facet_grid</code>. The
nodes of the network will appear in all facets, at the same coordinates.
Defaults to <code>NULL</code> (no faceting).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>whether to (re)scale the layout coordinates. Defaults to
<code>TRUE</code>, but should be set to <code>FALSE</code> if <code>layout</code> contains
meaningful spatial coordinates, such as latitude and longitude.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stringsAsFactors</code></td>
<td>
<p>whether vertex and edge attributes should be
converted to factors if they are of class <code>character</code>. Defaults to
the value of <code>getOption("stringsAsFactors")</code>, which is <code>FALSE</code>
by default: see <code>data.frame</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters for the <code>layout</code> argument; see
<code>gplot.layout</code> for available options.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>fortify.network</code> will return a warning if it finds duplicated
edges after converting the network to an edge list. Duplicated edges should
be eliminated in favour of single weighted edges before using a network
layout that supports edge weights, such as the Kamada-Kawai force-directed
placement algorithm.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (require(ggplot2) &amp;&amp; require(network)) {

  # source: ?network::flo
  data(flo)

  # data example
  ggnetwork(flo)

  # plot example
  ggplot(ggnetwork(flo), aes(x, y, xend = xend, yend = yend)) +
    geom_edges(alpha = 0.5) +
    geom_nodes(size = 12, color = "white") +
    geom_nodetext(aes(label = vertex.names), fontface = "bold") +
    theme_blank()

  # source: ?network::emon
  data(emon)

  # data example
  ggnetwork(emon[[1]], layout = "target", niter = 100)

  # data example with edge weights
  ggnetwork(emon[[1]], layout = "kamadakawai", weights = "Frequency")

  # plot example with straight edges
  ggplot(
    ggnetwork(emon[[1]], layout = "kamadakawai", arrow.gap = 0.025),
    aes(x, y, xend = xend, yend = yend)
  ) +
    geom_edges(aes(color = Frequency),
      arrow = arrow(length = unit(10, "pt"), type = "closed")
    ) +
    geom_nodes(aes(size = Formalization)) +
    scale_color_gradient(low = "grey50", high = "tomato") +
    scale_size_area(breaks = 1:3) +
    theme_blank()

  # plot example with curved edges
  ggplot(
    ggnetwork(emon[[1]], layout = "kamadakawai", arrow.gap = 0.025),
    aes(x, y, xend = xend, yend = yend)
  ) +
    geom_edges(aes(color = Frequency),
      curvature = 0.1,
      arrow = arrow(length = unit(10, "pt"), type = "open")
    ) +
    geom_nodes(aes(size = Formalization)) +
    scale_color_gradient(low = "grey50", high = "tomato") +
    scale_size_area(breaks = 1:3) +
    theme_blank()

  # facet by edge attribute
  ggplot(
    ggnetwork(emon[[1]], arrow.gap = 0.02, by = "Frequency"),
    aes(x, y, xend = xend, yend = yend)
  ) +
    geom_edges(arrow = arrow(length = unit(5, "pt"), type = "closed")) +
    geom_nodes() +
    theme_blank() +
    facet_grid(. ~ Frequency, labeller = label_both)

  # user-provided layout
  ggplot(
    ggnetwork(emon[[1]], layout = matrix(runif(28), ncol = 2)),
    aes(x, y, xend = xend, yend = yend)
  ) +
    geom_edges(arrow = arrow(length = unit(5, "pt"), type = "closed")) +
    geom_nodes() +
    theme_blank()
}

</code></pre>


</div>