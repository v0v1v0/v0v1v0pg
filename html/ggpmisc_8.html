<div class="container">

<table style="width: 100%;"><tr>
<td>check_poly_formula</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Validate model formula as a polynomial</h2>

<h3>Description</h3>

<p>Analyse a model formula to determine if it describes a polynomial with
terms in order of increasing powers, and fulfils the expectations of the
algorithm used to generate the equation-label.
</p>


<h3>Usage</h3>

<pre><code class="language-R">check_poly_formula(
  formula,
  x.name = "x",
  warning.text = "'formula' not an increasing polynomial: 'eq.label' is NA!"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A model formula in <code>x.name</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.name</code></td>
<td>
<p>character The name of the explanatory variable in the formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warning.text</code></td>
<td>
<p>character string.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This validation check could fail to validate some valid formulas as
it is difficult to test, or even list all possible variations of valid
formulas. Consequently, this function triggers a warning in case of
failure, not an error. Furthermore, the statistics only fail to build the
correct equation label, but in most cases other output is still usable with
models that are not strictly polynomials.
</p>
<p>Model formulas with and without an intercept term are accepted as valid, as
<code>+0</code>, <code>-1</code> and <code>+1</code> are accepted. If a single power term is
included, it is taken as a transformation and any power is accepted. If two
or more terms are powers, they are expected in increasing order with no
missing intermediate terms. If <code>poly()</code> is used in the model formula,
a single term is expected.
</p>
<p>This function checks that all power terms defined using <code>^</code> are
protected with "as is" <code>I()</code>, as otherwise they are not powers but
instead part of the formula specification. It also checks that an argument
is passed to parameter <code>raw</code> of function <code>poly()</code> if present.
</p>
<p>If the warning text is <code>NULL</code> or <code>character(0)</code> no warning is
issued. The caller always receives a length-1 logical as return value.
</p>


<h3>Value</h3>

<p>A logical, TRUE if the formula describes an increasing polynomial,
and FALSE otherwise. As a side-effect a warning is triggered when
validation fails.
</p>


<h3>Examples</h3>

<pre><code class="language-R">check_poly_formula(y ~ 1)
check_poly_formula(y ~ x)
check_poly_formula(y ~ x^3)
check_poly_formula(y ~ x + 0)
check_poly_formula(y ~ x - 1)
check_poly_formula(y ~ x + 1)
check_poly_formula(y ~ x + I(x^2))
check_poly_formula(y ~ 1 + x + I(x^2))
check_poly_formula(y ~ I(x^2) + x)
check_poly_formula(y ~ x + I(x^2) + I(x^3))
check_poly_formula(y ~ I(x) + I(x^2) + I(x^3))
check_poly_formula(y ~ I(x^2) + I(x^3))
check_poly_formula(y ~ I(x^2) + I(x^4))
check_poly_formula(y ~ x + I(x^3) + I(x^2))

check_poly_formula(y ~ poly(x, 2, raw = TRUE)) # use for label
check_poly_formula(y ~ poly(x, 2)) # orthogonal polynomial

</code></pre>


</div>