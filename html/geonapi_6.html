<div class="container">

<table style="width: 100%;"><tr>
<td>GNOpenAPIManager</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>GNOpenAPIManager</h2>

<h3>Description</h3>

<p>GNOpenAPIManager
</p>
<p>GNOpenAPIManager
</p>


<h3>Format</h3>

<p><code>R6Class</code> object.
</p>


<h3>Value</h3>

<p>Object of <code>R6Class</code> with methods for communication with
the REST API of a GeoNetwork instance using the legacy API.
</p>


<h3>Super class</h3>

<p><code>geonapi::GNAbstractManager</code> -&gt; <code>GNOpenAPIManager</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-GNOpenAPIManager-new"><code>GNOpenAPIManager$new()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-login"><code>GNOpenAPIManager$login()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-getGroups"><code>GNOpenAPIManager$getGroups()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-getTags"><code>GNOpenAPIManager$getTags()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-getCategories"><code>GNOpenAPIManager$getCategories()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-getMetadataByUUID"><code>GNOpenAPIManager$getMetadataByUUID()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-insertRecord"><code>GNOpenAPIManager$insertRecord()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-insertMetadata"><code>GNOpenAPIManager$insertMetadata()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-updateMetadata"><code>GNOpenAPIManager$updateMetadata()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-deleteMetadata"><code>GNOpenAPIManager$deleteMetadata()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-uploadAttachment"><code>GNOpenAPIManager$uploadAttachment()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-publishThumbnail"><code>GNOpenAPIManager$publishThumbnail()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-doiCheckPreConditions"><code>GNOpenAPIManager$doiCheckPreConditions()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-createDOI"><code>GNOpenAPIManager$createDOI()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-deleteDOI"><code>GNOpenAPIManager$deleteDOI()</code></a>
</p>
</li>
<li> <p><a href="#method-GNOpenAPIManager-clone"><code>GNOpenAPIManager$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="ERROR"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-ERROR"><code>geonapi::GNAbstractManager$ERROR()</code></a></span></li>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="INFO"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-INFO"><code>geonapi::GNAbstractManager$INFO()</code></a></span></li>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="WARN"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-WARN"><code>geonapi::GNAbstractManager$WARN()</code></a></span></li>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="getClassName"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-getClassName"><code>geonapi::GNAbstractManager$getClassName()</code></a></span></li>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="getLang"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-getLang"><code>geonapi::GNAbstractManager$getLang()</code></a></span></li>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="getUrl"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-getUrl"><code>geonapi::GNAbstractManager$getUrl()</code></a></span></li>
<li><span class="pkg-link" data-pkg="geonapi" data-topic="GNAbstractManager" data-id="logger"><a href="../../geonapi/html/GNAbstractManager.html#method-GNAbstractManager-logger"><code>geonapi::GNAbstractManager$logger()</code></a></span></li>
</ul></details><hr>
<a id="method-GNOpenAPIManager-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>This method is used to instantiate a <code>GNOpenAPIManager</code> with the <code>url</code> of the
GeoNetwork and credentials to authenticate (<code>user</code>/<code>pwd</code>).
</p>
<p>The <code>keyring_backend</code> can be set to use a different backend for storing 
the Geonetwork password/token with <span class="pkg">keyring</span> (Default value is 'env').
</p>
<p>The logger can be either NULL, "INFO" (with minimum logs), or "DEBUG" 
(for complete curl http calls logs)
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$new(
  url,
  user = NULL,
  pwd = NULL,
  version,
  logger = NULL,
  keyring_backend = "env"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>url</code></dt>
<dd>
<p>url</p>
</dd>
<dt><code>user</code></dt>
<dd>
<p>user</p>
</dd>
<dt><code>pwd</code></dt>
<dd>
<p>pwd</p>
</dd>
<dt><code>version</code></dt>
<dd>
<p>version</p>
</dd>
<dt><code>logger</code></dt>
<dd>
<p>logger</p>
</dd>
<dt><code>keyring_backend</code></dt>
<dd>
<p>keyring backend</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-login"></a>



<h4>Method <code>login()</code>
</h4>

<p>This methods attempts a connection to GeoNetwork REST API. User internally
during initialization of <code>GNLegacyAPIManager</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$login(user, pwd)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>user</code></dt>
<dd>
<p>user</p>
</dd>
<dt><code>pwd</code></dt>
<dd>
<p>pwd</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-getGroups"></a>



<h4>Method <code>getGroups()</code>
</h4>

<p>Retrieves the list of user groups available in Geonetwork
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$getGroups()</pre></div>



<h5>Returns</h5>

<p>an object of class <code>data.frame</code>
</p>


<hr>
<a id="method-GNOpenAPIManager-getTags"></a>



<h4>Method <code>getTags()</code>
</h4>

<p>Retrieves the list of tags (categories) available in Geonetwork
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$getTags()</pre></div>



<h5>Returns</h5>

<p>an object of class <code>data.frame</code>
</p>


<hr>
<a id="method-GNOpenAPIManager-getCategories"></a>



<h4>Method <code>getCategories()</code>
</h4>

<p>Retrieves the list of categories (same as tags) available in Geonetwork
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$getCategories()</pre></div>



<h5>Returns</h5>

<p>an object of class <code>data.frame</code>
</p>


<hr>
<a id="method-GNOpenAPIManager-getMetadataByUUID"></a>



<h4>Method <code>getMetadataByUUID()</code>
</h4>

<p>Get a metadata by UUID.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$getMetadataByUUID(
  uuid,
  addSchemaLocation = TRUE,
  increasePopularity = TRUE,
  approved = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>uuid</code></dt>
<dd>
<p>uuid</p>
</dd>
<dt><code>addSchemaLocation</code></dt>
<dd>
<p>add schema location. Default is <code>TRUE</code></p>
</dd>
<dt><code>increasePopularity</code></dt>
<dd>
<p>increase popularity. Default is <code>TRUE</code></p>
</dd>
<dt><code>approved</code></dt>
<dd>
<p>approved</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Returns an object of class <code>ISOMetadata</code> (ISO 19115)
or <code>ISOFeatureCatalogue</code> (ISO 19110) (from <span class="pkg">geometa</span> package)
</p>


<hr>
<a id="method-GNOpenAPIManager-insertRecord"></a>



<h4>Method <code>insertRecord()</code>
</h4>

<p>Inserts a record by file, XML object or <span class="pkg">geometa</span> object of class <code>ISOMetadata</code> or <code>ISOFeatureCatalogue</code>. 
Extra parameters related to <span class="pkg">geometa</span> objects: <code>geometa_validate</code> (TRUE by default) and <code>geometa_inspire</code> 
(FALSE by default) can be used to perform ISO and INSPIRE validation respectively. In that case on object of class 
<code>geometa::INSPIREMetadataValidator</code>, with a proper user API key, should be specified as <code>geometa_inspireValidator</code> 
argument.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$insertRecord(
  xml = NULL,
  file = NULL,
  geometa = NULL,
  metadataType = "METADATA",
  uuidProcessing = "NOTHING",
  group,
  category = NULL,
  rejectIfInvalid = FALSE,
  publishToAll = TRUE,
  transformWith = "_none_",
  schema = NULL,
  extra = NULL,
  geometa_validate = TRUE,
  geometa_inspire = FALSE,
  geometa_inspireValidator = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xml</code></dt>
<dd>
<p>object of class XMLInternalNode-class from <span class="pkg">XML</span></p>
</dd>
<dt><code>file</code></dt>
<dd>
<p>file</p>
</dd>
<dt><code>geometa</code></dt>
<dd>
<p>geometa object of class <code>ISOMetadata</code> or <code>ISOFeatureCatalogue</code></p>
</dd>
<dt><code>metadataType</code></dt>
<dd>
<p>metadata type. By default <code>METADATA</code></p>
</dd>
<dt><code>uuidProcessing</code></dt>
<dd>
<p>UUID processing. By default <code>NOTHING</code>. Other possible value: <code>OVERWRITE</code></p>
</dd>
<dt><code>group</code></dt>
<dd>
<p>group</p>
</dd>
<dt><code>category</code></dt>
<dd>
<p>category</p>
</dd>
<dt><code>rejectIfInvalid</code></dt>
<dd>
<p>reject if invalid. Default <code>FALSE</code></p>
</dd>
<dt><code>publishToAll</code></dt>
<dd>
<p>publish to all. Default <code>TRUE</code></p>
</dd>
<dt><code>transformWith</code></dt>
<dd>
<p>transform with. Default is <code>_none_</code></p>
</dd>
<dt><code>schema</code></dt>
<dd>
<p>schema</p>
</dd>
<dt><code>extra</code></dt>
<dd>
<p>extra</p>
</dd>
<dt><code>geometa_validate</code></dt>
<dd>
<p>validate geometa object</p>
</dd>
<dt><code>geometa_inspire</code></dt>
<dd>
<p>validate geometa object vs. INSPIRE</p>
</dd>
<dt><code>geometa_inspireValidator</code></dt>
<dd>
<p>geometa INSPIRE validator to use</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-insertMetadata"></a>



<h4>Method <code>insertMetadata()</code>
</h4>

<p>Inserts a metadata by file, XML object or <span class="pkg">geometa</span> object of class <code>ISOMetadata</code> or <code>ISOFeatureCatalogue</code>. 
Extra parameters related to <span class="pkg">geometa</span> objects: <code>geometa_validate</code> (TRUE by default) and <code>geometa_inspire</code> 
(FALSE by default) can be used to perform ISO and INSPIRE validation respectively. In that case on object of class 
<code>geometa::INSPIREMetadataValidator</code>, with a proper user API key, should be specified as
<code>geometa_inspireValidator</code> argument.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$insertMetadata(
  xml = NULL,
  file = NULL,
  geometa = NULL,
  metadataType = "METADATA",
  uuidProcessing = "NOTHING",
  group,
  category = NULL,
  rejectIfInvalid = FALSE,
  publishToAll = TRUE,
  transformWith = "_none_",
  schema = NULL,
  extra = NULL,
  geometa_validate = TRUE,
  geometa_inspire = FALSE,
  geometa_inspireValidator = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xml</code></dt>
<dd>
<p>object of class XMLInternalNode-class from <span class="pkg">XML</span></p>
</dd>
<dt><code>file</code></dt>
<dd>
<p>file</p>
</dd>
<dt><code>geometa</code></dt>
<dd>
<p>geometa object of class <code>ISOMetadata</code> or <code>ISOFeatureCatalogue</code></p>
</dd>
<dt><code>metadataType</code></dt>
<dd>
<p>metadata type. By default <code>METADATA</code></p>
</dd>
<dt><code>uuidProcessing</code></dt>
<dd>
<p>UUID processing. By default <code>NOTHING</code>. Other possible value: <code>OVERWRITE</code></p>
</dd>
<dt><code>group</code></dt>
<dd>
<p>group</p>
</dd>
<dt><code>category</code></dt>
<dd>
<p>category</p>
</dd>
<dt><code>rejectIfInvalid</code></dt>
<dd>
<p>reject if invalid. Default <code>FALSE</code></p>
</dd>
<dt><code>publishToAll</code></dt>
<dd>
<p>publish to all. Default <code>TRUE</code></p>
</dd>
<dt><code>transformWith</code></dt>
<dd>
<p>transform with. Default is <code>_none_</code></p>
</dd>
<dt><code>schema</code></dt>
<dd>
<p>schema</p>
</dd>
<dt><code>extra</code></dt>
<dd>
<p>extra</p>
</dd>
<dt><code>geometa_validate</code></dt>
<dd>
<p>validate geometa object</p>
</dd>
<dt><code>geometa_inspire</code></dt>
<dd>
<p>validate geometa object vs. INSPIRE</p>
</dd>
<dt><code>geometa_inspireValidator</code></dt>
<dd>
<p>geometa INSPIRE validator to use</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-updateMetadata"></a>



<h4>Method <code>updateMetadata()</code>
</h4>

<p>Inserts a metadata by file, XML object or <span class="pkg">geometa</span> object of class <code>ISOMetadata</code> or <code>ISOFeatureCatalogue</code>. 
Extra parameters related to <span class="pkg">geometa</span> objects: <code>geometa_validate</code> (TRUE by default) and <code>geometa_inspire</code> 
(FALSE by default) can be used to perform ISO and INSPIRE validation respectively. In that case on object of class 
<code>geometa::INSPIREMetadataValidator</code>, with a proper user API key, should be specified as
<code>geometa_inspireValidator</code> argument.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$updateMetadata(
  xml = NULL,
  file = NULL,
  geometa = NULL,
  metadataType = "METADATA",
  group,
  category = NULL,
  rejectIfInvalid = FALSE,
  publishToAll = TRUE,
  transformWith = "_none_",
  schema = NULL,
  extra = NULL,
  geometa_validate = TRUE,
  geometa_inspire = FALSE,
  geometa_inspireValidator = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xml</code></dt>
<dd>
<p>object of class XMLInternalNode-class from <span class="pkg">XML</span></p>
</dd>
<dt><code>file</code></dt>
<dd>
<p>file</p>
</dd>
<dt><code>geometa</code></dt>
<dd>
<p>geometa object of class <code>ISOMetadata</code> or <code>ISOFeatureCatalogue</code></p>
</dd>
<dt><code>metadataType</code></dt>
<dd>
<p>metadata type. By default <code>METADATA</code></p>
</dd>
<dt><code>group</code></dt>
<dd>
<p>group</p>
</dd>
<dt><code>category</code></dt>
<dd>
<p>category</p>
</dd>
<dt><code>rejectIfInvalid</code></dt>
<dd>
<p>reject if invalid. Default <code>FALSE</code></p>
</dd>
<dt><code>publishToAll</code></dt>
<dd>
<p>publish to all. Default <code>TRUE</code></p>
</dd>
<dt><code>transformWith</code></dt>
<dd>
<p>transform with. Default is <code>_none_</code></p>
</dd>
<dt><code>schema</code></dt>
<dd>
<p>schema</p>
</dd>
<dt><code>extra</code></dt>
<dd>
<p>extra</p>
</dd>
<dt><code>geometa_validate</code></dt>
<dd>
<p>validate geometa object</p>
</dd>
<dt><code>geometa_inspire</code></dt>
<dd>
<p>validate geometa object vs. INSPIRE</p>
</dd>
<dt><code>geometa_inspireValidator</code></dt>
<dd>
<p>geometa INSPIRE validator to use</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-deleteMetadata"></a>



<h4>Method <code>deleteMetadata()</code>
</h4>

<p>Deletes a metadata by ID
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$deleteMetadata(id, withBackup = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>id</p>
</dd>
<dt><code>withBackup</code></dt>
<dd>
<p>proceed with backup. Default is <code>TRUE</code></p>
</dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-uploadAttachment"></a>



<h4>Method <code>uploadAttachment()</code>
</h4>

<p>Uploads attachment
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$uploadAttachment(
  id,
  file,
  visibility = "public",
  approved = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>metadata identifier</p>
</dd>
<dt><code>file</code></dt>
<dd>
<p>file to upload</p>
</dd>
<dt><code>visibility</code></dt>
<dd>
<p>public or private</p>
</dd>
<dt><code>approved</code></dt>
<dd>
<p>object of class <code>logical</code></p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a named list of the uploaded attachment, including the url, size, id and type, <code>NULL</code> otherwise
</p>


<hr>
<a id="method-GNOpenAPIManager-publishThumbnail"></a>



<h4>Method <code>publishThumbnail()</code>
</h4>

<p>Publishes thumbnail based on URL
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$publishThumbnail(id, url, desc = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>metadata identifier</p>
</dd>
<dt><code>url</code></dt>
<dd>
<p>thumbnail URL</p>
</dd>
<dt><code>desc</code></dt>
<dd>
<p>thumbnail description</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>TRUE</code> if published, <code>FALSE</code> otherwise
</p>


<hr>
<a id="method-GNOpenAPIManager-doiCheckPreConditions"></a>



<h4>Method <code>doiCheckPreConditions()</code>
</h4>

<p>Checks pre-conditions to publish DOI
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$doiCheckPreConditions(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>metadata identifier</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>TRUE</code> if DOI pre-conditions are fulfiled, <code>FALSE</code> otherwise
</p>


<hr>
<a id="method-GNOpenAPIManager-createDOI"></a>



<h4>Method <code>createDOI()</code>
</h4>

<p>Submit a record to the Datacite metadata store in order to create a DOI.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$createDOI(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>metadata identifier</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>TRUE</code> if metadata record has been submitted with DOI created, <code>FALSE</code> otherwise
</p>


<hr>
<a id="method-GNOpenAPIManager-deleteDOI"></a>



<h4>Method <code>deleteDOI()</code>
</h4>

<p>Remove a DOI (this is not recommended, DOI are supposed to be 
persistent once created. This is mainly here for testing).
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$deleteDOI(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd></dd>
</dl>
</div>


<hr>
<a id="method-GNOpenAPIManager-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>GNOpenAPIManager$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Author(s)</h3>

<p>Emmanuel Blondel &lt;emmanuel.blondel1@gmail.com&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
   GNOpenAPIManager$new("http://localhost:8080/geonetwork", "admin", "geonetwork", "4.0.5")

## End(Not run)

</code></pre>


</div>