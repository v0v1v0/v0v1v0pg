<div class="container">

<table style="width: 100%;"><tr>
<td>collapse_by_group</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collapse raw data by random effect groups</h2>

<h3>Description</h3>

<p>This function extracts the raw data points (i.e. the data
that was used to fit the model) and "averages" (i.e. "collapses") the
response variable over the levels of the grouping factor given in
<code>collapse_by</code>. Only works with mixed models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">collapse_by_group(grid, model, collapse_by = NULL, residuals = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>A data frame representing the data grid, or an object of class
<code>ggeffects</code>, as returned by <code>predict_response()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>The model for which to compute partial residuals. The data grid
<code>grid</code> should match to predictors in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse_by</code></td>
<td>
<p>Name of the (random effects) grouping factor. Data is
collapsed by the levels of this factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>Logical, if <code>TRUE</code>, collapsed partial residuals instead
of raw data by the levels of the grouping factor.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with raw data points, averaged over the levels of
the given grouping factor from the random effects. The group level of
the random effect is saved in the column <code>"random"</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(ggeffects)
data(efc, package = "ggeffects")
efc$e15relat &lt;- as.factor(efc$e15relat)
efc$c161sex &lt;- as.factor(efc$c161sex)
levels(efc$c161sex) &lt;- c("male", "female")
model &lt;- lme4::lmer(neg_c_7 ~ c161sex + (1 | e15relat), data = efc)
me &lt;- predict_response(model, terms = "c161sex")
head(attributes(me)$rawdata)
collapse_by_group(me, model, "e15relat")

</code></pre>


</div>