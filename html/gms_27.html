<div class="container">

<table style="width: 100%;"><tr>
<td>model_lock</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Model lock/unlock</h2>

<h3>Description</h3>

<p>Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE.
</p>


<h3>Usage</h3>

<pre><code class="language-R">model_lock(folder = ".", file = ".lock", timeout1 = 12, timeout2 = NULL,
check_interval = NULL, oncluster = NULL)
model_unlock(id, folder = NULL, file = NULL, oncluster = NULL)
is_model_locked(folder = ".", file = ".lock")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>folder</code></td>
<td>
<p>path to the model folder</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>file name of the lock file. Don't use the lock file for anything
else (i.e. don't read or write or open the lock file).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout1</code></td>
<td>
<p>Time in hours to wait for other processes to free the lock
before giving up and exiting with an error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout2</code></td>
<td>
<p>deprecated setting which will be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_interval</code></td>
<td>
<p>deprecated setting which will be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oncluster</code></td>
<td>
<p>deprecated setting which will be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>lock id as returned by model_lock.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>model_lock returns the lock id which is needed
to identify the lock in model_unlock.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein, Mika Pfl√ºger
</p>


<h3>See Also</h3>

<p><code>check_config</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#lock folder
id &lt;- model_lock(tempdir())

#unlock folder
model_unlock(id)
</code></pre>


</div>