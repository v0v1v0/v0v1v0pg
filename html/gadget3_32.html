<div class="container">

<table style="width: 100%;"><tr>
<td>action_tagging</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 tag-release action</h2>

<h3>Description</h3>

<p>Add tag-release to a g3 model
</p>


<h3>Usage</h3>

<pre><code class="language-R">g3a_predate_tagrelease(
       fleet_stock, prey_stocks, suitabilities, catchability_f,
       output_tag_f, mortality_f = 0, run_f = ~TRUE,
       run_at = g3_action_order$predate, ...)

g3a_tag_shedding(stocks, tagshed_f, run_f = ~TRUE,
       run_at = g3_action_order$straying)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fleet_stock</code></td>
<td>
<p>Tagging fleet, see g3a_predate_fleet</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prey_stocks</code></td>
<td>
<p>Stocks fleet harvests, see g3a_predate_fleet</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suitabilities</code></td>
<td>
<p>See g3a_predate_fleet</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catchability_f</code></td>
<td>
<p>See g3a_predate_fleet</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_tag_f</code></td>
<td>

<p>formula specifying which numeric tag (see g3s_tag) stock will be released into.
Implemented with a g3_timeareadata table, e.g.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mortality_f</code></td>
<td>

<p>formula generated by one of the g3_suitability_* functions, describing
the proportion of tagged stock that will die during tagging.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stocks</code></td>
<td>
<p>Stocks that will shed tags</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tagshed_f</code></td>
<td>
<p>formula for proportion that will shed tags at this point</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run_f</code></td>
<td>

<p>formula specifying a condition for running this action, default always runs.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run_at</code></td>
<td>

<p>Integer order that spawning actions will be run within model, see <code>g3_action_order</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Any further options for g3a_predate_fleet</p>
</td>
</tr>
</table>
<h3>Value</h3>



<h4>g3a_predate_tagrelease</h4>

<p>An action (i.e. list of formula objects) that will...</p>

<ol>
<li>
<p>Harvest as-per g3a_predate_fleet
</p>
</li>
<li>
<p>Use <var>mortality_f</var> to apply tagging mortality to harvested stock
</p>
</li>
<li>
<p>Use <var>output_tag_f</var> to decide what tag should be applied to harvested stock
</p>
</li>
<li>
<p>Put harvested stock back into general circulation
</p>
</li>
</ol>
<h4>g3a_tag_shedding</h4>

<p>An action (i.e. list of formula objects) that will...</p>

<ol><li>
<p>For each <var>stock</var>, move the proportion <var>tagshed_f</var> back to the "untagged" tag
</p>
</li></ol>
<h3>See Also</h3>

<p><code>g3a_predate_fleet</code>,
<code>g3s_tag</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

tags &lt;- c('H1-00', 'H1-01')
tags &lt;- structure(seq_along(tags), names = tags)

prey_a &lt;- g3_stock('prey_a', seq(1, 10)) %&gt;% g3s_tag(tags)
fleet_a &lt;- g3_fleet('fleet_a')

actions &lt;- list(
    # NB: If g3_tag() is used in the stock, initialconditions/renewal
    # will only renew into tag == 0 (i.e. untagged)
    g3a_predate_tagrelease(
        # Setup as-per g3a_predate_fleet
        fleet_a,
        list(prey_a),
        suitabilities = list(prey_a = 1),
        catchability_f = g3a_predate_catchability_numberfleet(~100),
        
        # Optional tag mortality suitability
        mortality_f = g3_suitability_straightline(
            g3_parameterized('mort_alpha'),
            g3_parameterized('mort_beta')),

        # Formula to decide which tag to output into, generate table
        # with one tag per year
        output_tag_f = g3_timeareadata('fleet_a_tags', data.frame(
            year = 2000:2001,
            tag = tags[c('H1-00', 'H1-01')],
            stringsAsFactors = FALSE), value_field = "tag"),

        # Experiment only happens in spring
        run_f = ~cur_step == 2),

    g3a_tag_shedding(
        list(prey_a),
        # i.e. 0.125 will loose their tag each step
        tagshed_f = log(8)))
</code></pre>


</div>