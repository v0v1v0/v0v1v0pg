<div class="container">

<table style="width: 100%;"><tr>
<td>plot.gsbMainOut</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Plot methods
</h2>

<h3>Description</h3>

<p>Methods for plotting the results of <code>gsb()</code>.</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'gsbMainOut'
plot(x,
     what=c("all", "cumulative all",
            "both", "cumulative both",
            "sample size", "success", "futility",
            "success or futility", "indeterminate", "cumulative success",
            "cumulative futility", "cumulative success or futility",
            "cumulative indeterminate", "boundary",
            "std.boundary","delta.grid","patients"),
     range.delta = "default",
     stages = "default",
     delta.grid = TRUE,
     color = TRUE,
     smooth = 100,
     contour = TRUE, 
     export = FALSE,
     path = tempdir(),
     sliced = FALSE,
     range.control="default", ...)

## S3 method for class 'gsbSimulation'
plot(x,...)

## S3 method for class 'gsbDesign'
plot(x,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>object of appropriate class.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what</code></td>
<td>

<p>a <code>character string</code> to choose a plot. It should
correspond to one level of <code>OC$type</code> where <code>OC</code> is an
object of the output of <code>gsb()</code>. Additional possibilities are
<code>what = "all"</code> to plot the success-, futility- and success or
futility-probabilities, <code>what = "cumulative all"</code> to plot the
cumulative success-, cumulative futility- and cumulative success or
futility-probabilities, <code>what = "boundary"</code> or <code>what =
  "std.boundary"</code> to plot the bounds, <code>what = "patients"</code> for a histogram of
the patients per stage and <code>what = "delta.grid"</code> to plot the
grid of delta's.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range.delta</code></td>
<td>

<p>a <code>vector</code> of length 2. For choosing the plot limits manually
set <code>range.delta = c(min, max)</code> for a Bayesian update on
"treatment effect" or <br><code>range.delta = c(control.min, control.max, treatment.min, treatment.max)</code> for a Bayesian update "per arm". If
<code>range.delta = "default"</code> the range of the
plot is chosen so that all delta's are covered.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>

<p>a <code>vector</code> of length 2 containing the number of the lowest and
highest stage, which should be plotted. If <code>stages = "default"</code>
all stages are plotted (expect for <code>what = "sample size"</code> where
only the last stage is plotted.)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.grid</code></td>
<td>

<p><code>logical</code>. If <code>TRUE</code> the delta grid is plotted too.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>

<p><code>logical</code>. If <code>TRUE</code> the plot is colored.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>

<p>a <code>vector</code> of length 1. A higher number makes the plot
'smoother' if <code>type.update = "per arm"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contour</code></td>
<td>

<p><code>logical</code>. If <code>TRUE</code> contour lines are added to the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export</code></td>
<td>

<p><code>logical</code>. If <code>TRUE</code> the plot is save as .png-file.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>

<p><code>character</code>. to specify the location to which to table should
be exported. the default 'tempdir()' exports the table to a temporary
directory.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sliced</code></td>
<td>

<p><code>logical</code>. If <code>TRUE</code> the contour plot for <code>type.update =
    "per arm"</code> is shown in several 2D plots. In order to use this option
the argument <code>grid.type</code> of <code>gsbSimulation()</code> has to be <code>sliced</code>.   
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range.control</code></td>
<td>

<p>a <code>vector</code> of length 2 or \"default\". If <code>special = TRUE</code>
the range of the control values can be set manually as vector c(min, max). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns an object of class <code>"trellis"</code>
</p>


<h3>Author(s)</h3>

<p>Florian Gerber &lt;florian.gerber@math.uzh.ch&gt;, Thomas Gsponer
</p>


<h3>References</h3>

<p>uses the R-package 'lattice'. 
</p>


<h3>See Also</h3>

<p><code>gsb</code>, xyplot
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## please see examples of function 'gsb'. 
## --------------------------------------


## --------------------------------------
## alternative plots can be created for example
## with package 'ggplot2'.

des &lt;- gsbDesign(nr.stages=2,
                     patients=10,
                     sigma=10,
                     criteria.success=c(0,0.8, 7, 0.5),
                     criteria.futility=c(2,0.8),
                     prior.difference="non-informative")

sim &lt;- gsbSimulation(truth=c(-10,20,60),
                             type.update="treatment effect")


x &lt;- gsb(des,sim)

## get data.frame with operating characteristics
datgraph &lt;- x$OC


## prepare for plot
sub &lt;- c("success", "futility", "success or futility")
datgraph2 &lt;- subset(datgraph,datgraph$type %in% sub)
datgraph2$type &lt;- as.factor(paste(datgraph2$type))
datgraph2$value[datgraph2$type=="cumulative success or futility"] &lt;-
1-datgraph2$value[datgraph2$type=="cumulative success or futility"]
levels(datgraph2$type) &lt;- c("1)cumulative futility" ,"3)cumulative success","2)indeterminate")
datgraph2$type=as.factor(paste(datgraph2$type))
levels(datgraph2$type) &lt;- c("cumulative futility" ,"indeterminate","cumulative success")
datgraph2 &lt;- datgraph2[order(datgraph2$delta),]


## plots
library(ggplot2)
p1 &lt;- qplot(delta,value,geom="blank",color=type,facets=.~stage,data=datgraph2,
xlab=expression(delta))

p1+geom_line(size=1.5)+scale_color_manual(values = c("cumulative futility" = "dark red",
"indeterminate" = "orange", "cumulative success" = "dark green"))

p2=p1+geom_area(aes(x = delta,y=value,fill=type))

p2+scale_fill_manual(values = c("cumulative futility" = "dark red",
"indeterminate" = "orange", "cumulative success" = "dark green"))


</code></pre>


</div>