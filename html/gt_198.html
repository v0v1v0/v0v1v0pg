<div class="container">

<table style="width: 100%;"><tr>
<td>text_replace</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform highly targeted text replacement with a regex pattern</h2>

<h3>Description</h3>

<p><code>text_replace()</code> provides a specialized interface for replacing text
fragments in table cells with literal text. You need to ensure that you're
targeting the appropriate cells with the <code>locations</code> argument. Once that is
done, the remaining two values to supply are the regex pattern (<code>pattern</code>)
and the replacement for all matched text (<code>replacement</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">text_replace(data, pattern, replacement, locations = cells_body())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p><em>Regex pattern to match with</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <strong>required</strong>
</p>
<p>A regex pattern used to target text fragments in the cells resolved in
locations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replacement</code></td>
<td>
<p><em>Replacement text</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <strong>required</strong>
</p>
<p>The replacement text for any matched text fragments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locations</code></td>
<td>
<p><em>Locations to target</em>
</p>
<p><code>&lt;locations expressions&gt;</code> // <em>default:</em> <code>cells_body()</code>
</p>
<p>The cell or set of cells to be associated with the text transformation.
Only <code>cells_column_spanners()</code>, <code>cells_column_labels()</code>,
<code>cells_row_groups()</code>, <code>cells_stub()</code>, and <code>cells_body()</code> can
be used here. We can enclose several of these calls within a <code>list()</code> if we
wish to make the transformation happen at different locations.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>Examples</h3>

<p>Use the <code>metro</code> dataset to create a <strong>gt</strong> table. With <code>cols_merge()</code>,
we'll merge the <code>name</code> and <code>caption</code> columns together but only if <code>caption</code>
doesn't have an <code>NA</code> value (the special <code>pattern</code> syntax of <code>"{1}&lt;&lt;({2})&gt;&gt;"</code>
takes care of this). This merged content is now part of the <code>name</code> column.
We'd like to modify this further wherever there is text in parentheses:
(1) make that text italicized, and (2) introduce a line break before the text
in parentheses. We can do this with <code>text_replace()</code>. The <code>pattern</code> value of
<code>"\\((.*?)\\)"</code> will match on text between parentheses, and the inner
<code>"(.*?)"</code> is a capture group. The <code>replacement</code> value of
<code>"&lt;br&gt;(&lt;em&gt;\\1&lt;/em&gt;)"</code> puts the capture group text <code>"\\1"</code> within <code style="white-space: pre;">⁠&lt;em&gt;⁠</code>
tags, wraps literal parentheses around it, and prepends a line break tag.
</p>
<div class="sourceCode r"><pre>metro |&gt;
  dplyr::select(name, caption, lines) |&gt;
  dplyr::slice(110:120) |&gt;
  gt() |&gt;
  cols_merge(
    columns = c(name, caption),
    pattern = "{1}&lt;&lt; ({2})&gt;&gt;"
  ) |&gt;
  text_replace(
    locations = cells_body(columns = name),
    pattern = "\\((.*?)\\)",
    replacement = "&lt;br&gt;(&lt;em&gt;\\1&lt;/em&gt;)"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_text_replace_1.png" alt="This image of a table was generated from the first code example in the `text_replace()` help file." style="width:100%;"><h3>Function ID</h3>

<p>4-1
</p>


<h3>Function Introduced</h3>

<p><code>v0.9.0</code> (Mar 31, 2023)
</p>


<h3>See Also</h3>

<p>Other text transforming functions: 
<code>text_case_match()</code>,
<code>text_case_when()</code>,
<code>text_transform()</code>
</p>


</div>