<div class="container">

<table style="width: 100%;"><tr>
<td>plot_km_fit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Kaplan Meier Plot of Curve-Fit</h2>

<h3>Description</h3>

<p>This function creates a Kaplan Meier plot with the fitted curve from the output of event_prediction(), fit_tte_data() or fit_KM().<br>
Where available, it will include fitting confidence intervals based upon the variance derived by the delta method.<br>
Options are available to customise inclusion.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">plot_km_fit(
  fit,
  data,
  Time = "Time",
  Event = "Event",
  censoringOne = FALSE,
  CI = 0.95,
  colour_CI = TRUE,
  maxT = NULL,
  xlim = NULL,
  ylim = c(0, 1),
  main = "Kaplan Meier Curve Fit Plot",
  fit_col = 2,
  km_col = 1,
  area_col = "skyblue",
  CI_col = 4,
  CI_lty = 2,
  no_legend = FALSE,
  legend_position = c("bottom_left", "top_right"),
  overlay = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>Full output list from event_prediction(), fit_tte_data() or fit_KM().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Name of patient-level data set, used to generate the KM plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Time</code></td>
<td>
<p>The column name for the times. Default is "Time"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Event</code></td>
<td>
<p>The column name for the events column (i.e. the binary variable denoting events vs censorings). Default is "Event"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censoringOne</code></td>
<td>
<p>Specify whether censoring is denoted in the Event column by a one (TRUE) or zero (FALSE). Default=FALSE (censorings denoted by 0, events by 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>Number between 0 and 1 for the size of Kaplan Meier confidence interval to calculate. Default is 0.95 (95 percent confidence interval).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour_CI</code></td>
<td>
<p>Boolean for whether to colour the fitting confidence interval area. Default=TRUE (colour area)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxT</code></td>
<td>
<p>Maximum time to calculate point estimate and CIs up to. Default=NULL (Calculate up to last time in patient data)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>Standard graphical parameter for x-axis limits. Default=NULL (Plots from 0 to maximum patient time)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>Graphical parameter for y-axis limits. Default=c(0,1) (Plots survival function from 0 to 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>String for plot title. Default="Kaplan Meier Curve Fit Plot"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit_col</code></td>
<td>
<p>Colour for fitting curve Default=2 (red)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>km_col</code></td>
<td>
<p>Colour for km curve Default=1 (black)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>area_col</code></td>
<td>
<p>Colour for CI area Default="skyblue" (sky blue)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_col</code></td>
<td>
<p>Colour for CI Default=4 (blue)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_lty</code></td>
<td>
<p>Line type for CI Default=2 (dashed)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_legend</code></td>
<td>
<p>Boolean to turn off legend. Default is FALSE; legend shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_position</code></td>
<td>
<p>String with "top_right", or "bottom_left", corresponding to legend position in power plot. (Default="bottom_left").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overlay</code></td>
<td>
<p>Boolean whether to overlay on existing plot (vs start a new one). Default=FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional graphical parameters.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns NULL
</p>


<h3>Author(s)</h3>

<p>James Bell
</p>


<h3>Examples</h3>

<pre><code class="language-R">recruit &lt;- PieceR(matrix(c(rep(1,12),10,15,25,30,45,60,55,50,65,60,55,30),ncol=2),1)
trial_long &lt;- simulate_trials(active_ecurve=Weibull(50,0.8),control_ecurve=Weibull(50,0.8),
rcurve=recruit,fix_events=200, iterations=1,seed=12345,detailed_output=TRUE)
trial_short &lt;- set_assess_time(data=trial_long,time=10,detailed_output = FALSE)

maxtime &lt;- max(ceiling(trial_long[,"Assess"]))
events &lt;- rep(NA,maxtime)
for (i in 1:maxtime){events[i] &lt;- sum(1-set_assess_time(trial_long,i)[,"Censored"])}

predictions &lt;- event_prediction(data=trial_short, Event="Censored", censoringOne=TRUE, 
type="Weibull", rcurve=recruit, max_time=60, cond_Events=49, cond_NatRisk=451, 
cond_Time=10, units="Months")

plot_km_fit(fit=predictions,data=trial_short,Event="Censored",censoringOne=TRUE,maxT=70)

</code></pre>


</div>