<div class="container">

<table style="width: 100%;"><tr>
<td>brickFromOutputSoil3DTensor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>brickFromOutputSoil3DTensor</h2>

<h3>Description</h3>

<p>Extracts a brick or a raster layer from a output 3D Tensor or 2D map respectively
</p>


<h3>Usage</h3>

<pre><code class="language-R">brickFromOutputSoil3DTensor(
  x,
  when,
  layers = "SoilLayerThicknesses",
  one.layer = FALSE,
  suffix = "L%04dN%04d.asc",
  time_formatter = "N%04d",
  suffix_one.layer = "N%04d.asc",
  wpath = NULL,
  tz = "A",
  start_date_key = "InitDateDDMMYYYYhhmm",
  end_date_key = "EndDateDDMMYYYYhhmm",
  timestep = "OutputSoilMaps",
  use.read.raster.from.url = FALSE,
  crs = NULL,
  projfile = "geotop.proj",
  start.from.zero = FALSE,
  secondary.suffix = NULL,
  only.map.filename = FALSE,
  add_suffix_dir = NULL,
  ...
)

rasterFromOutput2DMap(x, when, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>string. GEOtop keyword reletated to the 3D or 2D variable to be imported in R.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>when</code></td>
<td>
<p><code>POSIXct-class</code> for date and time on which the variable <code>x</code> is requested.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layers</code></td>
<td>
<p>number of soil layer or geotop keyword for soil layer (e.g. <code>SoilLayerThicknesses</code> or <code>SoilFile</code>). Default is  <code>SoilLayerThicknesses</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>one.layer</code></td>
<td>
<p>logical value. If <code>TRUE</code> a <code>RasterLayer-class</code> object is imported, otherwise a <code>RasterBrick-class</code>object is returened. Default for <code>brickFromOutputSoil3DTensor</code> is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix</code></td>
<td>
<p>charachter string containing the decimal formatter used by GEOtop in the output file names. Default is <code>"L%04dN%04.asc"</code>. A simple user is recommended not to modify the value of this argument and use the default value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_formatter, suffix_one.layer</code></td>
<td>
<p>charachter string  (<code>suffix_one.layer</code> is used for 2Dxy map) containing the decimal formatter used by GEOtop in the output file names to indicate time instant. Default is <code>"N%04.asc"</code>. A simple user is recommended not to modify the value of this argument and use the default value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wpath, tz, use.read.raster.from.url</code></td>
<td>
<p>see <code>get.geotop.inpts.keyword.value</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date_key, end_date_key</code></td>
<td>
<p>initial and final detes and times of the GEOtop simulation or alternatively the respective keywords of <code>*.inpts</code> file (Default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timestep</code></td>
<td>
<p>time step expressed in seconds every which the raster file has been created. It can be a string corresponding to the geotop keyword in the inpts file. Default value is <code>"OutputSoilMaps"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs, start.from.zero</code></td>
<td>
<p>see <code>brick.decimal.formatter</code>. If <code>crs</code> is not <code>NULL</code> (Default) , <code>projfile</code> is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projfile</code></td>
<td>
<p>name of the <code>*.proj</code> file containing CRS information. See <code>get.geotop.inpts.keyword.value</code>. Default is <code>"geotop.proj"</code>. If is <code>NULL</code> or <code>NA</code> or this file does not exist, it is not searched and read.. In case <code>use.read.raster.from.url</code> is <code>TRUE</code> and no <code>NULL</code> or <code>NA</code> values are assinged, the <code>*.proj</code> file is searched.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secondary.suffix</code></td>
<td>
<p>String secondary suffix which can be added at the end of the Map file name (optional). Default is <code>NULL</code> and no secondary suffix is added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only.map.filename</code></td>
<td>
<p>logical value. If it is <code>TRUE</code>, only map file names are returned and maps are not imported. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_suffix_dir, ...</code></td>
<td>
<p>additional arguments for <code>get.geotop.inpts.keyword.value</code> or <code>brickFromOutputSoil3DTensor</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions <code>brickFromOutputSoil3DTensor</code> and <code>rasterFromOutput2DMap</code> return 3D or 2D <code>Raster-class</code> objects respectively. <code>rasterFromOutput2DMap</code> is a wrapper function of <code>brickFromOutputSoil3DTensor</code> with the option <code>one.layer==TRUE</code>.
The functionswork with the following output keywords: 
</p>
<p><code>"SoilTempTensorFile"</code>,
</p>
<p><code>"SoilAveragedTempTensorFile"</code>,
</p>
<p><code>"SoilLiqContentTensorFile"</code>,
</p>
<p><code>"SoilAveragedLiqContentTensorFile"</code>,
</p>
<p><code>"SoilIceContentTensorFile"</code>,
</p>
<p><code>"SoilAveragedIceContentTensorFile"</code>,
</p>
<p><code>"SoilLiqWaterPressTensorFile"</code>,
</p>
<p><code>"SoilTotWaterPressTensorFile"</code>     for <code>brickFromOutputSoil3DTensor</code>;
</p>
<p><code>"FirstSoilLayerTempMapFile"</code>, 
</p>
<p><code>"FirstSoilLayerAveragedTempMapFile"</code>,
</p>
<p><code>"FirstSoilLayerLiqContentMapFile"</code>,
</p>
<p><code>"FirstSoilLayerIceContentMapFile"</code>, 
</p>
<p><code>"LandSurfaceWaterDepthMapFile"</code>, 
</p>
<p><code>"ChannelSurfaceWaterDepthMapFile"</code>,
</p>
<p><code>"NetRadiationMapFile"</code>, 
</p>
<p><code>"InLongwaveRadiationMapFile"</code>, 
</p>
<p><code>"NetLongwaveRadiationMapFile"</code>,
</p>
<p><code>"NetShortwaveRadiationMapFile"</code>,
</p>
<p><code>"InShortwaveRadiationMapFile"</code>, 
</p>
<p><code>"DirectInShortwaveRadiationMapFile"</code>,
</p>
<p><code>"ShadowFractionTimeMapFile"</code>,
</p>
<p><code>"SurfaceHeatFluxMapFile"</code>,  
</p>
<p><code>"SurfaceSensibleHeatFluxMapFile"</code>,
</p>
<p><code>"SurfaceLatentHeatFluxMapFile"</code>, 
</p>
<p><code>"SurfaceTempMapFile"</code>,    
</p>
<p><code>"PrecipitationMapFile"</code>,  
</p>
<p><code>"CanopyInterceptedWaterMapFile"</code>,
</p>
<p><code>"SnowDepthMapFile"</code>,   
</p>
<p><code>"GlacierDepthMapFile"</code>, 
</p>
<p><code>"SnowMeltedMapFile"</code>, 
</p>
<p><code>"SnowSublMapFile"</code>, 
</p>
<p><code>"GlacierMeltedMapFile"</code>, 
</p>
<p><code>"GlacierSublimatedMapFile"</code>,  
</p>
<p><code>"AirTempMapFile"</code>,        
</p>
<p><code>"WindSpeedMapFile"</code>, 
</p>
<p><code>"WindDirMapFile"</code>, 
</p>
<p><code>"RelHumMapFiladd_suffix_dir=NULLe"</code>, 
</p>
<p><code>"SWEMapFile"</code>,    
</p>
<p><code>"GlacierWaterEqMapFile"</code>  
</p>
<p><code>"SnowDurationMapFile"</code>,
</p>
<p><code>"ThawedSoilDepthMapFile"</code>,
</p>
<p><code>"ThawedSoilDepthFromAboveMapFile"</code>, 
</p>
<p><code>"WaterTableDepthMapFile"</code>, 
</p>
<p><code>"WaterTableDepthFromAboveMapFile"</code>,  
</p>
<p><code>"NetPrecipitationMapFile"</code>,
</p>
<p><code>"EvapotranspirationFromSoilMapFile"</code> for <code>rasterFromOutput2DMap</code>.
</p>


<h3>Author(s)</h3>

<p>Emanuele Cordano
</p>


<h3>See Also</h3>

<p><code>get.geotop.inpts.keyword.value</code>,<code>brick.decimal.formatter</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(geotopbricks)
## Not run: 
# The data containing in the link are only for educational use
wpath &lt;- 'https://raw.githubusercontent.com/ecor/geotopbricks_doc/master/simulations/idroclim_test1'
## URL path (RAW VERSION) of 
## https://github.com/ecor/geotopbricks_doc/tree/master/simulations/idroclim_test1
x &lt;- "SoilLiqContentTensorFile"
tz &lt;-  "Etc/GMT-1"
when &lt;- as.POSIXct("2002-03-22",tz=tz)

# Not Run because it elapses too long time!!! 
# Please Uncomment the following lines to run by yourself!!!
 b &lt;- brickFromOutputSoil3DTensor(x,when=when,wpath=wpath,tz=tz,use.read.raster.from.url=TRUE)

# a 2D map: 
x_e &lt;- "SnowDepthMapFile"
# Not Run: uncomment the following line

m &lt;- rasterFromOutput2DMap(x_e,when=when,wpath=wpath,timestep="OutputSnowMaps",
                            tz=tz,use.read.raster.from.url=TRUE)
## NOTE: set use.read.raster.from.url=FALSE (default) 
# if the "wpath" directorty is in the local file system.
# Not Run: uncomment the following line
plot(m)

## End(Not run)
</code></pre>


</div>