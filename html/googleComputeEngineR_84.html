<div class="container">

<table style="width: 100%;"><tr>
<td>gce_ssh</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Remotely execute ssh code, upload &amp; download files.</h2>

<h3>Description</h3>

<p>Assumes that you have ssh &amp; scp installed.  If on Windows see website and examples for workarounds.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gce_ssh(instance, ..., key.pub = NULL, key.private = NULL,
  wait = TRUE, capture_text = "", username = Sys.info()[["user"]])

gce_ssh_upload(instance, local, remote, username = Sys.info()[["user"]],
  key.pub = NULL, key.private = NULL, verbose = FALSE, wait = TRUE)

gce_ssh_download(instance, remote, local,
  username = Sys.info()[["user"]], key.pub = NULL,
  key.private = NULL, verbose = FALSE, overwrite = FALSE,
  wait = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>instance</code></td>
<td>
<p>Name of the instance of run ssh command upon</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Shell commands to run. Multiple commands are combined with
<code>&amp;&amp;</code> so that execution will halt after the first failure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.pub</code></td>
<td>
<p>The filepath location of the public key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.private</code></td>
<td>
<p>The filepath location of the private key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wait</code></td>
<td>
<p>Whether then SSH output should be waited for or run it asynchronously.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>capture_text</code></td>
<td>
<p>Possible values are "", to the R console (the default), NULL or FALSE (discard output), TRUE (capture the output in a character vector) or a character string naming a file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>username</code></td>
<td>
<p>The username you used to generate the key-pair</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>local, remote</code></td>
<td>
<p>Local and remote paths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If TRUE, will print command before executing it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>If TRUE, will overwrite the local file if exists.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Only works connecting to linux based instances.
</p>
<p>On Windows you will need to install an ssh command line client - see examples for an example using RStudio's built in client. 
</p>
<p>You will need to generate a new SSH key-pair if you have not connected to the instance before via say the gcloud SDK.
</p>
<p>To customise SSH connection see gce_ssh_setup
</p>
<p><code>capture_text</code> is passed to <code>stdout</code> and <code>stderr</code> of system2 
</p>
<p>Otherwise, instructions for generating SSH keys can be found here: <a href="https://cloud.google.com/compute/docs/instances/connecting-to-instance">https://cloud.google.com/compute/docs/instances/connecting-to-instance</a>.
</p>
<p>Uploads and downloads are recursive, so if you specify a directory,
everything inside the directory will also be downloaded.
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/compute/docs/instances/connecting-to-instance">https://cloud.google.com/compute/docs/instances/connecting-to-instance</a>
</p>
<p>Other ssh functions: <code>gce_ssh_addkeys</code>,
<code>gce_ssh_browser</code>,
<code>gce_ssh_setup</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
  
  
  vm &lt;- gce_vm("my-instance")
  
  ## if you have already logged in via gcloud, the default keys will be used
  ## no need to run gce_ssh_addkeys
  ## run command on instance            
  gce_ssh(vm, "echo foo")
  #&gt; foo
  
  ## if running on Windows, use the RStudio default SSH client
  ## e.g. add C:\Program Files\RStudio\bin\msys-ssh-1000-18 to your PATH
  ## then run: 
  vm2 &lt;- gce_vm("my-instance2")

  ## add SSH info to the VM object
  ## custom info
  vm2 &lt;- gce_ssh_setup(vm2,
                      username = "mark", 
                      key.pub = "C://.ssh/id_rsa.pub",
                      key.private = "C://.ssh/id_rsa")
                      
  ## run command on instance            
  gce_ssh(vm2, "echo foo")
  #&gt; foo



## End(Not run)

</code></pre>


</div>