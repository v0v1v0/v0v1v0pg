<div class="container">

<table style="width: 100%;"><tr>
<td>sfExponential</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Exponential Spending Function</h2>

<h3>Description</h3>

<p>The function <code>sfExponential</code> implements the exponential spending
function (Anderson and Clark, 2009). Normally <code>sfExponential</code> will be
passed to <code>gsDesign</code> in the parameter <code>sfu</code> for the upper bound or
<code>sfl</code> for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated below in examples.
</p>
<p>An exponential spending function is defined for any positive <code>nu</code> and
<code class="reqn">0\le t\le 1</code> as
</p>
<p style="text-align: center;"><code class="reqn">f(t;\alpha,\nu)=\alpha(t)=\alpha^{t^{-\nu}}.</code>
</p>

<p>A value of <code>nu=0.8</code> approximates an O'Brien-Fleming spending function
well.
</p>
<p>The general class of spending functions this family is derived from requires
a continuously increasing cumulative distribution function defined for
<code class="reqn">x&gt;0</code> and is defined as </p>
<p style="text-align: center;"><code class="reqn">f(t;\alpha,
\nu)=1-F\left(F^{-1}(1-\alpha)/ t^\nu\right).</code>
</p>
<p> The exponential spending function can be
derived by letting <code class="reqn">F(x)=1-\exp(-x)</code>, the exponential cumulative
distribution function. This function was derived as a generalization of the
Lan-DeMets (1983) spending function used to approximate an O'Brien-Fleming
spending function (<code>sfLDOF()</code>), </p>
<p style="text-align: center;"><code class="reqn">f(t; \alpha)=2-2\Phi \left(
\Phi^{-1}(1-\alpha/2)/ t^{1/2} \right).</code>
</p>



<h3>Usage</h3>

<pre><code class="language-R">sfExponential(alpha, t, param)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Real value <code class="reqn">&gt; 0</code> and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size/information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>A vector of points with increasing values from 0 to 1, inclusive.
Values of the proportion of sample size/information for which the spending
function will be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>A single positive value specifying the nu parameter for which
the exponential spending is to be computed; allowable range is (0, 1.5].</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of type <code>spendfn</code>.
</p>


<h3>Note</h3>

<p>The gsDesign technical manual shows how to use <code>sfExponential()</code>
to closely approximate an O'Brien-Fleming design. An example is given below.
The manual is available at &lt;https://keaven.github.io/gsd-tech-manual/&gt;.
</p>


<h3>Author(s)</h3>

<p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a>
</p>


<h3>References</h3>

<p>Anderson KM and Clark JB (2009), Fitting spending functions.
<em>Statistics in Medicine</em>; 29:321-327.
</p>
<p>Jennison C and Turnbull BW (2000), <em>Group Sequential Methods with
Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.
</p>
<p>Lan, KKG and DeMets, DL (1983), Discrete sequential boundaries for clinical
trials. <em>Biometrika</em>; 70:659-663.
</p>


<h3>See Also</h3>

<p><code>vignette("SpendingFunctionOverview")</code>, <code>gsDesign</code>,
<code>vignette("gsDesignPackageOverview")</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)
# use 'best' exponential approximation for k=6 to O'Brien-Fleming design
# (see manual for details)
gsDesign(
  k = 6, sfu = sfExponential, sfupar = 0.7849295,
  test.type = 2
)$upper$bound

# show actual O'Brien-Fleming bound
gsDesign(k = 6, sfu = "OF", test.type = 2)$upper$bound

# show Lan-DeMets approximation
# (not as close as sfExponential approximation)
gsDesign(k = 6, sfu = sfLDOF, test.type = 2)$upper$bound

# plot exponential spending function across a range of values of interest
t &lt;- 0:100 / 100
plot(t, sfExponential(0.025, t, 0.8)$spend,
  xlab = "Proportion of final sample size",
  ylab = "Cumulative Type I error spending",
  main = "Exponential Spending Function Example", type = "l"
)
lines(t, sfExponential(0.025, t, 0.5)$spend, lty = 2)
lines(t, sfExponential(0.025, t, 0.3)$spend, lty = 3)
lines(t, sfExponential(0.025, t, 0.2)$spend, lty = 4)
lines(t, sfExponential(0.025, t, 0.15)$spend, lty = 5)
legend(
  x = c(.0, .3), y = .025 * c(.7, 1), lty = 1:5,
  legend = c(
    "nu = 0.8", "nu = 0.5", "nu = 0.3", "nu = 0.2",
    "nu = 0.15"
  )
)
text(x = .59, y = .95 * .025, labels = "&lt;--approximates O'Brien-Fleming")
</code></pre>


</div>