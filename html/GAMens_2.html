<div class="container">

<table style="width: 100%;"><tr>
<td>GAMens.cv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Runs v-fold cross validation with GAMbag, GAMrsm or GAMens ensemble
classifier</h2>

<h3>Description</h3>

<p>In v-fold cross validation, the data are divided into <code>v</code> subsets of
approximately equal size. Subsequently, one of the <code>v</code> data parts is
excluded while the remainder of the data is used to create a <code>GAMens</code>
object.  Predictions are generated for the excluded data part. The process
is repeated <code>v</code> times.
</p>


<h3>Usage</h3>

<pre><code class="language-R">GAMens.cv(formula, data, cv, rsm_size = 2, autoform = FALSE, iter = 10,
  df = 4, bagging = TRUE, rsm = TRUE, fusion = "avgagg")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a formula, as in the <code>gam</code> function. Smoothing splines
are supported as nonparametric smoothing terms, and should be indicated by
<code>s</code>. See the documentation of <code>s</code> in the <code>gam</code> package for
its arguments. The <code>GAMens</code> function also provides the possibility for
automatic <code>formula</code> specification. See 'details' for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame in which to interpret the variables named in
<code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv</code></td>
<td>
<p>An integer specifying the number of folds in the cross-validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rsm_size</code></td>
<td>
<p>an integer, the number of variables to use for random
feature subsets used in the Random Subspace Method. Default is 2.  If
<code>rsm=FALSE</code>, the value of <code>rsm_size</code> is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autoform</code></td>
<td>
<p>if <code>FALSE</code> (by default), the model specification in
<code>formula</code> is used. If <code>TRUE</code>, the function triggers automatic
<code>formula</code> specification. See 'details' for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>an integer, the number of base (member) classifiers (GAMs) in
the ensemble. Defaults to <code>iter=10</code> base classifiers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>an integer, the number of degrees of freedom (df) used for
smoothing spline estimation. Its value is only used when <code>autoform =
TRUE</code>. Defaults to <code>df=4</code>. Its value is ignored if a formula is
specified and <code>autoform</code> is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bagging</code></td>
<td>
<p>enables Bagging if value is <code>TRUE</code> (default). If
<code>FALSE</code>, Bagging is disabled. Either <code>bagging</code>, <code>rsm</code> or both
should be <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rsm</code></td>
<td>
<p>enables Random Subspace Method (RSM) if value is <code>TRUE</code>
(default). If <code>FALSE</code>, rsm is disabled. Either <code>bagging</code>,
<code>rsm</code> or both should be <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fusion</code></td>
<td>
<p>specifies the fusion rule for the aggregation of member
classifier outputs in the ensemble. Possible values are <code>'avgagg'</code> for
average aggregation (default), <code>'majvote'</code> for majority voting,
<code>'w.avgagg'</code> for weighted average aggregation based on base classifier
error rates, or <code>'w.majvote'</code> for weighted majority voting.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>GAMens.cv</code>, which is a list with the
following components: </p>
<table>
<tr style="vertical-align: top;">
<td><code>foldpred</code></td>
<td>
<p>a data frame with, per fold, predicted
class membership probabilities for the left-out observations. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>a data frame with predicted class membership probabilities. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>foldclass</code></td>
<td>
<p>a data frame with, per fold, predicted classes for the
left-out observations. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class</code></td>
<td>
<p>a data frame with predicted classes. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>the confusion matrix which compares the real versus predicted
class memberships, based on the <code>class</code> object. </p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Koen W. De Bock <a href="mailto:kdebock@audencia.com">kdebock@audencia.com</a>, Kristof Coussement
<a href="mailto:K.Coussement@ieseg.fr">K.Coussement@ieseg.fr</a> and Dirk Van den Poel
<a href="mailto:Dirk.VandenPoel@ugent.be">Dirk.VandenPoel@ugent.be</a>
</p>


<h3>References</h3>

<p>De Bock, K.W. and Van den Poel, D. (2012):
"Reconciling Performance and Interpretability in Customer Churn Prediction Modeling
Using Ensemble Learning Based on Generalized Additive Models".
Expert Systems With Applications, Vol 39, 8, pp. 6816–6826.
</p>
<p>De Bock, K. W., Coussement, K. and Van den Poel, D. (2010):
"Ensemble Classification based on generalized additive models".
Computational Statistics &amp; Data Analysis, Vol 54, 6, pp. 1535–1546.
</p>
<p>Breiman, L. (1996): "Bagging predictors". Machine Learning, Vol 24, 2, pp.
123–140.
</p>
<p>Hastie, T. and Tibshirani, R. (1990): "Generalized Additive Models", Chapman
and Hall, London.
</p>
<p>Ho, T. K. (1998): "The random subspace method for constructing decision
forests". IEEE Transactions on Pattern Analysis and Machine Intelligence,
Vol 20, 8, pp. 832–844.
</p>


<h3>See Also</h3>

<p><code>predict.GAMens</code>, <code>GAMens</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Load data: mlbench library should be loaded!)
library(mlbench)
data(Sonar)
SonarSub&lt;-Sonar[,c("V1","V2","V3","V4","V5","V6","Class")]

## Obtain cross-validated classification performance of GAMrsm
## ensembles, using all variables in the Sonar dataset, based on 5-fold
## cross validation runs

Sonar.cv.GAMrsm &lt;- GAMens.cv(Class~s(V1,4)+s(V2,3)+s(V3,4)+V4+V5+V6,
SonarSub ,5, 4 , autoform=FALSE, iter=10, bagging=FALSE, rsm=TRUE )

## Calculate AUCs (for function colAUC, load caTools library)
library(caTools)

GAMrsm.cv.auc &lt;- colAUC(Sonar.cv.GAMrsm[[2]], SonarSub["Class"]=="R",
plotROC=FALSE)


</code></pre>


</div>