<div class="container">

<table style="width: 100%;"><tr>
<td>gcs_first</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save your R session to the cloud on startup/exit</h2>

<h3>Description</h3>

<p>Place within your <code>.Rprofile</code> to load and save your session data automatically
</p>


<h3>Usage</h3>

<pre><code class="language-R">gcs_first(bucket = Sys.getenv("GCS_SESSION_BUCKET"))

gcs_last(bucket = Sys.getenv("GCS_SESSION_BUCKET"))
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>bucket</code></td>
<td>
<p>The bucket holding your session data. See Details.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The folder you want to save to Google Cloud Storage will also need to have a yaml file called <code>_gcssave.yaml</code> in the root of the directory.  It can hold the following arguments:
</p>

<ul>
<li>
<p> [Required] <code>bucket</code> - the GCS bucket to save to
</p>
</li>
<li>
<p> [Optional] <code>loaddir</code> - if the folder name is different to the current, where to load the R session from
</p>
</li>
<li>
<p> [Optional] <code>pattern</code> - a regex of what files to save at the end of the session
</p>
</li>
<li>
<p> [Optional] <code>load_on_startup</code> - if <code>FALSE</code> will not attempt to load on startup
</p>
</li>
</ul>
<p>The bucket name is also set via the environment arg <code>GCE_SESSION_BUCKET</code>. The yaml bucket name will take precedence if both are set.
</p>
<p>The folder is named on GCS the full working path to the working directory e.g. <code>/Users/mark/dev/your-r-project</code> which is what is looked for on startup.  If you create a new R project with the same filepath and bucket as an existing saved set, the files will download automatically when you load R from that folder (when starting an RStudio project).
</p>
<p>If you load from a different filepath (e.g. with <code>loadir</code> set in yaml), when you exit and save the files will be saved under your new present working directory.
</p>
<p>Files with the same name will not be overwritten.  If you want them to be, delete or rename them then reload the R session.
</p>
<p>This function does not act like git, or intended as a replacement - its main use is imagined to be for using RStudio Server within disposable Docker containers on Google Cloud Engine (e.g. via <code>googleComputeEngineR</code>)
</p>
<p>For authentication for GCS,
the easiest way is to make sure your authentication file is
available in environment file <code>GCS_AUTH_FILE</code>,
or if on Google Compute Engine it will reuse the Google Cloud authentication
via gar_gce_auth
</p>


<h3>See Also</h3>

<p>gcs_save_all and gcs_load_all that these functions call
</p>
<p>gcs_save_all and gcs_load_all that these functions call
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

.First &lt;- function(){
  googleCloudStorageR::gcs_first()
}


.Last &lt;- function(){
  googleCloudStorageR::gcs_last()
}



## End(Not run)

</code></pre>


</div>