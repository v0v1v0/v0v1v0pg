<div class="container">

<table style="width: 100%;"><tr>
<td>comperf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute model performance</h2>

<h3>Description</h3>

<p>This function computes model performance given a vector of response values
and a vector of predictions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">comperf(y, yhat, w = rep(1, length(y)), pfmc = NULL, cdfx = "fpr",
  cdfy = "tpr", dspt = 0.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a vector of numeric response values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhat</code></td>
<td>
<p>a vector of model predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>an optional vector of observation weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pfmc</code></td>
<td>
<p>a character of the performance metric. For binary classification,
<code>pfmc</code> accepts:
</p>

<ul>
<li> <p><code>"acc"</code>: accuracy
</p>
</li>
<li> <p><code>"dev"</code>: deviance
</p>
</li>
<li> <p><code>"ks"</code>: Kolmogorov-Smirnov (KS) statistic
</p>
</li>
<li> <p><code>"auc"</code>: area under the ROC curve. Use the <code>cdfx</code> and
<code>cdfy</code> arguments to specify the cumulative distributions for the x-axis
and y-axis of the ROC curve, respectively. The default ROC curve is given by
true positive rate (y-axis) vs. false positive rate (x-axis).
</p>
</li>
<li> <p><code>"roc"</code>: rate on the y-axis of the ROC curve at a particular
decision point (threshold) on the x-axis specified by the <code>dspt</code>
argument. For example, if the desired performance metric is true positive
rate at the 5% false positive rate, specify <code>pfmc="roc"</code>,
<code>cdfx="fpr"</code>, <code>cdfy="tpr"</code>, and <code>dspt=0.05</code>.
</p>
</li>
</ul>
<p>For regression, <code>pfmc</code> accepts:
</p>

<ul>
<li> <p><code>"mse"</code>: mean squared error
</p>
</li>
<li> <p><code>"mae"</code>: mean absolute error
</p>
</li>
<li> <p><code>"rsq"</code>: r-squared (coefficient of determination)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cdfx</code></td>
<td>
<p>a character of the cumulative distribution for the x-axis.
Supported values are
</p>

<ul>
<li> <p><code>"fpr"</code>: false positive rate
</p>
</li>
<li> <p><code>"fnr"</code>: false negative rate
</p>
</li>
<li> <p><code>"rpp"</code>: rate of positive prediction
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cdfy</code></td>
<td>
<p>a character of the cumulative distribution for the y-axis.
Supported values are
</p>

<ul>
<li> <p><code>"tpr"</code>: true positive rate
</p>
</li>
<li> <p><code>"tnr"</code>: true negative rate
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dspt</code></td>
<td>
<p>a decision point (threshold) in [0, 1] for binary classification.
If <code>pfmc="acc"</code>, instances with probabilities &lt;= <code>dspt</code> are
predicted as negative, and those with probabilities &gt; <code>dspt</code> are
predicted as positive. If <code>pfmc="roc"</code>, <code>dspt</code> is a threhold on the
x-axis of the ROC curve such that the corresponding value on the y-axis is
used as the performance metric. For example, if the desired performance
metric is the true positive rate at the 5% false positive rate, specify
<code>pfmc="roc"</code>, <code>cdfx="fpr"</code>, <code>cdfy="tpr"</code>, and <code>dspt=0.05</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A single or a vector of numeric values of model performance, or a
list of two components <code>x</code> and <code>y</code> representing the ROC curve.
</p>


<h3>Author(s)</h3>

<p>Waley W. J. Liang &lt;<a href="mailto:wliang10@gmail.com">wliang10@gmail.com</a>&gt;
</p>


<h3>See Also</h3>

<p><code>gbts</code>,
<code>predict.gbts</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">y = c(0, 1, 0, 1, 1, 1)
yhat = c(0.5, 0.9, 0.2, 0.7, 0.6,  0.4)
comperf(y, yhat, pfmc = "auc")
# 0.875

y = 1:10
yhat = c(1:5 - 0.1, 6:10 + 0.1)
comperf(y, yhat, pfmc = "mse")
# 0.01

</code></pre>


</div>