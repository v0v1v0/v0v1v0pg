<div class="container">

<table style="width: 100%;"><tr>
<td>analyze.gain</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Analyze Potential Gain from Passive Device Installation on WTGs by Using a
Machine Learning-Based Tool</h2>

<h3>Description</h3>

<p>Implements the gain analysis as a whole; this includes data arrangement,
period 1 analysis, period 2 analysis, and gain quantification.
</p>


<h3>Usage</h3>

<pre><code class="language-R">analyze.gain(df1, df2, df3, p1.beg, p1.end, p2.beg, p2.end, ratedPW, AEP,
  pw.freq, freq.id = 3, time.format = "%Y-%m-%d %H:%M:%S",
  k.fold = 5, col.time = 1, col.turb = 2, bootstrap = NULL,
  free.sec = NULL, neg.power = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df1</code></td>
<td>
<p>A dataframe for reference turbine data. This dataframe must
include five columns: timestamp, turbine id, wind direction, power output,
and air density.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df2</code></td>
<td>
<p>A dataframe for baseline control turbine data. This dataframe must
include four columns: timestamp, turbine id, wind speed, and power output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df3</code></td>
<td>
<p>A dataframe for neutral control turbine data. This dataframe must
include four columns and have the same structure with <code>df2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p1.beg</code></td>
<td>
<p>A string specifying the beginning date of period 1. By default,
the value needs to be specified in ‘<span class="samp">⁠%Y-%m-%d⁠</span>’ format, for example,
<code>'2014-10-24'</code>. A user can use a different format as long as it is
consistent with the format defined in <code>time.format</code> below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p1.end</code></td>
<td>
<p>A string specifying the end date of period 1. For example, if
the value is <code>'2015-10-24'</code>, data observed until
<code>'2015-10-23 23:50:00'</code> would be considered for period 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p2.beg</code></td>
<td>
<p>A string specifying the beginning date of period 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p2.end</code></td>
<td>
<p>A string specifying the end date of period 2. Defined similarly
as <code>p1.end</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratedPW</code></td>
<td>
<p>A kW value that describes the (common) rated power of the
selected turbines (REF and CTR-b).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AEP</code></td>
<td>
<p>A kWh value describing the annual energy production from a single
turbine.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pw.freq</code></td>
<td>
<p>A matrix or a dataframe that includes power output bins and
corresponding frequency in terms of the accumulated hours during an annual
period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq.id</code></td>
<td>
<p>An integer indicating the column number of <code>pw.freq</code> that
describes the frequency of power bins in terms of the accumulated hours
during an annual period. By default, this parameter is set to 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.format</code></td>
<td>
<p>A string describing the format of time stamps used in the
data to be analyzed. The default value is <code>'%Y-%m-%d %H:%M:%S'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k.fold</code></td>
<td>
<p>An integer defining the number of data folds for the period 1
analysis and prediction. In the period 1 analysis, <code class="reqn">k</code>-fold cross
validation (CV) will be applied to choose the optimal set of covariates
that results in the least prediction error. The value of <code>k.fold</code>
corresponds to the <code class="reqn">k</code> of the <code class="reqn">k</code>-fold CV. The default value is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.time</code></td>
<td>
<p>An integer specifying the column number of time stamps in
wind turbine datasets. The default value is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.turb</code></td>
<td>
<p>An integer specifying the column number of turbines' id in
wind turbine datasets. The default value is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap</code></td>
<td>
<p>An integer indicating the current replication (run) number
of bootstrap. If set to <code>NULL</code>, bootstrap is not applied. The default
is <code>NULL</code>. A user is not recommended to set this value and directly
run bootstrap; instead, use <code>bootstrap.gain</code> to run bootstrap.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>free.sec</code></td>
<td>
<p>A list of vectors defining free sectors. Each vector in the
list has two scalars: one for starting direction and another for ending
direction, ordered clockwise. For example, a vector of <code>c(310 , 50)</code>
is a valid component of the list. By default, this is set to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>neg.power</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>, indicating whether or
not to use data points with a negative power output, respectively, in the
analysis. The default value is <code>FALSE</code>, i.e., negative power output
data will be eliminated.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Builds a machine learning model for a REF turbine (device installed)
and a baseline CTR turbine (CTR-b; without device installation and
preferably closest to the REF turbine) by using data measurements from a
neutral CTR turbine (CTR-n; without device installation). Gain is
quantified by evaluating predictions from the machine learning models and
their differences during two different time periods, namely, period 1
(without device installation on the REF turbine) and period 2 (device
installed on the REF turbine).
</p>


<h3>Value</h3>

<p>The function returns a list of several objects (lists) that includes
all the analysis results from all steps. </p>
 <dl>
<dt><code>data</code></dt>
<dd>
<p>A
list of arranged datasets including period 1 and period 2 data as well as
<code class="reqn">k</code>-folded training and test datasets generated from the period 1 data.
See also <code>arrange.data</code>.</p>
</dd> <dt><code>p1.res</code></dt>
<dd>
<p>A list
containing period 1 analysis results. This includes the optimal set of
predictor variables, period 1 prediction for the REF turbine and CTR-b
turbine, the corresponding error measures such as RMSE and BIAS, and BIAS
curves for both REF and CTR-b turbine models; see <code>analyze.p1</code>
for the details.</p>
</dd> <dt><code>p2.res</code></dt>
<dd>
<p>A list containing period 2 analysis
results. This includes period 2 prediction for the REF turbine and CTR-b
turbine. See also <code>analyze.p2</code>.</p>
</dd> <dt><code>gain.res</code></dt>
<dd>
<p>A list
containing gain quantification results. This includes effect curve, offset
curve, and gain curve as well as the measures of effect (gain without
offset), offset, and (the final) gain; see <code>quantify.gain</code> for
the details.</p>
</dd> </dl>
<h3>Note</h3>

 <ul>
<li>
<p> This function will execute four other functions in
sequence, namely, <code>arrange.data</code>, <code>analyze.p1</code>,
<code>analyze.p2</code>, <code>quantify.gain</code>. </p>
</li>
<li>
<p> A user can
alternatively run the four funtions by calling them individually in
sequence.</p>
</li>
</ul>
<h3>References</h3>

<p>H. Hwangbo, Y. Ding, and D. Cabezon, 'Machine Learning Based
Analysis and Quantification of Potential Power Gain from Passive Device
Installation,' arXiv:1906.05776 [stat.AP], Jun. 2019.
<a href="https://arxiv.org/abs/1906.05776">https://arxiv.org/abs/1906.05776</a>.
</p>


<h3>See Also</h3>

<p><code>arrange.data</code>, <code>analyze.p1</code>,
<code>analyze.p2</code>, <code>quantify.gain</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D,
 power = y, air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V,
 power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

# For Full Sector Analysis
res &lt;- analyze.gain(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 ratedPW = 1000, AEP = 300000, pw.freq = pw.freq, k.fold = 2)
# In practice, one may use annual data for each of period 1 and period 2 analysis.
# One may typically use k.fold = 5 or 10.

# For Free Sector Analysis
free.sec &lt;- list(c(310, 50), c(150, 260))

res &lt;- analyze.gain(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 ratedPW = 1000, AEP = 300000, pw.freq = pw.freq, k.fold = 2,
 free.sec = free.sec)

gain.res &lt;- res$gain.res
gain.res$gain    #This will provide the final gain value.

</code></pre>


</div>