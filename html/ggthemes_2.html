<div class="container">

<table style="width: 100%;"><tr>
<td>bank_slopes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bank Slopes to 45 degrees</h2>

<h3>Description</h3>

<p>Calculate the optimal aspect ratio of a line graph by banking the
slopes to 45 degrees as suggested by W.S. Cleveland. This
maximizes the ability to visually differentiate differences in
slope. This function will calculate the optimal aspect ratio for
a line plot using any of the methods described in Herr and Argwala
(2006). In their review of the methods they suggest using median
absolute slope banking ('ms'), which produces aspect ratios which
are generally the median of the various methods provided here.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bank_slopes(x, y, cull = FALSE, weight = NULL, method = c("ms", "as"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>x values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>y values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cull</code></td>
<td>
<p><code>logical</code>. Remove all slopes of 0 or <code>Inf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>No longer used, but kept for backwards compatibility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>One of 'ms' (Median Absolute Slope) or 'as' (Average
Absolute Slope). Other options are no longer supported, and will use
'ms' instead with a warning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>No longer used, but kept for backwards compatibility.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>numeric</code> The aspect ratio (x , y).
</p>


<h3>Methods</h3>

<p>As written, all of these methods calculate the aspect ratio (x
/y), but <code>bank_slopes</code> will return (y / x) to be compatible
with <code>link[ggplot2]{coord_fixed()}</code>.
</p>
<p><strong>Median Absolute Slopes Banking</strong>
</p>
<p>Let the aspect ratio be <code class="reqn">\alpha = \frac{w}{h}</code>
then the median absolute slop banking is the
<code class="reqn">\alpha</code> such that,
</p>
<p style="text-align: center;"><code class="reqn">
  median \left| \frac{s_i}{\alpha} \right| = 1
</code>
</p>

<p>Let <code class="reqn">R_z = z_{max} - z_{min}</code> for <code class="reqn">z = x, y</code>,
and <code class="reqn">M = median \| s_i \|</code>. Then,
</p>
<p style="text-align: center;"><code class="reqn">
\alpha = M \frac{R_x}{R_y}
</code>
</p>

<p><strong>Average Absolute Slope Banking</strong>
</p>
<p>Let the aspect ratio be <code class="reqn">\alpha = \frac{w}{h}</code>.
then the mean absolute slope banking is the
<code class="reqn">\alpha</code> such that,
</p>
<p style="text-align: center;"><code class="reqn">
  mean \left| \frac{s_i}{\alpha} \right| = 1
</code>
</p>

<p>Heer and Agrawala (2006) and Cleveland discuss several other methods
including average (weighted) orientation, and global and local orientation resolution.
These are no longer implemented in this function. In general, either the
median or average absolute slopes will produce reasonable results without
requiring optimization.
</p>


<h3>References</h3>

<p>Cleveland, W. S., M. E. McGill, and R. McGill. The Shape Parameter
of a Two-Variable Graph.  Journal of the American Statistical
Association, 83:289-300, 1988
</p>
<p>Heer, Jeffrey and Maneesh Agrawala, 2006. 'Multi-Scale Banking to 45'
IEEE Transactions On Visualization And Computer Graphics.
</p>
<p>Cleveland, W. S. 1993. 'A Model for Studying Display Methods of Statistical
Graphs.' Journal of Computational and Statistical Graphics.
</p>
<p>Cleveland, W. S. 1994. The Elements of Graphing Data, Revised Edition.
</p>


<h3>See Also</h3>

<p><code>banking()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("ggplot2")

# Use the classic sunspot data from Cleveland's original paper
x &lt;- seq_along(sunspot.year)
y &lt;- as.numeric(sunspot.year)
# Without banking
m &lt;- ggplot(data.frame(x = x, y = y), aes(x = x, y = y)) +
   geom_line()
m

## Using the default method, Median Absolute Slope
ratio &lt;- bank_slopes(x, y)
m + coord_fixed(ratio = ratio)
## Using culling
## Average Absolute Slope
bank_slopes(x, y, method = "as")
</code></pre>


</div>