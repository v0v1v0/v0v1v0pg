<div class="container">

<table style="width: 100%;"><tr>
<td>adjust_speed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjust the speeds of a gps-like table created with <code>gtfs2gps</code>
</h2>

<h3>Description</h3>

<p>Some GTFS.zip data sets might have quality issues, for example 
by assuming that a trip speed is unreasonably high (e.g. an urban bus running
over 100 Km/h), or in other cases the 'timestamp' information might be
missing for some route segments. This can lead a gps-like table to have 'NA'
or unrealistic 'speed' and 'timestamp' values. This function allows the
user to adjust the speed of trips and updates 'timestamp' values 
accordingly. The user can adjust the problematic speeds by either setting a
custom constant value, or by considering the average of all valid trips speed
(Default). The columns 'timestamp' and 'cumtime' are updated accordingly.
</p>


<h3>Usage</h3>

<pre><code class="language-R">adjust_speed(
  gps_data,
  min_speed = 2,
  max_speed = 80,
  new_speed = NULL,
  clone = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gps_data</code></td>
<td>
<p>A GPS-like data.table created with <code>gtfs2gps</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_speed</code></td>
<td>
<p>Minimum speed to be considered as valid. It can
be a numeric (in km/h) or a units value able to be converted to km/h. Values 
below minimum speed will be adjusted. Defaults to 2 km/h.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_speed</code></td>
<td>
<p>Maximum speed to be considered as valid. It can
be a numeric (in km/h) or a units value able to be converted to km/h. Values
above maximum speed will be adjusted. Defaults to 80 km/h.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_speed</code></td>
<td>
<p>Speed to replace missing values as well as values
outside min_speed and max_speed range. It can
be a numeric (in km/h) or a units value able to be converted to km/h.
By default, 'new_speed = NULL' and the
function considers the average speed of the entire gps data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clone</code></td>
<td>
<p>Use a copy of the gps_data? Defaults to TRUE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A GPS-like data with adjusted 'speed' values. The columns
'timestamp' and 'cumtime' are also updated accordingly.
</p>


<h3>Examples</h3>

<pre><code class="language-R">poa &lt;- read_gtfs(system.file("extdata/poa.zip", package="gtfs2gps")) |&gt;
  gtfstools::filter_by_shape_id("T2-1") |&gt;
  gtfstools::filter_by_weekday(c("monday", "wednesday")) |&gt;
  filter_single_trip()

poa_gps &lt;- gtfs2gps(poa)
poa_gps_new &lt;- adjust_speed(poa_gps)
</code></pre>


</div>