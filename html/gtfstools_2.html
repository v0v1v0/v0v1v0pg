<div class="container">

<table style="width: 100%;"><tr>
<td>as_dt_gtfs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Coerce lists and GTFS objects from other packages into gtfstools-compatible
GTFS objects</h2>

<h3>Description</h3>

<p>Coerces an existing object, such as a <code>list</code> or a GTFS object created from
other packages (<code>{tidytransit}</code> and <code>{gtfsio}</code>, for example) into a
gtfstools-compatible GTFS object - i.e. one whose internal tables are
represented with <code>data.table</code>s and whose fields are formatted like the fields
of a feed read with <code>read_gtfs()</code>.
</p>
<p><code>as_dt_gtfs()</code> is an S3 generic, with methods for:
</p>

<ul>
<li> <p><code>tidygtfs</code>: the class of GTFS objects read with <code>tidytransit::read_gtfs()</code>.
This method converts all <code>tibble</code>s to <code>data.table</code>s and convert time columns,
represented as <code>hms</code> objects in a <code>tidygtfs</code>, to strings in the <code>"HH:MM:SS"</code>
format.
</p>
</li>
<li> <p><code>gtfs</code>: the class of GTFS objects read with <code>gtfsio::import_gtfs()</code>. This
method convert all date fields, represented as <code>integer</code>s in <code>{gtfsio}</code>'s
representation, to <code>Date</code> objects.
</p>
</li>
<li> <p><code>list</code>: this method tries to convert the elements of a list into
<code>data.table</code>s. Please note that all list elements must inherit from
<code>data.frame</code> and must be named. This method does not try not convert fields
to the representation used in <code>{gtfstools}</code>, as it does not have any
information on how they are formatted in the first place.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">as_dt_gtfs(gtfs, ...)

## S3 method for class 'tidygtfs'
as_dt_gtfs(gtfs, calculate_distance = TRUE, ...)

## S3 method for class 'gtfs'
as_dt_gtfs(gtfs, ...)

## S3 method for class 'list'
as_dt_gtfs(gtfs, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gtfs</code></td>
<td>
<p>The object that should be coerced to a <code>dt_gtfs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calculate_distance</code></td>
<td>
<p>A logical. Passed to <code>convert_sf_to_shapes()</code>,
which only affects the output when the object to be converted includes a
<code>shapes</code> element. Controls whether this function, used to convert a
<code style="white-space: pre;">⁠LINESTRING sf⁠</code> into a GTFS <code>shapes</code> table, should calculate and populate
the <code>shape_dist_traveled</code> column. This column is used to describe the
distance along the shape from each one of its points to its first point.
Defaults to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>dt_gtfs</code> GTFS object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data_path &lt;- system.file("extdata/spo_gtfs.zip", package = "gtfstools")

gtfsio_gtfs &lt;- gtfsio::import_gtfs(data_path)
class(gtfsio_gtfs)

gtfstools_gtfs &lt;- as_dt_gtfs(gtfsio_gtfs)
class(gtfstools_gtfs)

gtfs_like_list &lt;- unclass(gtfsio_gtfs)
class(gtfs_like_list)

gtfstools_gtfs &lt;- as_dt_gtfs(gtfs_like_list)
class(gtfstools_gtfs)

</code></pre>


</div>