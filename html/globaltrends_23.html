<div class="container">

<table style="width: 100%;"><tr>
<td>download_control</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download data for control keywords</h2>

<h3>Description</h3>

<p>The function downloads search volumes from Google Trends for a <em>control</em>
batch in a set of <em>locations</em>. Data is automatically written to table
<em>data_control</em>. For <code>download_control_global</code> the input
<em>location</em> is automatically set to <em>world</em>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">download_control(control, locations = gt.env$countries, ...)

## S3 method for class 'numeric'
download_control(control, locations = gt.env$countries, ...)

## S3 method for class 'list'
download_control(control, locations = gt.env$countries, ...)

download_control_global(control, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>Control batch for which the data is downloaded. Object
of type <code>numeric</code> or object of type <code>list</code> containing single
objects of type <code>numeric</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locations</code></td>
<td>
<p>List of countries or regions for which the data is
downloaded. Refers to lists generated in <code>start_db</code>. Defaults to
<code>gt.env$countries</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments that are passed on to the <code>gtrendsR::gtrends</code> function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Downloads through the Google Trends API are made through
<code>gtrendsR::gtrends</code>. Each control batch can consist of up to five
keywords and is predefined in tables <em>batch_keywords</em> and
<em>batch_time</em> through <code>add_keywords</code>. The download for a single
keyword batch for a single location takes about 30 seconds. This includes a
randomized waiting period of 5-10 seconds between downloads. Depending on
the frequency of downloads, Google Trends might block users for some time. In
this case, <code>download_control</code> waits 60 minutes before it retries the
download.
</p>


<h3>Value</h3>

<p>Message that data has been downloaded successfully. Data is written
to table <em>data_control</em>.
</p>


<h3>Warning</h3>

<p>We advise against the usage of <em>category codes</em> in
downloads. If you use <em>categories</em> to narrow the context of keyword usage,
these categories are applied to <strong>ALL</strong> keywords in the batch. This applies
to <em>control</em> keywords as well as <em>object</em> keywords and can result in
unintended behavior.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code>example_control()</code>
</p>
</li>
<li> <p><code>gtrendsR::gtrends()</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
download_control(
  control = 1,
  locations = countries
)
download_control(
  control = as.list(1:5),
  locations = countries
)

## End(Not run)

</code></pre>


</div>