<div class="container">

<table style="width: 100%;"><tr>
<td>dendro_data.rpart</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract data from classification tree object for plotting using ggplot.</h2>

<h3>Description</h3>

<p>Extracts data to plot line segments and labels from a
<code>rpart::rpart()</code> classification tree object.  This data can then be
manipulated or plotted, e.g. using <code>ggplot2::ggplot()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'rpart'
dendro_data(
  model,
  uniform = FALSE,
  branch = 1,
  compress = FALSE,
  nspace,
  minbranch = 0.3,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>object of class "tree", e.g. the output of tree()</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uniform</code></td>
<td>
<p>if TRUE, uniform vertical spacing of the nodes is used; this
may be less cluttered when fitting a large plot onto a page. The default is
to use a non-uniform spacing proportional to the error in the fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>branch</code></td>
<td>
<p>controls the shape of the branches from parent to child node.
Any number from 0 to 1 is allowed. A value of 1 gives square shouldered
branches, a value of 0 give V shaped branches, with other values being
intermediate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>if FALSE, the leaf nodes will be at the horizontal plot
coordinates of 1:nleaves. If TRUE, the routine attempts a more compact
arrangement of the tree. The compaction algorithm assumes uniform=TRUE;
surprisingly, the result is usually an improvement even when that is not
the case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nspace</code></td>
<td>
<p>the amount of extra space between a node with children and a
leaf, as compared to the minimal space between leaves. Applies to
compressed trees only. The default is the value of branch.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minbranch</code></td>
<td>
<p>set the minimum length for a branch to minbranch times the
average branch length. This parameter is ignored if uniform=TRUE. Sometimes
a split will give very little improvement, or even (in the classification
case) no improvement at all. A tree with branch lengths strictly
proportional to improvement leaves no room to squeeze in node labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This code is in essence a copy of <code>rpart::plot.rpart()</code>, retaining
the plot data but without plotting to a plot device.
</p>


<h3>Value</h3>

<p>A list of three data frames:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>segments</code></td>
<td>
<p>a data frame containing the line segment data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>a data frame containing the label text data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leaf_labels</code></td>
<td>
<p>a data frame containing the leaf label text data</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>ggdendrogram()</code>
</p>
<p>Other dendro_data methods: 
<code>dendro_data()</code>,
<code>dendro_data.tree()</code>,
<code>dendrogram_data()</code>,
<code>rpart_labels()</code>
</p>
<p>Other rpart functions: 
<code>rpart_labels()</code>,
<code>rpart_segments()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Demonstrate rpart

if (require(rpart)) {
  require(ggplot2)
  fit &lt;- rpart(Kyphosis ~ Age + Number + Start, method = "class", 
               data = kyphosis)
  fitr &lt;- dendro_data(fit)
  ggplot() +
    geom_segment(data = fitr$segments, 
                 aes(x = x, y = y, xend = xend, yend = yend)
    ) +
    geom_text(data = fitr$labels, aes(x = x, y = y, label = label)) +
    geom_text(data = fitr$leaf_labels, aes(x = x, y = y, label = label)) +
    theme_dendro()
}
</code></pre>


</div>