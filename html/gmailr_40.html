<div class="container">

<table style="width: 100%;"><tr>
<td>gmailr-configuration</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Configuring gmailr</h2>

<h3>Description</h3>

<p>gmailr can be configured with various environment variables, which are
accessed through wrapper functions that provide some additional smarts.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gm_default_email()

gm_default_oauth_client()
</code></pre>


<h3><code>gm_default_email()</code></h3>

<p><code>gm_default_email()</code> returns the environment variable <code>GMAILR_EMAIL</code>, if it
exists, and <code>gargle::gargle_oauth_email()</code>, otherwise.
</p>


<h3><code>gm_default_oauth_client()</code></h3>

<p><code>gm_default_oauth_client()</code> consults a specific set of locations, looking for
the filepath for the JSON file that represents an OAuth client. This file can
be downloaded from the APIs &amp; Services section of the Google Cloud console
<a href="https://console.cloud.google.com">https://console.cloud.google.com</a>). The search unfolds like so:
</p>

<ul>
<li> <p><code>GMAILR_OAUTH_CLIENT</code> environment variable: If defined, it is assumed to be
the path to the target JSON file.
</p>
</li>
<li>
<p> A <code>.json</code> file found in the directory returned by
<code>rappdirs::user_data_dir("gmailr")</code>, whose filename uniquely matches the
regular expression <code>"client_secret.+[.]json$"</code>.
</p>
</li>
<li> <p><code>GMAILR_APP</code> environment variable: This is supported for backwards
compatibility, but it is preferable to store the JSON below
<code>rappdirs::user_data_dir("gmailr")</code> or to store the path in the
<code>GMAILR_OAUTH_CLIENT</code> environment variable.
</p>
</li>
</ul>
<p>Here's an inspirational snippet to move the JSON file you downloaded into the
right place for auto-discovery by <code>gm_auth_configure()</code>:
</p>
<div class="sourceCode r"><pre>path_old &lt;- "~/Downloads/client_secret_123-abc.apps.googleusercontent.com.json"
d &lt;- fs::dir_create(rappdirs::user_data_dir("gmailr"), recurse = TRUE)
fs::file_move(path_old, d)
</pre></div>


<h3>See Also</h3>

<p>Since gmailr uses the gargle package to handle auth, gargle's
configuration is also relevant, which is mostly accomplished through
options and associated accessor functions.
</p>
<p>Other auth functions: 
<code>gm_auth_configure()</code>,
<code>gm_auth()</code>,
<code>gm_deauth()</code>,
<code>gm_scopes()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">gm_default_email()

withr::with_envvar(
  c(GMAILR_EMAIL = "jenny@example.com"),
  gm_default_email()
)

gm_default_oauth_client()

withr::with_envvar(
  c(GMAILR_OAUTH_CLIENT = "path/to/my-client.json"),
  gm_default_oauth_client()
)
</code></pre>


</div>