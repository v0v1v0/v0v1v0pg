<div class="container">

<table style="width: 100%;"><tr>
<td>layout_tbl_graph_metro</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Place nodes according to the standard design of metro maps</h2>

<h3>Description</h3>

<p>This layouttries to optimise the placement of nodes so that they adhere to
the classic look of metro maps. As such it optimizes on the distribution of
incident edge angles, conformity of edge length, and edge angles in multiples
of 45 degrees. As it works as a refinement of an already existing layout
(the physical location of metro stations) it requires an a priori node
location. Due to it's purpose it probably works best with planar graphs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">layout_tbl_graph_metro(
  graph,
  x,
  y,
  length = 2,
  grid_space = 0.0025,
  optimization_weights = NULL,
  max_movement = 5,
  circular = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>graph</code></td>
<td>
<p>A tbl_graph object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>The start location of the nodes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>length</code></td>
<td>
<p>Desired multiple of grid point spacing. (<code>length * grid_space</code>
determines desired edge length)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_space</code></td>
<td>
<p>The distance between consecitive grid points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimization_weights</code></td>
<td>
<p>The relative weight to be placed on the 5
criteria during optimization as a numeric vector of length 4. The criteria
are:
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠Angular Resolution Criterion⁠</code>: The angles of incident edges at each
station should be maximized, because if there is only a small angle between
any two adjacent edges, then it can become difficult to distinguish between
them.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Edge Length Criterion⁠</code>: The edge lengths across the whole map should be
approximately equal to ensure regular spacing between stations. It is based
on the preferred multiple, l, of the grid spacing, g. The purpose of the
criterion is to penalize edges that are longer than or shorter than lg.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Balanced Edge Length Criterion⁠</code>: The length of edges incident to a
particular station should be similar.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Line Straightness Criterion⁠</code>: (not yet implemented) Edges that form part
of a line should, where possible, be co-linear either side of each station
that the line passes through.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Octiinearity Criterion⁠</code>: Each edge should be drawn horizontally,
vertically, or diagonally at 45 degree, so we penalize edges that are not
at a desired angle.
If <code>NULL</code> all criteria are given equal weight.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_movement</code></td>
<td>
<p>Number of grid points a station can move away rom its
original position</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circular</code></td>
<td>
<p>ignored</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data.frame with the columns <code>x</code>, <code>y</code>, <code>circular</code> as
well as any information stored as node variables in the tbl_graph object.
</p>


<h3>Author(s)</h3>

<p>The underlying algorithm is implemented in the graphlayouts package
by David Schoch
</p>


<h3>References</h3>

<p>Stott, J., Rodgers, P., Martinez-Ovando, J. C., and Walker, S. G. (2011).
<em>Automatic metro map layout using multicriteria optimization</em> In IEEE Trans
Vis Comput Graph 17(1) pp. 101-114. https://doi.org/10.1109/tvcg.2010.24
</p>


<h3>See Also</h3>

<p>Other layout_tbl_graph_*: 
<code>layout_tbl_graph_auto()</code>,
<code>layout_tbl_graph_backbone()</code>,
<code>layout_tbl_graph_cactustree()</code>,
<code>layout_tbl_graph_centrality()</code>,
<code>layout_tbl_graph_circlepack()</code>,
<code>layout_tbl_graph_dendrogram()</code>,
<code>layout_tbl_graph_eigen()</code>,
<code>layout_tbl_graph_fabric()</code>,
<code>layout_tbl_graph_focus()</code>,
<code>layout_tbl_graph_hive()</code>,
<code>layout_tbl_graph_htree()</code>,
<code>layout_tbl_graph_igraph()</code>,
<code>layout_tbl_graph_linear()</code>,
<code>layout_tbl_graph_manual()</code>,
<code>layout_tbl_graph_matrix()</code>,
<code>layout_tbl_graph_partition()</code>,
<code>layout_tbl_graph_pmds()</code>,
<code>layout_tbl_graph_sf()</code>,
<code>layout_tbl_graph_stress()</code>,
<code>layout_tbl_graph_treemap()</code>,
<code>layout_tbl_graph_unrooted()</code>
</p>


</div>