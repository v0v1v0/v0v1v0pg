<div class="container">

<table style="width: 100%;"><tr>
<td>remove_invalid</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Remove invalid objects from GTFS data</h2>

<h3>Description</h3>

<p>Remove all objects from GTFS data that are not used in all relations
that they are required to be. That is,
agency-routes relation (agency_id), routes-trips relation (route_id), 
trips-shapes relation (shape_id), trips-frequencies relation (trip_id),
trips-stop_times relation (trip_id), stop_times-stops relation (stop_id),
and trips-calendar relation (service_id),
recursively, until GTFS data does not reduce its size anymore. For example,
if one agency_id belongs to routes but not to agency will be removed. This might
cause one cascade removal of objects in other relations that originally
did not have any inconsistency.
</p>


<h3>Usage</h3>

<pre><code class="language-R">remove_invalid(gtfs_data, only_essential = TRUE, prompt_invalid = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gtfs_data</code></td>
<td>
<p>A list of data.tables read using gtfs2gps::reag_gtfs().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_essential</code></td>
<td>
<p>Remove only the essential files? The essential files are all but 
agency, calendar, and routes. Default is TRUE, which means that agency-routes,
routes-trips, and trips-calendar relations
will not be processed as restrictions to remove objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prompt_invalid</code></td>
<td>
<p>Show the invalid objects. Default is FALSE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A subset of the input GTFS data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">poa &lt;- read_gtfs(system.file("extdata/poa.zip", package = "gtfs2gps"))
object.size(poa)
subset &lt;- remove_invalid(poa)
object.size(subset)
</code></pre>


</div>