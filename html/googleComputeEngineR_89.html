<div class="container">

<table style="width: 100%;"><tr>
<td>gce_vm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create or fetch a virtual machine</h2>

<h3>Description</h3>

<p>Pass in the instance name to fetch its object, or create the instance via gce_vm_create.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gce_vm(name, ..., project = gce_get_global_project(),
  zone = gce_get_global_zone(), open_webports = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed on to <code>gce_vm_create</code>
</p>

<dl>
<dt>image_project</dt>
<dd>
<p>Project ID of where the image lies</p>
</dd>
<dt>image</dt>
<dd>
<p>Name of the image resource to return</p>
</dd>
<dt>image_family</dt>
<dd>
<p>Name of the image family to search for</p>
</dd>
<dt>disk_source</dt>
<dd>
<p>Specifies a valid URL to an existing Persistent Disk resource.</p>
</dd>
<dt>network</dt>
<dd>
<p>The name of the network interface</p>
</dd>
<dt>externalIP</dt>
<dd>
<p>An external IP you have previously reserved, leave NULL to have one assigned or <code>"none"</code> for no external access.</p>
</dd>
<dt>minCpuPlatform</dt>
<dd>
<p>Specify a minimum CPU platform as per <a href="these%20Google%20docs">https://cloud.google.com/compute/docs/instances/specify-min-cpu-platform</a></p>
</dd>
<dt>project</dt>
<dd>
<p>Project ID for this request</p>
</dd>
<dt>zone</dt>
<dd>
<p>The name of the zone for this request</p>
</dd>
<dt>dry_run</dt>
<dd>
<p>whether to just create the request JSON</p>
</dd>
<dt>disk_size_gb</dt>
<dd>
<p>If not NULL, override default size of the boot disk (size in GB)</p>
</dd>
<dt>use_beta</dt>
<dd>
<p>If set to TRUE will use the beta version of the API. Should not be used for production purposes.</p>
</dd>
<dt>acceleratorCount</dt>
<dd>
<p>Number of GPUs to add to instance.  If using this, you may want to instead use gce_vm_gpu which sets some defaults for GPU instances.</p>
</dd>
<dt>acceleratorType</dt>
<dd>
<p>Name of GPU to add, see gce_list_gpus</p>
</dd>
<dt>name</dt>
<dd>
<p>The name of the resource, provided by the client when initially creating the resource</p>
</dd>
<dt>canIpForward</dt>
<dd>
<p>Allows this instance to send and receive packets with non-matching destination or source IPs</p>
</dd>
<dt>description</dt>
<dd>
<p>An optional description of this resource</p>
</dd>
<dt>metadata</dt>
<dd>
<p>A named list of metadata key/value pairs assigned to this instance</p>
</dd>
<dt>scheduling</dt>
<dd>
<p>Scheduling options for this instance, such as preemptible instances</p>
</dd>
<dt>serviceAccounts</dt>
<dd>
<p>A list of service accounts, with their specified scopes, authorized for this instance</p>
</dd>
<dt>tags</dt>
<dd>
<p>A list of tags to apply to this instance</p>
</dd>
<dt>predefined_type</dt>
<dd>
<p>A predefined machine type from gce_list_machinetype</p>
</dd>
<dt>cpus</dt>
<dd>
<p>If not defining <code>predefined_type</code>, the number of CPUs</p>
</dd>
<dt>memory</dt>
<dd>
<p>If not defining <code>predefined_type</code>, amount of memory</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project</code></td>
<td>
<p>Project ID for this request</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zone</code></td>
<td>
<p>The name of the zone for this request</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>open_webports</code></td>
<td>
<p>If TRUE, will open firewall ports 80 and 443 if not open already</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Will get or create the instance as specified.  Will wait for instance to be created if necessary.
</p>
<p>Make sure the instance is big enough to handle what you need, 
for instance the default <code>f1-micro</code> will hang the instance when trying to install large R libraries.
</p>


<h3>Value</h3>

<p>A <code>gce_instance</code> object
</p>


<h3>Creation logic</h3>

<p>You need these parameters defined to call the right function for creation.  Check the function definitions for more details. 
</p>
<p>If the VM name exists but is not running, it start the VM and return the VM object
</p>
<p>If the VM is running, it will return the VM object
</p>
<p>If you specify the argument <code>template</code> it will call gce_vm_template
</p>
<p>If you specify one of <code>file</code> or <code>cloud_init</code> it will call gce_vm_container
</p>
<p>Otherwise it will call gce_vm_create
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

library(googleComputeEngineR)
## auto auth, project and zone pre-set
## list your VMs in the project/zone

the_list &lt;- gce_list_instances()

## start an existing instance
vm &lt;- gce_vm("markdev")

## for rstudio, you also need to specify a username and password to login
vm &lt;- gce_vm(template = "rstudio",
             name = "rstudio-server",
             username = "mark", password = "mark1234")

## specify your own cloud-init file and pass it into gce_vm_container()
vm &lt;- gce_vm(cloud_init = "example.yml",
             name = "test-container",
             predefined_type = "f1-micro")

## specify disk size at creation
vm &lt;- gce_vm('my-image3', disk_size_gb = 20)



## End(Not run)

</code></pre>


</div>