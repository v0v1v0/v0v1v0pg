<div class="container">

<table style="width: 100%;"><tr>
<td>setup_X1</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Setup function controlling the matrix <code class="reqn">X_1</code> in the BLP or GATES regression</h2>

<h3>Description</h3>

<p>Returns a list with three elements. The first element of the list, <code>funs_Z</code>, controls which functions of matrix <code>Z</code> are used as regressors in <code class="reqn">X_1</code>. The second element, <code>covariates</code>, is an optional matrix of custom covariates that shall be included in <code class="reqn">X_1</code>. The third element, <code>fixed_effects</code>, controls the inclusion of fixed effects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setup_X1(funs_Z = c("B"), covariates = NULL, fixed_effects = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>funs_Z</code></td>
<td>
<p>Character vector controlling the functions of <code>Z</code> to be included in <code class="reqn">X_1</code>. Subset of <code>c("S", "B", "p")</code>, where <code>"p"</code> corresponds to the propensity scores, <code>"B"</code> to the proxy baseline estimates, and <code>"S"</code> to the proxy CATE estimates. Default is <code>"B"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>Optional numeric matrix containing additional covariates to be included in <code class="reqn">X_1</code>. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed_effects</code></td>
<td>
<p>Numeric vector of integers that indicates cluster membership of the observations: For each cluster, a fixed effect will be added. Default is <code>NULL</code> for no fixed effects.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The output of this setup function is intended to be used as argument in the functions <code>GenericML()</code> and <code>GenericML_single()</code> (arguments <code>X1_BLP</code>, <code>X1_GATES</code>), as well as <code>BLP()</code> and <code>GATES()</code> (argument <code>X1_control</code>).
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_X1"</code>, consisting of the following components:
</p>

<dl>
<dt><code>funs_Z</code></dt>
<dd>
<p>A character vector, being a subset of <code>c("S", "B", "p")</code>.</p>
</dd>
<dt><code>covariates</code></dt>
<dd>
<p>Either <code>NULL</code> or a numeric matrix.</p>
</dd>
<dt><code>fixed_effects</code></dt>
<dd>
<p>Either <code>NULL</code> or an integer vector indicating cluster membership.</p>
</dd>
</dl>
<p>See the description above for details.
</p>


<h3>References</h3>

<p>Chernozhukov V., Demirer M., Duflo E., Fernández-Val I. (2020). “Generic Machine Learning Inference on Heterogenous Treatment Effects in Randomized Experiments.” <em>arXiv preprint arXiv:1712.04802</em>. URL: <a href="https://arxiv.org/abs/1712.04802">https://arxiv.org/abs/1712.04802</a>.
</p>


<h3>See Also</h3>

<p><code>GenericML()</code>,
<code>GenericML_single()</code>,
<code>BLP()</code>,
<code>GATES()</code>,
<code>setup_vcov()</code>,
<code>setup_diff()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1)
n &lt;- 100 # sample size
p &lt;- 5   # number of covariates
covariates &lt;- matrix(runif(n*p), n, p) # sample matrix of covariates

# let there be three clusters; assign membership randomly
fixed_effects &lt;- sample(c(1,2,3), size = n, replace = TRUE)

# use BCA estimates in matrix X1
setup_X1(funs_Z = "B", covariates = NULL, fixed_effects = NULL)

# use BCA and propensity score estimates in matrix X1
# uses uniform covariates and fixed effects
setup_X1(funs_Z = c("B", "p"), covariates = covariates, fixed_effects = NULL)

</code></pre>


</div>