<div class="container">

<table style="width: 100%;"><tr>
<td>monthlyComposite</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Monthly Composite Images</h2>

<h3>Description</h3>

<p>Based on a user-defined function, e.g. <code>max</code> for maximum value
composites (MVC), aggregate half-monthly GIMMS data sets to monthly composites.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'RasterStackBrick'
monthlyComposite(x, indices, fun = max, cores = 1L, filename = "", ...)

## S4 method for signature 'character'
monthlyComposite(
  x,
  version = 1L,
  pos1 = ifelse(version == 1, 15L, 4L),
  pos2 = ifelse(version == 1, 23L, 8L),
  fun = max,
  cores = 1L,
  filename = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Multi-layered <code>Raster*</code> object or <code>character</code> vector of
filenames. If the latter applies and 'pos1', 'pos2' are not specified, the
function will try to retrieve monthly indices from
<code>monthlyIndices</code>. Note that the specification of NDVI3g.v0 ENVI
binary files is hereby not allowed and in such a case,
<code>rasterizeGimms</code> should be run beforehand.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indices</code></td>
<td>
<p><code>numeric</code>. Indices to denote layers or files from
identical months.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p><code>function</code>. Used to calculate monthly composite layers,
defaults to <code>max</code>. Note that a separate 'na.rm' argument is
passed down to <code>stackApply</code> via '...' and hence should not be
included here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p><code>integer</code>. Number of cores for parallel computing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p><code>character</code>. Optional output filename passed to
<code>stackApply</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>stackApply</code> (i.e.,
'na.rm') and its underlying <code>writeRaster</code> call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p><code>integer</code> (or any other class convertible to
<code>integer</code>). Specifies GIMMS NDVI3g product version, see 'Details' in
<code>updateInventory</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pos1, pos2</code></td>
<td>
<p><code>integer</code>. If 'x' is a vector of filenames, the first
and last element of the date string to build monthly indices from. Defaults
to the 'version'-specific NDVI3g naming convention, see
<code>monthlyIndices</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>length(x) == 2</code>, a single <code>RasterLayer</code> object, else a
<code>RasterStack</code> object with monthly composite layers.
</p>


<h3>See Also</h3>

<p><code>stackApply</code>, <code>monthlyIndices</code>,
<code>writeRaster</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("bale3g.v1")

## select layers from 1981 only
fls &lt;- system.file("extdata/inventory_ecv1.rds", package = "gimms")
fls &lt;- readRDS(fls)[1]
rst &lt;- bale3g.v1[[1:12]]

## aggregate to monthly mvc layers
mvc &lt;- monthlyComposite(rst, indices = monthlyIndices(fls))

</code></pre>


</div>