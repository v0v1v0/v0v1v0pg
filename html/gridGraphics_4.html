<div class="container">

<table style="width: 100%;"><tr>
<td>plotdiff</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Test for identical output from <code>grid.echo()</code>
</h2>

<h3>Description</h3>

<p>Functions to generate a scene using the <span class="pkg">graphics</span> package,
reproduce the scene using <code>grid.echo()</code>, test whether the
two results are identical, and report on any differences.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plotdiff(expr, label, dev = "pdf",
         antialias = TRUE, density = 100, width = 7, height = 7)
plotdiffInit()
plotdiffResult(warn = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>

<p>An expression that draws something using the <span class="pkg">graphics</span> package.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>

<p>A character value that is used to label files generated during testing.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev</code></td>
<td>

<p>The graphics device used for drawing and echoing.  Currently can only be
either <code>"pdf"</code> or <code>"png"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>antialias</code></td>
<td>

<p>A logical value indicating whether to perform antialiasing when
converting from PDF to PNG.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>

<p>A numeric value indicating the resolution (dpi) to use when
converting from PDF to PNG.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>

<p>Numeric values indicating the size of the device to test on.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn</code></td>
<td>

<p>A logical value indicating whether non-identical output should
produce a warning or an error.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In default usage, <code>plotdiff()</code> is used to generate two PDF
files, one using the original expression and the other from a call
to <code>grid.echo()</code>.  The PDF files are then converted to PNG
files and the PNG files are compared (using ImageMagick).  If
there are any differences, the
comparison generates a further PNG file that shows the differences.
</p>
<p>All files are currently generated in the current working directory.
</p>
<p>Text messages are also generated by <code>plotdiff()</code> whenever a
difference is found, but those messages are stored up rather than
printed immediately.
The <code>plotdiffResult()</code> function prints out all messages
since the last call to <code>plotdiffInit()</code>.
</p>
<p>Standard usage involves calling <code>plotdiffInit()</code>, followed by
one or more <code>plotdiff()</code> calls, then finally a call to
<code>plotdiffResult()</code>.
Examples of the usage of these functions are provided in the numerous
test scripts in the <code>test-scripts</code> directory of the package.
</p>


<h3>Value</h3>

<p>All functions are run for their side effects.
In the case of <code>plotdiff()</code>, the generation of PDF and PNG files
and the accumulation of differences about messages.
In the case of <code>plotdiffResult()</code>, a print out of the accumulated
messages, plus possibly either an error or warning.
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>


<h3>See Also</h3>

<p><code>grid.echo</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
plotdiff(expression(plot(1)), "plot")

## End(Not run)
</code></pre>


</div>