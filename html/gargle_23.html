<div class="container">

<table style="width: 100%;"><tr>
<td>gargle2.0_token</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a gargle token</h2>

<h3>Description</h3>

<p>Constructor function for objects of class Gargle2.0.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gargle2.0_token(
  email = gargle_oauth_email(),
  client = gargle_client(),
  package = "gargle",
  scope = NULL,
  use_oob = gargle_oob_default(),
  credentials = NULL,
  cache = if (is.null(credentials)) gargle_oauth_cache() else FALSE,
  ...,
  app = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>email</code></td>
<td>
<p>Optional. If specified, <code>email</code> can take several different
forms:
</p>

<ul>
<li> <p><code>"jane@gmail.com"</code>, i.e. an actual email address. This allows the user to
target a specific Google identity. If specified, this is used for token
lookup, i.e. to determine if a suitable token is already available in the
cache. If no such token is found, <code>email</code> is used to pre-select the targeted
Google identity in the OAuth chooser. (Note, however, that the email
associated with a token when it's cached is always determined from the token
itself, never from this argument).
</p>
</li>
<li> <p><code>"*@example.com"</code>, i.e. a domain-only glob pattern. This can be helpful if
you need code that "just works" for both <code>alice@example.com</code> and
<code>bob@example.com</code>.
</p>
</li>
<li> <p><code>TRUE</code> means that you are approving email auto-discovery. If exactly one
matching token is found in the cache, it will be used.
</p>
</li>
<li> <p><code>FALSE</code> or <code>NA</code> mean that you want to ignore the token cache and force a
new OAuth dance in the browser.
</p>
</li>
</ul>
<p>Defaults to the option named <code>"gargle_oauth_email"</code>, retrieved by
<code>gargle_oauth_email()</code> (unless a wrapper package implements different
default behavior).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>client</code></td>
<td>
<p>A Google OAuth client, preferably constructed via
<code>gargle_oauth_client_from_json()</code>, which returns an instance of
<code>gargle_oauth_client</code>. For backwards compatibility, for a limited time,
gargle will still accept an "OAuth app" created with <code>httr::oauth_app()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>Name of the package requesting a token. Used in messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scope</code></td>
<td>
<p>A character vector of scopes to request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_oob</code></td>
<td>
<p>Whether to use out-of-band authentication (or, perhaps, a
variant implemented by gargle and known as "pseudo-OOB") when first
acquiring the token. Defaults to the value returned by
<code>gargle_oob_default()</code>. Note that (pseudo-)OOB auth only affects
the initial OAuth dance. If we retrieve (and possibly refresh) a
cached token, <code>use_oob</code> has no effect.
</p>
<p>If the OAuth client is provided implicitly by a wrapper package, its type
probably defaults to the value returned by
<code>gargle_oauth_client_type()</code>. You can take control of the client
type by setting <code>options(gargle_oauth_client_type = "web")</code> or
<code>options(gargle_oauth_client_type = "installed")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>credentials</code></td>
<td>
<p>Advanced use only: allows you to completely customise
token generation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>Specifies the OAuth token cache. Defaults to the option named
<code>"gargle_oauth_cache"</code>, retrieved via <code>gargle_oauth_cache()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Absorbs arguments intended for use by other credential functions.
Not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>app</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Replaced by the <code>client</code>
argument.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class Gargle2.0, either new or loaded from the cache.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
gargle2.0_token()

## End(Not run)
</code></pre>


</div>