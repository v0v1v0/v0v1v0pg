<div class="container">

<table style="width: 100%;"><tr>
<td>token_fetch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fetch a token for the given scopes</h2>

<h3>Description</h3>

<p>This is a rather magical function that calls a series of concrete
credential-fetching functions, each wrapped in a <code>tryCatch()</code>.
<code>token_fetch()</code> keeps trying until it succeeds or there are no more functions
to try. See the <code>vignette("how-gargle-gets-tokens")</code> for a full description
of <code>token_fetch()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">token_fetch(scopes = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>scopes</code></td>
<td>
<p>A character vector of scopes to request. Pick from those listed
at <a href="https://developers.google.com/identity/protocols/oauth2/scopes">https://developers.google.com/identity/protocols/oauth2/scopes</a>.
</p>
<p>For certain token flows, the
<code>"https://www.googleapis.com/auth/userinfo.email"</code> scope is unconditionally
included. This grants permission to retrieve the email address associated
with a token; gargle uses this to index cached OAuth tokens. This grants no
permission to view or send email and is generally considered a low-value
scope.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to all credential functions.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>httr::Token</code> (often an instance of something
that inherits from <code>httr::Token</code>) or <code>NULL</code>.
</p>


<h3>See Also</h3>

<p><code>cred_funs_list()</code> reveals the current registry of
credential-fetching functions, in order.
</p>
<p>Other credential functions: 
<code>credentials_app_default()</code>,
<code>credentials_byo_oauth2()</code>,
<code>credentials_external_account()</code>,
<code>credentials_gce()</code>,
<code>credentials_service_account()</code>,
<code>credentials_user_oauth2()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
token_fetch(scopes = "https://www.googleapis.com/auth/userinfo.email")

## End(Not run)
</code></pre>


</div>