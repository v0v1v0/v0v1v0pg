<div class="container">

<table style="width: 100%;"><tr>
<td>init_val</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 parameter value setter</h2>

<h3>Description</h3>

<p>Helper for setting initial parameter value
</p>


<h3>Usage</h3>

<pre><code class="language-R">g3_init_val(
        param_template,
        name_spec,
        value = NULL,
        spread = NULL,
        lower = if (!is.null(spread)) value * (1 - spread),
        upper = if (!is.null(spread)) value * (1 + spread),
        optimise = !is.null(lower) &amp; !is.null(upper),
        parscale = if (is.null(lower) || is.null(upper)) NULL else 'auto',
        random = NULL,
        auto_exponentiate = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>param_template</code></td>
<td>

<p>A parameter template generated by <code>g3_to_r</code> or <code>g3_to_tmb</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name_spec</code></td>
<td>

<p>A glob-like string to match parameter names, see Details
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>

<p>Numeric value / vector of values to set for value / 'value' column in template.
Original value left if NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spread</code></td>
<td>

<p>Shortcut for setting <var>lower</var> &amp; <var>upper</var>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower</code></td>
<td>

<p>Numeric value / vector of values to set for 'lower' column in template.
Original value left if NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper</code></td>
<td>

<p>Numeric value / vector of values to set for 'upper' column in template.
Original value left if NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimise</code></td>
<td>

<p>Boolean value to set for 'optimise' column in template.
Default is true iff both lower and upper are non-NULL.
Original value left if NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parscale</code></td>
<td>

<p>Numeric value / vector of values to set for 'parscale' column in template.
Default (<code>auto</code>) is difference between lower &amp; upper (or NULL if they're not set).
Original value left if NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random</code></td>
<td>

<p>Boolean value to set for 'random' column in template.
Original value left if NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto_exponentiate</code></td>
<td>

<p>If TRUE, will implicitly match parameters ending with "_exp",
and if this is the case <code>log</code> all <var>value</var>/<var>lower</var>/<var>upper</var> values
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><var>name_spec</var> is a glob (or wildcard) matching parameters.
It is a string separated by <code>.</code>, where each part can be:
</p>

<ol>
<li>
<p>A wildcard matching anything (<code>*</code>), or a matching anything with a prefix, e.g. <code>m*</code>
</p>
</li>
<li>
<p>A wildcard matching any number (<code>#</code>), or a matching a number with a prefix, e.g. <code>age*</code>
</p>
</li>
<li>
<p>A range of numbers, e.g. <code>[1979-1984]</code>
</p>
</li>
<li>
<p>A choice of options can be separated with <code>|</code>, e.g. <code>init|rec</code> or <code>[1979-1984]|[2000-2003]</code>
</p>
</li>
</ol>
<h3>Value</h3>

<p>A new parameter template list/table containing modifications</p>


<h3>See Also</h3>

<p><code>g3_parameterized</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># A parameter template, would already be got via. attr(g3_to_tmb(...), "parameter_template")
pt &lt;- data.frame(
    switch = c(
        paste0('fish.init.', 1:9),
        paste0('fish.rec.', 1990:2000),
        'fish.M'),
    value = NA,
    lower = NA,
    upper = NA,
    parscale = NA,
    optimise = FALSE,
    random = FALSE)

# Set all fish.init.# parameters to optimise
pt &lt;- g3_init_val(pt, 'fish.init.#', 4, spread = 8)

# Set a fixed value for any .M
pt &lt;- g3_init_val(pt, '*.M', value = 0.3, optimise = FALSE)

# Set a fixed value for a range of recruitment years, optimise the rest
pt |&gt;
    g3_init_val('*.rec.#', value = 4, lower = 0, upper = 10) |&gt;
    g3_init_val('*.rec.[1993-1996]', value = 0, optimise = FALSE) |&gt;
    identity() -&gt; pt

pt
</code></pre>


</div>