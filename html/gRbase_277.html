<div class="container">

<table style="width: 100%;"><tr>
<td>grbase-utilities</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>gRbase utilities</h2>

<h3>Description</h3>

<p>Various utility functions for gRbase. Includes 'faster
versions' of certain standard R functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rhsFormula2list(form)

rhsf2list(form)

rhsf2vec(form)

listify_dots(dots)

list2rhsFormula(form)

list2rhsf(form)

rowmat2list(X)

colmat2list(X)

matrix2list(X, byrow = TRUE)

which.arr.index(X)

which_matrix_index(X)

rowSumsPrim(X)

colSumsPrim(X)

colwiseProd(v, X)

lapplyV2I(setlist, item)

lapplyI2V(setlist, item)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>form</code></td>
<td>
<p>Formula specification (a right-hand sided formula, a
numeric/character vector or a list of vectors).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dots</code></td>
<td>
<p>dot-arguments to be turned into a list</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>byrow</code></td>
<td>
<p>Should the split be by row or by column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v</code></td>
<td>
<p>A vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setlist</code></td>
<td>
<p>A list of atomic vectors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>item</code></td>
<td>
<p>An atomic vector</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>which.arr.ind</code>: Returns matrix n x 2 matrix with
indices of non-zero entries in matrix <code>X</code>. Notice
<code>which_matrix_index__</code> is cpp implementation.
</p>
<p><code>colwiseProd</code>: multiplies a vector v and a matrix X
columnwise (as opposed to rowwise which is achieved by
<code>v * X</code>). Hence <code>colwiseProd</code> does the same as
<code>t(v * t(X))</code> - but it does so faster for numeric values.
</p>

<ul>
<li>
<p> lapplyV2I: same as but much faster than <code>lapply(setlist, function(elt) match(elt, item))</code>
</p>
</li>
<li>
<p> lapplyI2V: same as but faster than <code>lapply(setlist, function(elt) item[elt])</code>
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Søren Højsgaard, <a href="mailto:sorenh@math.aau.dk">sorenh@math.aau.dk</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## colwiseProd
X &lt;- matrix(1:16, nrow=4)
v &lt;- 1:4
t(v * t(X))
colwiseProd(v, X)
## Not run: 
system.time(for (ii in 1:100000)  t(v * t(X)))
system.time(for (ii in 1:100000)  colwiseProd(v, X))

## End(Not run)


setlist &lt;- list(c(1,2,3), c(2,3,4), c(2,4,5))
item &lt;- c(2,3)

lapplyV2I(setlist, item)
lapply(setlist, function(gg) match(gg, item))

lapplyI2V(setlist, item)
lapply(setlist, function(x) item[x])

if (require(microbenchmark)){
microbenchmark(
  lapplyV2I(setlist, item),
  lapply(setlist, function(elt) match(elt, item)))

microbenchmark::microbenchmark(
  lapplyI2V(setlist, item),
  lapply(setlist, function(elt) item[elt]))
}
</code></pre>


</div>