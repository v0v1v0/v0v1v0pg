<div class="container">

<table style="width: 100%;"><tr>
<td>gains</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gains Table for a Vector of Predictions</h2>

<h3>Description</h3>

<p>Takes a vector of actual responses and a vector of predictions and constructs a gains table to evaluate the predictions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gains(actual, predicted, groups=10, 
      ties.method=c("max","min","first","average","random"),
      conf=c("none","normal","t","boot"), boot.reps=1000, conf.level=0.95, 
      optimal=FALSE,percents=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>actual</code></td>
<td>
<p>a numeric vector of actual response values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicted</code></td>
<td>
<p>a numeric vector of predicted response values.  This vector must have the same length as <code>actual</code>, and the ith value of this vector needs to be the model score for the subject with the ith value of the <code>actual</code> vector as its actual response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>an integer containing the number of rows in the gains table.  The default value is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ties.method</code></td>
<td>
<p>method of breaking ties.  See the <code>ties.method</code> argument of the <code>rank</code> procedure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>method to construct confidence intervals for the mean response in each row of the table.  If "none", then no confidence intervals are constructed.  If "normal", then critical values from the normal distribution are used.  If "t", then critical values from the t distribution are used.  If "boot", then 1000 bootstrap samples are drawn from each row, and the upper and lower <code>conf.level</code>/2 values of the distribution are used as the confidence interval endpoints.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.reps</code></td>
<td>
<p>the number of bootstrap replications to use for bootstrap confidence intervals.  The default value is 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>the 1 - alpha level of the confidence interval.  The default value is 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimal</code></td>
<td>
<p>a logical indicated whether the user wants optimal lift indices to be computed.  Optimal lift indices represent the results that would be achieved from an optimal ranking of subjects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percents</code></td>
<td>
<p>a logical that indicates whether to print the mean responses and predicted responses in percent form.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>gains</code> returns an S3 object of class <code>gains</code>.  The function <code>print.gains</code> can be used to print the results.  The function <code>plot.gains</code> can be used to plot the mean response and cumulative mean response for each group.
An object of class <code>gains</code> is a list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>cumulative percentage of file covered by each row of the gains table (e.g. 10,20,30,...,100).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>number of observations in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cume.obs</code></td>
<td>
<p>cumulative number of observations in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean.resp</code></td>
<td>
<p>mean response in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cume.mean.resp</code></td>
<td>
<p>cumulative mean response in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cume.pct.of.total</code></td>
<td>
<p>cumulative percent of total response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lift</code></td>
<td>
<p>lift index.  The lift index is 100 times the <code>mean.resp</code> for the row divided by the <code>cume.mean.resp</code> for the last row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cume.lift</code></td>
<td>
<p>cumulative lift index.  It is 100 times the <code>cume.mean.resp</code> for the row divided by the <code>cume.mean.resp</code> for the last row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean.prediction</code></td>
<td>
<p>mean predicted response in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.prediction</code></td>
<td>
<p>minimum predicted response in each row.  <code>min.prediction</code> and <code>max.prediction</code> can be used to construct decision rules for applying the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.prediction</code></td>
<td>
<p>maximum predicted response in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>the argument given for <code>conf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimal</code></td>
<td>
<p>the argument given for <code>optimal</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.groups</code></td>
<td>
<p>the number of rows in the gains table.  This will equal <code>groups</code> unless there are fewer distinct predicted values than <code>groups</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percents</code></td>
<td>
<p>the argument given for <code>percents</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.lower</code></td>
<td>
<p>lower confidence limit for each row.  Only included if confidence intervals are requested in the gains table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.upper</code></td>
<td>
<p>upper confidence limit for each row.  Only included if confidence intervals are requested in the gains table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt.lift</code></td>
<td>
<p>optimal lift index.  The lift index achieved by an optimal ranking of subjects in the file. Only included if optimal lift is requested in the gains table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt.cume.lift</code></td>
<td>
<p>optimal cumulative lift index.  The cumulative lift by an optimal ranking. Only included if optimal lift is requested in the gains table.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>print.gains</code> for printing the table in a nice way.
<code>plot.gains</code> for drawing a graph representing the output. (This graph is sometimes called a lift chart.)
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(ciaScores)
with(subset(ciaScores,train==0), 
      gains(actual=CellPhonesPP, predicted=PredOLS, optimal=TRUE))
</code></pre>


</div>