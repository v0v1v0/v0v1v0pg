<div class="container">

<table style="width: 100%;"><tr>
<td>geodist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>geodist.</h2>

<h3>Description</h3>

<p>Dependency-free, ultra fast calculation of geodesic distances. Includes the reference nanometre-accuracy geodesic distances of Karney (2013) <a href="https://doi.org/10.1007/s00190-012-0578-z">doi:10.1007/s00190-012-0578-z</a>, as used by the 'sf' package, as well as Haversine and Vincenty distances. Default distance measure is the "Mapbox cheap ruler" which is generally more accurate than Haversine or Vincenty for distances out to a few hundred kilometres, and is considerably faster. The main function accepts one or two inputs in almost any generic rectangular form, and returns either matrices of pairwise distances, or vectors of sequential distances.
</p>
<p>Convert one or two rectangular objects containing lon-lat coordinates into
vector or matrix of geodesic distances in metres.
</p>


<h3>Usage</h3>

<pre><code class="language-R">geodist(
  x,
  y,
  paired = FALSE,
  sequential = FALSE,
  pad = FALSE,
  measure = "cheap",
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Rectangular object (matrix, <code>data.frame</code>, <span class="pkg">tibble</span>,
whatever) containing longitude and latitude coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Optional second object which, if passed, results in distances
calculated between each object in <code>x</code> and each in <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paired</code></td>
<td>
<p>If <code>TRUE</code>, calculate paired distances between each entry
in <code>x</code> and <code>y</code>, returning a single vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sequential</code></td>
<td>
<p>If <code>TRUE</code>, calculate (vector of) distances
sequentially along <code>x</code> (when no <code>y</code> is passed), otherwise calculate
matrix of pairwise distances between all points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pad</code></td>
<td>
<p>If <code>sequential = TRUE</code> values are padded with initial
<code>NA</code> to return <code>n</code> values for input with <code>n</code> rows, otherwise
return <code>n - 1</code> values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>One of "haversine" "vincenty", "geodesic", or "cheap"
specifying desired method of geodesic distance calculation; see Notes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>If <code>FALSE</code>, check whether max of calculated distances
is greater than accuracy threshold and warn.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If only <code>x</code> passed and <code>sequential = FALSE</code>, a square
symmetric matrix containing distances between all items in <code>x</code>; If only
<code>x</code> passed and <code>sequential = TRUE</code>, a vector of sequential
distances between rows of <code>x</code>; otherwise if <code>y</code> is passed, a matrix
of <code>nrow(x)</code> rows and <code>nrow(y)</code> columns. All return values are
distances in metres.
</p>


<h3>Note</h3>

<p><code>measure = "cheap"</code> denotes the mapbox cheap ruler
<a href="https://github.com/mapbox/cheap-ruler-cpp">https://github.com/mapbox/cheap-ruler-cpp</a>; <code>measure = "geodesic"</code>
denotes the very accurate geodesic methods given in Karney (2013)
"Algorithms for geodesics" J Geod 87:43-55, and as provided by the
'st_dist()' function from the <span class="pkg">sf</span> package.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Mark Padgham <a href="mailto:mark.padgham@email.com">mark.padgham@email.com</a>
</p>
<p>Authors:
</p>

<ul><li>
<p> Michael D. Sumner
</p>
</li></ul>
<p>Other contributors:
</p>

<ul><li>
<p> Charles F.F Karney (Original author of included code for geodesic distances) [copyright holder]
</p>
</li></ul>
<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/hypertidy/geodist">https://github.com/hypertidy/geodist</a>
</p>
</li>
<li> <p><a href="https://hypertidy.github.io/geodist/">https://hypertidy.github.io/geodist/</a>
</p>
</li>
<li>
<p> Report bugs at <a href="https://github.com/hypertidy/geodist/issues">https://github.com/hypertidy/geodist/issues</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">n &lt;- 50
# Default "cheap" distance measure is only accurate for short distances:
x &lt;- cbind (runif (n, -0.1, 0.1), runif (n, -0.1, 0.1))
y &lt;- cbind (runif (2 * n, -0.1, 0.1), runif (2 * n, -0.1, 0.1))
colnames (x) &lt;- colnames (y) &lt;- c ("x", "y")
d0 &lt;- geodist (x) # A 50-by-50 matrix
d1 &lt;- geodist (x, y) # A 50-by-100 matrix
d2 &lt;- geodist (x, sequential = TRUE) # Vector of length 49
d2 &lt;- geodist (x, sequential = TRUE, pad = TRUE) # Vector of length 50
d0_2 &lt;- geodist (x, measure = "geodesic") # nanometre-accurate version of d0

# Input data can also be 'data.frame' objects:
xy &lt;- data.frame (x = runif (n, -0.1, 0.1), y = runif (n, -0.1, 0.1))
d &lt;- geodist (xy)
</code></pre>


</div>