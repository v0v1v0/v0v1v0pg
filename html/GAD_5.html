<div class="container">

<table style="width: 100%;"><tr>
<td>comp.var</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Components of variation</h2>

<h3>Description</h3>

<p>This function calculates components of variation for fixed and random factors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">comp.var(object, anova.tab = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class "<code>lm</code>", containing the specified design with random and/or fixed factors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anova.tab</code></td>
<td>
<p>an object containing the results returned by <code>gad</code> or <code>pooling</code> functions. See examples below.</p>
</td>
</tr>
</table>
<h3>Details</h3>


<p>This function calculates components of variation for any combination of orthogonal/nested and fixed/random factors. For pooled terms,
<code>comp.var</code> function seeks for the denominator of the removed term and keep its type (fixed or random). <br></p>
<p>Note that there are differences on the interpretation of the results between fixed and random factors. For fixed factors, the components of
variation calculated are just the sum of squares divided by the degrees of freedom and the hypothesis only concern those levels that were
included in the model. On the other hand, for random factors the components of variation calculated are truly variance components and are
interpretable as measures of variability of a population of levels, which are randomly sampled. However, for most of studies that aims to
compare the amount of variation attributed to each term, the estimates of components of variation for both fixed and random factors are important
and directly comparable (Anderson et al., 2008). <br></p>
<p>Eventually, the estimates of components of variation for some terms in the model can be negative. The term in question generally has a large p-value
and its estimative is usually set to zero, since a negative estimate is illogical. An alternative to this problem is remove the term using
<code>pooling</code> function and re-analyse the model (Fletcher and Underwood, 2002).

</p>


<h3>Value</h3>


<p>A list of length 2, containing the mean squares estimates (<code>$mse</code>) and the table of components of variation (<code>$comp.var</code>) for the model. <br></p>
<p>The <code>$comp.var</code> table contains four columns: “Type” shows whether terms are fixed or random; “Estimate” shows the estimate of component of variation
(in squared units); “Square root” shows the square root of the “Estimate” column (original unit); and “Percentage” shows the percentage of variability
attributable to each term (both fixed and random factors).

</p>


<h3>Author(s)</h3>

<p>Eliandro Gilbert (<a href="mailto:eliandrogilbert@gmail.com">eliandrogilbert@gmail.com</a>)
</p>


<h3>References</h3>

<p>Anderson, M.J., Gorley, R.N., Clarke, K.R. 2008. <em>PERMANOVA+ for PRIMER</em>: Guide to Software and Statistical Methods. PRIMER-E: Plymouth, UK.
</p>
<p>Fletcher, D.J., Underwood, A.J. 2002. How to cope with negative estimates of components of variance in ecological field studies. Journal of Experimental Marine Biology and Ecology 273, 89-95.
</p>


<h3>See Also</h3>

<p><code>gad</code>, <code>pooling</code>, <code>estimates</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(GAD)
data(crabs)
head(crabs)

Re &lt;- as.random(crabs$Region)   # random factor
Lo &lt;- as.random(crabs$Location) # random factor nested in Region
Si &lt;- as.random(crabs$Site)     # random factor nested in Location

model &lt;- lm(Density ~ Re + Lo%in%Re + Si%in%Lo%in%Re, data = crabs)

C.test(model)                     # Checking homogeneity of variances
estimates(model)                  # Checking model structure
model.tab &lt;- gad(model)           # Storing the result of ANOVA on a new object
model.tab                         # Checking ANOVA results
comp.var(model, anova.tab = model.tab) # Calculating the components of variations
</code></pre>


</div>