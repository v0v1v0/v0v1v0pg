<div class="container">

<table style="width: 100%;"><tr>
<td>berlin_gtfs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>berlin_gtfs</h2>

<h3>Description</h3>

<p>Sample GTFS data from Verkehrsverbund Berlin-Brandenburg street, reduced to U
and S Bahn only (underground and overground trains), and between the hours of
12:00-13:00. Only those components of the GTFS data necessary for routing
have been retained. Note that non-ASCII characters have been removed from
these data, so umlauts are simply removed and eszetts become "ss". The
package will nevertheless work with full GTFS feeds and non-ASCII (UTF-8)
characters.
</p>


<h3>Format</h3>

<p>A list of five <span class="pkg">data.table</span> items necessary for routing:
</p>

<ul>
<li>
<p> calendar
</p>
</li>
<li>
<p> routes
</p>
</li>
<li>
<p> trips
</p>
</li>
<li>
<p> stop_times
</p>
</li>
<li>
<p> stops
</p>
</li>
<li>
<p> transfers
</p>
</li>
</ul>
<h3>Value</h3>

<p>For single (from, to) values, a <code>data.frame</code> describing the route,
with each row representing one stop. For multiple (from, to) values, a list
of <code>data.frames</code>, each of which describes one route between the i'th start
and end stations (<code>from</code> and <code>to</code> values). Origin and destination stations
for which no route is possible return <code>NULL</code>.
</p>


<h3>Note</h3>

<p>Can be re-created with the script in
<a href="https://github.com/UrbanAnalyst/gtfsrouter/blob/master/data-raw/data-script.Rmd">https://github.com/UrbanAnalyst/gtfsrouter/blob/master/data-raw/data-script.Rmd</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Examples must be run on single thread only:
nthr_dt &lt;- data.table::setDTthreads (1)
nthr_omp &lt;- Sys.getenv ("OMP_THREAD_LIMIT")
Sys.setenv ("OMP_THREAD_LIMIT" = 1L)

berlin_gtfs_to_zip () # Write sample feed from Berlin, Germany to tempdir
f &lt;- file.path (tempdir (), "vbb.zip") # name of feed
gtfs &lt;- extract_gtfs (f)
from &lt;- "Innsbrucker Platz" # U-bahn station, not "S"
to &lt;- "Alexanderplatz"
start_time &lt;- 12 * 3600 + 120 # 12:02

route &lt;- gtfs_route (gtfs, from = from, to = to, start_time = start_time)

# Specify day of week
route &lt;- gtfs_route (
    gtfs,
    from = from,
    to = to,
    start_time = start_time,
    day = "Sunday"
)

# specify travel by "U" = underground only
route &lt;- gtfs_route (
    gtfs,
    from = from,
    to = to,
    start_time = start_time,
    day = "Sunday",
    route_pattern = "^U"
)
# specify travel by "S" = street-level only (not underground)
route &lt;- gtfs_route (
    gtfs,
    from = from,
    to = to,
    start_time = start_time,
    day = "Sunday",
    route_pattern = "^S"
)

# Route queries are generally faster if the GTFS data are pre-processed with
# `gtfs_timetable()`:
gt &lt;- gtfs_timetable (gtfs, day = "Sunday", route_pattern = "^S")
route &lt;- gtfs_route (gt, from = from, to = to, start_time = start_time)

data.table::setDTthreads (nthr_dt)
Sys.setenv ("OMP_THREAD_LIMIT" = nthr_omp)
</code></pre>


</div>