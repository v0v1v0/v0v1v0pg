<div class="container">

<table style="width: 100%;"><tr>
<td>likelihood_random</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 random effects likelihood actions</h2>

<h3>Description</h3>

<p>Add likelihood components for random effects
</p>


<h3>Usage</h3>

<pre><code class="language-R">g3l_random_dnorm(
        nll_name,
        param_f,
        mean_f = 0,
        sigma_f = 1,
        log_f = TRUE,
        period = 'auto',
        nll_breakdown = FALSE,
        weight = substitute(
            g3_param(n, optimise = FALSE, value = 1),
            list(n = paste0(nll_name, "_weight"))),
        run_at = g3_action_order$likelihood)

g3l_random_walk(
        nll_name,
        param_f,
        sigma_f = 1,
        log_f = TRUE,
        period = 'auto',
        nll_breakdown = FALSE,
        weight = substitute(
            g3_param(n, optimise = FALSE, value = 1),
            list(n = paste0(nll_name, "_weight"))),
        run_at = g3_action_order$likelihood)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>param_f</code></td>
<td>

<p>A formula representing the value to apply dnorm to.
Invariably a g3_param for g3l_random_dnorm,
a g3_param_table with <var>cur_year</var> for g3l_random_walk.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean_f</code></td>
<td>

<p>A formula representing <var>mean</var> in dnorm.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma_f</code></td>
<td>

<p>A formula representing <var>sigma</var> in dnorm.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_f</code></td>
<td>

<p>A formula representing <var>log</var> in dnorm.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>

<p>When dnorm should be recalculated. Once per <code>year</code> every <code>step</code>, or <code>single</code> for once.
The default, <code>auto</code>, will assume the input is generated by <code>g3_parameterized</code> and will
derive the most appropriate option.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nll_name</code></td>
<td>

<p>Character string, used to define the variable name for <var>dnorm</var> output.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nll_breakdown</code></td>
<td>

<p>Should the nll report be broken down by time? <code>TRUE</code> / <code>FALSE</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>

<p>Weighting applied to this likelihood component.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run_at</code></td>
<td>

<p>Integer order that actions will be run within model, see <code>g3_action_order</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The model report will contain <code>nll_random_dnorm_dnorm_lin__dnorm</code>, the results of applying dnorm.
If <var>nll_breakdown</var> is <code>TRUE</code>, this will be an array with one entry per timestep.
</p>


<h3>Value</h3>



<h4>g3l_random_dnorm</h4>

<p>An action (i.e. list of formula objects) that will...</p>

<ol><li>
<p>On the final model step, calculate <code>dnorm(param_f, mean_f, sigma_f)</code> &amp; add to nll
</p>
</li></ol>
<h4>g3l_random_walk</h4>

<p>An action (i.e. list of formula objects) that will...</p>

<ol>
<li>
<p>Calculate <code>dnorm(param_f, previous param_f, sigma_f)</code> (at final year if period = year)
</p>
</li>
<li>
<p>Add to nll.
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">

likelihood_actions &lt;- list(
    # Calculate dnorm() for the dnorm_log parameter
    g3l_random_dnorm('dnorm_log',
        g3_parameterized('dnorm_log', value = 0, random = TRUE),
        mean_f = 0),

    # Treat the walk_year.xxxx parameters as a random walk
    g3l_random_walk('walk_year',
        g3_parameterized('walk_year', by_year = TRUE, value = 0, random = TRUE))
)</code></pre>


</div>