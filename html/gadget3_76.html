<div class="container">

<table style="width: 100%;"><tr>
<td>aab_env</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 global environment</h2>

<h3>Description</h3>

<p>Functions available to any gadget3 model
</p>


<h3>Details</h3>

<p><code>g3_env</code> is the top-level environment that any gadget3 model uses,
populated with utility functions.
</p>
<p>NB: Several functions have <code>_vec</code> variants.
Due to TMB limitations these should be used when you have a vector not scalar input.
</p>


<h3>ADREPORT</h3>

<p>TMB's <code>ADREPORT</code> function. See sdreport documentation</p>


<h3>as_integer</h3>

<p>C++ compatible equivalent to <code>as.integer</code></p>


<h3>as.numeric</h3>

<p>R <code>as.numeric</code> or TMB <code>asDouble</code></p>


<h3>assert_msg</h3>

<p>C++/R function that ensures expression is true, or stops model.
</p>
<pre>assert_msg(x &gt; 0, "x must be positive")</pre>


<h3>avoid_zero / avoid_zero_vec</h3>

<p>Adds small value to input to ensure output is never zero
</p>


<h3>bounded / bounded_vec</h3>

<p>Ensures <var>x</var> is within limits <var>a</var> &amp; <var>b</var>.
</p>
<pre>bounded_vec(x, 100, 1000)</pre>


<h3>g3_matrix_vec</h3>

<p>Apply matrix transformation <var>tf</var> to vector <var>vec</var>, return resultant vector.
</p>
<pre>g3_matrix_vec(tf, vec)</pre>


<h3>lgamma_vec</h3>

<p>Vector equivalent of <code>lgamma</code></p>


<h3>logspace_add / logspace_add_vec</h3>

<p>TMB's <code>logspace_add</code>, essentially a differentiable version of <code>pmax</code>.
</p>


<h3>normalize_vec</h3>

<p>Divide vector <var>a</var> by it's sum, i.e. so it now sums to 1
</p>


<h3>nvl</h3>

<p>Return first non-null argument.
NB: No C++ implementation.
</p>


<h3>pow_vec</h3>

<p>Vector equivalent of <code>^</code></p>


<h3>print_array</h3>

<p>Utility to pretty-print array <var>ar</var>
</p>


<h3>ratio_add_vec</h3>

<p>Sum <var>orig_vec</var> &amp; <var>new_vec</var> according to ratio of <var>orig_amount</var> &amp; <var>new_amount</var>
</p>


<h3>REPORT</h3>

<p>TMB's <code>REPORT</code> function.
</p>


<h3>REprintf</h3>

<p>Equivalent of RCpp <a href="https://teuder.github.io/rcpp4everyone_en/060_printing_massages.html#rprintf-reprintf">REprintf</a>
</p>


<h3>Rprintf</h3>

<p>Equivalent of RCpp <a href="https://teuder.github.io/rcpp4everyone_en/060_printing_massages.html#rprintf-reprintf">Rprintf</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## avoid_zero / avoid_zero_vec
g3_eval(quote( c( avoid_zero(0), avoid_zero(10) ) ))
g3_eval(quote( avoid_zero_vec(0:5) ))

## bounded / bounded_vec
curve(g3_eval(quote( bounded(x, 100, 200) ), x = x), -100, 100)

## logspace_add
curve(g3_eval(quote( logspace_add(x, 10) ), x = x), 0, 40)

## normalize_vec
g3_eval(quote( normalize_vec(c( 4, 4, 8, 2 )) ))
</code></pre>


</div>