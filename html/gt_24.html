<div class="container">

<table style="width: 100%;"><tr>
<td>cells_summary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Location helper for targeting group summary cells</h2>

<h3>Description</h3>

<p><code>cells_summary()</code> is used to target the cells in a group summary and it is
useful when applying a footnote with <code>tab_footnote()</code> or adding a custom
style with <code>tab_style()</code>. The function is expressly used in each of those
functions' <code>locations</code> argument. The 'summary' location is generated by
<code>summary_rows()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cells_summary(
  groups = everything(),
  columns = everything(),
  rows = everything()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p><em>Specification of row group IDs</em>
</p>
<p><code style="white-space: pre;">⁠&lt;row-group-targeting expression&gt;⁠</code> // <em>default:</em> <code>everything()</code>
</p>
<p>The row groups to which targeting operations are constrained. This aids in
targeting the summary rows that reside in certain row groups. Can either be
a series of row group ID values provided in <code>c()</code> or a select helper
function (e.g. <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>matches()</code>,
<code>num_range()</code>, and <code>everything()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p><em>Columns to target</em>
</p>
<p><code style="white-space: pre;">⁠&lt;column-targeting expression&gt;⁠</code> // <em>default:</em> <code>everything()</code>
</p>
<p>The columns to which targeting operations are constrained. Can either
be a series of column names provided in <code>c()</code>, a vector of column indices,
or a select helper function (e.g. <code>starts_with()</code>, <code>ends_with()</code>,
<code>contains()</code>, <code>matches()</code>, <code>num_range()</code>, and <code>everything()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p><em>Rows to target</em>
</p>
<p><code style="white-space: pre;">⁠&lt;row-targeting expression&gt;⁠</code> // <em>default:</em> <code>everything()</code>
</p>
<p>In conjunction with <code>columns</code>, we can specify which of their rows should
form a constraint for targeting operations. The default <code>everything()</code>
results in all rows in <code>columns</code> being formatted. Alternatively, we can
supply a vector of row IDs within <code>c()</code>, a vector of row indices, or a
select helper function (e.g. <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>,
<code>matches()</code>, <code>num_range()</code>, and <code>everything()</code>). We can also use
expressions to filter down to the rows we need
(e.g., <code style="white-space: pre;">⁠[colname_1] &gt; 100 &amp; [colname_2] &lt; 50⁠</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list object with the classes <code>cells_summary</code> and <code>location_cells</code>.
</p>


<h3>Targeting cells with <code>columns</code>, <code>rows</code>, and <code>groups</code>
</h3>

<p>Targeting of summary cells is done through the <code>groups</code>, <code>columns</code>, and
<code>rows</code> arguments. By default <code>groups</code> is set to <code>everything()</code>, which means
that all available groups will be considered. Providing the ID values (in
quotes) of row groups in <code>c()</code> will serve to constrain the targeting to that
subset of groups.
</p>
<p>The <code>columns</code> argument allows us to target a subset of summary
cells contained in the resolved columns. We say resolved because aside from
declaring column names in <code>c()</code> (with bare column names or names in quotes)
we can use <strong>tidyselect</strong>-style expressions. This can be as basic as
supplying a select helper like <code>starts_with()</code>, or, providing a more complex
incantation like
</p>
<p><code>where(~ is.numeric(.x) &amp; max(.x, na.rm = TRUE) &gt; 1E6)</code>
</p>
<p>which targets numeric columns that have a maximum value greater than
1,000,000 (excluding any <code>NA</code>s from consideration).
</p>
<p>Once the groups and columns are targeted, we may also target the <code>rows</code> of
the summary. Summary cells in the stub will have ID values that can be used
much like column names in the <code>columns</code>-targeting scenario. We can use
simpler <strong>tidyselect</strong>-style expressions (the select helpers should work well
here) and we can use quoted row identifiers in <code>c()</code>. It's also possible to
use row indices (e.g., <code>c(3, 5, 6)</code>) that correspond to the row number of a
summary row in a row group (numbering restarts with every row group).
</p>


<h3>Examples</h3>

<p>Use a portion of the <code>countrypops</code> dataset to create a <strong>gt</strong> table. Add
some styling to the summary data cells with with <code>tab_style()</code>, using
<code>cells_summary()</code> in the <code>locations</code> argument.
</p>
<div class="sourceCode r"><pre>countrypops |&gt;
  dplyr::filter(country_name == "Japan", year &lt; 1970) |&gt;
  dplyr::select(-contains("country")) |&gt;
  dplyr::mutate(decade = paste0(substr(year, 1, 3), "0s")) |&gt;
  gt(
    rowname_col = "year",
    groupname_col = "decade"
  ) |&gt;
  fmt_number(
    columns = population,
    decimals = 0
  ) |&gt;
  summary_rows(
    groups = "1960s",
    columns = population,
    fns = list("min", "max"),
    fmt = ~ fmt_integer(.)
  ) |&gt;
  tab_style(
    style = list(
      cell_text(style = "italic"),
      cell_fill(color = "lightblue")
    ),
    locations = cells_summary(
      groups = "1960s",
      columns = population,
      rows = 1
    )
  ) |&gt;
  tab_style(
    style = list(
      cell_text(style = "italic"),
      cell_fill(color = "lightgreen")
    ),
    locations = cells_summary(
      groups = "1960s",
      columns = population,
      rows = 2
    )
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cells_summary_1.png" alt="This image of a table was generated from the first code example in the `cells_summary()` help file." style="width:100%;"><h3>Function ID</h3>

<p>8-19
</p>


<h3>Function Introduced</h3>

<p><code>v0.2.0.5</code> (March 31, 2020)
</p>


<h3>See Also</h3>

<p>Other location helper functions: 
<code>cells_body()</code>,
<code>cells_column_labels()</code>,
<code>cells_column_spanners()</code>,
<code>cells_footnotes()</code>,
<code>cells_grand_summary()</code>,
<code>cells_row_groups()</code>,
<code>cells_source_notes()</code>,
<code>cells_stub()</code>,
<code>cells_stub_grand_summary()</code>,
<code>cells_stub_summary()</code>,
<code>cells_stubhead()</code>,
<code>cells_title()</code>,
<code>location-helper</code>
</p>


</div>