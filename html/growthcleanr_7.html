<div class="container">

<table style="width: 100%;"><tr>
<td>ext_bmiz</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate extended BMI measures</h2>

<h3>Description</h3>

<p><code>ext_bmiz</code> Calculates the sigma (scale parameter for the half-normal
distribution), extended BMI percentile, extended BMIz, and the CDC LMS
Z-scores for weight, height, and BMI for children between 2 and 19.9 years
of age. Note that for BMIs &lt;= 95th percentile of the CDC growth charts, the
extended values for BMI are equal to the LMS values. The extended values
differ only for children who have a BMI &gt; 95th percentile.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ext_bmiz(
  data,
  age = "agem",
  wt = "wt",
  ht = "ht",
  bmi = "bmi",
  adjust.integer.age = TRUE,
  ref.data.path = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Input data frame or data table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>Name of input column containing subject age in months in quotes, default "agem"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>Name of input column containing weight (kg) value in quotes, default "wt"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ht</code></td>
<td>
<p>Name of input column containing height (cm) value in quotes, default "ht"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bmi</code></td>
<td>
<p>Name of input column containing calculated BMI in quotes, default "bmi"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjust.integer.age</code></td>
<td>
<p>If age inputs are all integer, add 0.5 if TRUE;
default TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref.data.path</code></td>
<td>
<p>Path to directory containing reference data</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function should produce output equivalent to the SAS macro provided at
https://www.cdc.gov/nccdphp/dnpao/growthcharts/resources/sas.htm. The macro
was updated in December, 2022, according to the findings of the NCHS
report available at https://dx.doi.org/10.15620/cdc:121711. This function has
been updated to match it as of growthcleanr v2.1.0.
</p>
<p>The extended BMIz is the inverse cumulative distribution function (CDF) of
the extended BMI percentile. If the extended percentile is very close to
100, the <code>qnorm</code> function in R produces an infinite value. This occurs
only if the the extended BMI percentile is &gt; 99.99999999999999. This occurs
infrequently, such as a 48-month-old with a BMI &gt; 39, and it is likely that
these BMIs represent data entry errors. For these cases, extended BMIz is
set to 8.21, a value that is slightly greater than the largest value that
can be calculated.
</p>
<p>See the <code>README.md</code> file for descriptions of the output columns
generated by this function.
</p>
<p><code>data</code> must have columns for at least age, sex, weight, height, and bmi.
</p>
<p><code>age</code> should be coded in months, using the most precise values available.
To convert to months from age in years, multiply by 12. To convert to months
from age in days, divide by 30.4375 (365.25 / 12).
</p>
<p><code>sex</code> is coded as 1, boys, Boys, b, B, males, Males, m, or M for male
subjects or 2, girls, Girls, g, G, females, Females, f, or F for female
subjects. Note that this is different from <code>cleangrowth</code>, which uses
0 (Male) and 1 (Female).
</p>
<p><code>wt</code> should be in kilograms.
</p>
<p><code>ht</code> should be in centimeters.
</p>
<p>Specify the input data parameter names for <code>age</code>, <code>wt</code>,
<code>ht</code>, <code>bmi</code> using quotation marks. See example below.
</p>
<p>If the parameter <code>adjust.integer.age</code> is <code>TRUE</code> (the default),
0.5 will be added to all <code>age</code> if all input values are integers. Set to
<code>FALSE</code> to disable.
</p>
<p>By default, the reference data file <code>CDCref_d.csv</code>, made available at
https://www.cdc.gov/nccdphp/dnpao/growthcharts/resources/sas.htm, is included
in this package for convenience. If you are developing this package, use
<code>ref.data.path</code> to adjust the path to this file from your working
directory if necessary.
</p>


<h3>Value</h3>

<p>Expanded data frame containing computed BMI values
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Run on a small subset of given data
df &lt;- as.data.frame(syngrowth)
df &lt;- df[df$subjid %in% unique(df[, "subjid"])[1:5], ]
df &lt;- cbind(df,
            "gcr_result" = cleangrowth(df$subjid,
                                       df$param,
                                       df$agedays,
                                       df$sex,
                                       df$measurement))
df_wide &lt;- longwide(df) # convert to wide format for ext_bmiz
df_wide_bmi &lt;- simple_bmi(df_wide) # compute simple BMI

# Calling the function with default column names
df_bmiz &lt;- ext_bmiz(df_wide_bmi)

# Specifying different column names; note that quotes are used
dfc &lt;- simple_bmi(df_wide)
colnames(dfc)[colnames(dfc) %in% c("agem", "wt", "ht")] &lt;-
  c("agemos", "weightkg", "heightcm")
df_bmiz &lt;- ext_bmiz(dfc, age="agemos", wt="weightkg", ht="heightcm")

# Disabling conversion of all-integer age in months to (age + 0.5)
dfc &lt;- simple_bmi(df_wide)
df_bmiz &lt;- ext_bmiz(dfc, adjust.integer.age=FALSE)

</code></pre>


</div>