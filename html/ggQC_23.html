<div class="container">

<table style="width: 100%;"><tr>
<td>QC_Violations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate QC Violations</h2>

<h3>Description</h3>

<p>function that calculates QC violations on sequentially ordered data
based on the following 4 rules:
</p>

<ul>
<li> <p><b>Violation Same Side:</b> 8 or more consecutive, same-side points
</p>
</li>
<li> <p><b>Violation 1 Sigma:</b> 4 or more consecutive, same-side points exceeding 1 sigma
</p>
</li>
<li> <p><b>Violation 2 Sigma:</b> 2 or more consecutive, same-side points exceeding 2 sigma
</p>
</li>
<li> <p><b>Violation 3 Sigma:</b> any points exceeding 3 sigma
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">QC_Violations(data, value = NULL, grouping = NULL, formula = NULL,
  method = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>vector or dataframe, as indicated below for each chart type
</p>

<ul>
<li> <p><b>Individuals</b>: vector of values;
</p>
</li>
<li> <p><b>Studentized Charts</b>: dataframe
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p><b>Studentized Charts</b>: numeric vector in dataframe with values of interest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouping</code></td>
<td>
<p><b>Studentized Charts</b>: single factor/variable to split
the dataframe "values" by</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p><b>Studentized Charts</b>: a formula,
such as y ~ x1 + x2, where the y variable is
numeric data to be split into groups according to the grouping x
factors/variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>string, calling the following methods:
</p>

<ul>
<li> <p><b>Individuals Charts</b>: XmR,
</p>
</li>
<li> <p><b>Studentized Charts</b>: xBar.rBar, xBar.rMedian, xBar.sBar, xMedian.rBar,
xMedian.rMedian
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a dataframe, with the following columns
</p>

<ul>
<li> <p><b>data</b>: The input data if XmR, mean or median by group for Studentized methods
</p>
</li>
<li> <p><b>z_score</b>: z-score for the data point
</p>
</li>
<li> <p><b>Index</b>: number, indicating the order of the input data
</p>
</li>
<li> <p><b>Violation_Result</b>: description of the type of test being run.
</p>

<ul>
<li> <p><b>Violation Same Side:</b> 8 or more consecutive, same-side points
</p>
</li>
<li> <p><b>Violation 1 Sigma:</b> 4 or more consecutive, same-side points exceeding 1 sigma
</p>
</li>
<li> <p><b>Violation 2 Sigma:</b> 2 or more consecutive, same-side points exceeding 2 sigma
</p>
</li>
<li> <p><b>Violation 3 Sigma:</b> any points exceeding 3 sigma
</p>
</li>
</ul>
</li>
<li> <p><b>Index</b>: boolean, does the data point violate the rule?
</p>
</li>
</ul>
<h3>Note</h3>

<p>If using the <b>formula</b> argument do not use <b>value</b> and <b>group</b> arguments.
</p>


<h3>References</h3>

<p>Wheeler, DJ, and DS Chambers. Understanding Statistical Process Control, 2nd Ed. Knoxville, TN: SPC, 1992. Print.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#####################################
#  Example 1: XmR Check Violations  #
#####################################
# Load Libraries ----------------------------------------------------------
 require(ggQC)

# Setup Data --------------------------------------------------------------

    set.seed(5555)
    QC_XmR &lt;- data.frame(
    data = c(c(-1, 2.3, 2.4, 2.5),                        #Outlier Data
          sample(c(rnorm(60),5,-5), 62, replace = FALSE), #Normal Data
          c(1,-.3, -2.4,-2.6,-2.5,-2.7, .3)),             #Outlier Data
    Run_Order = 1:73                                      #Run Order
    )

   QC_Vs &lt;- QC_Violations(data  = QC_XmR$data, method = "XmR")

#######################################
#  Example 2: Xbar Check Violations   #
#######################################

# Setup Some Data ------------------------------------------------------------
     QC_xBar.rBar &lt;- do.call(rbind, lapply(1:3, function(X){
       set.seed(5555+X)                                   #Loop over 3 seeds
       data.frame(
         sub_group = rep(1:42),                           #Define Subgroups
         sub_class = letters[X],
         c(
          c(runif(n = 5, min = 2.0,3.2)),                 #Outlier Data
          sample(c(rnorm(30),5,-4), 32, replace = FALSE), #Normal Data
          c(runif(n = 5, min = -3.2, max = -2.0))         #Outlier Data
         )
      )
     }
   )
)

colnames(QC_xBar.rBar) &lt;- c("sub_group","sub_class", "value")
QC_Vs &lt;- QC_Violations(data  = QC_xBar.rBar,
                       formula = value~sub_group,
                       method = "xBar.rBar")
</code></pre>


</div>