<div class="container">

<table style="width: 100%;"><tr>
<td>gmCreateClass</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Providing new classes and adding new users, rights groups, usergroups, etc.</h2>

<h3>Description</h3>

<p>For working with a (geometallurgical) database you need at least some users, rights groups to manage their access rights, or 
classes/variables, you want to store the data.</p>


<h3>Usage</h3>

<pre><code class="language-R">gmCreateClass(name, type, description, parent="gmObject", 
  envir=parent.frame(), db=getOption("gmDB"))
gmAddMembers(class, members, required, envir=parent.frame(), db=getOption("gmDB"))
gmCreateRightsGroup(rightsGroup, envir=parent.frame(), db=getOption("gmDB"))
gmCreateUserGroup(userGroup, envir=parent.frame(), db=getOption("gmDB"))
gmSetRights(userGroup, rightsGroup, write=TRUE, read=TRUE, 
  envir=parent.frame(), db=getOption("gmDB"))
gmAddUserToGroup(user, userGroup, envir=parent.frame(), db=getOption("gmDB")) 
gmSetRightsGroup(object, rightsGroup, envir=parent.frame(), db=getOption("gmDB"))
gmCreateUser(user, password, userGroups, envir=parent.frame(), db=getOption("gmDB"))
gmDefaultRightsGroup(rightsGroup, db=getOption("gmDB"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the new class, which shall be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The type of the new class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>A short description of the calss and what it is for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parent</code></td>
<td>
<p>The super class of the new one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class</code></td>
<td>
<p>The name of the class to which the members shall be added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>members</code></td>
<td>
<p>The names of the new class members.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>required</code></td>
<td>
<p>A logical. If <code>TRUE</code> this member has to be initialised, when an instance of the object is added to the database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rightsGroup</code></td>
<td>
<p>The name or, if it refers an existing one, ID of the rights group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>userGroup</code></td>
<td>
<p>The name or, if it refers an existing one, ID of the usergroup</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user</code></td>
<td>
<p>The username oder ID of the user, who shall be added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write</code></td>
<td>
<p>A logical. If <code>TRUE</code> the stated usergroup is granted writing rights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>read</code></td>
<td>
<p>A logical. If <code>TRUE</code> the stated usergroup is granted reading rights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An ID or <code>gmExpr</code> of the object, for that the rights group shall be determined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>password</code></td>
<td>
<p>The password of the new user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>userGroups</code></td>
<td>
<p>The usergroups the new user shall be part of.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>defines the environment used for evaluation of the other arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>A database connection object as returned by <code>gmConnectServer</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>gmCreateClass</code> allows the suer to add a new variable/class to the database. If <code>set</code> is given a type, the new class will be inferred from <code>parent</code>, which is <code>gmObject</code> by default.
</p>
<p><code>gmAddMembers</code> allows to add classes/variable to other classes. The option <code>required</code> determines, if this member must be initialised during construction of an instance of <code>class</code>.
</p>
<p><code>gmCreateRightsGroup</code> and <code>gmCreateUserGroup</code> create new rights or user groups. A rights group contains the sets <code>readers</code> and <code>writers</code>, consisting of usergroups, which determine, who is allowed to access or change an object. The rights group of an object can be set with <code>gmSetRights</code> after the initialisation of the object.
</p>
<p><code>gmCreateUser</code> is for creation of a new user. You may add this new user to the appropriate usergroups using <code>gmAddUserToGroup</code>. 
</p>
<p>During object initialisation using gmAdd the arguments <code>rg</code> can give the needed rights group. If is not given, a default value is used. This can be set by <code>gmDefaultRightsGroup</code>. 
</p>


<h3>Value</h3>

<p><code>gmCreateRightsGroup</code> and <code>gmCreateUserGroup</code> return the gmID of this object.
</p>


<h3>Author(s)</h3>

<p>S. Matos Camacho</p>


<h3>See Also</h3>

<p>gmConnectServer
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
gmConnectServer(MySQL(), host="myServer.mydomain.edu", user="mysqlUser",
  passwd="mysqlPassword", dbname="myDB")

rg = gmCreateRightsGroup("Protected")
ug = gmCreateUserGroup("Admins")
gmSetRights("Admins","Protected",read=TRUE,write=TRUE)
gmAddUserToGroup("admin","Admins")

gmSetRightsGroup(rg,"Protected")
gmSetRightsGroup(ug,"Protected")

rg = gmCreateRightsGroup("general")
ug = gmCreateUserGroup("users")
gmSetRightsGroup(c(rg,ug),"Protected")

gmAddUserToGroup("admin","users")
gmSetRights("users", "general", read=TRUE, write=TRUE)

gmCreateUser("myuser","mypassword",c("users"))
gmCreateUser(userGroups=c("users"))
gmDisconnectServer()

gmConnectDB(server="myServer.mydomain.edu",user="mysqlUser",passwd="mysqlPassword")
gmDefaultRightsGroup("general")

gmListVariables()

gmCreateClass("sample","set","a material sample",parent="gmObject")
gmAddMembers("root","sample", required=FALSE)
gmClassMembers(var="sample")
gmAdd(root,"sample",data.frame(gmName="Sample1"))

gmDisconnectServer()

## End(Not run)
</code></pre>


</div>