<div class="container">

<table style="width: 100%;"><tr>
<td>gce_ssh_setup</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Setup a SSH connection with GCE from a new SSH key-pair</h2>

<h3>Description</h3>

<p>Uploads ssh-keys to an instance
</p>


<h3>Usage</h3>

<pre><code class="language-R">gce_ssh_setup(instance, key.pub = NULL, key.private = NULL,
  ssh_overwrite = FALSE, username = Sys.info()[["user"]])
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>instance</code></td>
<td>
<p>Name of the instance of run ssh command upon</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.pub</code></td>
<td>
<p>The filepath location of the public key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.private</code></td>
<td>
<p>The filepath location of the private key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssh_overwrite</code></td>
<td>
<p>Will check if SSH settings already set and overwrite them if TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>username</code></td>
<td>
<p>The username you used to generate the key-pair</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This loads a public ssh-key to an instance's metadata.  It does not use the project SSH-Keys, that may be set separately.
</p>
<p>You will need to generate a new SSH key-pair if you have not connected to an instance before. 
</p>
<p>Instructions for this can be found here: <a href="https://cloud.google.com/compute/docs/instances/connecting-to-instance">https://cloud.google.com/compute/docs/instances/connecting-to-instance</a>.  Once you have generated run this function once to initiate setup.
</p>
<p>If you have historically connected via gcloud or some other means, ssh keys may have been generated automatically.  
</p>
<p>These will be looked for and used if found, at <code>file.path(Sys.getenv("HOME"), ".ssh", "google_compute_engine.pub")</code>
</p>


<h3>Value</h3>

<p>TRUE if successful
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys">https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys</a>
</p>
<p>Other ssh functions: <code>gce_ssh_addkeys</code>,
<code>gce_ssh_browser</code>, <code>gce_ssh</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
  
  library(googleComputeEngineR)
  
  vm &lt;- gce_vm("my-instance")
  
  ## if you have already logged in via gcloud, the default keys will be used
  ## no need to run gce_ssh_addkeys
  ## run command on instance            
  gce_ssh(vm, "echo foo")
  
  
  ## if running on Windows, use the RStudio default SSH client
  ## e.g. add C:\Program Files\RStudio\bin\msys-ssh-1000-18 to your PATH
  ## then run: 
  vm2 &lt;- gce_vm("my-instance2")

  ## add SSH info to the VM object
  ## custom info
  vm &lt;- gce_ssh_setup(vm,
                      username = "mark", 
                      key.pub = "C://.ssh/id_rsa.pub",
                      key.private = "C://.ssh/id_rsa")
                      
  ## run command on instance            
  gce_ssh(vm, "echo foo")
  #&gt; foo

  ## example to check logs of rstudio docker container
  gce_ssh(vm, "sudo journalctl -u rstudio")


## End(Not run)
</code></pre>


</div>