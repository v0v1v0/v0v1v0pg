<div class="container">

<table style="width: 100%;"><tr>
<td>segment_ga4</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make a segment object for use</h2>

<h3>Description</h3>

<p>A Segment is a subset of the Analytics data.
For example, of the entire set of users, one Segment
might be users from a particular country or city.
</p>


<h3>Usage</h3>

<pre><code class="language-R">segment_ga4(
  name,
  segment_id = NULL,
  user_segment = NULL,
  session_segment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the segment for the reports.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segment_id</code></td>
<td>
<p>The segment ID of a built in or custom segment e.g. gaid::-3</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user_segment</code></td>
<td>
<p>A list of <code>segment_define</code>'s that apply to users</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>session_segment</code></td>
<td>
<p>A list of <code>segment_define</code>'s that apply to sessions</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>segment_ga4</code> is the top hierarchy of segment creation, for which you will also need:
</p>

<ul>
<li> <p>segment_define : AND combination of segmentFilters
</p>
</li>
<li> <p>segment_vector_simple or segment_vector_sequence
</p>
</li>
<li> <p>segment_element that are combined in OR lists for <code style="white-space: pre;">⁠segment_vectors_*⁠</code>
</p>
</li>
</ul>
<h3>Value</h3>

<p>a segmentFilter object. You can pass a list of these to the request.
</p>


<h3>See Also</h3>

<p>Other v4 segment functions: 
<code>segment_define()</code>,
<code>segment_element()</code>,
<code>segment_vector_sequence()</code>,
<code>segment_vector_simple()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
library(googleAnalyticsR)

## authenticate, 
## or use the RStudio Addin "Google API Auth" with analytics scopes set
ga_auth()

## get your accounts
account_list &lt;- google_analytics_account_list()

## pick a profile with data to query

ga_id &lt;- account_list[23,'viewId']


## make a segment element
se &lt;- segment_element("sessions", 
                      operator = "GREATER_THAN", 
                      type = "METRIC", 
                      comparisonValue = 1, 
                      scope = "USER")
                      
                      
se2 &lt;- segment_element("medium", 
                       operator = "EXACT", 
                       type = "DIMENSION", 
                       expressions = "organic")
                       
                       
## choose between segment_vector_simple or segment_vector_sequence
## Elements can be combined into clauses, which can then be 
##    combined into OR filter clauses
sv_simple &lt;- segment_vector_simple(list(list(se)))

sv_simple2 &lt;- segment_vector_simple(list(list(se2)))

## Each segment vector can then be combined into a logical AND

seg_defined &lt;- segment_define(list(sv_simple, sv_simple2))

## if only one AND definition, you can leave out wrapper list()

seg_defined_one &lt;- segment_define(sv_simple)

## Each segement defintion can apply to users, sessions or both.
## You can pass a list of several segments

segment4 &lt;- segment_ga4("simple", user_segment = seg_defined)
## Add the segments to the segments param

segment_example &lt;- google_analytics(ga_id, 
                                    c("2015-07-30","2015-10-01"), 
                                    dimensions=c('source','medium','segment'), 
                                    segments = segment4, 
                                    metrics = c('sessions','bounces')
                                     )
                                     
                                     
## Sequence segment

se2 &lt;- segment_element("medium", 
                       operator = "EXACT", 
                       type = "DIMENSION", 
                       expressions = "organic")
                       
se3 &lt;- segment_element("medium",
                       operator = "EXACT",
                       type = "DIMENSION",
                       not = TRUE,
                      expressions = "organic")
                      
## step sequence
## users who arrived via organic then via referral
sv_sequence &lt;- segment_vector_sequence(list(list(se2), 
                                            list(se3)))
                                            
seq_defined2 &lt;- segment_define(list(sv_sequence))

segment4_seq &lt;- segment_ga4("sequence", user_segment = seq_defined2)

## Add the segments to the segments param

segment_seq_example &lt;- google_analytics(ga_id, 
                                        c("2016-04-01","2016-05-01"), 
                                        dimensions=c('source','segment'), 
                                        segments = segment4_seq,
                                        metrics = c('sessions','bounces')
                                         )
                                     

## End(Not run)

</code></pre>


</div>