<div class="container">

<table style="width: 100%;"><tr>
<td>remove_duplicates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Remove Duplicates - Remove records with identical event dates and coordinates</h2>

<h3>Description</h3>

<p>The <code>remove_duplicates()</code> function removes records with identical event dates and occurrence IDs.
Prior to utilizing this function, longitude and latitude columns should be rounded to match the
coordinate uncertainty using the <code>basic_locality_clean()</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">remove_duplicates(
  df,
  event.date = "eventDate",
  aggregator = "aggregator",
  id = "ID",
  occ.id = "occurrenceID",
  year = "year",
  month = "month",
  day = "day",
  latitude = "latitude",
  longitude = "longitude",
  remove.NA.occ.id = FALSE,
  remove.NA.date = FALSE,
  remove.unparseable = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Data frame of occurrence records returned from <code>gators_download()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event.date</code></td>
<td>
<p>Default = "eventDate". The name of the <a href="http://rs.tdwg.org/dwc/terms/eventDate">event date</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregator</code></td>
<td>
<p>Default = "aggregator". The name of the column in the data frame that identifies the aggregator
that provided the record. This is equal to iDigBio or GBIF.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Default = "ID". The name of the id column in the data frame, which contains unique IDs defined from GBIF (keys) or iDigBio (UUID).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>occ.id</code></td>
<td>
<p>Default = "occurrenceID". The name of the <a href="http://rs.tdwg.org/dwc/terms/occurrenceID">occurrenceID</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>Default = "year". The name of the <a href="http://rs.tdwg.org/dwc/terms/year">year</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>month</code></td>
<td>
<p>Default = "month". The name of the <a href="http://rs.tdwg.org/dwc/terms/month">month</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>day</code></td>
<td>
<p>Default = "day". The name of the <a href="http://rs.tdwg.org/dwc/terms/day">day</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latitude</code></td>
<td>
<p>Default = "latitude". The name of the <a href="http://rs.tdwg.org/dwc/terms/decimalLatitude">latitude</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>longitude</code></td>
<td>
<p>Default = "longitude". The name of the <a href="http://rs.tdwg.org/dwc/terms/decimalLongitude">longitude</a> column in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove.NA.occ.id</code></td>
<td>
<p>Default = FALSE. This will remove records with missing occurrence IDs when set to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove.NA.date</code></td>
<td>
<p>Default = FALSE. This will remove records with missing event dates when set to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove.unparseable</code></td>
<td>
<p>Default = FALSE. If we cannot parse the event date into individual year,
month, day categories the user can manually specify. Otherwise, if set to TRUE, these rows will simply be removed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Here we identify and remove both (1) specimen duplicates and (2) aggregator duplicates based on each specimens coordinates,
occurrenceID, and eventDate. To leverage all date information
available, set <code>remove.unparseable = FALSE</code> to manually populate
the year, month, and day columnsl. Dates are parsed based on ISO 8601 which only includes time since the Unix epoch, or January 1st, 1970, therefore dates that occur
before 1970 will not be automatically parsed.  If we are unable to parse the included date for particular records,
users can choose to manually enter the year, month, and day for these records when prompted.
If the user chooses to manually enter the event date, the records eventDate will be printed
and the user will be asked to manually enter the year, month, and day of this eventDate into the console.
Users are only prompted to manually parse event dates for records where year, month, and day are absent,
but eventDate is present and cannot be parsed.
This function also we also confirm all ID (UUID and key) are unique to remove any within-aggregator duplicates that may accumulate due to processing errors.
This function requires the parsedate and dplyr packages. Warning, this function will ignore missing occurrence ID
and year, month, day columns if not provided in the data set.
</p>


<h3>Value</h3>

<p>Return data frame with duplicates removed.
Information about the columns in the returned data frame can be found in the documentation for <code>gators_download()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">cleaned_data &lt;- remove_duplicates(data)
cleaned_data &lt;- remove_duplicates(data, remove.NA.occ.id = TRUE, remove.NA.date = TRUE)
cleaned_data &lt;- remove_duplicates(data, remove.unparseable = TRUE)

</code></pre>


</div>