<div class="container">

<table style="width: 100%;"><tr>
<td>calibrate.plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calibration plot</h2>

<h3>Description</h3>

<p>An experimental diagnostic tool that plots the fitted values versus the
actual average values. Currently only available when
<code>distribution = "bernoulli"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calibrate.plot(
  y,
  p,
  distribution = "bernoulli",
  replace = TRUE,
  line.par = list(col = "black"),
  shade.col = "lightyellow",
  shade.density = NULL,
  rug.par = list(side = 1),
  xlab = "Predicted value",
  ylab = "Observed average",
  xlim = NULL,
  ylim = NULL,
  knots = NULL,
  df = 6,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The outcome 0-1 variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>The predictions estimating E(y|x).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution</code></td>
<td>
<p>The loss function used in creating <code>p</code>.
<code>bernoulli</code> and <code>poisson</code> are currently the only special options.
All others default to squared error assuming <code>gaussian</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>Determines whether this plot will replace or overlay the
current plot. <code>replace=FALSE</code> is useful for comparing the calibration
of several methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line.par</code></td>
<td>
<p>Graphics parameters for the line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shade.col</code></td>
<td>
<p>Color for shading the 2 SE region. <code>shade.col=NA</code>
implies no 2 SE region.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shade.density</code></td>
<td>
<p>The <code>density</code> parameter for <code>polygon</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug.par</code></td>
<td>
<p>Graphics parameters passed to <code>rug</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>x-axis label corresponding to the predicted values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>y-axis label corresponding to the observed average.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim, ylim</code></td>
<td>
<p>x- and y-axis limits. If not specified te function will
select limits.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>knots, df</code></td>
<td>
<p>These parameters are passed directly to
<code>ns</code> for constructing a natural spline smoother for the
calibration curve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional optional arguments to be passed onto 
<code>plot</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Uses natural splines to estimate E(y|p). Well-calibrated predictions imply
that E(y|p) = p. The plot also includes a pointwise 95
</p>


<h3>Value</h3>

<p>No return values.
</p>


<h3>Author(s)</h3>

<p>Greg Ridgeway <a href="mailto:gregridgeway@gmail.com">gregridgeway@gmail.com</a>
</p>


<h3>References</h3>

<p>J.F. Yates (1982). "External correspondence: decomposition of
the mean probability score," Organisational Behaviour and Human Performance
30:132-156.
</p>
<p>D.J. Spiegelhalter (1986). "Probabilistic Prediction in Patient Management
and Clinical Trials," Statistics in Medicine 5:421-433.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Don't want R CMD check to think there is a dependency on rpart
# so comment out the example
#library(rpart)
#data(kyphosis)
#y &lt;- as.numeric(kyphosis$Kyphosis)-1
#x &lt;- kyphosis$Age
#glm1 &lt;- glm(y~poly(x,2),family=binomial)
#p &lt;- predict(glm1,type="response")
#calibrate.plot(y, p, xlim=c(0,0.6), ylim=c(0,0.6))
</code></pre>


</div>