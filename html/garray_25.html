<div class="container">

<table style="width: 100%;"><tr>
<td>amap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mapping matching dimension of arrays with a function</h2>

<h3>Description</h3>

<p>Generalized and smart mapply()/Map()/outer()/sweep() for data mapping.
Matching is checked automatically.
</p>


<h3>Usage</h3>

<pre><code class="language-R">amap(FUN, ..., MoreArgs = NULL, SIMPLIFY = TRUE, VECTORIZED = NA)

## S3 method for class 'garray'
Ops(e1, e2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>Known vectorized function is recognized if passed in
as character.  Other functions will be vectorized by <code>.mapply()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arrays with margins (names of dimnames) and maybe with sdim.
Orders of their margins can be different, but the extent along a
margin is matched. Unmatched margins are broadcasting like outer().
Scalar (length 1 vector) do not contribute margins and
not broadcast here (they will broadcast by <code>.mapply()</code> later).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MoreArgs</code></td>
<td>
<p>a list of other arguments to 'FUN', no matching of margins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SIMPLIFY</code></td>
<td>
<p>logical, attempt to reduce the result to exclude recursive
structure (no list hierachy but plain generalized array).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VECTORIZED</code></td>
<td>
<p>Whether FUN is vectorized will affect the behaviours.
Some combination of FUN and VECTORIZED is not simply slowing down,
but produces meaningless results or even stop (e.g., cumsum).
TRUE - call <code>FUN</code> once with arrays being reorganize on dimensions;
FALSE - call <code>FUN</code> many times (via <code>.mapply</code>), with each cell of arrays.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e1, e2</code></td>
<td>
<p>Generalized arrays, being operands.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The dimensions is deduced from inputs.
</p>


<h3>Examples</h3>

<pre><code class="language-R">a &lt;- garray(1:24, c(4,6,2), dimnames=list(X=1:4, Y=letters[1:6], Z=NULL),
	sdim=list(XX=c(x1=3,x2=1), YY=c(y1=1,y2=2)))
b &lt;- garray(1:6/10,6,dimnames=list(Y=letters[1:6]))
c &lt;- garray(1:4/100,c(X=4))
d &lt;- garray(1:4/1000,c(Y=4))
e &lt;- garray(1:2/1000,c(X=2))
f &lt;- garray(0,c(Z=2))
g &lt;- garray(0,c(ZZ=2))
m1 &lt;- amap(psummary,c,a,b,      0.0001, VECTORIZED=FALSE)
m2 &lt;- amap(sum,     c,a,b,      0.0001, VECTORIZED=FALSE)
m3 &lt;-               c+a+b+      0.0001
n1 &lt;- amap(sum,     c,a,b,d,    0.0001, VECTORIZED=FALSE)
n2 &lt;- amap(sum,     c,a,b,e,    0.0001, VECTORIZED=FALSE)
n3 &lt;- amap(sum,     c,a,b,e,f,  0.0001, VECTORIZED=FALSE)
p1 &lt;- amap(sum,     c,a,b,e,f,g,0.0001, VECTORIZED=FALSE)
q1 &lt;- amap(sum, c,a,b,e,f,g,0.0001, SIMPLIFY=FALSE, VECTORIZED=FALSE)
q2 &lt;- amap(c,   c,a,b,e,f,g,0.0001, SIMPLIFY=FALSE, VECTORIZED=FALSE)
q3 &lt;- amap(list,c,a,b,e,f,g,0.0001, SIMPLIFY=FALSE, VECTORIZED=FALSE)
m1==m2
m2==m3
m2==aperm(m3, 3:1)
</code></pre>


</div>