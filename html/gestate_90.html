<div class="container">

<table style="width: 100%;"><tr>
<td>simulate_trials_strata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform multi-strata simulations of time-to-event data using arbitrary event, censoring and recruitment distributions.</h2>

<h3>Description</h3>

<p>Function for simulating generalised two-arm multi-strata time-to-event trial data for NPH trials with arbitrary event, censoring and recruitment distributions.<br>
Acts as a wrapper for simulate_trials.<br>
Vector of strata proportions supplies number of strata. Event and censoring distributions specified via lists of Curve objects. If only one Curve supplied then assumed to be common to all strata. Recruitment specified via a single RCurve object.<br>
As it uses same architecture and similar syntax to nph_traj(), results in simple cases may be directly comparable to e.g. use of MixExp() or MixWei() Curves.<br>
Can be used to validate outputs from nph_traj().<br>
Data sets from this are set up to be automatically analysed with the analyse_sim function (including stratified analysis if you provide it the name of stratum column).<br></p>


<h3>Usage</h3>

<pre><code class="language-R">simulate_trials_strata(
  stratum_probs,
  active_ecurve,
  control_ecurve,
  active_dcurve = Blank(),
  control_dcurve = Blank(),
  rcurve,
  assess = NULL,
  fix_events = NULL,
  stratum_name = "Stratum",
  iterations,
  seed,
  detailed_output = FALSE,
  output_type = c("matrix", "list"),
  Time = "Time",
  Event = "Censored",
  censoringOne = TRUE,
  Trt = "Trt",
  Iter = "Iter"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>stratum_probs</code></td>
<td>
<p>Vector of probabilities that patients belong to each stratum. Must sum to 1. Its length determines the number of strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>active_ecurve</code></td>
<td>
<p>List of event distributions for the active arm, specified as a list of Curve objects. If single Curve is specified, will be used for all strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control_ecurve</code></td>
<td>
<p>List of event distributions for the control arm, specified as a list of Curve objects. If single Curve is specified, will be used for all strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>active_dcurve</code></td>
<td>
<p>List of dropout/censoring distribution for the active arm, specified as a Curve object. If single Curve is specified, will be used for all strata. By default, Blank(), i.e. no dropout in any stratum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control_dcurve</code></td>
<td>
<p>List of dropout/censoring distribution for the control arm, specified as a Curve object. If single Curve is specified, will be used for all strata. By default, Blank(), i.e. no dropout in any stratum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rcurve</code></td>
<td>
<p>Recruitment distribution, specified as a single RCurve object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assess</code></td>
<td>
<p>Positive number for the assessment time at which administrative censoring will be performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fix_events</code></td>
<td>
<p>Positive integer for the number of events to fix (if required), letting the assessment time vary. Alternatively, NULL for fixed time assessment with variable event numbers. Notes: Fixing event numbers overrides any specified assessment time and slows simulation considerably. Default = NULL (fixed analysis time)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratum_name</code></td>
<td>
<p>Name of the column defining the stratum. Default="Stratum".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iterations</code></td>
<td>
<p>Number of simulations to perform. Depending on trial size, 10,000-20,000 is typically OK to analyse on 8GB RAM.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Seed number to use. Numerical, although if "Rand" is specified, a system-time-derived number will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detailed_output</code></td>
<td>
<p>Boolean to require full details of timings of competing processes. Full details required for any future adjustments to assessment time. Simplified option approximately halves RAM requirements. Default=FALSE (simplified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_type</code></td>
<td>
<p>"matrix" or "list" specifying the type of output required. "matrix" requests a single matrix with a column "iter" to denote the simulation, while "list" creates a list with one entry per simulation. Default="matrix".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Time</code></td>
<td>
<p>String specifying the name of the output time column. Default="Time"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Event</code></td>
<td>
<p>String specifying the name of the output censoring/event column. Default="Censored" (and by default it is a censoring column unless censoringOne=FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censoringOne</code></td>
<td>
<p>Boolean specifying whether censoring is denoted in the censoring/event column by a one (TRUE) or zero (FALSE). Default=TRUE (censorings denoted by 1, events by 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Trt</code></td>
<td>
<p>String specifying the name of the output treatment column. Default="Trt"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Iter</code></td>
<td>
<p>String specifying the name of the output iterations column. Default="Iter"</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a table with one row per patient per simulation. Table contains the following columns:
</p>

<ul>
<li>
<p>"Time" Simulated actually observed (patient) time of event or censoring: This is the main column of interest for analysis. Named by Time argument.
</p>
</li>
<li>
<p>"Event" Simulated event indicator denoting censorings/events as 1/0 if censoringOne=TRUE and 0/1 if censoringOne=FALSE. Named by Event argument.
</p>
</li>
<li>
<p>"Trt" Treatment group number - 1 is active, 2 is control. Named by Trt argument.
</p>
</li>
<li>
<p>"Iter" Simulation number. Named by Iter argument.
</p>
</li>
<li>
<p>"Stratum" Stratum number. Column name will be the value of the stratum_name argument.)
</p>
</li>
<li>
<p>"ETime" Simulated actual event (patient) time (may or may not be observed). Only produced when detailed_output=TRUE.
</p>
</li>
<li>
<p>"CTime" Simulated actual censoring/dropout (patient) time (may or may not be observed).Only produced when detailed_output=TRUE.
</p>
</li>
<li>
<p>"Rec_Time" Simulated (trial) time of recruitment. Only produced when detailed_output=TRUE.
</p>
</li>
<li>
<p>"Assess" Prespecified (trial) time of assessment. Only produced when detailed_output=TRUE.
</p>
</li>
<li>
<p>"Max_F" Prespecified maximum patient follow-up time. Only produced when detailed_output=TRUE.
</p>
</li>
<li>
<p>"RCTime" Simulated actual administrative censoring (patient) time (may or may not be observed. Only produced when detailed_output=TRUE.)
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>James Bell
</p>


<h3>Examples</h3>

<pre><code class="language-R">example_strat_sim &lt;- simulate_trials_strata(stratum_probs=c(0.5,0.5),
active_ecurve=c(Weibull(250,0.8),Weibull(100,1)), control_ecurve=Weibull(100,1),
rcurve=LinearR(12,100,100),assess=20,iterations=5,seed=12345)
</code></pre>


</div>