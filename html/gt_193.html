<div class="container">

<table style="width: 100%;"><tr>
<td>tab_style</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add custom styles to one or more cells</h2>

<h3>Description</h3>

<p>With <code>tab_style()</code> we can target specific cells
and apply styles to them. This is best done in conjunction with the helper
functions <code>cell_text()</code>, <code>cell_fill()</code>, and <code>cell_borders()</code>. Currently, this
function is focused on the application of styles for HTML output only (as
such, other output formats will ignore all <code>tab_style()</code> calls). Using the
aforementioned helper functions, here are some of the styles we can apply:
</p>

<ul>
<li>
<p> the background color of the cell (<code>cell_fill()</code>: <code>color</code>)
</p>
</li>
<li>
<p> the cell's text color, font, and size (<code>cell_text()</code>: <code>color</code>, <code>font</code>,
<code>size</code>)
</p>
</li>
<li>
<p> the text style (<code>cell_text()</code>: <code>style</code>), enabling the use of italics or
oblique text.
</p>
</li>
<li>
<p> the text weight (<code>cell_text()</code>: <code>weight</code>), allowing the use of thin to
bold text (the degree of choice is greater with variable fonts)
</p>
</li>
<li>
<p> the alignment and indentation of text (<code>cell_text()</code>: <code>align</code> and
<code>indent</code>)
</p>
</li>
<li>
<p> the cell borders (<code>cell_borders()</code>)
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">tab_style(data, style, locations)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>
<p><em>Style declarations</em>
</p>
<p><code style="white-space: pre;">⁠&lt;style expressions&gt;⁠</code> // <strong>required</strong>
</p>
<p>The styles to use for the cells at the targeted <code>locations</code>. The
<code>cell_text()</code>, <code>cell_fill()</code>, and <code>cell_borders()</code> helper functions can be
used here to more easily generate valid styles. If using more than one
helper function to define styles, all calls must be enclosed in a <code>list()</code>.
Custom CSS declarations can be used for HTML output by including a
<code>css()</code>-based statement as a list item.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locations</code></td>
<td>
<p><em>Locations to target</em>
</p>
<p><code>&lt;locations expressions&gt;</code> // <strong>required</strong>
</p>
<p>The cell or set of cells to be associated with the style. Supplying any of
the <code style="white-space: pre;">⁠cells_*()⁠</code> helper functions is a useful way to target the location
cells that are associated with the styling. These helper functions are:
<code>cells_title()</code>, <code>cells_stubhead()</code>, <code>cells_column_spanners()</code>,
<code>cells_column_labels()</code>, <code>cells_row_groups()</code>, <code>cells_stub()</code>,
<code>cells_body()</code>, <code>cells_summary()</code>, <code>cells_grand_summary()</code>,
<code>cells_stub_summary()</code>, <code>cells_stub_grand_summary()</code>, <code>cells_footnotes()</code>,
and <code>cells_source_notes()</code>. Additionally, we can enclose several
<code style="white-space: pre;">⁠cells_*()⁠</code> calls within a <code>list()</code> if we wish to apply styling to
different types of locations (e.g., body cells, row group labels, the table
title, etc.).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>Using <code>from_column()</code> with <code style="white-space: pre;">⁠cell_*()⁠</code> styling functions</h3>

<p><code>from_column()</code> can be used with certain arguments of <code>cell_fill()</code> and
<code>cell_text()</code>; this allows you to get parameter values from a specified
column within the table. This means that body cells targeted for styling
could be formatted a little bit differently, using options taken from a
column. For <code>cell_fill()</code>, we can use <code>from_column()</code> for its <code>color</code>
argument. <code>cell_text()</code> allows the use of <code>from_column()</code> in the following arguments:
</p>

<ul>
<li> <p><code>color</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li>
<li> <p><code>align</code>
</p>
</li>
<li> <p><code>v_align</code>
</p>
</li>
<li> <p><code>style</code>
</p>
</li>
<li> <p><code>weight</code>
</p>
</li>
<li> <p><code>stretch</code>
</p>
</li>
<li> <p><code>decorate</code>
</p>
</li>
<li> <p><code>transform</code>
</p>
</li>
<li> <p><code>whitespace</code>
</p>
</li>
<li> <p><code>indent</code>
</p>
</li>
</ul>
<p>Please note that for all of the aforementioned arguments, a <code>from_column()</code>
call needs to reference a column that has data of the correct type (this is
different for each argument). Additional columns for parameter values can be
generated with <code>cols_add()</code> (if not already present). Columns that contain
parameter data can also be hidden from final display with <code>cols_hide()</code>.
</p>
<p>Importantly, a <code>tab_style()</code> call with any use of <code>from_column()</code> within
styling expressions must only use <code>cells_body()</code> within <code>locations</code>. This is
because we cannot map multiple options taken from a column onto other
locations.
</p>


<h3>Examples</h3>

<p>Let's use the <code>exibble</code> dataset to create a simple, two-column <strong>gt</strong> table
(keeping only the <code>num</code> and <code>currency</code> columns). With <code>tab_style()</code>
(called twice), we'll selectively add style to the values formatted by
<code>fmt_number()</code>. In the <code>style</code> argument of each <code>tab_style()</code> call, we can
define multiple types of styling with <code>cell_fill()</code> and <code>cell_text()</code>
(enclosed in a list). The cells to be targeted for styling require the use of
helpers like <code>cells_body()</code>, which is used here with different columns and
rows being targeted.
</p>
<div class="sourceCode r"><pre>exibble |&gt;
  dplyr::select(num, currency) |&gt;
  gt() |&gt;
  fmt_number(decimals = 1) |&gt;
  tab_style(
    style = list(
      cell_fill(color = "lightcyan"),
      cell_text(weight = "bold")
      ),
    locations = cells_body(
      columns = num,
      rows = num &gt;= 5000
    )
  ) |&gt;
  tab_style(
    style = list(
      cell_fill(color = "#F9E3D6"),
      cell_text(style = "italic")
      ),
    locations = cells_body(
      columns = currency,
      rows = currency &lt; 100
    )
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_style_1.png" alt="This image of a table was generated from the first code example in the `tab_style()` help file." style="width:100%;"><p>With a subset of the <code>sp500</code> dataset, we'll create a different <strong>gt</strong>
table. Here, we'll color the background of entire rows of body cells and do
so on the basis of value expressions involving the <code>open</code> and <code>close</code>
columns.
</p>
<div class="sourceCode r"><pre>sp500 |&gt;
  dplyr::filter(
    date &gt;= "2015-12-01" &amp;
    date &lt;= "2015-12-15"
  ) |&gt;
  dplyr::select(-c(adj_close, volume)) |&gt;
  gt() |&gt;
  tab_style(
    style = cell_fill(color = "lightgreen"),
    locations = cells_body(rows = close &gt; open)
  ) |&gt;
  tab_style(
    style = list(
      cell_fill(color = "red"),
      cell_text(color = "white")
      ),
    locations = cells_body(rows = open &gt; close)
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_style_2.png" alt="This image of a table was generated from the second code example in the `tab_style()` help file." style="width:100%;"><p>With another two-column table based on the <code>exibble</code> dataset, let's create
a <strong>gt</strong> table. First, we'll replace missing values with <code>sub_missing()</code>.
Next, we'll add styling to the <code>char</code> column. This styling will be
HTML-specific and it will involve (all within a list): (1) a <code>cell_fill()</code>
call (to set a <code>"lightcyan"</code> background), and (2) a string containing a CSS
style declaration (<code>"font-variant: small-caps;"</code>).
</p>
<div class="sourceCode r"><pre>exibble |&gt;
  dplyr::select(char, fctr) |&gt;
  gt() |&gt;
  sub_missing() |&gt;
  tab_style(
    style = list(
      cell_fill(color = "lightcyan"),
      "font-variant: small-caps;"
    ),
    locations = cells_body(columns = char)
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_style_3.png" alt="This image of a table was generated from the third code example in the `tab_style()` help file." style="width:100%;"><p>In the following table based on the <code>towny</code> dataset, we'll use a larger
number of <code>tab_style()</code> calls with the aim of styling each location available
in the table. Over six separate uses of <code>tab_style()</code>, different body cells
are styled with background colors, the header and the footer also receive
background color fills, borders are applied to a column of body cells and
also to the column labels, and, the row labels in the stub receive a custom
text treatment.
</p>
<div class="sourceCode r"><pre>towny |&gt;
  dplyr::filter(csd_type == "city") |&gt;
  dplyr::select(
    name, land_area_km2, density_2016, density_2021,
    population_2016, population_2021
  ) |&gt;
  dplyr::slice_max(population_2021, n = 5) |&gt;
  gt(rowname_col = "name") |&gt;
  tab_header(
    title = md(paste("Largest Five", fontawesome::fa("city") , "in `towny`")),
    subtitle = "Changes in vital numbers from 2016 to 2021."
  ) |&gt;
  fmt_number(
    columns = starts_with("population"),
    n_sigfig = 3,
    suffixing = TRUE
  ) |&gt;
  fmt_integer(columns = starts_with("density")) |&gt;
  fmt_number(columns = land_area_km2, decimals = 1) |&gt;
  cols_merge(
    columns = starts_with("density"),
    pattern = paste("{1}", fontawesome::fa("arrow-right"), "{2}")
  ) |&gt;
  cols_merge(
    columns = starts_with("population"),
    pattern = paste("{1}", fontawesome::fa("arrow-right"), "{2}")
  ) |&gt;
  cols_label(
    land_area_km2 = md("Area, km^2^"),
    starts_with("density") ~ md("Density, ppl/km^2^"),
    starts_with("population") ~ "Population"
  ) |&gt;
  cols_align(align = "center", columns = -name) |&gt;
  cols_width(
    stub() ~ px(125),
    everything() ~ px(150)
  ) |&gt;
  tab_footnote(
    footnote = "Data was used from their respective census-year publications.",
    locations = cells_title(groups = "subtitle")
  ) |&gt;
  tab_source_note(source_note = md(
    "All figures are compiled in the `towny` dataset (in the **gt** package)."
  )) |&gt;
  opt_footnote_marks(marks = "letters") |&gt;
  tab_style(
    style = list(
      cell_fill(color = "gray95"),
      cell_borders(sides = c("l", "r"), color = "gray50", weight = px(3))
    ),
    locations = cells_body(columns = land_area_km2)
  ) |&gt;
  tab_style(
    style = cell_fill(color = "lightblue" |&gt; adjust_luminance(steps = 2)),
    locations = cells_body(columns = -land_area_km2)
  ) |&gt;
  tab_style(
    style = list(cell_fill(color = "gray35"), cell_text(color = "white")),
    locations = list(cells_footnotes(), cells_source_notes())
  ) |&gt;
  tab_style(
    style = cell_fill(color = "gray98"),
    locations = cells_title()
  ) |&gt;
  tab_style(
    style = cell_text(
      size = "smaller",
      weight = "bold",
      transform = "uppercase"
    ),
    locations = cells_stub()
  ) |&gt;
  tab_style(
    style = cell_borders(
      sides = c("t", "b"),
      color = "powderblue",
      weight = px(3)
    ),
    locations = list(cells_column_labels(), cells_stubhead())
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_style_4.png" alt="This image of a table was generated from the fourth code example in the `tab_style()` help file." style="width:100%;"><p><code>from_column()</code> can be used to get values from a column. We'll use it in the
next example, which begins with a table having a color name column and a
column with the associated hexadecimal color code. To show the color in a
separate column, we first create one with <code>cols_add()</code> (ensuring that missing
values are replaced with <code>""</code> via <code>sub_missing()</code>). Then, <code>tab_style()</code> is
used to style that column, using color = from_column()
within <code>cell_fill()</code>.
</p>
<div class="sourceCode r"><pre>dplyr::tibble(
  name = c(
    "red", "green", "blue", "yellow", "orange",
    "cyan", "purple", "magenta", "lime", "pink"
  ),
  hex = c(
    "#E6194B", "#3CB44B", "#4363D8", "#FFE119", "#F58231",
    "#42D4F4", "#911EB4", "#F032E6", "#BFEF45", "#FABED4"
  )
) |&gt;
  gt(rowname_col = "name") |&gt;
  cols_add(color = rep(NA_character_, 10)) |&gt;
  sub_missing(missing_text = "") |&gt;
  tab_style(
    style = cell_fill(color = from_column(column = "hex")),
    locations = cells_body(columns = color)
  ) |&gt;
  tab_style(
    style = cell_text(font = system_fonts(name = "monospace-code")),
    locations = cells_body()
  ) |&gt;
  opt_all_caps() |&gt;
  cols_width(everything() ~ px(100)) |&gt;
  tab_options(table_body.hlines.style = "none")
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_style_5.png" alt="This image of a table was generated from the fifth code example in the `tab_style()` help file." style="width:100%;"><p><code>cell_text()</code> also allows the use of <code>from_column()</code> for many of its arguments.
Let's take a small portion of data from <code>sp500</code> and add an up or down arrow
based on the values in the <code>open</code> and <code>close</code> columns. Within <code>cols_add()</code> we
can create a new column (<code>dir</code>) with an expression to get either <code>"red"</code> or
<code>"green"</code> text from a comparison of the <code>open</code> and <code>close</code> values. These
values are transformed to up or down arrows with <code>text_case_match()</code>, using
<strong>fontawesome</strong> icons in the end. However, the text values are still present
and can be used by <code>cell_text()</code> within <code>tab_style()</code>. <code>from_column()</code> makes
it possible to use the text in the cells of the <code>dir</code> column as <code>color</code> input
values.
</p>
<div class="sourceCode r"><pre>sp500 |&gt;
  dplyr::filter(date &gt; "2015-01-01") |&gt;
  dplyr::slice_min(date, n = 5) |&gt;
  dplyr::select(date, open, close) |&gt;
  gt(rowname_col = "date") |&gt;
  fmt_currency(columns = c(open, close)) |&gt;
  cols_add(dir = ifelse(close &lt; open, "red", "forestgreen")) |&gt;
  cols_label(dir = "") |&gt;
  text_case_match(
    "red" ~ fontawesome::fa("arrow-down"),
    "forestgreen" ~ fontawesome::fa("arrow-up")
  ) |&gt;
  tab_style(
    style = cell_text(color = from_column("dir")),
    locations = cells_body(columns = dir)
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_style_6.png" alt="This image of a table was generated from the sixth code example in the `tab_style()` help file." style="width:100%;"><h3>Function ID</h3>

<p>2-10
</p>


<h3>Function Introduced</h3>

<p><code>v0.2.0.5</code> (March 31, 2020)
</p>


<h3>See Also</h3>

<p><code>cell_text()</code>, <code>cell_fill()</code>, and <code>cell_borders()</code> as helpers for
defining custom styles and <code>cells_body()</code> as one of many useful helper
functions for targeting the locations to be styled.
</p>
<p>Other part creation/modification functions: 
<code>tab_caption()</code>,
<code>tab_footnote()</code>,
<code>tab_header()</code>,
<code>tab_info()</code>,
<code>tab_options()</code>,
<code>tab_row_group()</code>,
<code>tab_source_note()</code>,
<code>tab_spanner()</code>,
<code>tab_spanner_delim()</code>,
<code>tab_stub_indent()</code>,
<code>tab_stubhead()</code>,
<code>tab_style_body()</code>
</p>


</div>