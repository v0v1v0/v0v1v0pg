<div class="container">

<table style="width: 100%;"><tr>
<td>expected_event</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Expected events observed under piecewise exponential model</h2>

<h3>Description</h3>

<p>Computes expected events over time and by strata
under the assumption of piecewise constant enrollment rates and piecewise
exponential failure and censoring rates.
The piecewise exponential distribution allows a simple method to specify a distribution
and enrollment pattern
where the enrollment, failure and dropout rates changes over time.
While the main purpose may be to generate a trial that can be analyzed at a single point in time or
using group sequential methods, the routine can also be used to simulate an adaptive trial design.
The intent is to enable sample size calculations under non-proportional hazards assumptions
for stratified populations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">expected_event(
  enroll_rate = define_enroll_rate(duration = c(2, 2, 10), rate = c(3, 6, 9)),
  fail_rate = define_fail_rate(duration = c(3, 100), fail_rate = log(2)/c(9, 18),
    dropout_rate = 0.001),
  total_duration = 25,
  simple = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>enroll_rate</code></td>
<td>
<p>An <code>enroll_rate</code> data frame with or without stratum
created by <code>define_enroll_rate()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fail_rate</code></td>
<td>
<p>A <code>fail_rate</code> data frame with or without stratum
created by <code>define_fail_rate()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_duration</code></td>
<td>
<p>Total follow-up from start of enrollment to data cutoff.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simple</code></td>
<td>
<p>If default (<code>TRUE</code>), return numeric expected number of events,
otherwise a data frame as described below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>More periods will generally be supplied in output than those that are input.
The intent is to enable expected event calculations in a tidy format to
maximize flexibility for a variety of purposes.
</p>


<h3>Value</h3>

<p>The default when <code>simple = TRUE</code> is to return the total expected
number of events as a real number.
Otherwise, when <code>simple = FALSE</code>, a data frame is returned with
the following variables for each period specified in <code>fail_rate</code>:
</p>

<ul>
<li> <p><code>t</code>: start of period.
</p>
</li>
<li> <p><code>fail_rate</code>: failure rate during the period.
</p>
</li>
<li> <p><code>event</code>: expected events during the period.
</p>
</li>
</ul>
<p>The records in the returned data frame correspond to the input data frame <code>fail_rate</code>.
</p>


<h3>Specification</h3>




<h3>Examples</h3>

<pre><code class="language-R">library(gsDesign2)

# Default arguments, simple output (total event count only)
expected_event()

# Event count by time period
expected_event(simple = FALSE)

# Early cutoff
expected_event(total_duration = .5)

# Single time period example
expected_event(
  enroll_rate = define_enroll_rate(duration = 10, rate = 10),
  fail_rate = define_fail_rate(duration = 100, fail_rate = log(2) / 6, dropout_rate = .01),
  total_duration = 22,
  simple = FALSE
)

# Single time period example, multiple enrollment periods
expected_event(
  enroll_rate = define_enroll_rate(duration = c(5, 5), rate = c(10, 20)),
  fail_rate = define_fail_rate(duration = 100, fail_rate = log(2) / 6, dropout_rate = .01),
  total_duration = 22, simple = FALSE
)
</code></pre>


</div>