<div class="container">

<table style="width: 100%;"><tr>
<td>isatpanel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Indicator Saturation for Panel Data</h2>

<h3>Description</h3>

<p>This function is essentially a wrapper function around the <code>gets::isat()</code> function from the <code>gets</code> package.
This function allows the running of various different indicator saturation techniques that can, for example, be used to answer reverse causal questions.
Indicator Saturation techniques fully saturate a model with indicators (for example dummy-indicators or step-indicators) and then use an automated block-search
algorithm to retain only relevant indicators that improve the model (based on a chosen information criterion).
</p>


<h3>Usage</h3>

<pre><code class="language-R">isatpanel(
  data = NULL,
  formula = NULL,
  index = NULL,
  effect = c("twoways"),
  na.remove = TRUE,
  engine = NULL,
  user.estimator = NULL,
  cluster = "none",
  ar = 0,
  iis = FALSE,
  jiis = FALSE,
  jsis = FALSE,
  fesis = FALSE,
  tis = FALSE,
  csis = FALSE,
  cfesis = FALSE,
  fesis_id = NULL,
  fesis_time = NULL,
  tis_id = NULL,
  tis_time = NULL,
  csis_var = NULL,
  csis_time = NULL,
  cfesis_var = NULL,
  cfesis_id = NULL,
  cfesis_time = NULL,
  uis = NULL,
  t.pval = 0.001,
  plot = TRUE,
  print.searchinfo = TRUE,
  plm_model = "within",
  y = NULL,
  id = NULL,
  time = NULL,
  mxreg = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The input data.frame object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Formula argument. The dependent variable will be the left-most element, separated by a ~ symbol from the remaining regressors (e.g. y ~ x + z). Note the intercept will always be removed unless the effect is "none" - this means that if any fixed effects are specified, the intercept will always be removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>Specify the name of the group and time column in the format c("id", "time").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect</code></td>
<td>
<p>Fixed Effect specification. Possible arguments: "twoways" (Default), "individual", "time", or "none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.remove</code></td>
<td>
<p>remove NAs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>engine</code></td>
<td>
<p>Estimation function to use. Default is NULL, which uses the default estimation procedure of the gets package. Alternatives are "fixest", "plm", or "felm".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.estimator</code></td>
<td>
<p>Use a user.estimator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>cluster Standard Errors at this level. Default is "none". Possible values are: "individual", "time", or "twoways".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ar</code></td>
<td>
<p>Autoregressive Term to be included. default is 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iis</code></td>
<td>
<p>Logical. Use Impulse Indicator Saturation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jiis</code></td>
<td>
<p>Logical. Use Joint Impulse Indicator Saturation (Outliers are common across all units). This is essentially just a time fixed effect, but this allows selection of FE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jsis</code></td>
<td>
<p>Logical. Use Join Step Indicator Saturation (steps are common across all units). Will only be retained if time fixed effects are not included (i.e. effect = 'none' or 'individual'), as they are collinear otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fesis</code></td>
<td>
<p>Logical. Use Fixed Effect Step Indicator Saturation. Constructed by multiplying a constant (1) with group Fixed Effects. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tis</code></td>
<td>
<p>Logical. Use Trend Indicator Saturation. Constructed by fitting a trend for each unit from every observation. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>csis</code></td>
<td>
<p>Logical. Use Coefficient Step Indicator Saturation. Constructed by Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfesis</code></td>
<td>
<p>Logical. Use Coefficient-Fixed Effect Indicator Saturation. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fesis_id</code></td>
<td>
<p>The FESIS method can be conducted for all (default) individuals/units (i.e. looking for breaks in individual countries) or just a subset of them. If you want to use a subset, specify the individuals/units for which you want to test the stability of the fixed effect in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fesis_time</code></td>
<td>
<p>The FESIS method can be conducted for all (default) time periods (i.e. looking for Fixed Effect Step-shifts at every time period) or just a subset of them. If you want to use a subset, specify the time periods as a numeric vector (for all id's the same like <code>1:10</code>) or as a list with an equal number of elements as there are id's e.g. <code>list(A = 1:10, B = NULL, C = 5:10)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tis_id</code></td>
<td>
<p>The TIS method can be conducted for all (default) individuals/units (i.e. looking for trends in individual countries) or just a subset of them. If you want to use a subset, specify the individuals/units for which you want to test the trend in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tis_time</code></td>
<td>
<p>The TIS method can be conducted for all (default) time periods (i.e. looking for trends at every time period) or just a subset of them. If you want to use a subset, specify the time periods as a numeric vector (for all id's the same like <code>1:10</code>) or as a list with an equal number of elements as there are id's e.g. <code>list(A = 1:10, B = NULL, C = 5:10)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>csis_var</code></td>
<td>
<p>The CSIS method can be conducted for all (default) variables or just a subset of them. If you want to use a subset, please specify the column names of the variable in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>csis_time</code></td>
<td>
<p>The CSIS method can be conducted for all (default) time periods (i.e. looking for Coefficient Step Shifts across all units at every time period) or just a subset of them. If you want to use a subset, specify the time periods as a numeric vector (e.g. <code>1:10</code>).'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfesis_var</code></td>
<td>
<p>The CFESIS method can be conducted for all variables (default) or just a subset of them. If you want to use a subset, please specify the column names of the variable in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfesis_id</code></td>
<td>
<p>The CFESIS method can be conducted for all individuals/units (default) or just a subset of them. If you want to use a subset, please specify the individuals/units to be tested in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfesis_time</code></td>
<td>
<p>The CFESIS method can be conducted for all (default) time periods (i.e. looking for Coefficient Step Shifts per unit at every time period) or just a subset of them. If you want to use a subset, specify the time periods as a numeric vector (for all id's the same like <code>1:10</code>) or as a list with an equal number of elements as there are id's e.g. <code>list(A = 1:10, B = NULL, C = 5:10)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uis</code></td>
<td>
<p>Matrix or List. This can be used to include a set of UIS (User Specified Indicators). Must be equal to the sample size (so it is recommended to use this only with datasets without <code>NA</code> values. Default is <code>NULL</code>. See the reference by Genaro Sucarrat (2020) below for an explanation of the UIS system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.pval</code></td>
<td>
<p>numeric value between 0 and 1. The significance level used for the two-sided regressor significance t-tests</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical. Should the final object be plotted? Default is TRUE. The output is a combination of <code>plot()</code> and <code>plot_grid()</code> using the <code>cowplot</code> package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.searchinfo</code></td>
<td>
<p>logical. If <code>TRUE</code> (default), then detailed information is printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plm_model</code></td>
<td>
<p>Type of PLM model (only if engine = "PLM")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Deprecated. The dependent variable. Can be used when data, index, and formula are not specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Deprecated. Can be used when data, index, and formula are not specified. Must be a vector of the grouping variable as a character or factor</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>Deprecated. Can be used when data, index, and formula are not specified. Must be a vector of the time variable as an integer or numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mxreg</code></td>
<td>
<p>Deprecated.The co-variates matrix. Superseded by the formula argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to <code>gets::isat()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with class 'isatpanel'.
</p>


<h3>References</h3>

<p>Felix Pretis and Moritz Schwarz (2022). Discovering What Mattered: Answering Reverse Causal Questions by Detecting Unknown Treatment Assignment and Timing as Breaks in Panel Models. January 31, 2022. Available at SSRN: https://ssrn.com/abstract=4022745 or http://dx.doi.org/10.2139/ssrn.4022745
</p>
<p>Genaro Sucarrat. User-Specified General-to-Specific and Indicator Saturation Methods, The R Journal (2020) 12:2, pages 388-401. Available at: https://journal.r-project.org/archive/2021/RJ-2021-024/index.html
</p>


<h3>See Also</h3>

<p><code>gets::isat()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(EU_emissions_road)

# Group specification
EU15 &lt;- c("Austria", "Germany", "Denmark", "Spain", "Finland", "Belgium",
         "France", "United Kingdom", "Ireland", "Italy", "Luxembourg",
         "Netherlands", "Greece", "Portugal", "Sweden")

# Prepare sample and data
EU_emissions_road_short &lt;- EU_emissions_road[
EU_emissions_road$country %in% EU15 &amp;
EU_emissions_road$year &gt;= 2000,
]

# Run
result &lt;- isatpanel(
  data = EU_emissions_road_short,
  formula = ltransport.emissions ~ lgdp + I(lgdp^2) + lpop,
  index = c("country", "year"),
  effect = "twoways",
  fesis = TRUE,
  plot = FALSE,
  t.pval = 0.01
)
plot(result)
plot_grid(result)

# print the retained indicators
get_indicators(result)

</code></pre>


</div>