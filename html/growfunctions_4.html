<div class="container">

<table style="width: 100%;"><tr>
<td>fit_compare</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Side-by-side plot panels that compare latent function 
values to data for different estimation models</h2>

<h3>Description</h3>

<p>Uses as input the output object from the gpdpgrow() and 
gmrfdpgrow() functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fit_compare(
  objects,
  H = NULL,
  label.object = c("gp_rq", "gmrf_rw2"),
  units_name = "Observation_Unit",
  units_label = NULL,
  date_field = NULL,
  x.axis.label = NULL,
  y.axis.label = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>objects</code></td>
<td>
<p>A list input where each element is a returned object
from estimation with either of <code>gpdpgrow</code> or 
<code>gmrfdpgrow</code> or an object that contains true 
<code>N x T</code> matrix of true latent
function values, <code>f</code>.  This latter input 
is only needed if want to compare 
estimated to true latent function values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>H</code></td>
<td>
<p>An <code>N x 1</code> with entries in <code>1,...,M</code> of cluster 
assignments for the <code>N</code>
units of <code>y</code> under a known clustering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.object</code></td>
<td>
<p>A character vector of length equal to <code>objects</code> 
that contains labels for each element of <code>objects</code> 
to be used in rendering comparison plots.
Defaults to <code>label.object = c("gp_rq","gmrf_rw2")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units_name</code></td>
<td>
<p>A character input that provides a label 
for the set of <code>N</code> observation units.
Defaults to <code>units_name = "Observation_Unit"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units_label</code></td>
<td>
<p>A vector of labels to apply to the observation units 
with length equal to the 
number of unique units.  Defaults to sequential 
numeric values as input with data, <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_field</code></td>
<td>
<p>A vector of <code>Date</code> values for labeling the x-axis tick marks.
Defaults to <code>1:T</code>  .</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.axis.label</code></td>
<td>
<p>Text label for x-axis. Defaults to <code>"time"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.axis.label</code></td>
<td>
<p>Text label for y-axis. Defaults to <code>"function values"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list object containing the plot of estimated functions, faceted by cluster,
and the associated <code>data.frame</code> object.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>p.t</code></td>
<td>
<p>A <code>ggplot2</code> plot object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>A <code>data.frame</code> object that contains clustering structure of
observation units.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Terrance Savitsky <a href="mailto:tds151@gmail.com">tds151@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code>gpdpgrow</code>, <code>gmrfdpgrow</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">{
library(growfunctions)

## load the monthly employment count data 
## for a collection of 
## U.S. states from the Current 
## Population Survey (cps)
data(cps)
## subselect the columns of N x T, y, 
## associated with 
## the years 2009 - 2013
## to examine the state level 
## employment levels 
## during the "great recession"
y_short &lt;- cps$y[,(cps$yr_label %in% 
                 c(2010:2013))]

## run DP mixture of GP's to 
## estimate posterior distributions 
## for model parameters
## uses default setting of a 
## single "rational quadratic" 
## covariance formula
res_gp         &lt;- gpdpgrow(
                     y = y_short, 
                     n.iter = 3, 
                     n.burn = 1, 
                     n.thin = 1, 
                     n.tune = 0)  
## 2 plots of estimated functions: 
## 1. faceted by cluster and fit;
## 2.  data for experimental units.
## for a group of randomly-selected 
## functions
fit_plots_gp   &lt;- cluster_plot( 
 object = res_gp,  units_name = "state", 
 units_label = cps$st, single_unit = FALSE, 
 credible = TRUE )
                                   
## Run the DP mixture of iGMRF's to 
## estimate posterior 
## distributions for model parameters
## Under default 
## RW2(kappa) = order 2 trend 
## precision term
res_gmrf     &lt;- gmrfdpgrow(y = y_short, 
                       n.iter = 13, 
                       n.burn = 4, 
                       n.thin = 1) 
                                     
## 2 plots of estimated functions: 
## 1. faceted by cluster and fit;
## 2.  data for experimental units.
## for a group of randomly-selected functions
fit_plots_gmrf   &lt;- cluster_plot( object = res_gmrf, 
  units_name = "state", units_label = cps$st, 
  single_unit = FALSE, 
  credible = TRUE )                                    
                                     
## visual comparison of fit performance 
## between gpdpgrow() and gmrfdpgrow()
## or any two objects returned from any
## combination of these estimation
## functions
objects        &lt;- vector("list",2)
objects[[1]]   &lt;- res_gmrf
objects[[2]]   &lt;- res_gp
label.object   &lt;- c("gmrf_tr2","gp_rq")
## the map data.frame object 
## from fit_plots gp 
## includes a field that 
## identifies cluster assignments
## for each unit (or domain)
H        &lt;- fit_plots_gp$map$cluster
fit_plot_compare_facet &lt;- 
fit_compare( objects = objects, 
 H = H, label.object = label.object,
 y.axis.label = "normalized y",
 units_name = "state", units_label = cps$st)                                  
}
</code></pre>


</div>