<div class="container">

<table style="width: 100%;"><tr>
<td>SuppressSmallCounts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Small count frequency table suppression.</h2>

<h3>Description</h3>

<p>This is a wrapper function of <code>GaussSuppressionFromData</code>
for small count frequency suppression. For common applications, the <code>spec</code>
parameter can be adjusted, see <code>PackageSpecs</code> for more
information. See Details for more information on function call customization.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SuppressSmallCounts(
  data,
  maxN,
  freqVar = NULL,
  dimVar = NULL,
  hierarchies = NULL,
  formula = NULL,
  ...,
  spec = PackageSpecs("smallCountSpec")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Input data as a data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxN</code></td>
<td>
<p>Suppression parameter. Cells with frequency <code style="white-space: pre;">⁠&lt;= maxN⁠</code> are set as primary suppressed.
Using the default <code>primary</code> function, <code>maxN</code> is by default set to <code>3</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freqVar</code></td>
<td>
<p>A single variable holding counts (name or number).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimVar</code></td>
<td>
<p>The main dimensional variables and additional aggregating variables. This parameter can be  useful when hierarchies and formula are unspecified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hierarchies</code></td>
<td>
<p>List of hierarchies, which can be converted by <code>AutoHierarchies</code>.
Thus, the variables can also be coded by <code>"rowFactor"</code> or <code>""</code>, which correspond to using the categories in the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A model formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to the supplied functions and to <code>ModelMatrix</code> (such as <code>inputInOutput</code> and <code>removeEmpty</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p><code>NULL</code> or a named list of arguments that will act as default values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The specs provided in the package (see <code>PackageSpecs</code>)
provide common parameter setups for small count suppression. However, it might
be necessary to customize the parameters further. In this case, certain
parameters from <code>GaussSuppressionFromData</code>
might need adjusting from the values provided by the package specs. In
particular, the parameters <code>protectZeros</code> (should zeros be primary
suppressed), <code>extend0</code> (should empty cells be added before primary
suppression), and <code>secondaryZeros</code> (should zero frequency cells be
candidates for secondary suppression) might be of interest. The examples
below illustrate how to override parameters specified by a spec. Note
that this is only possible if <code>specLock = FALSE</code>.
</p>


<h3>Value</h3>

<p>data frame containing aggregated data and suppression information.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mun_accidents &lt;- SSBtoolsData("mun_accidents")

SuppressSmallCounts(data = mun_accidents, maxN = 3, dimVar = 1:2, freqVar = 3)
# override default spec
SuppressSmallCounts(data = mun_accidents, maxN = 3, dimVar = 1:2, freqVar = 3, 
                    protectZeros = FALSE)
                    
                    
d2 &lt;- SSBtoolsData("d2")
d2$f &lt;- round(d2$freq/10)  # tenth as frequency in examples

# Hierarchical region variables are detected automatically -&gt; same output column
SuppressSmallCounts(data = d2, maxN = 2, freqVar = "f", 
                    dimVar = c("region", "county", "k_group"))

# Formula. Hierarchical variables still detected automatically.
SuppressSmallCounts(data = d2, maxN = 3, freqVar = "f", 
                    formula = ~main_income * k_group + region + county - k_group)

# With hierarchies created manually
ml &lt;- data.frame(levels = c("@", "@@", "@@@", "@@@", "@@@", "@@"), 
        codes = c("Total", "not_assistance", "other", "pensions", "wages", "assistance"))
SuppressSmallCounts(data = d2, maxN = 2, freqVar = "f", 
                    hierarchies = list(main_income = ml, k_group = "Total_Norway"))


# Data without pensions in k_group 400 
# And assume these are structural zeros (will not be suppressed)
SuppressSmallCounts(data = d2[1:41, ], maxN = 3, freqVar = "f", 
                    hierarchies = list(main_income = ml, k_group = "Total_Norway"), 
                    extend0 = FALSE, structuralEmpty = TRUE)
# -- Note for the example above -- 
# With protectZeros = FALSE 
#   - No zeros suppressed
# With extend0 = FALSE and structuralEmpty = FALSE 
#   - Primary suppression without protection (with warning) 
# With extend0 = TRUE and structuralEmpty = TRUE 
#   - As default behavior. Suppression/protection of all zeros (since nothing empty)
# With formula instead of hierarchies: Extra parameter needed when extend0 = FALSE.
#   - removeEmpty = FALSE,  to include empty zeros in output.                      
</code></pre>


</div>