<div class="container">

<table style="width: 100%;"><tr>
<td>cr_deploy_pkgdown</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Deploy a cloudbuild.yml for a pkgdown website of an R package</h2>

<h3>Description</h3>

<p>This builds a pkgdown website each time the trigger fires and deploys it to git
</p>


<h3>Usage</h3>

<pre><code class="language-R">cr_deploy_pkgdown(
  github_repo,
  secret,
  steps = NULL,
  create_trigger = c("file", "inline", "no"),
  cloudbuild_file = "cloudbuild-pkgdown.yml",
  git_email = "googlecloudrunner@r.com",
  env = NULL,
  build_image = "gcr.io/gcer-public/packagetools:latest",
  post_setup = NULL,
  post_clone = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>github_repo</code></td>
<td>
<p>The GitHub repo to deploy pkgdown website from and to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secret</code></td>
<td>
<p>The name of the secret on Google Secret Manager for the git ssh private key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps</code></td>
<td>
<p>extra steps to run before the pkgdown website steps run</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_trigger</code></td>
<td>
<p>If not "no" then the buildtrigger will be setup for you via cr_buildtrigger, if "file" will create a buildtrigger pointing at <code>cloudbuild_file</code>, if "inline" will put the build inline within the trigger (no file created)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cloudbuild_file</code></td>
<td>
<p>The cloudbuild yaml file to write to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>git_email</code></td>
<td>
<p>The email the git commands will be identifying as</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>A character vector of env arguments to set for all steps</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>build_image</code></td>
<td>
<p>A docker image with <code>pkgdown</code> installed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>post_setup</code></td>
<td>
<p>Steps that occur after git setup</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>post_clone</code></td>
<td>
<p>A cr_buildstep that occurs after the repo is cloned</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The trigger repository needs to hold an R package configured to build a pkgdown website.
</p>
<p>For GitHub, the repository will also need to be linked to the project you are building within, via <a href="https://console.cloud.google.com/cloud-build/triggers/connect">https://console.cloud.google.com/cloud-build/triggers/connect</a>
</p>
<p>The git ssh keys need to be deployed to Google Secret Manager for the deployment of the website - see cr_buildstep_git - this only needs to be done once per Git account.
</p>


<h3>See Also</h3>

<p>Create your own custom deployment using cr_buildstep_pkgdown which this function uses with some defaults.
</p>
<p>Other Deployment functions: 
<code>cr_deploy_docker_trigger()</code>,
<code>cr_deploy_docker()</code>,
<code>cr_deploy_packagetests()</code>,
<code>cr_deploy_run_website()</code>,
<code>cr_deploy_run()</code>,
<code>cr_deploy_r()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
pd &lt;- cr_deploy_pkgdown("MarkEdmondson1234/googleCloudRunner",
  secret = "my_git_secret",
  create_trigger = "no"
)
pd
file.exists("cloudbuild-pkgdown.yml")
unlink("cloudbuild-pkgdown.yml")
## Not run: 
cr_deploy_pkgdown("MarkEdmondson1234/googleCloudRunner",
  secret = "my_git_secret",
  create_trigger = "inline"
)

## End(Not run)

</code></pre>


</div>