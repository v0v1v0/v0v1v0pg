<div class="container">

<table style="width: 100%;"><tr>
<td>sub_values</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Substitute targeted values in the table body</h2>

<h3>Description</h3>

<p>Should you need to replace specific cell values with custom text,
<code>sub_values()</code> can be good choice. We can target cells for replacement
through value, regex, and custom matching rules.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sub_values(
  data,
  columns = everything(),
  rows = everything(),
  values = NULL,
  pattern = NULL,
  fn = NULL,
  replacement = NULL,
  escape = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p><em>Columns to target</em>
</p>
<p><code>&lt;column-targeting expression&gt;</code> // <em>default:</em> <code>everything()</code>
</p>
<p>The columns to which substitution operations are constrained. Can either
be a series of column names provided in <code>c()</code>, a vector of column indices,
or a select helper function (e.g. <code>starts_with()</code>, <code>ends_with()</code>,
<code>contains()</code>, <code>matches()</code>, <code>num_range()</code>, and <code>everything()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p><em>Rows to target</em>
</p>
<p><code>&lt;row-targeting expression&gt;</code> // <em>default:</em> <code>everything()</code>
</p>
<p>In conjunction with <code>columns</code>, we can specify which of their rows should
form a constraint for targeting operations. The default <code>everything()</code>
results in all rows in <code>columns</code> being formatted. Alternatively, we can
supply a vector of row IDs within <code>c()</code>, a vector of row indices, or a
select helper function (e.g. <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>,
<code>matches()</code>, <code>num_range()</code>, and <code>everything()</code>). We can also use
expressions to filter down to the rows we need
(e.g., <code style="white-space: pre;">⁠[colname_1] &gt; 100 &amp; [colname_2] &lt; 50⁠</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p><em>Values to match on</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character|numeric|integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>The specific value or values that should be replaced with a <code>replacement</code>
value. If <code>pattern</code> is also supplied then <code>values</code> will be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p><em>Regex pattern to match with</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>A regex pattern that can target solely those values in <code>character</code>-based
columns. If <code>values</code> is also supplied, <code>pattern</code> will take precedence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fn</code></td>
<td>
<p><em>Function to return logical values</em>
</p>
<p><code style="white-space: pre;">⁠&lt;function&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>A supplied function that operates on <code>x</code> (the data in a column) and should
return a logical vector that matches the length of <code>x</code> (i.e., number of
rows in the input table). If either of <code>values</code> or <code>pattern</code> is also
supplied, <code>fn</code> will take precedence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replacement</code></td>
<td>
<p><em>Replacement value for matches</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character|numeric|integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>The replacement value for any cell values matched by either <code>values</code> or
<code>pattern</code>. Must be a character or numeric vector of length 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>escape</code></td>
<td>
<p><em>Text escaping</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>An option to escape replacement text according to the final output format
of the table. For example, if a LaTeX table is to be generated then LaTeX
escaping would be performed on the replacements during rendering. By
default this is set to <code>TRUE</code> but setting to <code>FALSE</code> would be useful in the
case where replacement text is crafted for a specific output format in
mind.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>Examples</h3>

<p>Let's create an input table with three columns. This contains an assortment
of values that could potentially undergo some substitution via
<code>sub_values()</code>.
</p>
<div class="sourceCode r"><pre>tbl &lt;-
  dplyr::tibble(
    num_1 = c(-0.01, 74, NA, 0, 500, 0.001, 84.3),
    int_1 = c(1L, -100000L, 800L, 5L, NA, 1L, -32L),
    lett = LETTERS[1:7]
  )

tbl
#&gt; # A tibble: 7 x 3
#&gt;     num_1   int_1 lett 
#&gt;     &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;
#&gt; 1  -0.01        1 A    
#&gt; 2  74     -100000 B    
#&gt; 3  NA         800 C    
#&gt; 4   0           5 D    
#&gt; 5 500          NA E    
#&gt; 6   0.001       1 F    
#&gt; 7  84.3       -32 G
</pre></div>
<p>Values in the table body cells can be replaced by specifying which values
should be replaced (in <code>values</code>) and what the replacement value should be.
It's okay to search for numerical or character values across all columns and
the replacement value can also be of the <code>numeric</code> or <code>character</code> types.
</p>
<div class="sourceCode r"><pre>tbl |&gt;
  gt() |&gt;
  sub_values(values = c(74, 500), replacement = 150) |&gt;
  sub_values(values = "B", replacement = "Bee") |&gt;
  sub_values(values = 800, replacement = "Eight hundred")
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_sub_values_1.png" alt="This image of a table was generated from the first code example in the `sub_values()` help file." style="width:100%;"><p>We can also use the <code>pattern</code> argument to target cell values for replacement
in <code>character</code>-based columns.
</p>
<div class="sourceCode r"><pre>tbl |&gt;
  gt() |&gt;
  sub_values(pattern = "A|C|E", replacement = "Ace")
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_sub_values_2.png" alt="This image of a table was generated from the second code example in the `sub_values()` help file." style="width:100%;"><p>For the most flexibility, it's best to use the <code>fn</code> argument. With that you
need to ensure that the function you provide will return a logical vector
when invoked on a column of cell values, taken as <code>x</code> (and, the length of
that vector must match the length of <code>x</code>).
</p>
<div class="sourceCode r"><pre>tbl |&gt;
  gt() |&gt;
  sub_values(
    fn = function(x) x &gt;= 0 &amp; x &lt; 50,
    replacement = "Between 0 and 50"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_sub_values_3.png" alt="This image of a table was generated from the third code example in the `sub_values()` help file." style="width:100%;"><h3>Function ID</h3>

<p>3-35
</p>


<h3>Function Introduced</h3>

<p><code>v0.8.0</code> (November 16, 2022)
</p>


<h3>See Also</h3>

<p>Other data formatting functions: 
<code>data_color()</code>,
<code>fmt()</code>,
<code>fmt_auto()</code>,
<code>fmt_bins()</code>,
<code>fmt_bytes()</code>,
<code>fmt_chem()</code>,
<code>fmt_country()</code>,
<code>fmt_currency()</code>,
<code>fmt_date()</code>,
<code>fmt_datetime()</code>,
<code>fmt_duration()</code>,
<code>fmt_email()</code>,
<code>fmt_engineering()</code>,
<code>fmt_flag()</code>,
<code>fmt_fraction()</code>,
<code>fmt_icon()</code>,
<code>fmt_image()</code>,
<code>fmt_index()</code>,
<code>fmt_integer()</code>,
<code>fmt_markdown()</code>,
<code>fmt_number()</code>,
<code>fmt_partsper()</code>,
<code>fmt_passthrough()</code>,
<code>fmt_percent()</code>,
<code>fmt_roman()</code>,
<code>fmt_scientific()</code>,
<code>fmt_spelled_num()</code>,
<code>fmt_tf()</code>,
<code>fmt_time()</code>,
<code>fmt_units()</code>,
<code>fmt_url()</code>,
<code>sub_large_vals()</code>,
<code>sub_missing()</code>,
<code>sub_small_vals()</code>,
<code>sub_zero()</code>
</p>


</div>