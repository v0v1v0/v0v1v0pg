<div class="container">

<table style="width: 100%;"><tr>
<td>getGENEAsegments</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>import and segment one or more bin files.</h2>

<h3>Description</h3>

<p>Import and summarize GENEActiv bin data for manual classification.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getGENEAsegments(
  testfile,
  start = NULL,
  end = NULL,
  Use.Timestamps = FALSE,
  radians = FALSE,
  keep_raw_data = TRUE,
  mmap.load = (.Machine$sizeof.pointer &gt;= 8),
  outputtoken = "_segmented",
  outputdir = "GENEAclassification",
  datacols = "default",
  decimalplaces = "default",
  filterWave = FALSE,
  filtername = "haar",
  j = 8,
  changepoint = c("UpDownDegrees", "TempFreq", "UpDownFreq", "UpDownMean", "UpDownVar",
    "UpDownMeanVar", "DegreesMean", "DegreesVar", "DegreesMeanVar",
    "UpDownMeanVarDegreesMeanVar", "UpDownMeanVarMagMeanVar"),
  penalty = "Manual",
  pen.value1 = 40,
  pen.value2 = 400,
  intervalseconds = 30,
  mininterval = 5,
  samplefreq = 100,
  filterorder = 2,
  boundaries = c(0.5, 5),
  Rp = 3,
  plot.it = FALSE,
  hysteresis = 0.1,
  stft_win = 10,
  plot_changepoints = FALSE,
  plot_changepoints_outputfile = "Changepoint",
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>testfile</code></td>
<td>
<p>character vector stating path to a GENEActiv bin file, or a folder containing GENEActiv bin files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>Where to start reading observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>Where to end reading observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Use.Timestamps</code></td>
<td>
<p>To use timestamps as the start and end time values this has to be set to TRUE. (Default FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radians</code></td>
<td>
<p>calculate degrees rotation in radians.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_raw_data</code></td>
<td>
<p>Keep the raw data for calculating steps using stepcounter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mmap.load</code></td>
<td>
<p>Default is (.Machine$sizeof.pointer &gt;= 8). see <code>mmap</code> for more details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputtoken</code></td>
<td>
<p>single character string to be appended to the file name
for saving the segmenation output (default '_segmentated').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputdir</code></td>
<td>
<p>The absolute or relative path to directory in which artifacts (plot and changes files) should be created, or NULL
(default "GENEAclassification").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datacols</code></td>
<td>
<p>a vector constructed 'column.summary' or 'default'. See <code>segmentation</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimalplaces</code></td>
<td>
<p>named numeric vector of decimal places with which to
round summary columns. <code>NULL</code> returns unrounded values.
The length 1 character vector 'default' applies default roundings: </p>

<ul>
<li>
<p> Start.Time = 0,
</p>
</li>
<li>
<p> Degrees.mean = 3,
</p>
</li>
<li>
<p> Degrees.median = 3,
</p>
</li>
<li>
<p> Degrees.var = 3,
</p>
</li>
<li>
<p> Degrees.sd = 3,
</p>
</li>
<li>
<p> Degrees.mad = 3,
</p>
</li>
<li>
<p> Magnitude.mean = 3,
</p>
</li>
<li>
<p> UpDown.mean = 3,
</p>
</li>
<li>
<p> UpDown.median = 3,
</p>
</li>
<li>
<p> UpDown.var = 3
</p>
</li>
<li>
<p> UpDown.sd = 3,
</p>
</li>
<li>
<p> UpDown.mad = 3,
</p>
</li>
<li>
<p> Principal.Frequency.median = 3,
</p>
</li>
<li>
<p> Principal.Frequency.mad = 3,
</p>
</li>
<li>
<p> Principal.Frequency.ratio = 3,
</p>
</li>
<li>
<p> Principal.Frequency.sumdiff = 3,
</p>
</li>
<li>
<p> Principal.Frequency.meandiff = 3,
</p>
</li>
<li>
<p> Principal.Frequency.abssumdiff = 3,
</p>
</li>
<li>
<p> Principal.Frequency.sddiff = 3,
</p>
</li>
<li>
<p> Light.mean = 0,
</p>
</li>
<li>
<p> Light.max = 0,
</p>
</li>
<li>
<p> Temp.mean = 1,
</p>
</li>
<li>
<p> Temp.sumdiff = 3
</p>
</li>
<li>
<p> Temp.meandiff = 3
</p>
</li>
<li>
<p> Temp.abssumdiff = 3
</p>
</li>
<li>
<p> Temp.sddiff = 3
</p>
</li>
<li>
<p> Step.count = 0
</p>
</li>
<li>
<p> Step.sd = 1
</p>
</li>
<li>
<p> Step.mean = 0
</p>
</li>
<li>
<p> Step.GENEAamplitude = 3
</p>
</li>
<li>
<p> Step.GENEAwavelength = 3
</p>
</li>
<li>
<p> Step.GENEAdistance = 3
</p>
</li>
</ul>
<p>This can be changed by using a named list. e.g decimalplaces = c(Start.Time = 2, Degrees.mean = 4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filterWave</code></td>
<td>
<p>single logical, should a smoothing filter from <code>wave.filter</code> be applied? (default FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filtername</code></td>
<td>
<p>single character, the name of the wavelet to use for smoothing
when filter is TRUE. (default "haar") Passed to <code>link[waveslim]{wave.filter}</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>
<p>single numeric, the level to which to smooth. Passed to <code>link[waveslim]{wave.filter}</code> (default 8).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>changepoint</code></td>
<td>
<p>defines the change point analysis to use. UpDownDegrees performs the change point analysis on the variance of arm elevation and wrist rotation. 
TempFreq performs a change point on the variance in the temperature and frequency (Typically better for sleep behaviours).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty</code></td>
<td>
<p>single character, the penalty to use for changepoint detection. default ("SIC").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pen.value1</code></td>
<td>
<p>Value of the type 1 error required when penalty is "Asymptotic".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pen.value2</code></td>
<td>
<p>Default set as NULL and so equals pen.value1 if no input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intervalseconds</code></td>
<td>
<p>An integer number of seconds between 5 and 30 during which at most one changepoint may occur.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mininterval</code></td>
<td>
<p>single numeric that defines the smallest changepoint initially found. Passed to <code>cpt.var</code> as the variable minseglen</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samplefreq</code></td>
<td>
<p>The sampling frequency of the data, in hertz,
when calculating the step number. (default 100).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filterorder</code></td>
<td>
<p>The order of the filter applied with respect to the butter or cheby options. 
See <code>cheby1</code> or <code>butter</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boundaries</code></td>
<td>
<p>to pass to the filter in the step counting algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rp</code></td>
<td>
<p>the decibel level that the cheby filter takes. See <code>cheby1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.it</code></td>
<td>
<p>single logical, Creates a plot showing the zero crossings counted by the step counting algorithm#' @param Centre Centres the xz signal about 0 when set to True.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hysteresis</code></td>
<td>
<p>The hysteresis applied after zero crossing. (default 100mg)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stft_win</code></td>
<td>
<p>numeric for the window to calculate the frequency of an event using the <code>stft</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_changepoints</code></td>
<td>
<p>single logical, Creates a plot displaying the changepoint locations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_changepoints_outputfile</code></td>
<td>
<p>The name of the png file created that shows the change points on a positionals plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>single logical should additional progress reporting be printed at the console? (default TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments to be passed to <code>dataImport</code>,
<code>segmentation</code> and other functions with these functions.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>segmented data are returned
</p>


<h3>See Also</h3>

<p>The returned object can be interrogated with <code>head</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## testfile = file.path(system.file(package = "GENEAread"),
##                                  "binfile",
##                                  "TESTfile.bin")
## 
## segData &lt;- getGENEAsegments(testfile = testfile,
##                             outputdir = file.path(tempdir(), "GENEAclassification"),    
##                             changepoint = "UpDownDegrees",
##                             pen.value1 = 1,
##                             pen.value2 = 1)
## head(segData)
## list.files(file.path(tempdir(), "GENEAclassification"))
</code></pre>


</div>