<div class="container">

<table style="width: 100%;"><tr>
<td>lag_time</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate lag time</h2>

<h3>Description</h3>

<p>Lag time is calculated by projecting a tangent line at the point
of maximum (per-capita) derivative backwards to find the time when it
intersects with the minimum y-value
</p>


<h3>Usage</h3>

<pre><code class="language-R">lag_time(
  x = NULL,
  y = NULL,
  deriv = NULL,
  trans_y = "log",
  na.rm = TRUE,
  slope = NULL,
  x1 = NULL,
  y1 = NULL,
  y0 = NULL,
  warn_logtransform_warnings = TRUE,
  warn_logtransform_infinite = TRUE,
  warn_min_y_mismatch = TRUE,
  warn_multiple_maxderiv = TRUE,
  warn_one_lag = TRUE,
  warn_no_lag = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Vector of x values (typically time)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Vector of y values (typically density)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deriv</code></td>
<td>
<p>Vector of derivative values (typically per-capita derivative)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trans_y</code></td>
<td>
<p>One of <code>c("linear", "log")</code> specifying the
transformation of y-values.
</p>
<p><code>'log'</code> is the default, producing calculations of
lag time assuming a transition to exponential growth
</p>
<p><code>'linear'</code> is available for alternate uses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>a logical indicating whether missing values or values that
become <code>NA</code> or infinite during log-transformation should 
be removed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slope</code></td>
<td>
<p>Slope to project from x1,y1 to y0 (typically per-capita growth
rate). If not provided, will be calculated as <code>max(deriv)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x1</code></td>
<td>
<p>x value (typically time) to project slope from. If not provided,
will be calculated as <code>x[which.max(deriv)]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y1</code></td>
<td>
<p>y value (typically density) to project slope from. If not provided,
will be calculated as <code>y[which.max(deriv)]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y0</code></td>
<td>
<p>y value (typically density) to find intersection of slope from
x1, y1 with. If not provided, will be calculated as <code>min(y)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_logtransform_warnings</code></td>
<td>
<p>logical whether warning should be issued 
when log(y) produced warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_logtransform_infinite</code></td>
<td>
<p>logical whether warning should be issued 
when log(y) produced infinite values that will
be treated as <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_min_y_mismatch</code></td>
<td>
<p>logical whether warning should be issued when 
<code>min(y)</code> does not equal 
<code>min(y[!is.na(x)])</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_multiple_maxderiv</code></td>
<td>
<p>logical whether warning should be issued when 
there are multiple points in <code>deriv</code> that
are tied for the highest, and only the first
will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_one_lag</code></td>
<td>
<p>logical whether warning should be issued when 
some, but not all, inputs are vectorized, and
only one lag time value will be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_no_lag</code></td>
<td>
<p>logical whether warning should be issued when calculated
lag time is less than the minimum value of x</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For most typical uses, simply supply <code>x</code>, <code>y</code>, and <code>deriv</code>
(using the per-capita derivative and <code>trans_y = 'log'</code>).
</p>
<p>Advanced users may wish to use alternate values for the slope, origination
point, or minimum y-value. In that case, values can be supplied to
<code>slope</code>, <code>x1</code>, <code>y1</code>, and/or <code>y0</code>, which will override
the default calculations. If and only if all of <code>slope</code>, <code>x1</code>, 
<code>y1</code>, and <code>y0</code> are provided, <code>lag_time</code> is vectorized on
their inputs and will return a vector of lag time values.
</p>


<h3>Value</h3>

<p>Typically a scalar of the lag time in units of x. See Details for
cases when value will be a vector.
</p>


</div>