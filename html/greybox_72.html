<div class="container">

<table style="width: 100%;"><tr>
<td>lmDynamic</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Combine regressions based on point information criteria</h2>

<h3>Description</h3>

<p>Function combines parameters of linear regressions of the first variable
on all the other provided data using pAIC weights. This is an extension of the
lmCombine function, which relies upon the idea that the combination
weights might change over time.
</p>


<h3>Usage</h3>

<pre><code class="language-R">lmDynamic(data, ic = c("AICc", "AIC", "BIC", "BICc"), bruteforce = FALSE,
  silent = TRUE, formula = NULL, subset = NULL,
  distribution = c("dnorm", "dlaplace", "ds", "dgnorm", "dlogis", "dt",
  "dalaplace", "dlnorm", "dllaplace", "dls", "dlgnorm", "dbcnorm", "dfnorm",
  "dinvgauss", "dgamma", "dpois", "dnbinom", "dlogitnorm", "plogis", "pnorm"),
  parallel = FALSE, lowess = TRUE, f = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame containing dependent variable in the first column and
the others in the rest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ic</code></td>
<td>
<p>Information criterion to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bruteforce</code></td>
<td>
<p>If <code>TRUE</code>, then all the possible models are generated
and combined. Otherwise the best model is found and then models around that
one are produced and then combined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>If <code>FALSE</code>, then nothing is silent, everything is printed
out. <code>TRUE</code> means that nothing is produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>If provided, then the selection will be done from the listed
variables in the formula after all the necessary transformations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>an optional vector specifying a subset of observations to be
used in the fitting process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution</code></td>
<td>
<p>Distribution to pass to <code>alm()</code>. See alm
for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>If <code>TRUE</code>, then the model fitting is done in parallel.
WARNING! Packages <code>foreach</code> and either <code>doMC</code> (Linux and Mac only)
or <code>doParallel</code> are needed in order to run the function in parallel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lowess</code></td>
<td>
<p>Logical defining, whether LOWESS should be used to smooth the
dynamic weights. By default it is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>the smoother span for LOWESS. This gives the proportion of points in
the plot which influence the smooth at each value. Larger values give more
smoothness. If <code>NULL</code> the parameter will be optimised by minimising
<code>ic</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameters passed to <code>alm()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The algorithm uses alm() to fit different models and then combines the models
based on the selected point IC. The combination weights are calculated for each
observation based on the point IC and then smoothed via LOWESS if the respective
parameter (<code>lowess</code>) is set to TRUE.
</p>
<p>Some details and examples of application are also given in the vignette
"Greybox": <code>vignette("greybox","greybox")</code>
</p>


<h3>Value</h3>

<p>Function returns <code>model</code> - the final model of the class
"greyboxD", which includes time varying parameters and dynamic importance
of each variable. The list of variables:
</p>

<ul>
<li>
<p> coefficients - the mean (over time) parameters of the model,
</p>
</li>
<li>
<p> vcov - the combined covariance matrix of the model,
</p>
</li>
<li>
<p> fitted - the fitted values,
</p>
</li>
<li>
<p> residuals - the residuals of the model,
</p>
</li>
<li>
<p> distribution - the distribution used in the estimation,
</p>
</li>
<li>
<p> logLik - the mean (over time) log-likelihood of the model,
</p>
</li>
<li>
<p> IC - dynamic values of the information criterion (pIC),
</p>
</li>
<li>
<p> ICType - the type of information criterion used,
</p>
</li>
<li>
<p> df.residual - mean number of degrees of freedom of the residuals of
the model,
</p>
</li>
<li>
<p> df - mean number of degrees of freedom of the model,
</p>
</li>
<li>
<p> importance - dynamic importance of the parameters,
</p>
</li>
<li>
<p> call - call used in the function,
</p>
</li>
<li>
<p> rank - rank of the combined model,
</p>
</li>
<li>
<p> data - the data used in the model,
</p>
</li>
<li>
<p> mu - the location value of the distribution,
</p>
</li>
<li>
<p> scale - the scale parameter if alm() was used,
</p>
</li>
<li>
<p> coefficientsDynamic - table with parameters of the model, varying over
the time,
</p>
</li>
<li>
<p> df.residualDynamic - dynamic df.residual,
</p>
</li>
<li>
<p> dfDynamic - dynamic df,
</p>
</li>
<li>
<p> weights - the dynamic weights for each model under consideration,
</p>
</li>
<li>
<p> timeElapsed - the time elapsed for the estimation of the model.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Ivan Svetunkov, <a href="mailto:ivan@svetunkov.ru">ivan@svetunkov.ru</a>
</p>


<h3>References</h3>


<ul>
<li>
<p> Burnham Kenneth P. and Anderson David R. (2002). Model Selection
and Multimodel Inference. A Practical Information-Theoretic Approach.
Springer-Verlag New York. DOI: [10.1007/b97636](http://dx.doi.org/10.1007/b97636).
</p>
</li>
<li>
<p> McQuarrie, A. D. (1999). A small-sample correction for the Schwarz SIC model
selection criterion. Statistics &amp; Probability Letters, 44(1), 79â€“86.
[10.1016/S0167-7152(98)00294-6](https://doi.org/10.1016/S0167-7152(98)00294-6).
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>stepwise, lmCombine</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
### Simple example
xreg &lt;- cbind(rnorm(100,10,3),rnorm(100,50,5))
xreg &lt;- cbind(100+0.5*xreg[,1]-0.75*xreg[,2]+rnorm(100,0,3),xreg,rnorm(100,300,10))
colnames(xreg) &lt;- c("y","x1","x2","Noise")
inSample &lt;- xreg[1:80,]
outSample &lt;- xreg[-c(1:80),]
# Combine all the possible models
ourModel &lt;- lmDynamic(inSample,bruteforce=TRUE)
predict(ourModel,outSample)
plot(predict(ourModel,outSample))

</code></pre>


</div>