<div class="container">

<table style="width: 100%;"><tr>
<td>rows_add</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add one or more rows to a <strong>gt</strong> table</h2>

<h3>Description</h3>

<p>It's possible to add new rows to your table with <code>rows_add()</code> by supplying
the new row data through name-value pairs or two-sided formula expressions.
The new rows are added to the bottom of the table by default but can be added
internally by using either the <code>.before</code> or <code>.after</code> arguments. If entirely
empty rows need to be added, the <code>.n_empty</code> option provides a means to
specify the number of blank (i.e., all <code>NA</code>) rows to be inserted into the
table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rows_add(
  .data,
  ...,
  .list = list2(...),
  .before = NULL,
  .after = NULL,
  .n_empty = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><em>Cell data assignments</em>
</p>
<p><code style="white-space: pre;">⁠&lt;multiple expressions&gt;⁠</code> // (or, use <code>.list</code>)
</p>
<p>Expressions for the assignment of cell values to the new rows by column
name in <code>.data</code>. Name-value pairs, in the form of
<code style="white-space: pre;">⁠&lt;column&gt; = &lt;value vector&gt;⁠</code> will work, so long as the <code style="white-space: pre;">⁠&lt;column&gt;⁠</code> value
exists in the table. Two-sided formulas with column-resolving expressions
(e.g, <code style="white-space: pre;">⁠&lt;expr&gt; ~ &lt;value vector&gt;⁠</code>) can also be used, where the left-hand side
corresponds to selections of columns. Column names should be enclosed in
<code>c()</code> and select helpers like <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>,
<code>matches()</code>, and <code>everything()</code> can be used in the LHS. The length of the
longest vector in <code style="white-space: pre;">⁠&lt;value vector&gt;⁠</code> determines how many new rows will be added.
Single values in <code style="white-space: pre;">⁠&lt;value vector&gt;⁠</code> will be repeated down in cases where
there are multiple rows to be added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.list</code></td>
<td>
<p><em>Alternative to <code>...</code></em>
</p>
<p><code style="white-space: pre;">⁠&lt;list of multiple expressions&gt;⁠</code> // (or, use <code>...</code>)
</p>
<p>Allows for the use of a list as an input alternative to <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.before, .after</code></td>
<td>
<p><em>Row used as anchor</em>
</p>
<p><code style="white-space: pre;">⁠&lt;row-targeting expression&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>A single row-resolving expression or row index an be given to either
<code>.before</code> or <code>.after</code>. The row specifies where the new rows should be
positioned among the existing rows in the input data table. While select
helper functions such as <code>starts_with()</code> and <code>ends_with()</code> can be used for
row targeting, it's recommended that a single row name or index be used.
This is to ensure that exactly one row is provided to either of these
arguments (otherwise, the function will be stopped). If nothing is provided
for either argument then any new rows will be placed at the bottom of the
table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.n_empty</code></td>
<td>
<p><em>Number of empty rows to add</em>
</p>
<p><code>scalar&lt;numeric|integer&gt;(val&gt;=0)</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>An option to add empty rows in lieu of rows containing data that would
otherwise be supplied to <code>...</code> or <code>.list</code>. If the option is taken, provide
an integer value here.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>Targeting the row for insertion with <code>.before</code> or <code>.after</code>
</h3>

<p>The targeting of a row for insertion is done through the <code>.before</code> or
<code>.after</code> arguments (only one of these options should be be used). This can be
done in a variety of ways. If a stub is present, then we potentially have row
identifiers. This is the ideal method to use for establishing a row target.
We can use <strong>tidyselect</strong>-style expressions to target a row. It's also
possible to use row indices (e.g., <code>c(3, 5, 6)</code>) though these index values
must correspond to the row numbers of the input data (the indices won't
necessarily match those of rearranged rows if row groups are present). One
more type of expression is possible, an expression that takes column values
(can involve any of the available columns in the table) and returns a logical
vector.
</p>


<h3>Examples</h3>

<p>Let's make a simple <strong>gt</strong> table with the <code>exibble</code> dataset, using the
<code>row</code> column for labels in the stub. We'll add a single row to the bottom of
the table with <code>rows_add()</code>. With name-value pairs, it's possible to add
values for the new body cells that correspond to columns available in the
table. For any columns that are missed, the related body cells will receive
<code>NA</code> values.
</p>
<div class="sourceCode r"><pre>exibble |&gt;
  gt(rowname_col = "row") |&gt;
  rows_add(
    row = "row_9",
    num = 9.999E7,
    char = "ilama",
    fctr = "nine",
    group = "grp_b"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_1.png" alt="This image of a table was generated from the first code example in the `rows_add()` help file." style="width:100%;"><p>If you wanted to place a row somewhere in the middle of the table, we can use
either of the <code>.before</code> or <code>.after</code> arguments in <code>rows_add()</code>:
</p>
<div class="sourceCode r"><pre>exibble |&gt;
  gt(rowname_col = "row") |&gt;
  rows_add(
    row = "row_4.5",
    num = 9.923E3,
    char = "elderberry",
    fctr = "eighty",
    group = "grp_a",
    .after = "row_4"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_2.png" alt="This image of a table was generated from the second code example in the `rows_add()` help file." style="width:100%;"><p>Putting a row at the beginning requires the use of the <code>.before</code> argument. We
can use an index value for the row as in <code>.before = 1</code> for maximum easiness:
</p>
<div class="sourceCode r"><pre>exibble |&gt;
  gt(rowname_col = "row") |&gt;
  rows_add(
    row = "row_0",
    num = 0,
    char = "apple",
    fctr = "zero",
    group = "grp_a",
    .before = 1
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_3.png" alt="This image of a table was generated from the third code example in the `rows_add()` help file." style="width:100%;"><p>Again with <code>exibble</code>, we can create an example where we insert 'spacer'
rows. These are rows without any content and merely serve to add extra
vertical space to the table in specific locations. In this case, we'll have a
stub with row names and row groups (set up in the <code>gt()</code> call). The two rows
being added will occupy the bottom row of each group. The only data defined
for the two rows involves values for the <code>row</code> and <code>group</code> columns. It's
important that the data for <code>group</code> uses the group names already present in
the data (<code>"grp_a"</code> and <code>"grp_b"</code>). The corresponding values for <code>row</code> will
be <code>"row_a_end"</code> and <code>"row_b_end"</code>, these will be used later expressions for
targeting the rows. Here's the code needed to generate spacer rows at the end
of each row group:
</p>
<div class="sourceCode r"><pre>exibble |&gt;
  gt(rowname_col = "row", groupname_col = "group") |&gt;
  rows_add(
    row = c("row_a_end", "row_b_end"),
    group = c("grp_a", "grp_b")
  ) |&gt;
  tab_style(
    style = cell_borders(sides = "top", style = "hidden"),
    locations = list(
      cells_body(rows = ends_with("end")),
      cells_stub(rows = ends_with("end"))
    )
  ) |&gt;
  sub_missing(missing_text = "") |&gt;
  text_case_when(
    grepl("end", x) ~ "",
    .locations = cells_stub()
  ) |&gt;
  opt_vertical_padding(scale = 0.5)
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_4.png" alt="This image of a table was generated from the fourth code example in the `rows_add()` help file." style="width:100%;"><p>All missing values were substituted with an empty string (<code>""</code>), and that was
done by using <code>sub_missing()</code>. We removed the top border of the
new rows with a call to <code>tab_style()</code>, targeting those rows where the row
labels end with <code>"end"</code>. Finally, we get rid of the row labels with the use
of <code>text_case_when()</code>, using a similar strategy of targeting the
name of the row label.
</p>
<p>Another application is starting from nothing (really just the definition of
columns) and building up a table using several invocations of <code>rows_add()</code>.
This might be useful in interactive or programmatic applications. Here's an
example where two columns are defined with <code>dplyr::tibble()</code>
(and no rows are present initially); with two calls of <code>rows_add()</code>, two
separate rows are added.
</p>
<div class="sourceCode r"><pre>dplyr::tibble(
  time = lubridate::POSIXct(),
  event = character(0L)
) |&gt;
  gt() |&gt;
  rows_add(
    time = lubridate::ymd_hms("2022-01-23 12:36:10"),
    event = "start"
  ) |&gt;
  rows_add(
    time = lubridate::ymd_hms("2022-01-23 13:41:26"),
    event = "completed"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_5.png" alt="This image of a table was generated from the fifth code example in the `rows_add()` help file." style="width:100%;"><p>It's possible to use formula syntax in <code>rows_add()</code> to perform column
resolution along with attaching values for new rows. If we wanted to use an
equivalent value for multiple cells in a new row, a valid input would be in
the form of <code style="white-space: pre;">⁠&lt;expr&gt; ~ &lt;value vector&gt;⁠</code>. In the following example, we create a
simple table with six columns (the rendered <strong>gt</strong> table displays four
columns and a stub column since the <code>group</code> column is used for row group
labels). Let's add a single row where some of the cell values added
correspond to columns are resolved on the LHS of the formula expressions:
</p>
<div class="sourceCode r"><pre>dplyr::tibble(
  group = c("Group A", "Group B", "Group B"),
  id = c("WG-025360", "WG-025361", "WG-025362"),
  a = c(1, 6, 2),
  b = c(2, 6, 2),
  quantity_x = c(83.58, 282.71, 92.20),
  quantity_y = c(36.82, 282.71, 87.34)
) |&gt;
  gt(rowname_col = "id", groupname_col = "group") |&gt;
  rows_add(
    starts_with("gr") ~ "Group A",
    id = "WG-025363",
    c(a, b) ~ 5,
    starts_with("quantity") ~ 72.63
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_6.png" alt="This image of a table was generated from the sixth code example in the `rows_add()` help file." style="width:100%;"><p>We can see that using <code>starts_with("gr")</code> yields a successful match to the
<code>group</code> column with the tangible result being an addition of a row to the
<code>"Group A"</code> group (the added row is the second one in the rendered <strong>gt</strong>
table). Through the use of <code>c(a, b)</code>, it was possible to add the value <code>5</code> to
both the <code>a</code> and <code>b</code> columns. A similar approach was taken with adding the
<code>72.63</code> value to the <code>quantity_x</code> and <code>quantity_y</code> columns though we used the
<code>starts_with("quantity")</code> expression to get <strong>gt</strong> to resolve those two
columns.
</p>
<p>You can start with an empty table (i.e., no columns and no rows) and add one
or more rows to it. In the completely empty table scenario, where you would
use something like <code>dplyr::tibble()</code> or <code>data.frame()</code> with <code>gt()</code>, the first
<code>rows_add()</code> could have rows of arbitrary width. In other words, you get to
generate table columns (and rows) with a completely empty table via
<code>rows_add()</code>. Here's an example of that:
</p>
<div class="sourceCode r"><pre>gt(dplyr::tibble()) |&gt;
  rows_add(
    msrp = c(29.95, 49.95, 79.95),
    item = c("Klax", "Rez", "Ys"),
    type = c("A", "B", "X")
  ) |&gt;
  rows_add(
    msrp = 14.95,
    item = "D",
    type = "Z"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_7.png" alt="This image of a table was generated from the seventh code example in the `rows_add()` help file." style="width:100%;"><p>In the above, three columns and three rows were generated. The second usage
of <code>rows_add()</code> had to use of a subset of those columns (all three were used
to create a complete, new row).
</p>
<p>We can also start with a virtually empty table: one that has columns but no
actual rows. With this type of multi-column, zero-row table, one needs to use
a subset of the columns when generating new rows through <code>rows_add()</code>.
</p>
<div class="sourceCode r"><pre>dplyr::tibble(
  msrp = numeric(0L),
  item = character(0L),
  type = character(0L)
) |&gt;
  gt() |&gt;
  rows_add(
    msrp = c(29.95, 49.95, 79.95, 14.95),
    item = c("Klax", "Rez", "Ys", "D"),
    type = c("A", "B", "X", "Z")
  ) |&gt;
  cols_add(
    genre = c("puzzle", "action", "RPG", "adventure")
  ) |&gt;
  fmt_currency() |&gt;
  cols_move_to_end(columns = msrp)
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_rows_add_8.png" alt="This image of a table was generated from the eighth code example in the `rows_add()` help file." style="width:100%;"><h3>Function ID</h3>

<p>6-4
</p>


<h3>Function Introduced</h3>

<p><code>v0.10.0</code> (October 7, 2023)
</p>


<h3>See Also</h3>

<p>Other row addition/modification functions: 
<code>grand_summary_rows()</code>,
<code>row_group_order()</code>,
<code>summary_rows()</code>
</p>


</div>