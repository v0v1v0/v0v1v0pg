<div class="container">

<table style="width: 100%;"><tr>
<td>tab_footnote</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a table footnote</h2>

<h3>Description</h3>

<p><code>tab_footnote()</code> can make it a painless process to add a footnote to a
<strong>gt</strong> table. There are commonly two components to a footnote:
(1) a footnote mark that is attached to the targeted cell content, and (2)
the footnote text itself that is placed in the table's footer area. Each unit
of footnote text in the footer is linked to an element of text or otherwise
through the footnote mark. The footnote system in <strong>gt</strong> presents footnotes
in a way that matches the usual expectations, where:
</p>

<ol>
<li>
<p> footnote marks have a sequence, whether they are symbols, numbers, or
letters
</p>
</li>
<li>
<p> multiple footnotes can be applied to the same content (and marks are
always presented in an ordered fashion)
</p>
</li>
<li>
<p> footnote text in the footer is never exactly repeated, <strong>gt</strong> reuses
footnote marks where needed throughout the table
</p>
</li>
<li>
<p> footnote marks are ordered across the table in a consistent manner (left
to right, top to bottom)
</p>
</li>
</ol>
<p>Each call of <code>tab_footnote()</code> will either add a different footnote to the
footer or reuse existing footnote text therein. One or more cells outside of
the footer are targeted using the <code>cells_*()</code> helper
functions (e.g., <code>cells_body()</code>, <code>cells_column_labels()</code>, etc.). You can
choose to <em>not</em> attach a footnote mark by simply not specifying anything in
the <code>locations</code> argument.
</p>
<p>By default, <strong>gt</strong> will choose which side of the text to place the footnote
mark via the <code>placement = "auto"</code> option. You are, however, always free to
choose the placement of the footnote mark (either to the <code style="white-space: pre;">⁠"left⁠</code> or <code>"right"</code>
of the targeted cell content).
</p>


<h3>Usage</h3>

<pre><code class="language-R">tab_footnote(
  data,
  footnote,
  locations = NULL,
  placement = c("auto", "right", "left")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>footnote</code></td>
<td>
<p><em>Footnote text</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <strong>required</strong>
</p>
<p>The text to be used in the footnote. We can optionally use <code>md()</code> or <code>html()</code>
to style the text as Markdown or to retain HTML elements in the footnote text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locations</code></td>
<td>
<p><em>Locations to target</em>
</p>
<p><code>&lt;locations expressions&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>The cell or set of cells to be associated with the footnote. Supplying any
of the <code style="white-space: pre;">⁠cells_*()⁠</code> helper functions is a useful way to target the location
cells that are associated with the footnote text. These helper functions
are: <code>cells_title()</code>, <code>cells_stubhead()</code>, <code>cells_column_spanners()</code>,
<code>cells_column_labels()</code>, <code>cells_row_groups()</code>, <code>cells_stub()</code>,
<code>cells_body()</code>, <code>cells_summary()</code>, <code>cells_grand_summary()</code>,
<code>cells_stub_summary()</code>, and <code>cells_stub_grand_summary()</code>. Additionally, we
can enclose several <code style="white-space: pre;">⁠cells_*()⁠</code> calls within a <code>list()</code> if we wish to link
the footnote text to different types of locations (e.g., body cells, row
group labels, the table title, etc.).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>placement</code></td>
<td>
<p><em>Placement of the footnote mark</em>
</p>
<p><code style="white-space: pre;">⁠singl-kw:[auto|right|left]⁠</code> // <em>default:</em> <code>"auto"</code>
</p>
<p>Where to affix footnote marks to the table content. Two options for this
are <code style="white-space: pre;">⁠"left⁠</code> or <code>"right"</code>, where the placement is either to the absolute
left or right of the cell content. By default, however, this option is set
to <code>"auto"</code> whereby <strong>gt</strong> will choose a preferred left-or-right placement
depending on the alignment of the cell content.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>Formatting of footnote text and marks</h3>

<p>There are several options for controlling the formatting of the footnotes,
their marks, and related typesetting in the footer. All of these options are
available within <code>tab_options()</code> and a subset of these are exposed in their
own <code style="white-space: pre;">⁠opt_*()⁠</code> functions.
</p>


<h4>Choosing the footnote marks</h4>

<p>We can modify the set of footnote marks with
<code>tab_options(..., footnotes.marks)</code> or <code>opt_footnote_marks(..., )</code>. What that
argument needs is a vector that will represent the series of marks. The
series of footnote marks is recycled when its usage goes beyond the length of
the set. At each cycle, the marks are simply doubled, tripled, and so on
(e.g., <code>*</code> -&gt; <code style="white-space: pre;">⁠**⁠</code> -&gt; <code style="white-space: pre;">⁠***⁠</code>). The option exists for providing keywords for
certain types of footnote marks. The keywords are:
</p>

<ul>
<li> <p><code>"numbers"</code>: numeric marks, they begin from <code>1</code> and these marks are not
subject to recycling behavior (this is the default)
</p>
</li>
<li> <p><code>"letters"</code>: minuscule alphabetic marks, internally uses the <code>letters</code>
vector which contains 26 lowercase letters of the Roman alphabet
</p>
</li>
<li> <p><code>"LETTERS"</code>: majuscule alphabetic marks, using the <code>LETTERS</code> vector
which has 26 uppercase letters of the Roman alphabet
</p>
</li>
<li> <p><code>"standard"</code>: symbolic marks, four symbols in total
</p>
</li>
<li> <p><code>"extended"</code>: symbolic marks, extends the standard set by adding two
more symbols, making six
</p>
</li>
</ul>
<p>The symbolic marks are the: (1) Asterisk, (2) Dagger, (3) Double Dagger,
(4) Section Sign, (5) Double Vertical Line, and (6) Paragraph Sign; the
<code>"standard"</code> set has the first four, <code>"extended"</code> contains all.
</p>



<h4>Defining footnote typesetting specifications</h4>

<p>A footnote spec consists of a string containing control characters for
formatting. They are separately defined for footnote marks beside footnote
text in the table footer (the <code>'spec_ftr'</code>) and for marks beside the targeted
cell content (the <code>'spec_ref'</code>).
</p>
<p>Not every type of formatting makes sense for footnote marks so the
specification is purposefully constrained to the following:
</p>

<ul>
<li>
<p> as superscript text (with the <code>"^"</code> control character) or regular-sized
text residing on the baseline
</p>
</li>
<li>
<p> bold text (with <code>"b"</code>), italicized text (with <code>"i"</code>), or unstyled text
(don't use either of the <code>"b"</code> or <code>"i"</code> control characters)
</p>
</li>
<li>
<p> enclosure in parentheses (use <code>"("</code> / <code>")"</code>) or square brackets (with
<code>"["</code> / <code>"]"</code>)
</p>
</li>
<li>
<p> a period following the mark (using <code>"."</code>); this is most commonly used in
the table footer
</p>
</li>
</ul>
<p>With the aforementioned control characters we could, for instance, format
the footnote marks to be superscript text in bold type with <code>"^b"</code>. We might
want the marks in the footer to be regular-sized text in parentheses, so the
spec could be either <code>"()"</code> or <code>"(x)"</code> (you can optionally use <code>"x"</code> as a
helpful placeholder for the marks).
</p>
<p>These options can be set either in a <code>tab_options()</code> call (with the
<code>footnotes.spec_ref</code> and <code>footnotes.spec_ftr</code> arguments) or with
<code>opt_footnote_spec()</code> (using the <code>spec_ref</code> or <code>spec_ftr</code> arguments).
</p>



<h4>Additional typesetting options for footnote text residing in the footer</h4>

<p>Within <code>tab_options()</code> there are two arguments that control the typesetting
of footnotes. With <code>footnotes.multiline</code>, we have a setting that determines
whether each footnote will start on a new line, or, whether they are combined
into a single block of text. The default for this is <code>TRUE</code>, but, if <code>FALSE</code>
we can control the separator between consecutive footnotes with the
<code>footnotes.sep</code> argument. By default, this is set to a single space character
(<code>" "</code>).
</p>



<h3>Examples</h3>

<p>Using a subset of the <code>sza</code> dataset, let's create a new <strong>gt</strong> table. The
body cells in the <code>sza</code> column will receive background color fills according
to their data values (with <code>data_color()</code>). After that, the use of
<code>tab_footnote()</code> lets us add a footnote to the <code>sza</code> column label (explaining
what the color gradient signifies).
</p>
<div class="sourceCode r"><pre>sza |&gt;
  dplyr::filter(
    latitude == 20 &amp;
      month == "jan" &amp;
      !is.na(sza)
  ) |&gt;
  dplyr::select(-latitude, -month) |&gt;
  gt() |&gt;
  data_color(
    columns = sza,
    palette = c("white", "yellow", "navyblue"),
    domain = c(0, 90)
  ) |&gt;
  tab_footnote(
    footnote = "Color indicates the solar zenith angle.",
    locations = cells_column_labels(columns = sza)
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_footnote_1.png" alt="This image of a table was generated from the first code example in the `tab_footnote()` help file." style="width:100%;"><p>Of course, we can add more than one footnote to the table, but, we have to
use several calls of <code>tab_footnote()</code>. This variation of the <code>sza</code> table
has three footnotes: one on the <code>"TST"</code> column label and two on the <code>"SZA"</code>
column label (these were capitalized with <code>opt_all_caps()</code>). We will
ultimately have three calls of <code>tab_footnote()</code> and while the order of calls
usually doesn't matter, it does have a subtle effect here since two footnotes
are associated with the same text content (try reversing the second and third
calls and observe the effect in the footer).
</p>
<div class="sourceCode r"><pre>sza |&gt;
  dplyr::filter(
    latitude == 20 &amp;
      month == "jan" &amp;
      !is.na(sza)
  ) |&gt;
  dplyr::select(-latitude, -month) |&gt;
  gt() |&gt;
  opt_all_caps() |&gt;
  cols_align(align = "center") |&gt;
  cols_width(everything() ~ px(200)) |&gt;
  tab_footnote(
    footnote = md("TST stands for *True Solar Time*."),
    locations = cells_column_labels(columns = tst)
  ) |&gt;
  tab_footnote(
    footnote = md("SZA stands for *Solar Zenith Angle*."),
    locations = cells_column_labels(columns = sza)
  ) |&gt;
  tab_footnote(
    footnote = "Higher Values indicate sun closer to horizon.",
    locations = cells_column_labels(columns = sza)
  ) |&gt;
  tab_options(footnotes.multiline = FALSE)
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_footnote_2.png" alt="This image of a table was generated from the second code example in the `tab_footnote()` help file." style="width:100%;"><p>Text in the footer (both from footnotes and also from source notes) tends to
widen the table and, by extension, all the columns within it. We can limit
that by explicitly setting column width values, which is what was done above
with <code>cols_width()</code>. There can also be a correspondingly large amount of
vertical space taken up by the footer since footnotes will, by default, each
start on a new line. In the above example, we used
<code>tab_options(footnotes.multiline = FALSE)</code> to make it so that all footer text
is contained in a single block of text.
</p>
<p>Let's move on to another footnote-laden table, this one based on the
<code>towny</code> dataset. We have a header part, with a title and a subtitle. We
can choose which of these could be associated with a footnote and in this
case it is the <code>"subtitle"</code> (one of two options in the <code>cells_title()</code> helper
function). This table has a stub with row labels and some of those labels are
associated with a footnote. So long as row labels are unique, they can be
easily used as row identifiers in <code>cells_stub()</code>. The third footnote is
placed on the <code>"Density"</code> column label. Here, changing the order of the
<code>tab_footnote()</code> calls has no effect on the final table rendering.
</p>
<div class="sourceCode r"><pre>towny |&gt;
  dplyr::filter(csd_type == "city") |&gt;
  dplyr::arrange(desc(population_2021)) |&gt;
  dplyr::select(name, density_2021, population_2021) |&gt;
  dplyr::slice_head(n = 10) |&gt;
  gt(rowname_col = "name") |&gt;
  tab_header(
    title = md("The 10 Largest Municipalities in `towny`"),
    subtitle = "Population values taken from the 2021 census."
  ) |&gt;
  fmt_integer() |&gt;
  cols_label(
    density_2021 = "Density",
    population_2021 = "Population"
  ) |&gt;
  tab_footnote(
    footnote = "Part of the Greater Toronto Area.",
    locations = cells_stub(rows = c(
      "Toronto", "Mississauga", "Brampton", "Markham", "Vaughan"
    ))
  ) |&gt;
  tab_footnote(
    footnote = md("Density is in terms of persons per km^2^."),
    locations = cells_column_labels(columns = density_2021)
  ) |&gt;
  tab_footnote(
    footnote = "Census results made public on February 9, 2022.",
    locations = cells_title(groups = "subtitle")
  ) |&gt;
  tab_source_note(source_note = md(
    "Data taken from the `towny` dataset (in the **gt** package)."
  )) |&gt;
  opt_footnote_marks(marks = "letters")
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_footnote_3.png" alt="This image of a table was generated from the third code example in the `tab_footnote()` help file." style="width:100%;"><p>In the above table, we elected to change the footnote marks to letters
instead of the default numbers (done through <code>opt_footnote_marks()</code>). A
source note was also added; this was mainly to demonstrate that source notes
will be positioned beneath footnotes in the footer section.
</p>
<p>For our final example, let's make a relatively small table deriving from the
<code>sp500</code> dataset. The set of <code>tab_footnote()</code> calls used here (four of them)
have minor variations that allow for interesting expressions of footnotes.
Two of the footnotes target values in the body of the table (using the
<code>cells_body()</code> helper function to achieve this). On numeric values that
right-aligned, <strong>gt</strong> will opt to place the footnote on the left of the
content so as to not disrupt the alignment. However, the <code>placement</code> argument
can be used to force the positioning of the footnote mark after the content.
We can also opt to include footnotes that have no associated footnote marks
whatsoever. This is done by not providing anything to <code>locations</code>. These
'markless' footnotes will precede the other footnotes in the footer section.
</p>
<div class="sourceCode r"><pre>sp500 |&gt;
  dplyr::filter(date &gt;= "2015-01-05" &amp; date &lt;="2015-01-10") |&gt;
  dplyr::select(-c(adj_close, volume, high, low)) |&gt;
  dplyr::mutate(change = close - open) |&gt;
  dplyr::arrange(date) |&gt;
  gt() |&gt;
  tab_header(title = "S&amp;P 500") |&gt;
  fmt_date(date_style = "m_day_year") |&gt;
  fmt_currency() |&gt;
  cols_width(everything() ~ px(150)) |&gt;
  tab_footnote(
    footnote = "More red days than green in this period.",
    locations = cells_column_labels(columns = change)
  ) |&gt;
  tab_footnote(
    footnote = "Lowest opening value.",
    locations = cells_body(columns = open, rows = 3),
  ) |&gt;
  tab_footnote(
    footnote = "Devastating losses on this day.",
    locations = cells_body(columns = change, rows = 1),
    placement = "right"
  ) |&gt;
  tab_footnote(footnote = "All values in USD.") |&gt;
  opt_footnote_marks(marks = "LETTERS") |&gt;
  opt_footnote_spec(spec_ref = "i[x]", spec_ftr = "x.")
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_tab_footnote_4.png" alt="This image of a table was generated from the fourth code example in the `tab_footnote()` help file." style="width:100%;"><p>Aside from changing the footnote marks to consist of <code>"LETTERS"</code>, we've also
changed the way the marks are formatted. In our use of <code>opt_footnote_spec()</code>,
the <code>spec_ref</code> option governs the footnote marks across the table. Here, we
describe marks that are italicized and set between square brackets (with
<code>"i[x]"</code>). The <code>spec_ftr</code> argument is used for the footer representation of
the footnote marks. As described in the example with <code>"x."</code>, it is rendered
as a footnote mark followed by a period.
</p>


<h3>Function ID</h3>

<p>2-7
</p>


<h3>Function Introduced</h3>

<p><code>v0.2.0.5</code> (March 31, 2020)
</p>


<h3>See Also</h3>

<p>Other part creation/modification functions: 
<code>tab_caption()</code>,
<code>tab_header()</code>,
<code>tab_info()</code>,
<code>tab_options()</code>,
<code>tab_row_group()</code>,
<code>tab_source_note()</code>,
<code>tab_spanner()</code>,
<code>tab_spanner_delim()</code>,
<code>tab_stub_indent()</code>,
<code>tab_stubhead()</code>,
<code>tab_style()</code>,
<code>tab_style_body()</code>
</p>


</div>