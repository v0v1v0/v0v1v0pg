<div class="container">

<table style="width: 100%;"><tr>
<td>get_obs_dens</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate observed densities</h2>

<h3>Description</h3>

<p>'get_obs_dens()' takes a hyperframe and returns observed densities.
The output is used as propensity scores.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_obs_dens(hfr, dep_var, indep_var, ngrid = 100, window)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>hfr</code></td>
<td>
<p>hyperframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep_var</code></td>
<td>
<p>The name of the dependent variable.
Since we need to obtain the observed density of treatment events,
'dep_var' should be the name of the treatment variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indep_var</code></td>
<td>
<p>vector of names of independent variables (covariates)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ngrid</code></td>
<td>
<p>the number of grid cells that is used to generate observed densities.
By default = 100. Notice that as you increase 'ngrid', the process gets computationally demanding.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>owin object</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>'get_obs_dens()' assumes the poisson point process model and
calculates observed densities for each time period. It depends on 'spatstat.model::mppm()'.
Users should note that the coefficients in the output are not directly interpretable,
since they are the coefficients inside the exponential of the poisson model.
</p>


<h3>Value</h3>

<p>list of the following:
* 'indep_var': independent variables
* 'coef': coefficients
* 'intens_grid_cells': im object of observed densities for each time period
* 'estimated_counts': the number of events that is estimated by the poisson point process model for each time period
* 'sum_log_intens': the sum of log intensities for each time period
</p>


</div>