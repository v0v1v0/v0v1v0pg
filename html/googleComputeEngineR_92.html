<div class="container">

<table style="width: 100%;"><tr>
<td>gce_vm_create</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates an instance resource in the specified project using the data included in the request.</h2>

<h3>Description</h3>

<p>Creates an instance resource in the specified project using the data included in the request.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gce_vm_create(name, predefined_type = "f1-micro",
  image_project = "debian-cloud", image_family = "debian-8",
  cpus = NULL, memory = NULL, image = "", disk_source = NULL,
  network = "default", externalIP = NULL, canIpForward = NULL,
  description = NULL, metadata = NULL, scheduling = NULL,
  serviceAccounts = NULL, tags = NULL, minCpuPlatform = NULL,
  project = gce_get_global_project(), zone = gce_get_global_zone(),
  dry_run = FALSE, disk_size_gb = NULL, use_beta = FALSE,
  acceleratorCount = NULL, acceleratorType = "nvidia-tesla-p4")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the resource, provided by the client when initially creating the resource</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predefined_type</code></td>
<td>
<p>A predefined machine type from gce_list_machinetype</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>image_project</code></td>
<td>
<p>Project ID of where the image lies</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>image_family</code></td>
<td>
<p>Name of the image family to search for</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cpus</code></td>
<td>
<p>If not defining <code>predefined_type</code>, the number of CPUs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memory</code></td>
<td>
<p>If not defining <code>predefined_type</code>, amount of memory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>image</code></td>
<td>
<p>Name of the image resource to return</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disk_source</code></td>
<td>
<p>Specifies a valid URL to an existing Persistent Disk resource.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>network</code></td>
<td>
<p>The name of the network interface</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>externalIP</code></td>
<td>
<p>An external IP you have previously reserved, leave NULL to have one assigned or <code>"none"</code> for no external access.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>canIpForward</code></td>
<td>
<p>Allows this instance to send and receive packets with non-matching destination or source IPs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>An optional description of this resource</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>A named list of metadata key/value pairs assigned to this instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scheduling</code></td>
<td>
<p>Scheduling options for this instance, such as preemptible instances</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>serviceAccounts</code></td>
<td>
<p>A list of service accounts, with their specified scopes, authorized for this instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tags</code></td>
<td>
<p>A list of tags to apply to this instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minCpuPlatform</code></td>
<td>
<p>Specify a minimum CPU platform as per <a href="these%20Google%20docs">https://cloud.google.com/compute/docs/instances/specify-min-cpu-platform</a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project</code></td>
<td>
<p>Project ID for this request</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zone</code></td>
<td>
<p>The name of the zone for this request</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dry_run</code></td>
<td>
<p>whether to just create the request JSON</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disk_size_gb</code></td>
<td>
<p>If not NULL, override default size of the boot disk (size in GB)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_beta</code></td>
<td>
<p>If set to TRUE will use the beta version of the API. Should not be used for production purposes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acceleratorCount</code></td>
<td>
<p>Number of GPUs to add to instance.  If using this, you may want to instead use gce_vm_gpu which sets some defaults for GPU instances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acceleratorType</code></td>
<td>
<p>Name of GPU to add, see gce_list_gpus</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Authentication scopes used by this function are:
</p>

<ul>
<li>
<p> https://www.googleapis.com/auth/cloud-platform
</p>
</li>
<li>
<p> https://www.googleapis.com/auth/compute
</p>
</li>
</ul>
<p><code>cpus</code> must be in multiples of 2 up to 32
<code>memory</code> must be in multiples of 256
</p>
<p>One of <code>image</code> or <code>image_family</code> must be supplied
</p>
<p>To create an instance you need to specify:
</p>

<ul>
<li>
<p> Name
</p>
</li>
<li>
<p> Project [if not default]
</p>
</li>
<li>
<p> Zone [if not default]
</p>
</li>
<li>
<p> Machine type - either a predefined type or custom CPU and memory
</p>
</li>
<li>
<p> Network - usually default, specifies open ports etc.
</p>
</li>
<li>
<p> Image - a source image containing the operating system
</p>
</li>
</ul>
<p>You can add metadata to the server such as <code>startup-script</code> and <code>shutdown-script</code>.  Details available here: <a href="https://cloud.google.com/compute/docs/storing-retrieving-metadata">https://cloud.google.com/compute/docs/storing-retrieving-metadata</a>
</p>
<p>If you want to not have an external IP then modify the instance afterwards
</p>


<h3>Value</h3>

<p>A zone operation, or if the name already exists the VM object from gce_get_instance
</p>


<h3>Preemptible VMS</h3>

<p>You can set <a href="https://cloud.google.com/compute/docs/instances/create-start-preemptible-instance">preemptible</a> VMs by passing this in the <code>scheduling</code> arguments <code>scheduling = list(preemptible = TRUE)</code>
</p>
<p>This creates a VM that may be shut down prematurely by Google - you will need to sort out how to save state if that happens in a shutdown script etc.  However, these are much cheaper.
</p>


<h3>GPUs</h3>

<p>Some defaults for launching GPU enabled VMs are available at gce_vm_gpu
</p>
<p>You can add GPUs to your instance, but they must be present in the zone you have specified - use gce_list_gpus to see which are available. Refer to <a href="https://cloud.google.com/compute/docs/gpus/#introduction">this</a> link for a list of current GPUs per zone.
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/compute/docs/reference/latest/">Google Documentation</a>
</p>


</div>