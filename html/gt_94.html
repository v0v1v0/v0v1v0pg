<div class="container">

<table style="width: 100%;"><tr>
<td>ggplot_image</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Helper function for adding a ggplot</h2>

<h3>Description</h3>

<p>We can add a <strong>ggplot2</strong> plot inside of a table with the help of the
<code>ggplot_image()</code> function. The function provides a convenient way to generate
an HTML fragment with a <code>ggplot</code> object. Because this function is currently
HTML-based, it is only useful for HTML table output. To use this function
inside of data cells, it is recommended that <code>text_transform()</code> is used.
With that function, we can specify which data cells to target and then
include a call to <code>ggplot_image()</code> within the required user-defined function
(for the <code>fn</code> argument). If we want to include a plot in other places (e.g.,
in the header, within footnote text, etc.) we need to use <code>ggplot_image()</code>
within the <code>html()</code> helper function.
</p>
<p>By itself, the function creates an HTML image tag with an image URI embedded
within (a 100 dpi PNG). We can easily experiment with any <code>ggplot2</code> plot
object, and using it within <code style="white-space: pre;">⁠ggplot_image(plot_object = &lt;plot object&gt;⁠</code>
evaluates to:
</p>
<p><code style="white-space: pre;">⁠&lt;img src=&lt;data URI&gt; style=\"height:100px;\"&gt;⁠</code>
</p>
<p>where a height of <code style="white-space: pre;">⁠100px⁠</code> is a default height chosen to work well within the
heights of most table rows. There is the option to modify the aspect ratio of
the plot (the default <code>aspect_ratio</code> is <code>1.0</code>) and this is useful for
elongating any given plot to fit better within the table construct.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ggplot_image(plot_object, height = 100, aspect_ratio = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>plot_object</code></td>
<td>
<p><em>A ggplot plot object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;ggplot&gt;⁠</code> // <strong>required</strong>
</p>
<p>A <code>ggplot</code> plot object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p><em>Height of image</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;numeric|integer&gt;⁠</code> // <em>default:</em> <code>100</code>
</p>
<p>The absolute height of the output image in the table cell (in <code>"px"</code>
units). By default, this is set to <code>"100px"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aspect_ratio</code></td>
<td>
<p><em>The final aspect ratio of plot</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;numeric|integer&gt;⁠</code> // <em>default:</em> <code>1.0</code>
</p>
<p>This is the plot's final aspect ratio. Where the height of the plot is
fixed using the <code>height</code> argument, the <code>aspect_ratio</code> will either compress
(<code>aspect_ratio</code> &lt; <code>1.0</code>) or expand (<code>aspect_ratio</code> &gt; <code>1.0</code>) the plot
horizontally. The default value of <code>1.0</code> will neither compress nor expand
the plot.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A character object with an HTML fragment that can be placed inside of
a cell.
</p>


<h3>Examples</h3>

<p>Create a <strong>ggplot</strong> plot.
</p>
<div class="sourceCode r"><pre>library(ggplot2)

plot_object &lt;-
  ggplot(
    data = gtcars,
    aes(x = hp, y = trq, size = msrp)
  ) +
  geom_point(color = "blue") +
  theme(legend.position = "none")
</pre></div>
<p>Create a tibble that contains two cells (where one is a placeholder for an
image), then, create a <strong>gt</strong> table. Use the <code>text_transform()</code> function to
insert the plot using by calling <code>ggplot_object()</code> within the user- defined
function.
</p>
<div class="sourceCode r"><pre>dplyr::tibble(
  text = "Here is a ggplot:",
  ggplot = NA
) |&gt;
  gt() |&gt;
  text_transform(
    locations = cells_body(columns = ggplot),
    fn = function(x) {
      plot_object |&gt;
        ggplot_image(height = px(200))
    }
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_ggplot_image_1.png" alt="This image of a table was generated from the first code example in the `ggplot_image()` help file." style="width:100%;"><h3>Function ID</h3>

<p>9-3
</p>


<h3>Function Introduced</h3>

<p><code>v0.2.0.5</code> (March 31, 2020)
</p>


<h3>See Also</h3>

<p>Other image addition functions: 
<code>local_image()</code>,
<code>test_image()</code>,
<code>web_image()</code>
</p>


</div>