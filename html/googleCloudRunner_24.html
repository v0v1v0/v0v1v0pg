<div class="container">

<table style="width: 100%;"><tr>
<td>cr_buildstep_secret</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a buildstep for using Secret Manager</h2>

<h3>Description</h3>

<p>This is the preferred way to manage secrets for files, rather than
cr_buildstep_decrypt, as it stores the encrypted file in the cloud
rather than in your project workspace.  For single environment values, cr_build_yaml_secrets may be more suitable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cr_buildstep_secret(
  secret,
  decrypted,
  version = "latest",
  binary_mode = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>secret</code></td>
<td>
<p>The secret data name in Secret Manager</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decrypted</code></td>
<td>
<p>The name of the file the secret will be decrypted into</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>The version of the secret</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binary_mode</code></td>
<td>
<p>Should the file be treated in binary/raw format?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments sent to cr_buildstep_bash</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is for downloading encrypted files from Google Secret Manager.  You will need to add the
Secret Accessor Cloud IAM role to the Cloud Build service account to use it.
Once you have uploaded your secret file and named it, it is available for Cloud
Build to use.
</p>


<h3>See Also</h3>

<p>How to set up secrets using <a href="https://cloud.google.com/build/docs/securing-builds/use-secrets">Secret Manager</a>
</p>
<p>cr_build_yaml_secrets let you directly support environment arguments in the buildsteps
</p>
<p>Other Cloud Buildsteps: 
<code>cr_buildstep_bash()</code>,
<code>cr_buildstep_decrypt()</code>,
<code>cr_buildstep_df()</code>,
<code>cr_buildstep_docker()</code>,
<code>cr_buildstep_edit()</code>,
<code>cr_buildstep_extract()</code>,
<code>cr_buildstep_gcloud()</code>,
<code>cr_buildstep_gitsetup()</code>,
<code>cr_buildstep_mailgun()</code>,
<code>cr_buildstep_nginx_setup()</code>,
<code>cr_buildstep_packagetests()</code>,
<code>cr_buildstep_pkgdown()</code>,
<code>cr_buildstep_run()</code>,
<code>cr_buildstep_r()</code>,
<code>cr_buildstep_slack()</code>,
<code>cr_buildstep_targets()</code>,
<code>cr_buildstep()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">cr_buildstep_secret("my_secret", decrypted = "/workspace/secret.json")
</code></pre>


</div>