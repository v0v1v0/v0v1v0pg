<div class="container">

<table style="width: 100%;"><tr>
<td>sample_total_cm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample Total CM (Given Impression Count)</h2>

<h3>Description</h3>

<p>Adds 4 new nested columns to the input_df: 'beta_params_ctr',
'beta_params_conv','gamma_params_rev', 'gamma_params_cost'
and 'samples'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sample_total_cm(input_df, priors, n_samples = 50000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input_df</code></td>
<td>
<p>Dataframe containing option_name (str),
sum_conversions (dbl), sum_revenue (dbl), and sum_clicks (dbl).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>priors</code></td>
<td>
<p>Optional list of priors alpha0, beta0 for Beta,
k0, theta0 for Gamma Inverse Revenue, and k01, theta01 for
Gamma Cost (uses alternate priors so they can be different from Revenue).
Default <code class="reqn">Beta(1,1)</code> and <code class="reqn">Gamma(1, 250)</code> will be use otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_samples</code></td>
<td>
<p>Optional integer value. Defaults to 50,000 samples.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>'beta_params' and 'gamma_params' in each row should be a tibble of length 2
(<code class="reqn">\alpha</code> and <code class="reqn">\beta</code> params and <code class="reqn">k</code> and <code class="reqn">\theta</code> params).
'samples' in each row should be a tibble of length 'n_samples'.
</p>
<p>One assumption in this model is that sum_impressions is not stochastic.
This assumes that Clicks are stochastically generated from a set number
of Impressions. It does not require that the number of impressions are
equal on either side. Generally this assumption holds true in marketing
tests where traffic is split 50/50 and very little variance is observed
in the number of impressions on either side.
</p>
<p>See update_rules vignette for a mathematical representation.
</p>
<p style="text-align: center;"><code class="reqn">TotalCM = Impr * ExpectedCTR * (RevPerOrder * OrdersPerClick - ExpectedCPC)</code>
</p>



<h3>Value</h3>

<p>input_df with 5 new nested columns 'beta_params_conv',
'beta_params_ctr', 'gamma_params_rev','gamma_params_cost',
and 'samples'
</p>


</div>