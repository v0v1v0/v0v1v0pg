<div class="container">

<table style="width: 100%;"><tr>
<td>ggseqrplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Representative Sequence plot</h2>

<h3>Description</h3>

<p>Function for rendering representative sequence plots with
<code>ggplot2</code> (Wickham 2016) instead of base
R's <code>plot</code> function that is used by
<code>TraMineR::seqplot</code> (Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class="language-R">ggseqrplot(
  seqdata,
  diss,
  group = NULL,
  criterion = "density",
  coverage = 0.25,
  nrep = NULL,
  pradius = 0.1,
  dmax = NULL,
  border = FALSE,
  proportional = TRUE,
  weighted = TRUE,
  stats = TRUE,
  colored.stats = NULL,
  facet_ncol = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code>TraMineR::seqdef</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diss</code></td>
<td>
<p>pairwise dissimilarities between sequences in <code>seqdata</code> (see <code>TraMineR::seqdist</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criterion</code></td>
<td>
<p>the representativeness criterion for sorting the candidate list. One of <code>"freq"</code> (sequence
frequency), <code>"density"</code> (neighborhood density), <code>"mscore"</code> (mean state frequency), <code>"dist"</code>
(centrality) and <code>"prob"</code> (sequence likelihood). See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coverage</code></td>
<td>
<p>coverage threshold, i.e., minimum proportion of sequences that should have a representative in their
neighborhood (neighborhood radius is defined by <code>pradius</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrep</code></td>
<td>
<p>number of representative sequences. If <code>NULL</code> (default), the size of the representative set is
controlled by <code>coverage</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pradius</code></td>
<td>
<p>neighborhood
radius as a percentage of the maximum (theoretical)
distance <code>dmax</code>. Defaults to 0.1 (10%). Sequence <code class="reqn">y</code> is
redundant to sequence <code class="reqn">x</code> when it is in the neighborhood of <code class="reqn">x</code>, i.e., within a distance
<code>pradius*dmax</code> from <code class="reqn">x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dmax</code></td>
<td>
<p>maximum theoretical distance. The <code>dmax</code> value is used to derive the neighborhood radius as <code>pradius*dmax</code>. If <code>NULL</code>, the value of <code>dmax</code> is derived from the dissimilarity matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportional</code></td>
<td>
<p>if <code>TRUE</code> (default), the sequence heights are
displayed proportional to the number of represented sequences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weighted</code></td>
<td>
<p>Controls if weights (specified in <code>TraMineR::seqdef</code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stats</code></td>
<td>
<p>if <code>TRUE</code> (default), mean discrepancy in each subset
defined by all sequences attributed to one representative sequence and the
mean distance to this representative sequence are displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colored.stats</code></td>
<td>
<p>specifies if representatives in stats plot should be
color coded; only recommended if number of representatives is small;
if set to <code>NULL</code> (default) colors are used if n rep. &lt;= 10;
use <code>TRUE</code> or <code>FALSE</code> to change manually</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet_ncol</code></td>
<td>
<p>specifies the number of columns in the plot (relevant if !is.null(group))</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The representative sequence plot displays a set of distinct sequences as sequence index plot.
The set of representative sequences is extracted from the sequence data by an internal call of
<code>TraMineR::seqrep</code> according to the criteria listed in the
arguments section above.
</p>
<p>The extracted sequences are plotted by a call of <code>ggseqiplot</code> which uses
<code>ggplot2::geom_rect</code> to render the sequences. If <code>stats = TRUE</code> the
index plots are complemented by information on the "quality" of the representative sequences.
For further details on representative sequence plots see Gabadinho et al. (2011)
and the documentation of <code>TraMineR::plot.stslist.rep</code>,
<code>TraMineR::seqplot</code>, and <code>TraMineR::seqrep</code>.
</p>
<p>Note that <code>ggseqrplot</code> uses <code>patchwork</code> to combine the different components
of the plot. If you want to adjust the appearance of the composed plot, for instance by changing the
plot theme, you should consult the documentation material of <code>patchwork</code>.
</p>


<h3>Value</h3>

<p>A representative sequence plot using <code>ggplot</code>.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
“Analyzing and Visualizing State Sequences in R with TraMineR.”
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1–37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br><br> Gabadinho A, Ritschard G, Studer M, Müller NS (2011).
“Extracting and Rendering Representative Sequences.”
In Fred A, Dietz JLG, Liu K, Filipe J (eds.), <em>Knowledge Discovery, Knowlege Engineering and Knowledge Management</em>, volume 128, 94–106.
Springer, Berlin, Heidelberg.
<a href="https://doi.org/10.1007/978-3-642-19032-2_7">doi:10.1007/978-3-642-19032-2_7</a>.<br><br> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Use examples from TraMineR
library(TraMineR)
# Defining a sequence object with the data in columns 10 to 25
# (family status from age 15 to 30) in the biofam data set
data(biofam)
# Use sample of 300 cases
set.seed(123)
biofam &lt;- biofam[sample(nrow(biofam),150),]
biofam.lab &lt;- c("Parent", "Left", "Married", "Left+Marr",
"Child", "Left+Child", "Left+Marr+Child", "Divorced")
biofam.seq &lt;- seqdef(biofam, 10:25, labels=biofam.lab)

# Computing the distance matrix
biofam.dhd &lt;- seqdist(biofam.seq, method="DHD")

# Representative sequence  plot (using defaults)
# ... with TraMineR::seqplot
seqrplot(biofam.seq, diss = biofam.dhd)

# ... with ggseqrplot
ggseqrplot(biofam.seq, diss = biofam.dhd)
</code></pre>


</div>