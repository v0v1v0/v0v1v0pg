<div class="container">

<table style="width: 100%;"><tr>
<td>summary.gsDesign</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bound Summary and Z-transformations</h2>

<h3>Description</h3>

<p>A tabular summary of a group sequential design's bounds and their properties
are often useful. The 'vintage' <code>print.gsDesign()</code> function provides a
complete but minimally formatted summary of a group sequential design
derived by <code>gsDesign()</code>. A brief description of the overall design can
also be useful (<code>summary.gsDesign()</code>.  A tabular summary of boundary
characteristics oriented only towards LaTeX output is produced by
<code>xtable.gsSurv</code>. More flexibility is provided by
<code>gsBoundSummary()</code> which produces a tabular summary of a
user-specifiable set of package-provided boundary properties in a data
frame.  This can also be used to along with functions such as
<code>print.data.frame()</code>, <code>write.table()</code>,
<code>write.csv()</code>, <code>write.csv2()</code> or, from the RTF
package, <code>addTable.RTF()</code> (from the rtf package) to produce console or
R Markdown output or output to a variety of file types. <code>xprint()</code> is
provided for LaTeX output by setting default options for
<code>print.xtable</code> when producing tables summarizing design
bounds.
</p>
<p>Individual transformation of z-value test statistics for interim and final
analyses are obtained from <code>gsBValue()</code>, <code>gsDelta()</code>,
<code>gsHR()</code> and <code>gsCPz()</code> for B-values, approximate treatment effect
(see details), approximate hazard ratio and conditional power, respectively.
</p>
<p>The <code>print.gsDesign</code> function is intended to provide an easier output
to review than is available from a simple list of all the output components.
The <code>gsBoundSummary</code> function is intended to provide a summary of
boundary characteristics that is often useful for evaluating boundary
selection; this outputs an extension of the <code>data.frame</code> class that
sets up default printing without row names using
<code>print.gsBoundSummary</code>. <code>summary.gsDesign</code>, on the other hand,
provides a summary of the overall design at a higher level; this provides
characteristics not included in the <code>gsBoundSummary</code> summary and no
detail concerning interim analysis bounds.
</p>
<p>In brief, the computed descriptions of group sequential design bounds are as
follows: <code>Z:</code> Standardized normal test statistic at design bound.
</p>
<p><code>p (1-sided):</code> 1-sided p-value for <code>Z</code>. This will be computed as
the probability of a greater EXCEPT for lower bound when a 2-sided design is
being summarized.
</p>
<p><code>delta at bound:</code> Approximate value of the natural parameter at the
bound. The approximate standardized effect size at the bound is generally
computed as <code>Z/sqrt(n)</code>. Calling this <code>theta</code>, this is translated
to the <code>delta</code> using the values <code>delta0</code> and <code>delta1</code> from
the input <code>x</code> by the formula <code>delta0 +
(delta1-delta0)/theta1*theta</code> where <code>theta1</code> is the alternate
hypothesis value of the standardized parameter. Note that this value will be
exponentiated in the case of relative risks, hazard ratios or when the user
specifies <code>logdelta=TRUE</code>. In the case of hazard ratios, the value is
computed instead by <code>gsHR()</code> to be consistent with
<code>plot.gsDesign()</code>. Similarly, the value is computed by <code>gsRR()</code>
when the relative risk is the natural parameter.
</p>
<p><code>Spending: </code>Incremental error spending at each given analysis. For
asymmetric designs, futility bound will have beta-spending summarized.
Efficacy bound always has alpha-spending summarized.
</p>
<p><code>B-value: </code><code>sqrt(t)*Z</code> where <code>t</code> is the proportion of
information at the analysis divided by the final analysis planned
information. The expected value for B-values is directly proportional to
<code>t</code>.
</p>
<p><code>CP: </code>Conditional power under the estimated treatment difference
assuming the interim Z-statistic is at the study bound
</p>
<p><code>CP H1: </code>Conditional power under the alternate hypothesis treatment
effect assuming the interim test statistic is at the study bound.
</p>
<p><code>PP: </code>Predictive power assuming the interim test statistic is at the
study bound and the input prior distribution for the standardized effect
size. This is the conditional power averaged across the posterior
distribution for the treatment effect given the interim test statistic
value. <code>P{Cross if delta=xx}: </code>For each of the parameter values in
<code>x</code>, the probability of crossing either bound given that treatment
effect is computed. This value is cumulative for each bound. For example,
the probability of crossing the efficacy bound at or before the analysis of
interest.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'gsDesign'
summary(object, information = FALSE, timeunit = "months", ...)

## S3 method for class 'gsDesign'
print(x, ...)

gsBoundSummary(
  x,
  deltaname = NULL,
  logdelta = FALSE,
  Nname = NULL,
  digits = 4,
  ddigits = 2,
  tdigits = 0,
  timename = "Month",
  prior = normalGrid(mu = x$delta/2, sigma = 10/sqrt(x$n.fix)),
  POS = FALSE,
  ratio = NULL,
  exclude = c("B-value", "Spending", "CP", "CP H1", "PP"),
  r = 18,
  ...
)

xprint(
  x,
  include.rownames = FALSE,
  hline.after = c(-1, which(x$Value == x[1, ]$Value) - 1, nrow(x)),
  ...
)

## S3 method for class 'gsBoundSummary'
print(x, row.names = FALSE, digits = 4, ...)

gsBValue(z, i, x, ylab = "B-value", ...)

gsDelta(z, i, x, ylab = NULL, ...)

gsRR(z, i, x, ratio = 1, ylab = "Approximate risk ratio", ...)

gsHR(z, i, x, ratio = 1, ylab = "Approximate hazard ratio", ...)

gsCPz(z, i, x, theta = NULL, ylab = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An item of class <code>gsDesign</code> or <code>gsSurv</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>information</code></td>
<td>
<p>indicator of whether <code>n.I</code> in <code>object</code>
represents statistical information rather than sample size or event counts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeunit</code></td>
<td>
<p>Text string with time units used for time-to-event designs
created with <code>gsSurv()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>This allows many optional arguments that are standard when
calling <code>plot</code> for <code>gsBValue</code>, <code>gsDelta</code>, <code>gsHR</code>,
<code>gsRR</code> and <code>gsCPz</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An item of class <code>gsDesign</code> or <code>gsSurv</code>, except for
<code>print.gsBoundSummary()</code> where <code>x</code> is an object created by
<code>gsBoundSummary()</code> and <code>xprint()</code> which is used with <code>xtable</code>
(see examples)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltaname</code></td>
<td>
<p>Natural parameter name. If default <code>NULL</code> is used,
routine will default to <code>"HR"</code> when class is <code>gsSurv</code> or if
<code>nFixSurv</code> was input when creating <code>x</code> with <code>gsDesign()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logdelta</code></td>
<td>
<p>Indicates whether natural parameter is the natural logarithm
of the actual parameter. For example, the relative risk or odds-ratio would
be put on the logarithmic scale since the asymptotic behavior is 'more
normal' than a non-transformed value. As with <code>deltaname</code>, the default
will be changed to true if <code>x</code> has class <code>gsDesign</code> or if
<code>nFixSurv&gt;0</code> was input when <code>x</code> was created by <code>gsDesign()</code>;
that is, the natural parameter for a time-to-event endpoint will be on the
logarithmic scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nname</code></td>
<td>
<p>This will normally be changed to <code>"N"</code> or, if a
time-to-event endpoint is used, <code>"Events"</code>. Other immediate possibility
are <code>"Deaths"</code> or <code>"Information"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of digits past the decimal to be printed in the body of
the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ddigits</code></td>
<td>
<p>Number of digits past the decimal to be printed for the
natural parameter delta.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tdigits</code></td>
<td>
<p>Number of digits past the decimal point to be shown for
estimated timing of each analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timename</code></td>
<td>
<p>Text string indicating time unit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior</code></td>
<td>
<p>A prior distribution for the standardized effect size. Must be
of the format produced by <code>normalGrid()</code>, but can reflect an arbitrary
prior distribution. The default reflects a normal prior centered half-way
between the null and alternate hypothesis with the variance being equivalent
to the treatment effect estimate if 1 percent of the sample size for a fixed
design were sampled. The prior is intended to be relatively uninformative.
This input will only be applied if <code>POS=TRUE</code> is input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>POS</code></td>
<td>
<p>This is an indicator of whether or not probability of success
(POS) should be estimated at baseline or at each interim based on the prior
distribution input in <code>prior</code>. The prior probability of success before
the trial starts is the power of the study averaged over the prior
distribution for the standardized effect size. The POS after an interim
analysis assumes the interim test statistic is an unknown value between the
futility and efficacy bounds. Based on this, a posterior distribution for
the standardized parameter is computed and the conditional power of the
trial is averaged over this posterior distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>Sample size ratio assumed for experimental to control treatment
group sample sizes. This only matters when <code>x</code> for a binomial or
time-to-event endpoint where <code>gsRR</code> or <code>gsHR</code> are used for
approximating the treatment effect if a test statistic falls on a study
bound.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>A list of test statistics to be excluded from design boundary
summary produced; see details or examples for a list of all possible output
values. A value of <code>NULL</code> produces all available summaries.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>See <code>gsDesign</code>. This is an integer used to control the
degree of accuracy of group sequential calculations which will normally not
be changed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.rownames</code></td>
<td>
<p>indicator of whether or not to include row names in
output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hline.after</code></td>
<td>
<p>table lines after which horizontal separation lines
should be set; default is to put lines between each analysis as well as at
the top and bottom of the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.names</code></td>
<td>
<p>indicator of whether or not to print row names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>A vector of z-statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>A vector containing the analysis for each element in <code>z</code>; each
element must be in 1 to <code>x$k</code>, inclusive</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Used when functions are passed to <code>plot.gsDesign</code> to
establish default y-axis labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>A scalar value representing the standardized effect size used
for conditional power calculations; see <code>gsDesign</code>; if NULL,
conditional power is computed at the estimated interim treatment effect
based on <code>z</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>gsBValue()</code>, <code>gsDelta()</code>, <code>gsHR()</code> and
<code>gsCPz()</code> each returns a vector containing the B-values, approximate
treatment effect (see details), approximate hazard ratio and conditional
power, respectively, for each value specified by the interim test statistics
in <code>z</code> at interim analyses specified in <code>i</code>.
</p>
<p><code>summary</code> returns a text string summarizing the design at a high level.
This may be used with <code>gsBoundSummary</code> for a nicely formatted, concise
group sequential design description.
</p>
<p><code>gsBoundSummary</code> returns a table in a data frame providing a variety of
boundary characteristics. The tabular format makes formatting particularly
amenable to place in documents either through direct creation of readable by
Word (see the <code>rtf</code> package) or to a csv format readable by spreadsheet
software using <code>write.csv</code>.
</p>
<p><code>print.gsDesign</code> prints an overall summary a group sequential design.
While the design description is complete, the format is not as 'document
friendly' as <code>gsBoundSummary</code>.
</p>
<p><code>print.gsBoundSummary</code> is a simple extension of <code>print.data.frame</code>
intended for objects created with <code>gsBoundSummary</code>. The only extension
is to make the default to not print row names. This is probably 'not good R
style' but may be helpful for many lazy R programmers like the author.
</p>


<h3>Note</h3>

<p>The gsDesign technical manual is available at
<a href="https://keaven.github.io/gsd-tech-manual/">https://keaven.github.io/gsd-tech-manual/</a>.
</p>


<h3>Author(s)</h3>

<p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a>
</p>


<h3>References</h3>

<p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.
</p>


<h3>See Also</h3>

<p>gsDesign, plot.gsDesign,
<code>gsProbability</code>, <code>xtable.gsSurv</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)
# survival endpoint using gsSurv
# generally preferred over nSurv since time computations are shown
xgs &lt;- gsSurv(lambdaC = .2, hr = .5, eta = .1, T = 2, minfup = 1.5)
gsBoundSummary(xgs, timename = "Year", tdigits = 1)
summary(xgs)

# survival endpoint using nSurvival
# NOTE: generally recommend gsSurv above for this!
ss &lt;- nSurvival(
  lambda1 = .2, lambda2 = .1, eta = .1, Ts = 2, Tr = .5,
  sided = 1, alpha = .025, ratio = 2
)
xs &lt;- gsDesign(nFixSurv = ss$n, n.fix = ss$nEvents, delta1 = log(ss$lambda2 / ss$lambda1))
gsBoundSummary(xs, logdelta = TRUE, ratio = ss$ratio)
# generate some of the above summary statistics for the upper bound
z &lt;- xs$upper$bound
# B-values
gsBValue(z = z, i = 1:3, x = xs)
# hazard ratio
gsHR(z = z, i = 1:3, x = xs)
# conditional power at observed treatment effect
gsCPz(z = z[1:2], i = 1:2, x = xs)
# conditional power at H1 treatment effect
gsCPz(z = z[1:2], i = 1:2, x = xs, theta = xs$delta)

# information-based design
xinfo &lt;- gsDesign(delta = .3, delta1 = .3)
gsBoundSummary(xinfo, Nname = "Information")

# show all available boundary descriptions
gsBoundSummary(xinfo, Nname = "Information", exclude = NULL)

# add intermediate parameter value
xinfo &lt;- gsProbability(d = xinfo, theta = c(0, .15, .3))
class(xinfo) # note this is still as gsDesign class object
gsBoundSummary(xinfo, Nname = "Information")

# now look at a binomial endpoint; specify H0 treatment difference as p1-p2=.05
# now treatment effect at bound (say, thetahat) is transformed to
# xp$delta0 + xp$delta1*(thetahat-xp$delta0)/xp$delta
np &lt;- nBinomial(p1 = .15, p2 = .10)
xp &lt;- gsDesign(n.fix = np, endpoint = "Binomial", delta1 = .05)
summary(xp)
gsBoundSummary(xp, deltaname = "p[C]-p[E]")
# estimate treatment effect at lower bound
# by setting delta0=0 (default) and delta1 above in gsDesign
# treatment effect at bounds is scaled to these differences
# in this case, this is the difference in event rates
gsDelta(z = xp$lower$bound, i = 1:3, xp)

# binomial endpoint with risk ratio estimates
n.fix &lt;- nBinomial(p1 = .3, p2 = .15, scale = "RR")
xrr &lt;- gsDesign(k = 2, n.fix = n.fix, delta1 = log(.15 / .3), endpoint = "Binomial")
gsBoundSummary(xrr, deltaname = "RR", logdelta = TRUE)
gsRR(z = xp$lower$bound, i = 1:3, xrr)
plot(xrr, plottype = "RR")

# delta is odds-ratio: sample size slightly smaller than for relative risk or risk difference
n.fix &lt;- nBinomial(p1 = .3, p2 = .15, scale = "OR")
xOR &lt;- gsDesign(k = 2, n.fix = n.fix, delta1 = log(.15 / .3 / .85 * .7), endpoint = "Binomial")
gsBoundSummary(xOR, deltaname = "OR", logdelta = TRUE)

# for nice LaTeX table output, use xprint
xprint(xtable::xtable(gsBoundSummary(xOR, deltaname = "OR", logdelta = TRUE), 
                                          caption = "Table caption."))
</code></pre>


</div>