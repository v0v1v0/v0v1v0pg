<div class="container">

<table style="width: 100%;"><tr>
<td>layer_positions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Layer position adjustments</h2>

<h3>Description</h3>

<p>In ggplot2, a plot is constructed by adding layers to it. In addition to
geoms and stats, position adjustments are the
third required part of a layer. The 'position' part of a layer is responsible
for dodging, jittering and nudging groups of data to minimise their overlap,
or otherwise tweaking their positions.
</p>
<p>For example if you add <code>position = position_nudge(x = 1)</code> to a layer, you
can offset every x-position by 1. For many layers, the default position
adjustment is <code>position_identity()</code>, which performs no adjustment.
</p>


<h3>Specifying positions</h3>

<p>There are 4 ways in which the 'position' part of a layer can be specified.
</p>
<div class="sourceCode r"><pre>1. A layer can have default position adjustments
geom_jitter() # has `position = "jitter"`

2. It can be given to a layer as a string
geom_point(position = "jitter")

3. The position function can be used to pass extra arguments
geom_point(position = position_jitter(width = 1))

4. It can be given to `layer()` directly
layer(
  geom = "point",
  stat = "identity",
  position = "jitter"
)
</pre></div>
<p>These ways are not always equivalent. Some layers may not understand what
to do with a position adjustment, and require additional parameters passed
through the <code style="white-space: pre;">⁠position_*()⁠</code> function, or may not work correctly. For
example <code>position_dodge()</code> requires non-overlapping x intervals, whereas
<code>geom_point()</code> doesn't have dimensions to calculate intervals for. To give
positions as a string, take the function name, and remove the <code>position_</code>
prefix, such that <code>position_fill</code> becomes <code>"fill"</code>.
</p>


<h3>Pairing geoms with positions</h3>

<p>Some geoms work better with some positions than others. Below follows a brief
overview of geoms and position adjustments that work well together.
</p>


<h4>Identity</h4>

<p><code>position_identity()</code> can work with virtually any geom.
</p>



<h4>Dodging</h4>

<p><code>position_dodge()</code> pushes overlapping objects away from one another and
requires a <code>group</code> variable. <code>position_dodge2()</code> can work without group
variables and can handle variable widths. As a rule of thumb, layers where
groups occupy a range on the x-axis pair well with dodging. If layers have
no width, you may be required to specify it manually with
<code>position_dodge(width = ...)</code>. Some geoms that pair well with dodging are
<code>geom_bar()</code>, <code>geom_boxplot()</code>, <code>geom_linerange()</code>,
<code>geom_errorbar()</code> and <code>geom_text()</code>.
</p>



<h4>Jittering</h4>

<p><code>position_jitter()</code> adds a some random noise to every point,
which can help with overplotting. <code>position_jitterdodge()</code> does the same,
but also dodges the points. As a rule of thumb, jittering works best
when points have discrete x-positions. Jittering is most useful for
<code>geom_point()</code>, but can also be used in <code>geom_path()</code> for example.
</p>



<h4>Nudging</h4>

<p><code>position_nudge()</code> can add offsets to x- and y-positions. This can be
useful for discrete positions where you don't want to put an object
exactly in the middle. While most useful for <code>geom_text()</code>, it can be
used with virtually all geoms.
</p>



<h4>Stacking</h4>

<p><code>position_stack()</code> is useful for displaying data on top of one another. It
can be used for geoms that are usually anchored to the x-axis, for example
<code>geom_bar()</code>, <code>geom_area()</code> or <code>geom_histogram()</code>.
</p>



<h4>Filling</h4>

<p><code>position_fill()</code> can be used to give proportions at every x-position. Like
stacking, filling is most useful for geoms that are anchored to the x-axis,
like <code>geom_bar()</code>, <code>geom_area()</code> or <code>geom_histogram()</code>.
</p>



<h3>Under the hood</h3>

<p>Internally, positions are represented as <code>ggproto</code> classes that
occupy a slot in a layer. All these classes inherit from the parental
<code>Position</code> ggproto object that orchestrates how positions work. Briefly,
positions are given the opportunity to adjust the data of each facet panel.
For more information about extending positions, see the <strong>New positions</strong>
section of the
<a href="https://ggplot2-book.org/extensions.html#new-positions">online book</a>.
</p>


<h3>See Also</h3>

<p>For an overview of all position adjustments, see the
<a href="https://ggplot2.tidyverse.org/reference/index.html#position-adjustment">online reference</a>.
</p>
<p>Other layer documentation: 
<code>layer()</code>,
<code>layer_geoms</code>,
<code>layer_stats</code>
</p>


</div>