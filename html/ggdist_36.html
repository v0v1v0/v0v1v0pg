<div class="container">

<table style="width: 100%;"><tr>
<td>density_histogram</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Histogram density estimator</h2>

<h3>Description</h3>

<p>Histogram density estimator.
</p>
<p>Supports automatic partial function application.
</p>


<h3>Usage</h3>

<pre><code class="language-R">density_histogram(
  x,
  weights = NULL,
  breaks = "Scott",
  align = "none",
  outline_bars = FALSE,
  na.rm = FALSE,
  ...,
  range_only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric vector containing a sample to compute a density estimate for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>optional numeric vector of weights to apply to <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>Determines the breakpoints defining bins. Defaults to <code>"Scott"</code>.
Similar to (but not exactly the same as) the <code>breaks</code> argument to <code>graphics::hist()</code>.
One of:
</p>

<ul>
<li>
<p> A scalar (length-1) numeric giving the number of bins
</p>
</li>
<li>
<p> A vector numeric giving the breakpoints between histogram bins
</p>
</li>
<li>
<p> A function taking <code>x</code> and <code>weights</code> and returning either the
number of bins or a vector of breakpoints
</p>
</li>
<li>
<p> A string giving the suffix of a function that starts with
<code>"breaks_"</code>. <span class="pkg">ggdist</span> provides weighted implementations of the
<code>"Sturges"</code>, <code>"Scott"</code>, and <code>"FD"</code> break-finding algorithms from
<code>graphics::hist()</code>, as well as <code>breaks_fixed()</code> for manually setting
the bin width. See breaks.
</p>
</li>
</ul>
<p>For example, <code>breaks = "Sturges"</code> will use the <code>breaks_Sturges()</code> algorithm,
<code>breaks = 9</code> will create 9 bins, and <code>breaks = breaks_fixed(width = 1)</code> will
set the bin width to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>align</code></td>
<td>
<p>Determines how to align the breakpoints defining bins. Default
(<code>"none"</code>) performs no alignment. One of:
</p>

<ul>
<li>
<p> A scalar (length-1) numeric giving an offset that is subtracted from the breaks.
The offset must be between <code>0</code> and the bin width.
</p>
</li>
<li>
<p> A function taking a sorted vector of <code>breaks</code> (bin edges) and returning
an offset to subtract from the breaks.
</p>
</li>
<li>
<p> A string giving the suffix of a function that starts with
<code>"align_"</code> used to determine the alignment, such as <code>align_none()</code>,
<code>align_boundary()</code>, or <code>align_center()</code>.
</p>
</li>
</ul>
<p>For example, <code>align = "none"</code> will provide no alignment, <code>align = align_center(at = 0)</code>
will center a bin on <code>0</code>, and <code>align = align_boundary(at = 0)</code> will align a bin
edge on <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outline_bars</code></td>
<td>
<p>Should outlines in between the bars (i.e. density values of
0) be included?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Should missing (<code>NA</code>) values in <code>x</code> be removed?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments (ignored).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range_only</code></td>
<td>
<p>If <code>TRUE</code>, the range of the output of this density estimator
is computed and is returned in the <code style="white-space: pre;">⁠$x⁠</code> element of the result, and <code>c(NA, NA)</code>
is returned in <code style="white-space: pre;">⁠$y⁠</code>. This gives a faster way to determine the range of the output
than <code>density_XXX(n = 2)</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>"density"</code>, mimicking the output format of
<code>stats::density()</code>, with the following components:
</p>

<ul>
<li> <p><code>x</code>: The grid of points at which the density was estimated.
</p>
</li>
<li> <p><code>y</code>: The estimated density values.
</p>
</li>
<li> <p><code>bw</code>: The bandwidth.
</p>
</li>
<li> <p><code>n</code>: The sample size of the <code>x</code> input argument.
</p>
</li>
<li> <p><code>call</code>: The call used to produce the result, as a quoted expression.
</p>
</li>
<li> <p><code>data.name</code>: The deparsed name of the <code>x</code> input argument.
</p>
</li>
<li> <p><code>has.na</code>: Always <code>FALSE</code> (for compatibility).
</p>
</li>
<li> <p><code>cdf</code>: Values of the (possibly weighted) empirical cumulative distribution
function at <code>x</code>. See <code>weighted_ecdf()</code>.
</p>
</li>
</ul>
<p>This allows existing methods for density objects, like <code>print()</code> and <code>plot()</code>, to work if desired.
This output format (and in particular, the <code>x</code> and <code>y</code> components) is also
the format expected by the <code>density</code> argument of the <code>stat_slabinterval()</code>
and the <code>smooth_</code> family of functions.
</p>


<h3>See Also</h3>

<p>Other density estimators: 
<code>density_bounded()</code>,
<code>density_unbounded()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(distributional)
library(dplyr)
library(ggplot2)

# For compatibility with existing code, the return type of density_unbounded()
# is the same as stats::density(), ...
set.seed(123)
x = rbeta(5000, 1, 3)
d = density_histogram(x)
d

# ... thus, while designed for use with the `density` argument of
# stat_slabinterval(), output from density_histogram() can also be used with
# base::plot():
plot(d)

# here we'll use the same data as above with stat_slab():
data.frame(x) %&gt;%
  ggplot() +
  stat_slab(
    aes(xdist = dist), data = data.frame(dist = dist_beta(1, 3)),
    alpha = 0.25
  ) +
  stat_slab(aes(x), density = "histogram", fill = NA, color = "#d95f02", alpha = 0.5) +
  scale_thickness_shared() +
  theme_ggdist()
</code></pre>


</div>