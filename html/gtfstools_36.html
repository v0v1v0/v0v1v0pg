<div class="container">

<table style="width: 100%;"><tr>
<td>get_trip_speed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get trip speed</h2>

<h3>Description</h3>

<p>Returns the speed of each specified <code>trip_id</code>, based on the geometry created
from either the <code>shapes</code> or the <code>stop_times</code> file (or both).
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_trip_speed(
  gtfs,
  trip_id = NULL,
  file = "shapes",
  unit = "km/h",
  sort_sequence = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gtfs</code></td>
<td>
<p>A GTFS object, as created by <code>read_gtfs()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trip_id</code></td>
<td>
<p>A character vector including the <code>trip_id</code>s to have their
speeds calculated. If <code>NULL</code> (the default), the function calculates the
speed of every <code>trip_id</code> in the GTFS.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>The file from which geometries should be generated, either
<code>shapes</code> or <code>stop_times</code> (geometries are used to calculate the length of a
trip). Defaults to <code>shapes</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>A string representing the unit in which the speeds are desired.
Either <code>"km/h"</code> (the default) or <code>"m/s"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_sequence</code></td>
<td>
<p>Ultimately passed to <code>get_trip_length()</code>, a logical
specifying whether to sort shapes and timetables by <code>shape_pt_sequence</code> and
<code>stop_sequence</code>, respectively. Speeds calculated from trip trajectories
generated with unordered sequences do not correctly depict the actual trip
speeds. Defaults to <code>FALSE</code>, otherwise spec-compliant feeds, in which
shape/timetables points are already ordered by
<code>shape_pt_sequence</code>/<code>stop_sequence</code>, would be penalized through longer
processing times.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.table</code> containing the duration of each specified trip and the
file from which geometries were generated.
</p>


<h3>Details</h3>

<p>Please check <code>get_trip_geometry()</code> documentation to understand how geometry
generation differs depending on the chosen file.
</p>


<h3>See Also</h3>

<p><code>get_trip_geometry()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data_path &lt;- system.file("extdata/spo_gtfs.zip", package = "gtfstools")

gtfs &lt;- read_gtfs(data_path)

trip_speed &lt;- get_trip_speed(gtfs)
head(trip_speed)

trip_ids &lt;- c("CPTM L07-0", "2002-10-0")
trip_speed &lt;- get_trip_speed(gtfs, trip_ids)
trip_speed

trip_speed &lt;- get_trip_speed(
  gtfs,
  trip_ids,
  file = c("shapes", "stop_times")
)
trip_speed

trip_speed &lt;- get_trip_speed(gtfs, trip_ids, unit = "m/s")
trip_speed

</code></pre>


</div>