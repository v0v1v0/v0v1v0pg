<div class="container">

<table style="width: 100%;"><tr>
<td>position_lineartrans</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Linearly transform coordinates</h2>

<h3>Description</h3>

<p>Transforms coordinates in two dimensions in a linear manner for layers that
have an <code>x</code> and <code>y</code> parametrisation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">position_lineartrans(scale = c(1, 1), shear = c(0, 0), angle = 0, M = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>A <code>numeric</code> of length two describing relative units with
which to multiply the <code>x</code> and <code>y</code> coordinates respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shear</code></td>
<td>
<p>A <code>numeric</code> of length two giving relative units by which to
shear the output. The first number is for vertical shearing whereas the
second is for horizontal shearing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>A <code>numeric</code> noting an angle in degrees by which to rotate
the input clockwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>A <code>2</code> x <code>2</code> real <code>matrix</code>: the transformation matrix
for linear mapping. Overrides other arguments if provided.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Linear transformation matrices are <code>2</code> x <code>2</code> real
matrices. The '<code>scale</code>', '<code>shear</code>' and '<code>rotation</code>'
arguments are convenience arguments to construct a transformation matrix.
These operations occur in the order: scaling - shearing - rotating. To
apply the transformations in another order, build a custom '<code>M</code>'
argument.
</p>
<p>For some common transformations, you can find appropriate matrices for the
'<code>M</code>' argument below.
</p>


<h3>Value</h3>

<p>A <em>PositionLinearTrans</em> ggproto object.
</p>


<h3>Common transformations</h3>



<h4>Identity transformations</h4>

<p>An
identity transformation, or returning the original coordinates, can be
performed by using the following transformation matrix: <br><br><code style="white-space: pre;">⁠| 1 0 |⁠</code><br><code style="white-space: pre;">⁠| 0 1 |⁠</code><br><br> or <br><br><code>M &lt;- matrix(c(1, 0, 0, 1), 2)</code></p>



<h4>Scaling</h4>

<p>A scaling transformation multiplies the dimension of
an object by some amount. An example transformation matrix for scaling
everything by a factor 2: <br><br><code style="white-space: pre;">⁠| 2 0 |⁠</code><br><code style="white-space: pre;">⁠| 0 2 |⁠</code><br><br> or
<br><br><code>M &lt;- matrix(c(2, 0, 0, 2), 2)</code></p>
 

<h4>Squeezing</h4>

<p>Similar
to scaling, squeezing multiplies the dimensions by some amount that is
unequal for the <code>x</code> and <code>y</code> coordinates. For example, squeezing
<code>y</code> by half and expanding <code>x</code> by two: </p>

<table>
<tr>
<td style="text-align: center;"> |
</td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>2</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code>
</td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0.5</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(2, 0, 0, 0.5), 2)</code></p>
 

<h4>Reflection</h4>

<p>Mirroring the coordinates around one of
the axes. Reflecting around the x-axis: </p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;">
<code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: right;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: right;">
<code>-1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(1, 0, 0, -1), 2)</code>
<br><br> Reflecting around the y-axis: </p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: right;">
<code>-1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: right;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;">
<code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(-1, 0, 0, 1), 2)</code> </p>



<h4>Projection</h4>

<p>For projecting the coordinates on one of the axes,
while collapsing everything from the other axis. Projecting onto the
<code>y</code>-axis: </p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code>
</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or
<br><br><code>M &lt;- matrix(c(0, 0, 0, 1), 2)</code> <br><br> Projecting onto the
<code>x</code>-axis: </p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code>
</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or
<br><br><code>M &lt;- matrix(c(1, 0, 0, 0), 2)</code> </p>
 

<h4>Shearing</h4>

<p>Tilting
the coordinates horizontally or vertically. Shearing vertically by 10\
</p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> |
</td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0.1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(1, 0.1, 0, 1), 2)</code> <br><br> Shearing horizontally by 200\
</p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>2</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> |
</td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(1, 0, 2, 1), 2)</code> </p>
 

<h4>Rotation</h4>

<p>A rotation performs a
motion around a fixed point, typically the origin the coordinate system. To
rotate the coordinates by 90 degrees counter-clockwise: </p>

<table>
<tr>
<td style="text-align: center;"> |
</td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: right;"> <code>-1</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code>1</code>
</td>
<td style="text-align: center;"></td>
<td style="text-align: right;"> <code>0</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(0, 1, -1, 0), 2)</code> <br><br> For a rotation around any angle <code class="reqn">\theta</code> :
</p>

<table>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code class="reqn">cos\theta</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: right;"> <code class="reqn">-sin\theta</code>
</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"> | </td>
</tr>
<tr>
<td style="text-align: center;"> | </td>
<td style="text-align: center;"></td>
<td style="text-align: left;"> <code class="reqn">sin\theta</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: right;"> <code class="reqn">cos\theta</code> </td>
<td style="text-align: center;"></td>
<td style="text-align: center;">
| </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p> or <br><br><code>M &lt;- matrix(c(cos(theta), sin(theta), -sin(theta), cos(theta)), 2)</code> <br> with '<code>theta</code>' defined in radians. </p>



<h3>Examples</h3>

<pre><code class="language-R">df &lt;- data.frame(x = c(0, 1, 1, 0),
                 y = c(0, 0, 1, 1))
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(angle = 30))

# Custom transformation matrices
# Rotation
theta &lt;- -30 * pi / 180
rot &lt;- matrix(c(cos(theta), sin(theta), -sin(theta), cos(theta)), 2)
# Shear
shear &lt;- matrix(c(1, 0, 1, 1), 2)

# Shear and then rotate
M &lt;- rot %*% shear
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(M = M))
# Alternative shear and then rotate
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(shear = c(0, 1), angle = 30))

# Rotate and then shear
M &lt;- shear %*% rot
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(M = M))
</code></pre>


</div>