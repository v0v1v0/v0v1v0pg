<div class="container">

<table style="width: 100%;"><tr>
<td>eval_gradethis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Capture grades and errors</h2>

<h3>Description</h3>

<p>Capture the first <code>graded()</code> signal or error thrown when evaluating the
<code>expr</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">eval_gradethis(expr, on_error = NULL, on_graded = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>The expression or code block to evaluate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>on_error</code></td>
<td>
<p>A <code>withCallingHandlers()</code> handler for class <code>error</code> with
signature <code style="white-space: pre;">⁠function(error, this_env)⁠</code> that receives the error object and
calling environment of the error handler. <code>on_error</code> should use
<code>rlang::return_from()</code> using <code>this_env</code> to immediately return the value and
not continue evaluation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>on_graded</code></td>
<td>
<p>A <code>withCallingHandlers()</code> handler for class <code>graded</code> with
signature <code style="white-space: pre;">⁠function(grade, this_env)⁠</code> that receives the error object and
calling environment of the error handler. <code>on_graded</code> should use
<code>rlang::return_from()</code> using <code>this_env</code> to immediately return the value and
not continue evaluation.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># Passes with "message 1", short-circuiting evaluation
eval_gradethis({
  pass("message 1")
  pass("message 2")
  pass("message 3")
})

# Fails with message from fail()
eval_gradethis({
  fail("incorrect")
  pass("correct")
})

# Fails with message from expect_true()
eval_gradethis({
  testthat::expect_true(FALSE)
  pass("message 2")
  pass("message 3")
})

# Fails immediately with message "boom"
eval_gradethis({
  stop("boom")
  pass("message 2")
  pass("message 3")
})
</code></pre>


</div>