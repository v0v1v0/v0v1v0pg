<div class="container">

<table style="width: 100%;"><tr>
<td>gtfs_timetable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>gtfs_timetable</h2>

<h3>Description</h3>

<p>Convert GTFS data into format able to be used to calculate routes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gtfs_timetable(
  gtfs,
  day = NULL,
  date = NULL,
  route_pattern = NULL,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gtfs</code></td>
<td>
<p>A set of GTFS data returned from extract_gtfs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>day</code></td>
<td>
<p>Day of the week on which to calculate route, either as an
unambiguous string (so "tu" and "th" for Tuesday and Thursday), or a number
between 1 = Sunday and 7 = Saturday. If not given, the current day will be
used - unless the following 'date' parameter is give.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date</code></td>
<td>
<p>Some systems do not specify days of the week within their
'calendar' table; rather they provide full timetables for specified calendar
dates via a 'calendar_date' table. Providing a date here as a single 8-digit
number representing 'yyyymmdd' will filter the data to the specified date.
Also the 'calendar' is scanned for services that operate on the selected
date. Therefore also a merge of feeds that combine 'calendar' and
'calendar_dates' options is covered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>route_pattern</code></td>
<td>
<p>Using only those routes matching given pattern, for
example, "^U" for routes starting with "U" (as commonly used for underground
or subway routes. To negative the <code>route_pattern</code> – that is, to include all
routes except those matching the patter – prepend the value with "!"; for
example "!^U" with include all services except those starting with "U".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Set to <code>TRUE</code> to suppress screen messages (currently just
regarding timetable construction).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The input data with an addition items, <code>timetable</code>, <code>stations</code>, and
<code>trips</code>, containing data formatted for more efficient use with
gtfs_route (see Note).
</p>


<h3>Note</h3>

<p>This function is merely provided to speed up calls to the primary
function, gtfs_route. If the input data to that function do not
include a formatted <code>timetable</code>, it will be calculated anyway, but queries in
that case will generally take longer.
</p>


<h3>See Also</h3>

<p>Other extract: 
<code>berlin_gtfs_to_zip()</code>,
<code>extract_gtfs()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Examples must be run on single thread only:
nthr_dt &lt;- data.table::setDTthreads (1)
nthr_omp &lt;- Sys.getenv ("OMP_THREAD_LIMIT")
Sys.setenv ("OMP_THREAD_LIMIT" = 1L)

berlin_gtfs_to_zip () # Write sample feed from Berlin, Germany to tempdir
f &lt;- file.path (tempdir (), "vbb.zip") # name of feed
gtfs &lt;- extract_gtfs (f)
from &lt;- "Innsbrucker Platz" # U-bahn station, not "S"
to &lt;- "Alexanderplatz"
start_time &lt;- 12 * 3600 + 120 # 12:02

route &lt;- gtfs_route (gtfs, from = from, to = to, start_time = start_time)

# Specify day of week
route &lt;- gtfs_route (
    gtfs,
    from = from,
    to = to,
    start_time = start_time,
    day = "Sunday"
)

# specify travel by "U" = underground only
route &lt;- gtfs_route (
    gtfs,
    from = from,
    to = to,
    start_time = start_time,
    day = "Sunday",
    route_pattern = "^U"
)
# specify travel by "S" = street-level only (not underground)
route &lt;- gtfs_route (
    gtfs,
    from = from,
    to = to,
    start_time = start_time,
    day = "Sunday",
    route_pattern = "^S"
)

# Route queries are generally faster if the GTFS data are pre-processed with
# `gtfs_timetable()`:
gt &lt;- gtfs_timetable (gtfs, day = "Sunday", route_pattern = "^S")
route &lt;- gtfs_route (gt, from = from, to = to, start_time = start_time)

data.table::setDTthreads (nthr_dt)
Sys.setenv ("OMP_THREAD_LIMIT" = nthr_omp)
</code></pre>


</div>