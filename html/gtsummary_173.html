<div class="container">

<table style="width: 100%;"><tr>
<td>proportion_summary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarize a proportion</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
This helper, to be used with <code>tbl_custom_summary()</code>, creates a function
computing a proportion and its confidence interval.
</p>


<h3>Usage</h3>

<pre><code class="language-R">proportion_summary(
  variable,
  value,
  weights = NULL,
  na.rm = TRUE,
  conf.level = 0.95,
  method = c("wilson", "wilson.no.correct", "wald", "wald.no.correct", "exact",
    "agresti.coull", "jeffreys")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>(<code>string</code>)<br>
String indicating the name of the variable from which the proportion will be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>(<code>scalar</code>)<br>
Value (or list of values) of <code>variable</code> to be taken into account in the numerator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>(<code>string</code>)<br>
Optional string indicating the name of a frequency weighting variable.
If <code>NULL</code>, all observations will be assumed to have a weight equal to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>(scalar <code>logical</code>)<br>
Should missing values be removed before computing the proportion? (default is <code>TRUE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>(scalar <code>numeric</code>)<br>
Confidence level for the returned confidence interval.
Must be strictly greater than 0 and less than 1. Default to 0.95, which
corresponds to a 95 percent confidence interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>(<code>string</code>)<br>
Confidence interval method. Must be one of
<code>c("wilson", "wilson.no.correct", "wald", "wald.no.correct", "exact", "agresti.coull", "jeffreys")</code>.
See <code>add_ci()</code> for details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Computed statistics:
</p>

<ul>
<li> <p><code>{n}</code> numerator, number of observations equal to <code>values</code>
</p>
</li>
<li> <p><code>{N}</code> denominator, number of observations
</p>
</li>
<li> <p><code>{prop}</code> proportion, i.e. <code>n/N</code>
</p>
</li>
<li> <p><code>{conf.low}</code> lower confidence interval
</p>
</li>
<li> <p><code>{conf.high}</code> upper confidence interval
</p>
</li>
</ul>
<p>Methods <code>c("wilson", "wilson.no.correct")</code> are calculated with
<code>stats::prop.test()</code> (with <code>correct = c(TRUE, FALSE)</code>). The default method,
<code>"wilson"</code>, includes the Yates continuity correction.
Methods <code>c("exact", "asymptotic")</code> are calculated with <code>Hmisc::binconf()</code>
and the corresponding method.
</p>


<h3>Author(s)</h3>

<p>Joseph Larmarange
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example 1 ----------------------------------
Titanic |&gt;
  as.data.frame() |&gt;
  tbl_custom_summary(
    include = c("Age", "Class"),
    by = "Sex",
    stat_fns = ~ proportion_summary("Survived", "Yes", weights = "Freq"),
    statistic = ~ "{prop}% ({n}/{N}) [{conf.low}-{conf.high}]",
    digits = ~ list(
      prop = label_style_percent(digits = 1),
      n = 0,
      N = 0,
      conf.low = label_style_percent(),
      conf.high = label_style_percent()
    ),
    overall_row = TRUE,
    overall_row_last = TRUE
  ) |&gt;
  bold_labels() |&gt;
  modify_footnote(all_stat_cols() ~ "Proportion (%) of survivors (n/N) [95% CI]")
</code></pre>


</div>