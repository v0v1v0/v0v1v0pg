<div class="container">

<table style="width: 100%;"><tr>
<td>atlas_occurrences</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collect a set of occurrences</h2>

<h3>Description</h3>

<p>The most common form of data stored by living atlases are observations of
individual life forms, known as 'occurrences'. This function allows the
user to search for occurrence records that match their specific criteria,
and return them as a <code>tibble</code> for analysis. Optionally,
the user can also request a DOI for a given download to facilitate citation
and re-use of specific data resources.
</p>


<h3>Usage</h3>

<pre><code class="language-R">atlas_occurrences(
  request = NULL,
  identify = NULL,
  filter = NULL,
  geolocate = NULL,
  data_profile = NULL,
  select = NULL,
  mint_doi = FALSE,
  doi = NULL,
  file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>request</code></td>
<td>
<p>optional <code>data_request</code> object: generated by a call to
<code>galah_call()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>identify</code></td>
<td>
<p><code>data.frame</code>: generated by a call to
<code>galah_identify()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p><code>data.frame</code>: generated by a call to
<code>galah_filter()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geolocate</code></td>
<td>
<p><code>string</code>: generated by a call to
<code>galah_geolocate()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_profile</code></td>
<td>
<p><code>string</code>: generated by a call to
<code>galah_apply_profile()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p><code>data.frame</code>: generated by a call to
<code>galah_select()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mint_doi</code></td>
<td>
<p><code>logical</code>: by default no DOI will be generated. Set to
<code>TRUE</code> if you intend to use the data in a publication or similar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doi</code></td>
<td>
<p><code>string</code>: (optional) DOI to download. If provided overrides
all other arguments. Only available for the ALA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p><code>string</code>: (Optional) file name. If not given, will be set to
<code>data</code> with date and time added. The file path (directory) is always given by
<code>galah_config()$package$directory</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that unless care is taken, some queries can be particularly large.
While most cases this will simply take a long time to process, if the number
of requested records is &gt;50 million, the call will not return any data. Users
can test whether this threshold will be reached by first calling
<code>atlas_counts()</code> using the same arguments that they intend to pass to
<code>atlas_occurrences()</code>. It may also be beneficial when requesting a large
number of records to show a progress bar by setting <code>verbose = TRUE</code> in
<code>galah_config()</code>, or to use <code>compute()</code> to run the call before collecting
it later with <code>collect()</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>tbl_df</code> and <code>data.frame</code> (aka a tibble) of
occurrences, containing columns as specified by <code>galah_select()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Download occurrence records for a specific taxon
galah_config(email = "your_email_here")
galah_call() |&gt;
  galah_identify("Reptilia") |&gt;
  atlas_occurrences()

# Download occurrence records in a year range
galah_call() |&gt;
  galah_identify("Litoria") |&gt;
  galah_filter(year &gt;= 2010 &amp; year &lt;= 2020) |&gt;
  atlas_occurrences()
  
# Or identically with alternative syntax
request_data() |&gt;
  identify("Litoria") |&gt;
  filter(year &gt;= 2010 &amp; year &lt;= 2020) |&gt;
  collect()
  
# Download occurrences records in a WKT-specified area
polygon &lt;- "POLYGON((146.24960 -34.05930,
                     146.37045 -34.05930,
                     146.37045 -34.152549,
                     146.24960 -34.15254,
                     146.24960 -34.05930))"
galah_call() |&gt; 
  galah_identify("Reptilia") |&gt;
  galah_filter(year &gt;= 2010, year &lt;= 2020) |&gt;
  galah_geolocate(polygon) |&gt;
  atlas_occurrences()
  

## End(Not run)
</code></pre>


</div>