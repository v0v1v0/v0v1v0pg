<div class="container">

<table style="width: 100%;"><tr>
<td>gs_design_combo</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Group sequential design using MaxCombo test under non-proportional hazards</h2>

<h3>Description</h3>

<p>Group sequential design using MaxCombo test under non-proportional hazards
</p>


<h3>Usage</h3>

<pre><code class="language-R">gs_design_combo(
  enroll_rate = define_enroll_rate(duration = 12, rate = 500/12),
  fail_rate = define_fail_rate(duration = c(4, 100), fail_rate = log(2)/15, hr = c(1,
    0.6), dropout_rate = 0.001),
  fh_test = rbind(data.frame(rho = 0, gamma = 0, tau = -1, test = 1, analysis = 1:3,
    analysis_time = c(12, 24, 36)), data.frame(rho = c(0, 0.5), gamma = 0.5, tau = -1,
    test = 2:3, analysis = 3, analysis_time = 36)),
  ratio = 1,
  alpha = 0.025,
  beta = 0.2,
  binding = FALSE,
  upper = gs_b,
  upar = c(3, 2, 1),
  lower = gs_b,
  lpar = c(-1, 0, 1),
  algorithm = mvtnorm::GenzBretz(maxpts = 1e+05, abseps = 1e-05),
  n_upper_bound = 1000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>enroll_rate</code></td>
<td>
<p>Enrollment rates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fail_rate</code></td>
<td>
<p>Failure and dropout rates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fh_test</code></td>
<td>
<p>A data frame to summarize the test in each analysis.
See examples for its data structure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>Experimental:Control randomization ratio (not yet implemented).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>One-sided Type I error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>Type II error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binding</code></td>
<td>
<p>Indicator of whether futility bound is binding;
default of <code>FALSE</code> is recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper</code></td>
<td>
<p>Function to compute upper bound.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upar</code></td>
<td>
<p>Parameters passed to <code>upper</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower</code></td>
<td>
<p>Function to compute lower bound.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpar</code></td>
<td>
<p>Parameters passed to <code>lower</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>algorithm</code></td>
<td>
<p> an object of class <code>GenzBretz</code>,
<code>Miwa</code> or <code>TVPACK</code>
specifying both the algorithm to be used as well as
the associated hyper parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_upper_bound</code></td>
<td>
<p>A numeric value of upper limit of sample size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed to mvtnorm::pmvnorm.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with input parameters, enrollment rate, analysis, and bound.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># The example is slow to run
library(dplyr)
library(mvtnorm)
library(gsDesign)

enroll_rate &lt;- define_enroll_rate(
  duration = 12,
  rate = 500 / 12
)

fail_rate &lt;- define_fail_rate(
  duration = c(4, 100),
  fail_rate = log(2) / 15, # median survival 15 month
  hr = c(1, .6),
  dropout_rate = 0.001
)

fh_test &lt;- rbind(
  data.frame(
    rho = 0, gamma = 0, tau = -1,
    test = 1, analysis = 1:3, analysis_time = c(12, 24, 36)
  ),
  data.frame(
    rho = c(0, 0.5), gamma = 0.5, tau = -1,
    test = 2:3, analysis = 3, analysis_time = 36
  )
)

x &lt;- gsSurv(
  k = 3,
  test.type = 4,
  alpha = 0.025,
  beta = 0.2,
  astar = 0,
  timing = 1,
  sfu = sfLDOF,
  sfupar = 0,
  sfl = sfLDOF,
  sflpar = 0,
  lambdaC = 0.1,
  hr = 0.6,
  hr0 = 1,
  eta = 0.01,
  gamma = 10,
  R = 12,
  S = NULL,
  T = 36,
  minfup = 24,
  ratio = 1
)

# Example 1 ----
# User-defined boundary

gs_design_combo(
  enroll_rate,
  fail_rate,
  fh_test,
  alpha = 0.025, beta = 0.2,
  ratio = 1,
  binding = FALSE,
  upar = x$upper$bound,
  lpar = x$lower$bound
)

# Example 2 ----

# Boundary derived by spending function
gs_design_combo(
  enroll_rate,
  fail_rate,
  fh_test,
  alpha = 0.025,
  beta = 0.2,
  ratio = 1,
  binding = FALSE,
  upper = gs_spending_combo,
  upar = list(sf = gsDesign::sfLDOF, total_spend = 0.025), # alpha spending
  lower = gs_spending_combo,
  lpar = list(sf = gsDesign::sfLDOF, total_spend = 0.2), # beta spending
)

</code></pre>


</div>