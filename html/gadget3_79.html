<div class="container">

<table style="width: 100%;"><tr>
<td>formula_utils</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 formula helpers</h2>

<h3>Description</h3>

<p>Tools to create R formulas
</p>


<h3>Usage</h3>

<pre><code class="language-R">g3_formula(code, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>

<p>Unevaluated code to be turned into a formula
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Named items to add to the formula's environment,
or a single list / environment to use.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When using <code>~</code>, the local environment is attached to the code.
This can leak unwanted variables into a model. This allows you to avoid
the problem without resorting to local.
</p>


<h3>Value</h3>

<p>A formula object, with environment created from <var>...</var>.
Can then be used anywhere in gadget3 that accepts a formula.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# g3_formula is identical to defining a formula within local():
stopifnot(all.equal(
    g3_formula(x + 1, z = 44),
    local({ z = 44; ~x + 1 })
    ))

# If the code is destined for CRAN, you need to quote() to avoid check errors:
stopifnot(all.equal(
    g3_formula(quote( x + 1 ), z = 44),
    local({ z = 44; ~x + 1 })
    ))
</code></pre>


</div>