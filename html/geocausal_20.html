<div class="container">

<table style="width: 100%;"><tr>
<td>get_weighted_surf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate average weighted surfaces</h2>

<h3>Description</h3>

<p>A function that returns averaged weighted surfaces (both IPW and Hajek) along with weights
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_weighted_surf(
  obs_dens,
  cf_dens,
  mediation = FALSE,
  cate = FALSE,
  obs_med_log_sum_dens,
  cf_med_log_sum_dens,
  treatment_data,
  smoothed_outcome,
  lag,
  entire_window,
  time_after,
  truncation_level = truncation_level
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obs_dens</code></td>
<td>
<p>observed density</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cf_dens</code></td>
<td>
<p>counterfactual density</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediation</code></td>
<td>
<p>whether to perform causal mediation analysis. By default, FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cate</code></td>
<td>
<p>whether to perform the heterogeneity analysis. By default, FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs_med_log_sum_dens</code></td>
<td>
<p>sum of log densities of mediators for the observed (if 'mediation = TRUE')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cf_med_log_sum_dens</code></td>
<td>
<p>sum of log densities of mediators for counterfactual (if 'mediation = TRUE')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_data</code></td>
<td>
<p>column of a hyperframe that summarizes treatment data. In the form of 'hyperframe$column'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothed_outcome</code></td>
<td>
<p>column of a hyperframe that summarizes the smoothed outcome data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>integer that specifies lags to calculate causal estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entire_window</code></td>
<td>
<p>owin object (the entire region of interest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_after</code></td>
<td>
<p>whether to include one unit time difference between treatment and outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncation_level</code></td>
<td>
<p>the level at which the weights are truncated (see 'get_estimates()')</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>'get_weighted_surf()' is an internal function to 'get_estimates()' function.
If 'time_after' is TRUE, then this function uses treatment data and weights from lag to nrow(data)-1, and
outcome data from lag+1 to nrow(data).
</p>


<h3>Value</h3>

<p>list of an average weighted surface ('avarage_surf', an 'im' object),
a Hajek average weighted surface ('average_weighted_surf_haj', an 'im' object),
weights, and smoothed outcomes
</p>


</div>