<div class="container">

<table style="width: 100%;"><tr>
<td>stat_wb_box</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Draw colour boxes for wavebands</h2>

<h3>Description</h3>

<p><code>stat_wb_box</code> plots boxes corresponding to wavebands, by default located
slightly above the peak of the spectrum. Sets suitable default aesthetics for
"rect" geom.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stat_wb_box(
  mapping = NULL,
  data = NULL,
  geom = "rect",
  w.band = NULL,
  chroma.type = "CMF",
  ypos.mult = 1.07,
  ypos.fixed = NULL,
  box.height = 0.06,
  position = "identity",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mapping</code></td>
<td>
<p>The aesthetic mapping, usually constructed with
<code>aes</code> or <code>aes_</code>. Only needs
to be set at the layer level if you are overriding the plot defaults.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A layer specific dataset - only needed if you want to override
the plot defaults.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geom</code></td>
<td>
<p>The geometric object to use display the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w.band</code></td>
<td>
<p>a waveband object or a list of waveband objects or numeric
vector of at least length two.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chroma.type</code></td>
<td>
<p>character one of "CMF" (color matching function) or "CC"
(color coordinates) or a <code>chroma_spct</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ypos.mult</code></td>
<td>
<p>numeric Multiplier constant used to compute returned
<code>y</code> values. This is numerically similar to using npc units, but values
larger than one expand the plotting area.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ypos.fixed</code></td>
<td>
<p>numeric If not <code>NULL</code> used a constant value returned
in <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box.height</code></td>
<td>
<p>numeric The height of the box as a fraction of the range of
$y$. This is similar to using npc units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>position</code></td>
<td>
<p>The position adjustment to use for overlapping points on this
layer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>a logical value indicating whether NA values should be stripped
before the computation proceeds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped. <code>FALSE</code>
never includes, and <code>TRUE</code> always includes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics, rather
than combining with them. This is most useful for helper functions that
define both data and aesthetics and shouldn't inherit behaviour from the
default plot specification, e.g. <code>borders</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed on to <code>layer</code>. This
can include aesthetics whose values you want to set, not map. See
<code>layer</code> for more details.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with one row for each waveband object in the argument
to <code>w.band</code>. Wavebeand outside the range of the spectral data are
trimmed or discarded.
</p>


<h3>Computed variables</h3>

<p>What it is named integral below is the result of appying <code>integral.fun</code>
to the data, with default <code>integrate_xy</code>.
</p>

<dl>
<dt>x</dt>
<dd>
<p>w.band-midpoint</p>
</dd>
<dt>wb.xmin</dt>
<dd>
<p>w.band minimum</p>
</dd>
<dt>wb.xmax</dt>
<dd>
<p>w.band maximum</p>
</dd>
<dt>wb.ymin</dt>
<dd>
<p>data$y minimum</p>
</dd>
<dt>wb.ymax</dt>
<dd>
<p>data$y maximum</p>
</dd>
<dt>ymin</dt>
<dd>
<p>box bottom</p>
</dd>
<dt>ymax</dt>
<dd>
<p>box top</p>
</dd>
<dt>y</dt>
<dd>
<p>ypos.fixed or top of data, adjusted by <code>ypos.mult</code></p>
</dd>
<dt>wb.color</dt>
<dd>
<p>color of the w.band</p>
</dd>
<dt>wb.name</dt>
<dd>
<p>label of w.band</p>
</dd>
<dt>BW.color</dt>
<dd>
<p><code>black_or_white(wb.color)</code></p>
</dd>
</dl>
<h3>Default aesthetics</h3>

<p>Set by the statistic and available to geoms.
</p>

<dl>
<dt>xmin</dt>
<dd>
<p>stat(wb.xmin)</p>
</dd>
<dt>xmax</dt>
<dd>
<p>stat(wb.xmax)</p>
</dd>
<dt>ymin</dt>
<dd>
<p>stat(ymin)</p>
</dd>
<dt>ymax</dt>
<dd>
<p>stat(ymax)</p>
</dd>
<dt>fill</dt>
<dd>
<p>..wb.color..</p>
</dd>
</dl>
<h3>Required aesthetics</h3>

<p>Required by the statistic and need to be set with <code>aes()</code>.
</p>

<dl>
<dt>x</dt>
<dd>
<p>numeric, wavelength in nanometres</p>
</dd>
<dt>y</dt>
<dd>
<p>numeric, a spectral quantity</p>
</dd>
</dl>
<h3>Note</h3>

<p>This stat uses a panel function and ignores grouping as it is meant to
be used for annotations.The value returned as default value for <code>y</code> is
based on the y-range of spectral values for the whole data set.
</p>


<h3>See Also</h3>

<p>Other stats functions: 
<code>stat_color()</code>,
<code>stat_find_qtys()</code>,
<code>stat_find_wls()</code>,
<code>stat_label_peaks()</code>,
<code>stat_peaks()</code>,
<code>stat_spikes()</code>,
<code>stat_wb_column()</code>,
<code>stat_wb_contribution()</code>,
<code>stat_wb_hbar()</code>,
<code>stat_wb_irrad()</code>,
<code>stat_wb_label()</code>,
<code>stat_wb_mean()</code>,
<code>stat_wb_relative()</code>,
<code>stat_wb_sirrad()</code>,
<code>stat_wb_total()</code>,
<code>stat_wl_strip()</code>,
<code>stat_wl_summary()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(photobiologyWavebands)
# ggplot() methods for spectral objects set a default mapping for x and y.
ggplot(sun.spct) +
  stat_wb_box(w.band = VIS_bands()) +
  geom_line() +
  scale_fill_identity()
ggplot(sun.spct) +
  stat_wb_box(w.band = VIS_bands(), color = "white") +
  geom_line() +
  scale_fill_identity()

</code></pre>


</div>