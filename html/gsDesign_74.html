<div class="container">

<table style="width: 100%;"><tr>
<td>sfLDOF</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Lan-DeMets Spending function overview</h2>

<h3>Description</h3>

<p>Lan and DeMets (1983) first published the method of using spending functions 
to set boundaries for group sequential trials. In this publication they
proposed two specific spending functions: one to approximate an
O'Brien-Fleming design and the other to approximate a Pocock design.
The spending function to approximate O'Brien-Fleming has been generalized as proposed by Liu, et al (2012)
</p>
<p>With <code>param=1=rho</code>, the Lan-DeMets (1983) spending function to approximate an O'Brien-Fleming
bound is implemented in the function (<code>sfLDOF()</code>): </p>
<p style="text-align: center;"><code class="reqn">f(t; 
\alpha)=2-2\Phi\left(\Phi^{-1}(1-\alpha/2)/ t^{\rho/2}\right).</code>
</p>

<p>For <code>rho</code> otherwise in <code>[.005,2]</code>, this is the generalized version of Liu et al (2012).
For <code>param</code> outside of <code>[.005,2]</code>, <code>rho</code> is set to 1. The Lan-DeMets (1983)
spending function to approximate a Pocock design is implemented in the
function <code>sfLDPocock()</code>:
</p>
<p style="text-align: center;"><code class="reqn">f(t;\alpha)=\alpha ln(1+(e-1)t).</code>
</p>
<p> As shown in
examples below, other spending functions can be used to ge t as good or
better approximations to Pocock and O'Brien-Fleming bounds. In particular,
O'Brien-Fleming bounds can be closely approximated using
<code>sfExponential</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sfLDOF(alpha, t, param = NULL)

sfLDPocock(alpha, t, param)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Real value <code class="reqn">&gt; 0</code> and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size/information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>A vector of points with increasing values from 0 to 1, inclusive.
Values of the proportion of sample size/information for which the spending
function will be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>This parameter is not used for <code>sfLDPocock</code>, not required 
for <code>sfLDOF</code> and need not be specified. For <code>sfLDPocock</code> it is here 
so that the calling sequence conforms to the standard for spending functions used 
with <code>gsDesign()</code>. For <code>sfLDOF</code> it will default to 1 (Lan-DeMets function 
to approximate O'Brien-Fleming) if <code>NULL</code> or if outside of the range <code>[.005,2]</code>.
otherwise, it will be use to set rho from Liu et al (2012).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of type <code>spendfn</code>. See spending functions for further
details.
</p>


<h3>Note</h3>

<p>The gsDesign technical manual is available at
<a href="https://keaven.github.io/gsd-tech-manual/">https://keaven.github.io/gsd-tech-manual/</a>.
</p>


<h3>Author(s)</h3>

<p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a>
</p>


<h3>References</h3>

<p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.
</p>
<p>Lan, KKG and DeMets, DL (1983), Discrete sequential boundaries for clinical
trials. <em>Biometrika</em>;70: 659-663.
</p>
<p>Liu, Q, Lim, P, Nuamah, I, and Li, Y (2012), On adaptive error spending approach 
for group sequential trials with random information levels. 
<em>Journal of biopharmaceutical statistics</em>; 22(4), 687-699.
</p>


<h3>See Also</h3>

<p><code>vignette("SpendingFunctionOverview")</code>, <code>gsDesign</code>,
<code>vignette("gsDesignPackageOverview")</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)
# 2-sided,  symmetric 6-analysis trial Pocock
# spending function approximation
gsDesign(k = 6, sfu = sfLDPocock, test.type = 2)$upper$bound

# show actual Pocock design
gsDesign(k = 6, sfu = "Pocock", test.type = 2)$upper$bound

# approximate Pocock again using a standard
# Hwang-Shih-DeCani approximation
gsDesign(k = 6, sfu = sfHSD, sfupar = 1, test.type = 2)$upper$bound

# use 'best' Hwang-Shih-DeCani approximation for Pocock,  k=6;
# see manual for details
gsDesign(k = 6, sfu = sfHSD, sfupar = 1.3354376, test.type = 2)$upper$bound

# 2-sided, symmetric 6-analysis trial
# O'Brien-Fleming spending function approximation
gsDesign(k = 6, sfu = sfLDOF, test.type = 2)$upper$bound

# show actual O'Brien-Fleming bound
gsDesign(k = 6, sfu = "OF", test.type = 2)$upper$bound

# approximate again using a standard Hwang-Shih-DeCani
# approximation to O'Brien-Fleming
x &lt;- gsDesign(k = 6, test.type = 2)
x$upper$bound
x$upper$param

# use 'best' exponential approximation for k=6; see manual for details
gsDesign(
  k = 6, sfu = sfExponential, sfupar = 0.7849295,
  test.type = 2
)$upper$bound

# plot spending functions for generalized Lan-DeMets approximation of
ti &lt;-(0:100)/100
rho &lt;- c(.05,.5,1,1.5,2,2.5,3:6,8,10,12.5,15,20,30,200)/10
df &lt;- NULL
for(r in rho){
  df &lt;- rbind(df,data.frame(t=ti,rho=r,alpha=.025,spend=sfLDOF(alpha=.025,t=ti,param=r)$spend))
}
ggplot(df,aes(x=t,y=spend,col=as.factor(rho)))+
  geom_line()+
  guides(col=guide_legend(expression(rho)))+
  ggtitle("Generalized Lan-DeMets O'Brien-Fleming Spending Function")
</code></pre>


</div>