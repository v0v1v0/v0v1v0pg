<div class="container">

<table style="width: 100%;"><tr>
<td>fmt_units</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Format measurement units</h2>

<h3>Description</h3>

<p><code>fmt_units()</code> lets you better format measurement units in the table body.
These must conform to <strong>gt</strong>'s specialized units notation (e.g.,
<code>"J Hz^-1 mol^-1"</code> can be used to generate units for the
<em>molar Planck constant</em>) for the best conversion. The notation here provides
several conveniences for defining units, so as long as the values to be
formatted conform to this syntax, you'll obtain nicely-formatted units no
matter what the table output format might be (i.e., HTML, LaTeX, RTF, etc.).
Details pertaining to the units notation can be found in the section entitled
<em>How to use <strong>gt</strong>'s units notation</em>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fmt_units(data, columns = everything(), rows = everything())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p><em>Columns to target</em>
</p>
<p><code>&lt;column-targeting expression&gt;</code> // <em>default:</em> <code>everything()</code>
</p>
<p>Can either be a series of column names provided in <code>c()</code>, a vector of
column indices, or a select helper function (e.g. <code>starts_with()</code>,
<code>ends_with()</code>, <code>contains()</code>, <code>matches()</code>, <code>num_range()</code> and <code>everything()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p><em>Rows to target</em>
</p>
<p><code>&lt;row-targeting expression&gt;</code> // <em>default:</em> <code>everything()</code>
</p>
<p>In conjunction with <code>columns</code>, we can specify which of their rows should
undergo formatting. The default <code>everything()</code> results in all rows in
<code>columns</code> being formatted. Alternatively, we can supply a vector of row
captions within <code>c()</code>, a vector of row indices, or a select helper
function (e.g. <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>matches()</code>,
<code>num_range()</code>, and <code>everything()</code>). We can also use expressions to filter
down to the rows we need (e.g., <code style="white-space: pre;">⁠[colname_1] &gt; 100 &amp; [colname_2] &lt; 50⁠</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>How to use <strong>gt</strong>'s units notation</h3>

<p>The units notation involves a shorthand of writing units that feels familiar
and is fine-tuned for the task at hand. Each unit is treated as a separate
entity (parentheses and other symbols included) and the addition of subscript
text and exponents is flexible and relatively easy to formulate. This is all
best shown with examples:
</p>

<ul>
<li> <p><code>"m/s"</code> and <code>"m / s"</code> both render as <code>"m/s"</code>
</p>
</li>
<li> <p><code>"m s^-1"</code> will appear with the <code>"-1"</code> exponent intact
</p>
</li>
<li> <p><code>"m /s"</code> gives the same result, as <code>"/&lt;unit&gt;"</code> is equivalent to
<code>"&lt;unit&gt;^-1"</code>
</p>
</li>
<li> <p><code>"E_h"</code> will render an <code>"E"</code> with the <code>"h"</code> subscript
</p>
</li>
<li> <p><code>"t_i^2.5"</code> provides a <code>t</code> with an <code>"i"</code> subscript and a <code>"2.5"</code> exponent
</p>
</li>
<li> <p><code>"m[_0^2]"</code> will use overstriking to set both scripts vertically
</p>
</li>
<li> <p><code>"g/L %C6H12O6%"</code> uses a chemical formula (enclosed in a pair of <code>"%"</code>
characters) as a unit partial, and the formula will render correctly with
subscripted numbers
</p>
</li>
<li>
<p> Common units that are difficult to write using ASCII text may be implicitly
converted to the correct characters (e.g., the <code>"u"</code> in <code>"ug"</code>, <code>"um"</code>,
<code>"uL"</code>, and <code>"umol"</code> will be converted to the Greek <em>mu</em> symbol; <code>"degC"</code>
and <code>"degF"</code> will render a degree sign before the temperature unit)
</p>
</li>
<li>
<p> We can transform shorthand symbol/unit names enclosed in <code>":"</code> (e.g.,
<code>":angstrom:"</code>, <code>":ohm:"</code>, etc.) into proper symbols
</p>
</li>
<li>
<p> Greek letters can added by enclosing the letter name in <code>":"</code>; you can
use lowercase letters (e.g., <code>":beta:"</code>, <code>":sigma:"</code>, etc.) and uppercase
letters too (e.g., <code>":Alpha:"</code>, <code>":Zeta:"</code>, etc.)
</p>
</li>
<li>
<p> The components of a unit (unit name, subscript, and exponent) can be
fully or partially italicized/emboldened by surrounding text with <code>"*"</code> or
<code>"**"</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<p>Let's use the <code>illness</code> dataset and create a new <strong>gt</strong> table. The <code>units</code>
column contains character values in <strong>gt</strong>'s specialized units notation
(e.g., <code>"x10^9 / L"</code>) so the <code>fmt_units()</code> function was used to better format
those units.
</p>
<div class="sourceCode r"><pre>illness |&gt;
  gt() |&gt;
  fmt_units(columns = units) |&gt;
  sub_missing(columns = -starts_with("norm")) |&gt;
  sub_missing(columns = c(starts_with("norm"), units), missing_text = "") |&gt;
  sub_large_vals(rows = test == "MYO", threshold = 1200) |&gt;
  fmt_number(
    decimals = 2,
    drop_trailing_zeros = TRUE
  ) |&gt;
  tab_header(title = "Laboratory Findings for the YF Patient") |&gt;
  tab_spanner(label = "Day", columns = starts_with("day")) |&gt;
  cols_label_with(fn = ~ gsub("day_", "", .)) |&gt;
  cols_merge_range(col_begin = norm_l, col_end = norm_u) |&gt;
  cols_label(
    starts_with("norm") ~ "Normal Range",
    test ~ "Test",
    units ~ "Units"
  ) |&gt;
  cols_width(
    starts_with("day") ~ px(80),
    everything() ~ px(120)
  ) |&gt;
  tab_style(
    style = cell_text(align = "center"),
    locations = cells_column_labels(columns = starts_with("day"))
  ) |&gt;
  tab_style(
    style = cell_fill(color = "aliceblue"),
    locations = cells_body(columns = c(test, units))
  ) |&gt;
  opt_vertical_padding(scale = 0.4) |&gt;
  opt_align_table_header(align = "left") |&gt;
  tab_options(heading.padding = px(10))
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_fmt_units_1.png" alt="This image of a table was generated from the first code example in the `fmt_units()` help file." style="width:100%;"><p>The <code>constants</code> dataset contains values for hundreds of fundamental
physical constants. We'll take a subset of values that have some molar basis
and generate a <strong>gt</strong> table from that. Like the <code>illness</code> dataset, this one
has a <code>units</code> column so, again, the <code>fmt_units()</code> function will be used to
format those units. Here, the preference for typesetting measurement units is
to have positive and negative exponents (e.g., not <code>"&lt;unit_1&gt; / &lt;unit_2&gt;"</code>
but rather <code>"&lt;unit_1&gt; &lt;unit_2&gt;^-1"</code>).
</p>
<div class="sourceCode r"><pre>constants |&gt;
  dplyr::filter(grepl("molar", name)) |&gt;
  gt() |&gt;
  cols_hide(columns = c(uncert, starts_with("sf"))) |&gt;
  fmt_units(columns = units) |&gt;
  fmt_scientific(columns = value, decimals = 3) |&gt;
  tab_header(title = "Physical Constants Having a Molar Basis") |&gt;
  tab_options(column_labels.hidden = TRUE)
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_fmt_units_2.png" alt="This image of a table was generated from the second code example in the `fmt_units()` help file." style="width:100%;"><h3>Function ID</h3>

<p>3-19
</p>


<h3>Function Introduced</h3>

<p><code>v0.10.0</code> (October 7, 2023)
</p>


<h3>See Also</h3>

<p>Other data formatting functions: 
<code>data_color()</code>,
<code>fmt()</code>,
<code>fmt_auto()</code>,
<code>fmt_bins()</code>,
<code>fmt_bytes()</code>,
<code>fmt_chem()</code>,
<code>fmt_country()</code>,
<code>fmt_currency()</code>,
<code>fmt_date()</code>,
<code>fmt_datetime()</code>,
<code>fmt_duration()</code>,
<code>fmt_email()</code>,
<code>fmt_engineering()</code>,
<code>fmt_flag()</code>,
<code>fmt_fraction()</code>,
<code>fmt_icon()</code>,
<code>fmt_image()</code>,
<code>fmt_index()</code>,
<code>fmt_integer()</code>,
<code>fmt_markdown()</code>,
<code>fmt_number()</code>,
<code>fmt_partsper()</code>,
<code>fmt_passthrough()</code>,
<code>fmt_percent()</code>,
<code>fmt_roman()</code>,
<code>fmt_scientific()</code>,
<code>fmt_spelled_num()</code>,
<code>fmt_tf()</code>,
<code>fmt_time()</code>,
<code>fmt_url()</code>,
<code>sub_large_vals()</code>,
<code>sub_missing()</code>,
<code>sub_small_vals()</code>,
<code>sub_values()</code>,
<code>sub_zero()</code>
</p>


</div>