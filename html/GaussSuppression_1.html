<div class="container">

<table style="width: 100%;"><tr>
<td>AdditionalSuppression</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>GaussSuppression from data and suppressed data</h2>

<h3>Description</h3>

<p>Extended version of <code>GaussSuppressionFromData</code> that takes into account suppression pattern in suppressed data sent as input
</p>


<h3>Usage</h3>

<pre><code class="language-R">AdditionalSuppression(
  data,
  ...,
  fun = GaussSuppressionFromData,
  primary = GetDefault(fun, "primary"),
  suppressedData = NULL,
  makePrimary = TRUE,
  makeForced = TRUE,
  forceNotPrimary = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Input data as a data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further parameters to <code>GaussSuppressionFromData</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>A function: <code>GaussSuppressionFromData</code> or one of its wrappers such as
<code>SuppressSmallCounts</code> and <code>SuppressDominantCells</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>primary</code></td>
<td>
<p>As input to <code>GaussSuppressionFromData</code> before possible extension caused by <code>suppressedData</code>.
Supply <code>NULL</code> if all primary suppressions are retrieved form <code>suppressedData</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppressedData</code></td>
<td>
<p>A data frame or a list of data frames as output from <code>GaussSuppressionFromData</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>makePrimary</code></td>
<td>
<p>When <code>TRUE</code>, suppression in <code>suppressedData</code> is preserved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>makeForced</code></td>
<td>
<p>When TRUE, non-suppression in <code>suppressedData</code> is preserved. An exception is possible primary suppression which has priority over <code>forced</code>. Use forceNotPrimary to avoid this exception.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceNotPrimary</code></td>
<td>
<p>When TRUE, non-suppression in <code>suppressedData</code> is forced to be not primary suppressed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is an easy alternative to using <code>PrimaryFromSuppressedData</code> and the relating functions manually.
See the examples of <code>PrimaryFromSuppressedData</code>.
By default, the suppression pattern in <code>suppressedData</code> is preserved. The behavior can be tuned by the parameters.
</p>
<p>Note that the variables used in <code>suppressedData</code> in addition to <code>"suppressed"</code> are those with matching names in <code>crossTable</code>.
Others are ignored. See examples (d3, d4, d5).
NOW A FIX IS INCLUDED by attribute totCode. EXAMPLES NOT YET CHANGED.
</p>


<h3>Value</h3>

<p>Aggregated data with suppression information
</p>


<h3>Examples</h3>

<pre><code class="language-R">
z1 &lt;- SSBtoolsData("z1")
z2 &lt;- SSBtoolsData("z2")
z3 &lt;- SSBtoolsData("z3")

# Ordinary suppressions
a &lt;- GaussSuppressionFromData(z1, 1:2, 3, maxN = 5)
b &lt;- GaussSuppressionFromData(z2, 1:4, 5, maxN = 1)

# As b and also suppression pattern in a preserved 
b1 &lt;- AdditionalSuppression(z2, 1:4, 5, maxN = 1, suppressedData = a)

# Rows with differences
cbind(b, b1)[b1$suppressed != b$suppressed, ]

# All primary from a 
b2 &lt;- AdditionalSuppression(z2, 1:4, 5, suppressedData = a, primary = NULL, singleton = NULL)

# Rows with suppression 
b2[b2$suppressed, ]

# All primary from b2
d1 &lt;- AdditionalSuppression(data = z3, 1:6, 7, suppressedData = b2, primary = NULL, 
                            singleton = NULL)

# No suppression since no common codes 
d1[d1$suppressed, ]

# Use another coding of fylke
z3$fylke_ &lt;- z3$fylke - 4
d2 &lt;- AdditionalSuppression(data = z3, c(1, 3:6, 8), 7, suppressedData = b2, primary = NULL, 
                            singleton = NULL)

# Two primary found in b2 -&gt; several secondary
d2[d2$suppressed,]


# Examples demonstrating limitations of AdditionalSuppression
# Variable mnd in suppressedData is not used 

# No suppression since unsuppressed rows used by makeForced and forceNotPrimary
d3 &lt;- AdditionalSuppression(data = z3, c(1, 3:4, 8), 7, suppressedData = d2, primary = NULL, 
                            singleton = NULL)
d3[d3$suppressed, ]

# Now suppression, but not too much
d4 &lt;- AdditionalSuppression(data = z3, c(1, 3:4, 8), 7, suppressedData = d2, 
                            forceNotPrimary = FALSE, primary = NULL, singleton = NULL)
d4[d4$suppressed, ]

# The correct way is to limit the input
d5 &lt;- AdditionalSuppression(data = z3, c(1, 3:4, 8), 7, suppressedData = d2[d2$mnd == "Total", ], 
                            primary = NULL, singleton = NULL)
d5[d5$suppressed, ]

</code></pre>


</div>