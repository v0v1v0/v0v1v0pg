<div class="container">

<table style="width: 100%;"><tr>
<td>aggregation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate particles to obtain inferred values</h2>

<h3>Description</h3>

<p>This function aggregates particles to obtain inferred values. Assuming that
the particles have been propagated to a given time slice <code class="reqn">t</code>, the
weighted average of the samples is computed to estimate the state of the
system at <code class="reqn">t</code> or at previous time slices (Koller and Friedman, 2009).
</p>


<h3>Usage</h3>

<pre><code class="language-R">aggregation(part, nodes, col_seq = NULL, col_weight = "weight", lag = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>part</code></td>
<td>
<p>A data frame containing the particles propagated to time slice
<code class="reqn">t</code>, as obtained from function <code>particles</code> or
<code>propagation</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodes</code></td>
<td>
<p>A character vector containing the inferred nodes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_seq</code></td>
<td>
<p>A character vector containing the column names of <code>part</code>
that describe the observation sequence. If <code>NULL</code> (the default), all the
particles belong to a single sequence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_weight</code></td>
<td>
<p>A character string corresponding to the column name of
<code>part</code> that describes the particle weight.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>A non-negative integer vector containing the time lags <code class="reqn">l_1,
l_2, \dots</code> such that the samples of time slices <code class="reqn">t - l_1,
t - l_2, \dots</code> are aggregated.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>lag</code> has one element, a data frame (tibble) containing the
aggregated values of the inferred nodes and their observation sequences (if
<code>col_seq</code> is not <code>NULL</code>). If <code>lag</code> has two or more elements, a
list of data frames (tibbles) containing these values for each time lag.
</p>


<h3>References</h3>

<p>Koller, D. and Friedman, N. (2009). <em>Probabilistic Graphical Models:
Principles and Techniques</em>. The MIT Press.
</p>


<h3>See Also</h3>

<p><code>aggregation</code>, <code>particles</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)
set.seed(0)
data(gmdbn_air, data_air)
evid &lt;- data_air %&gt;%
  group_by(DATE) %&gt;%
  slice(1:3) %&gt;%
  ungroup()
evid$NO2[sample.int(150, 30)] &lt;- NA
evid$O3[sample.int(150, 30)] &lt;- NA
evid$TEMP[sample.int(150, 30)] &lt;- NA
evid$WIND[sample.int(150, 30)] &lt;- NA
aggreg &lt;- particles(data.frame(DATE = unique(evid$DATE))) %&gt;%
  propagation(gmdbn_air, evid, col_seq = "DATE", n_times = 3) %&gt;%
  aggregation(c("NO2", "O3", "TEMP", "WIND"), col_seq = "DATE", lag = c(0, 1))

</code></pre>


</div>