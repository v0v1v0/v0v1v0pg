<div class="container">

<table style="width: 100%;"><tr>
<td>geocode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Geocode</h2>

<h3>Description</h3>

<p>Geocodes (finds latitude and longitude of) a location using the Google
Geocoding API. Note: To use Google's Geocoding API, you must first enable the
API in the Google Cloud Platform Console. See <code>register_google()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">geocode(
  location,
  output = c("latlon", "latlona", "more", "all"),
  source = c("google", "dsk"),
  force = ifelse(source == "dsk", FALSE, TRUE),
  urlonly = FALSE,
  override_limit = FALSE,
  nameType = c("long", "short"),
  ext = "com",
  inject = "",
  ...
)

mutate_geocode(data, location, ...)

geocodeQueryCheck()

geocode_cache()

write_geocode_cache(path, ...)

load_geocode_cache(path, overwrite = FALSE)

clear_geocode_cache(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>location</code></td>
<td>
<p>a character vector of street addresses or place names (e.g.
<code style="white-space: pre;">⁠"1600 pennsylvania avenue, washington dc" or "Baylor University"⁠</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>amount of output, <code>"latlon"</code>, <code>"latlona"</code>, <code>"more"</code>, or <code>"all"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>"google" for Google (note: "dsk" is defunct)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>force online query even if cached.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>urlonly</code></td>
<td>
<p>return only the url?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>override_limit</code></td>
<td>
<p>override the current query rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameType</code></td>
<td>
<p>in some cases, Google returns both a long name and a short
name. this parameter allows the user to specify which to grab.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ext</code></td>
<td>
<p>top level domain (e.g. "com", "co.nz"); helpful for non-US users</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inject</code></td>
<td>
<p>character string to add to the url or named character vector of
key-value pairs to be injected (e.g. c("a" = "b") get converted to "a=b"
and appended to the query)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>In <code>mutate_geocode()</code>, arguments to pass to <code>geocode()</code>. In
<code>write_geocode_cache()</code>, arguments to pass to <code>saveRDS()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame or equivalent</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>path to file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>in <code>load_geocode_cache()</code>, should the current cache be
wholly replaced with the one on file?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note: <code>geocode()</code> uses Google's Geocoding API to geocode addresses. Please
take care not to disclose sensitive information.
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/</a> suggest various
alternative options for such data.
</p>


<h3>Value</h3>

<p>If <code>output</code> is <code>"latlon"</code>, <code>"latlona"</code>, or <code>"more"</code>, a tibble
(classed data frame). If <code>"all"</code>, a list.
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/geocoding/">https://developers.google.com/maps/documentation/geocoding/</a>,
<a href="https://developers.google.com/maps/documentation/javascript/geocoding/">https://developers.google.com/maps/documentation/javascript/geocoding/</a>,
<a href="https://developers.google.com/maps/documentation/geocoding/usage-and-billing/">https://developers.google.com/maps/documentation/geocoding/usage-and-billing/</a>,
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

# geocoding is most commonly used for addresses
geocode("1600 Amphitheatre Parkway, Mountain View, CA")
geocode("1600 Amphitheatre Parkway, Mountain View, CA", urlonly = TRUE)

# google can also geocode colloquial names of places
geocode("the white house")

# geocode can also accept character vectors of places
geocode(c("the white house", "washington dc"))



## types of output
########################################

geocode("waco texas")
geocode("waco texas", output = "latlona")
geocode("waco texas", output = "more")
str(geocode("waco texas", output = "all"))

geocode(c("waco, texas", "houston, texas"))
geocode(c("waco, texas", "houston, texas"), output = "latlona")
geocode(c("waco, texas", "houston, texas"), output = "all") %&gt;% str(4)



## mutate_geocode
########################################

# mutate_geocode is used to add location columns to an existing dataset
# that has location information

df &lt;- data.frame(
  address = c("1600 Pennsylvania Avenue, Washington DC", "", "houston texas"),
  stringsAsFactors = FALSE
)

mutate_geocode(df, address)
df %&gt;% mutate_geocode(address)


## known issues
########################################

# in some cases geocode finds several locations



## End(Not run)


</code></pre>


</div>