<div class="container">

<table style="width: 100%;"><tr>
<td>quantize_raster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Quantizes raster to a set number of discrete levels</h2>

<h3>Description</h3>

<p>Quantizes raster to a set number of discrete levels starting at 0. There are 2 methods of quantization are available: "equal range" and "equal prob"
</p>


<h3>Usage</h3>

<pre><code class="language-R">quantize_raster(
  r,
  n_levels,
  method,
  min_val = NULL,
  max_val = NULL,
  maxcell = Inf,
  filename = NULL,
  overwrite = FALSE,
  wopt = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>A single layer SpatRaster or RasterLayer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_levels</code></td>
<td>
<p>number of levels to quantize to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>quantization method (either "equal range" or "equal prob"). "equal range" quantization will create bins that cover a range of equal size. "equal prob" performs equal probability quantization and will use quantiles to create bins with approximately equal number of samples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_val</code></td>
<td>
<p>minimum value for equal range quantization (if not supplied, the minimum value of the raster is used)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_val</code></td>
<td>
<p>maximum value for equal range quantization (if not supplied, the maximum value of the raster is used)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxcell</code></td>
<td>
<p>positive integer used to take a regular sample of x if "equal prob" is used (default is Inf)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>character Output filename.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>logical. If TRUE, filename is overwritten (default is FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wopt</code></td>
<td>
<p>list with named options for writing files as in writeRaster</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Equal probability quantization is the method recommended in Haralick et al., 1973. However, equal range may be more desirable if making comparisons across several different rasters where you need the gray levels to correspond in a consistent way to the original data, as you can supply the global max/min or the theoretical max/min values that could occur. When equal probability quantization is used, quantiles are generated using type 8 as recommended by Hyndman and Fan (1996). This method provides estimates that are approximately median-unbiased regardless of the distribution of x.
</p>


<h3>Value</h3>

<p>a single layer SpatRaster or RasterLayer with integer values ranging from 0 to n_levels-1
</p>


<h3>References</h3>

<p>Haralick, R.M., Shanmugam, K., Dinstein, I., 1973. Textural features for image classification. IEEE Transactions on Systems, Man, and Cybernetics 610–621. https://doi.org/10.1109/TSMC.1973.4309314
</p>
<p>Hyndman, R.J., Fan, Y., 1996. Sample Quantiles in Statistical Packages. The American Statistician 50, 361–365. https://doi.org/10.1080/00031305.1996.10473566
</p>


<h3>Examples</h3>

<pre><code class="language-R">r&lt;- rast(volcano, extent= ext(2667400, 2667400 + ncol(volcano)*10,
6478700, 6478700 + nrow(volcano)*10),
crs = "EPSG:27200")
rq1 &lt;- quantize_raster(r = r, n_levels = 16, method = "equal prob")
rq2 &lt;- quantize_raster(r = r, n_levels = 16, method = "equal range")
</code></pre>


</div>