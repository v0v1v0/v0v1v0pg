<div class="container">

<table style="width: 100%;"><tr>
<td>export</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Export spatial data from MPG and GOC models</h2>

<h3>Description</h3>

<p>This function automates the export of raster and vector spatial data from <code>mpg</code> and
<code>grain</code> objects. By default it places them in a new directory, unless an existing one is
specified with <code>overwrite = TRUE</code>.
</p>
<p>It can also be used to process <code>mpg</code> and <code>grain</code> objects to
produce R spatial objects that are convenient for plotting or analysis within R.
Use <code>R = TRUE</code> in which case all parameters related to file export
are ignored. (Default <code>R = FALSE</code>)
</p>
<p>The <code>raster::writeRaster()</code> is used for rasters,
and <code>sf::st_write()</code> is used to export ESRI compatible shape files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">export(
  x,
  dirname = NULL,
  path = ".",
  rasterFormat = "GTiff",
  overwrite = FALSE,
  R = FALSE,
  vorBound = FALSE,
  ...
)

## S4 method for signature 'mpg'
export(
  x,
  dirname = NULL,
  path = ".",
  rasterFormat = "GTiff",
  overwrite = FALSE,
  R = FALSE,
  vorBound = FALSE,
  ...
)

## S4 method for signature 'grain'
export(
  x,
  dirname = NULL,
  path = ".",
  rasterFormat = "GTiff",
  overwrite = FALSE,
  R = FALSE,
  vorBound = FALSE,
  ...
)

## S4 method for signature 'goc'
export(
  x,
  dirname = NULL,
  path = ".",
  rasterFormat = "GTiff",
  overwrite = FALSE,
  R = FALSE,
  vorBound = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>mpg</code> or <code>grain</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dirname</code></td>
<td>
<p>The name of a new directory to create. If <code>NULL</code>
a directory with a name containing the date and time will be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>A path to where this new directory <code>dirname</code> should be created.
Defaults to the working directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rasterFormat</code></td>
<td>
<p>The format for exported rasters. See <code>writeFormats()</code> for
options. Defaults to GeoTiff (<code>rasterFormat='GTiff'</code>).
Use <code>rasterFormat='raster'</code> to save <code>.grd</code> files in
native <code>raster</code> package format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>If directory already exists will overwrite existing files inside.
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>If <code>TRUE</code>, return the spatial objects that would be written to files.
Do not write these files and ignore <code>dirname</code>, <code>path</code>,
<code>rasterFormat</code>, <code>overwrite</code> parameters.
This is useful for visualization using R plotting functions,
or spatial analysis within R. Defaults to <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vorBound</code></td>
<td>
<p>Specify whether to create a raster with the boundaries of
the Voronoi polygons <code style="white-space: pre;">⁠=1⁠</code> and the remainder <code style="white-space: pre;">⁠=NA⁠</code>.
This may be useful for visualizing relationships among
polygons in a grain of connectivity.
This can add time to the export on very large rasters.
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments (not used).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly returns the path to the folder created.
</p>
<p>Side effect of exporting files representing raster and vector spatial data
in the object.
</p>
<p>Please note that for vector data export the attribute name is limited
to 8 characters in shape files. See the tables below for the abbreviations
used and their meaning.
</p>
<p><strong>Exported from <code>mpg</code> objects:</strong>
</p>
<p><code>nodes</code>, <code>linksCentroid</code>, <code>linksPerim</code> are shape files giving
the locations of the patch centroids, links among centroids, and links
among perimeters of patches respectively. <code style="white-space: pre;">⁠patchId, voronoi⁠</code> are
rasters giving the patch identifier of the patch, or of the patch that
the Voronoi polygon refers to. <code style="white-space: pre;">⁠lcpPerimWeight, lcpLinkId⁠</code> give
the weight in cost surface units of the shortest paths between perimeters,
and the identifiers of those links respectively. <code>vorBound</code> gives
the boundaries of the Voronoi polygons (if specified).
</p>
<p>Description of node (vertex) and link (edge) weights in <code>mpg</code> objects
and their corresponding attribute names in the shape files created.
</p>

<table>
<tr>
<td style="text-align: left;">
<strong>type</strong> </td>
<td style="text-align: left;"> <strong>MPG name</strong> </td>
<td style="text-align: left;"> <strong>SHP name</strong> </td>
<td style="text-align: left;"> <strong>Description</strong>
</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>patchId</code> </td>
<td style="text-align: left;"> <code>patchId</code> </td>
<td style="text-align: left;"> Patch ID from <code>patchId</code> raster </td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>patchArea</code> </td>
<td style="text-align: left;"> <code>patchA</code> </td>
<td style="text-align: left;"> Area of patch </td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>patchEdgeArea</code> </td>
<td style="text-align: left;"> <code>patchEA</code> </td>
<td style="text-align: left;"> Edge area of patch </td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>coreArea</code> </td>
<td style="text-align: left;"> <code>coreA</code> </td>
<td style="text-align: left;"> Area excluding edge of patch </td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>centroidX</code> </td>
<td style="text-align: left;"> <code>ctrX</code> </td>
<td style="text-align: left;"> Centroid of the patch (X)</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>centroidY</code> </td>
<td style="text-align: left;"> <code>ctrY</code> </td>
<td style="text-align: left;"> Centroid of the patch (Y)</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>e1</code> </td>
<td style="text-align: left;"> <code>e1</code> </td>
<td style="text-align: left;"> Id of first patch at end of link</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>e2</code> </td>
<td style="text-align: left;"> <code>e2</code> </td>
<td style="text-align: left;"> Id of second patch at end of link</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>linkId</code> </td>
<td style="text-align: left;"> <code>linkId</code> </td>
<td style="text-align: left;"> Link ID from <code>lcpLinkId</code> raster</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>lcPerimWeight</code> </td>
<td style="text-align: left;"> <code>lcpPerWt</code> </td>
<td style="text-align: left;"> Cost length of link from patch perimeters</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>startPerimX</code> </td>
<td style="text-align: left;"> <code>strtPerX</code> </td>
<td style="text-align: left;"> Coordinate of link endpoint on first patch (X)</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>startPerimY</code> </td>
<td style="text-align: left;"> <code>strtPerY</code> </td>
<td style="text-align: left;"> Coordinate of link endpoint on first patch (Y)</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>endPerimX</code> </td>
<td style="text-align: left;"> <code>endPerX</code> </td>
<td style="text-align: left;"> Coordinate of link endpoint on second patch (X)</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>endPerimY</code> </td>
<td style="text-align: left;"> <code>endPerY</code> </td>
<td style="text-align: left;"> Coordinate of link endpoint on second patch (Y)</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p><strong>Exported from <code>grain</code> objects:</strong>
</p>
<p><code style="white-space: pre;">⁠nodes, linksCentroid⁠</code> are shape files giving the locations of the
Voronoi polygon centroids and links among them respectively.
<code>voronoi</code> are rasters gives the polygon identifier of each cluster of patches.
<code>vorBound</code> gives the boundaries of the Voronoi polygons (if specified).
</p>
<p>Description of node (vertex) and link (edge) weights in <code>grain</code>
objects  and their corresponding attribute names in the shape files created.
</p>

<table>
<tr>
<td style="text-align: left;">
<strong>Type</strong> </td>
<td style="text-align: left;"> <strong>GOC name</strong> </td>
<td style="text-align: left;"> <strong>SHP name</strong> </td>
<td style="text-align: left;"> <strong>Description</strong>
</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>polygonId</code> </td>
<td style="text-align: left;"> <code>polyId</code> </td>
<td style="text-align: left;"> Polygon ID from grain voronoi raster </td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>polygonArea</code> </td>
<td style="text-align: left;"> <code>polyA</code> </td>
<td style="text-align: left;"> Area of polygon from grain voronoi raster </td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>totalPatchArea</code> </td>
<td style="text-align: left;"> <code>patchA</code> </td>
<td style="text-align: left;"> Total area of all patches in polygon</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>totalPatchEdgeArea</code> </td>
<td style="text-align: left;"> <code>patchEA</code> </td>
<td style="text-align: left;"> Total area of all patch edges in polygon</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>totalCoreArea</code> </td>
<td style="text-align: left;"> <code>coreA</code> </td>
<td style="text-align: left;"> Total area of patches in polygon excluding edges</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>centroidX</code> </td>
<td style="text-align: left;"> <code>ctrX</code> </td>
<td style="text-align: left;"> Centroid of the polygon (X)</td>
</tr>
<tr>
<td style="text-align: left;">
node </td>
<td style="text-align: left;"> <code>centroidY</code> </td>
<td style="text-align: left;"> <code>ctrY</code> </td>
<td style="text-align: left;"> Centroid of the polygon (Y)</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>e1</code> </td>
<td style="text-align: left;"> <code>e1</code> </td>
<td style="text-align: left;"> ID of first patch at end of link</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>e2</code> </td>
<td style="text-align: left;"> <code>e2</code> </td>
<td style="text-align: left;"> ID of second patch at end of link</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>maxWeight</code> </td>
<td style="text-align: left;"> <code>maxWt</code> </td>
<td style="text-align: left;"> The maximum weight of all links connecting
patches between polygons</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>linkIdMaxWeight</code> </td>
<td style="text-align: left;"> <code>maxWt</code> </td>
<td style="text-align: left;"> The link id of that maximum weight
<code>link (lcpLinkId)</code>
</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>minWeight</code> </td>
<td style="text-align: left;"> <code>min</code> </td>
<td style="text-align: left;"> The minimum weight of all links connecting
patches between polygons</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>linkIdMinWeight</code> </td>
<td style="text-align: left;"> <code>minWt</code> </td>
<td style="text-align: left;"> The link id of that minimum weight
<code>link (lcpLinkId)</code>
</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>medianWeight</code> </td>
<td style="text-align: left;"> <code>medWt</code> </td>
<td style="text-align: left;"> The median weight of all links connecting
patches between polygons</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>meanWeight</code> </td>
<td style="text-align: left;"> <code>meanWT</code> </td>
<td style="text-align: left;"> The minimum weight of all links connecting
patches between polygons</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>numlinksWeight</code> </td>
<td style="text-align: left;"> <code>numEWt</code> </td>
<td style="text-align: left;"> The number of links connecting patches
between polygons</td>
</tr>
<tr>
<td style="text-align: left;">
link </td>
<td style="text-align: left;"> <code>eucCentroidWeight</code> </td>
<td style="text-align: left;"> <code>eucCtrWt</code> </td>
<td style="text-align: left;"> The Euclidean distance between
centroids of polygons</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Paul Galpern and Alex Chubaty
</p>


<h3>See Also</h3>

<p><code>MPG()</code>, <code>GOC()</code>, <code>grain()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Load raster landscape
tiny &lt;- raster::raster(system.file("extdata/tiny.asc", package = "grainscape"))

## Create a resistance surface from a raster using an is-becomes reclassification
tinyCost &lt;- raster::reclassify(tiny, rcl = cbind(c(1, 2, 3, 4), c(1, 5, 10, 12)))
## Produce a patch-based MPG where patches are resistance features=1
tinyPatchMPG &lt;- MPG(cost = tinyCost, patch = tinyCost == 1)
## Extract a representative subset of 5 grains of connectivity
tinyPatchGOC &lt;- GOC(tinyPatchMPG, nThresh = 5)
## Export rasters and vectors and place in an R object
sp_tinyPatchGOC &lt;- export(grain(tinyPatchGOC, 2), R = TRUE)  # nolint
sp_tinyPatchMPG &lt;- export(tinyPatchMPG, R = TRUE) # nolint

## Export raster and vectors to a specified directory
exportPath &lt;- tempdir()
export(grain(tinyPatchGOC, 2), dirname = "tiny_goc_thresh2", path = exportPath)
export(tinyPatchMPG, dirname = "tiny_mpg", path = exportPath, vorBound = TRUE)

## clean up
unlink(file.path(exportPath, "tiny_goc_thresh2"), recursive = TRUE)
unlink(file.path(exportPath, "tiny_mpg"), recursive = TRUE)
</code></pre>


</div>