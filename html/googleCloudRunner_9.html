<div class="container">

<table style="width: 100%;"><tr>
<td>cr_buildstep_compute_container</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Buildstep to deploy to Google Compute Engine</h2>

<h3>Description</h3>

<p>This build step adds some helpers to cr_buildstep_gcloud for deploying to VMs to GCE that will auto create a container within them and atytach it to the disk
</p>


<h3>Usage</h3>

<pre><code class="language-R">cr_buildstep_compute_container(
  vm_name,
  container_image = "gcr.io/gcer-public/persistent-rstudio:latest",
  disk_name = paste0(vm_name, "-disk"),
  disk_mount_path = "/home",
  zone = "europe-west1-b",
  disk_size = "10GB",
  machine_type = "n1-standard-1",
  container_env = "",
  scopes = "cloud-platform",
  network = "default",
  gcloud_args = NULL
)

cr_buildstep_compute_rstudio(
  rstudio_user,
  rstudio_pw,
  vm_name = "rstudio",
  disk_name = "rstudio-disk",
  zone = "europe-west1-b",
  disk_size = "10GB",
  machine_type = "n1-standard-1",
  container_image = "gcr.io/gcer-public/persistent-rstudio:latest",
  network = "default"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vm_name</code></td>
<td>
<p>Name of the VM you will create</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>container_image</code></td>
<td>
<p>The Docker image that will be launched in the VM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disk_name</code></td>
<td>
<p>Name of the disk that will be attached to the VM's container image</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disk_mount_path</code></td>
<td>
<p>Where the disk will be attached to the container in the VM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zone</code></td>
<td>
<p>Which zone the VM will launch within</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disk_size</code></td>
<td>
<p>The size of the disk</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>machine_type</code></td>
<td>
<p>The type of VM that will be launched</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>container_env</code></td>
<td>
<p>Environment variables set within the VM's container image</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scopes</code></td>
<td>
<p>The GCE scopes that the VM will be launched with permission to use</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>network</code></td>
<td>
<p>The network the VM will use.  The container will bridge into the same network</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcloud_args</code></td>
<td>
<p>Other gcloud arguments you send in e.g. <code>c("--boot-disk-device-name=boot-disk1","--boot-disk-size=10GB")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rstudio_user</code></td>
<td>
<p>The usename for the RStudio image the VM will launch</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rstudio_pw</code></td>
<td>
<p>The password for the RStudio image the VM will launch</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
bs &lt;- cr_buildstep_compute_rstudio("mark", "securepassword1234")
build &lt;- cr_build_yaml(bs)
build
## Not run: 

cr_build(build)

## End(Not run)
</code></pre>


</div>