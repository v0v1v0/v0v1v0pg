<div class="container">

<table style="width: 100%;"><tr>
<td>add_legend</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a vega legend specification to a ggvis plot</h2>

<h3>Description</h3>

<p>Axis specifications allow you to either override the default legends,
or supply additional legends.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_legend(
  vis,
  scales = NULL,
  orient = "right",
  title = NULL,
  format = NULL,
  values = NULL,
  properties = NULL
)

hide_legend(vis, scales)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vis</code></td>
<td>
<p>A ggvis object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scales</code></td>
<td>
<p>The name of one or more scales for which to add a legend.
Typically one of "size", "shape", "fill", "stroke", although custom scale
names may also be used. Multiple names can also be used, like
<code>c("fill", "shape")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>orient</code></td>
<td>
<p>The orientation of the legend. One of "left" or "right". This
determines how the legend is positioned within the scene. The default is
"right".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>A title for the legend. By default, it uses the name the fields
used in the legend. Use <code>""</code> to suppress the title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>The formatting pattern for axis labels. Vega uses D3's format
pattern.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>Explicitly set the visible legend values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>properties</code></td>
<td>
<p>Optional mark property definitions for custom legend
styling. Should be an object created by <code>legend_props</code>, with
properties for title, label, symbols, gradient, legend.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>More information about axes can be found in the "axes and legends" vignettes.
</p>


<h3>Compared to ggplot2</h3>

<p>In ggplot2, legend (and axis) properties are part of the scales
specification. In vega, they are separate, which allows the specification
of multiple legends, and more flexible linkage between scales and legends.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  add_legend("fill", title = "Cylinders")

# Suppress legend with hide_legend
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  hide_legend("fill")

# Combining two properties in one legend
mtcars %&gt;%
  ggvis(x = ~wt, y = ~mpg, fill = ~factor(cyl), shape = ~factor(cyl)) %&gt;%
  layer_points() %&gt;%
  add_legend(c("fill", "shape"))

# Control legend properties with a continuous legend, with x and y position
# in pixels.
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  add_legend("fill", title = "Cylinders",
    properties = legend_props(
      title = list(fontSize = 16),
      labels = list(fontSize = 12, fill = "#00F"),
      gradient = list(stroke = "red", strokeWidth = 2),
      legend = list(x = 500, y = 50)
    )
  )

# Control legend properties with a categorical legend, with x and y position
# in the scaled data space.
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~factor(cyl)) %&gt;%
  layer_points() %&gt;%
  add_legend("fill", title = "Cylinders",
    properties = legend_props(
      title = list(fontSize = 16),
      labels = list(fontSize = 14, dx = 5),
      symbol = list(stroke = "black", strokeWidth = 2,
        shape = "square", size = 200),
      legend = list(
        x = scaled_value("x", 4.5),
        y = scaled_value("y", 30)
      )
    )
  )

# Control legend position using x_rel and y_rel which specify relative
# position, going from 0 to 1. (0, 0) is the bottom-left corner, and
# (1, 1) is the upper-right corner. The values control the position of
# the upper-left corner of the legend.
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  add_relative_scales() %&gt;%
  add_legend("fill", title = "Cylinders",
    properties = legend_props(
      legend = list(
        x = scaled_value("x_rel", 0.8),
        y = scaled_value("y_rel", 1)
      )
    )
  )
</code></pre>


</div>