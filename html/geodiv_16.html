<div class="container">

<table style="width: 100%;"><tr>
<td>focal_metrics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Texture Metrics per Pixel</h2>

<h3>Description</h3>

<p>Calculates the various texture metrics over windows centered
on individual pixels. This creates a continuous surface of the
texture metric.
This function is a modified version of the <code>window_lsm</code> function from the
<em>landscapemetrics</em> package (Hesselbarth et al. 2019).
</p>


<h3>Usage</h3>

<pre><code class="language-R">focal_metrics(x, window, metrics, progress, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A raster or matrix. Image over which to apply focal window calculations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>Matrix. The focal window used to create the image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>List. List of metrics to apply. Function names must be strings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical. Display progress through metrics list?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments for the metric functions. All applicable arguments
will be applied to the entire list of metrics.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Metrics available from geodiv package:
</p>

<ol>
<li>
<p><code>'sa'</code>: average surface roughness
</p>
</li>
<li>
<p><code>'sq'</code>: root mean square roughness
</p>
</li>
<li>
<p><code>'s10z'</code>: ten-point height
</p>
</li>
<li>
<p><code>'sdq'</code>: root mean square slope of surface, 2-point method
</p>
</li>
<li>
<p><code>'sdq6'</code>: root mean square slope of surface, 7-point method
</p>
</li>
<li>
<p><code>'sdr'</code>: surface area ratio
</p>
</li>
<li>
<p><code>'sbi'</code>: surface bearing index
</p>
</li>
<li>
<p><code>'sci'</code>: core fluid retention index
</p>
</li>
<li>
<p><code>'ssk'</code>: skewness
</p>
</li>
<li>
<p><code>'sku'</code>: kurtosis
</p>
</li>
<li>
<p><code>'sds'</code>: summit density
</p>
</li>
<li>
<p><code>'sfd'</code>: 3d fractal dimension
</p>
</li>
<li>
<p><code>'srw'</code>: dominant radial wavelength, radial wavelength index, mean half wavelength
</p>
</li>
<li>
<p><code>'std'</code>: angle of dominating texture, texture direction index
</p>
</li>
<li>
<p><code>'svi'</code>: valley fluid retention index
</p>
</li>
<li>
<p><code>'stxr'</code>: texture aspect ratio
</p>
</li>
<li>
<p><code>'ssc'</code>: mean summit curvature
</p>
</li>
<li>
<p><code>'sv'</code>: maximum valley depth
</p>
</li>
<li>
<p><code>'sph'</code>: maximum peak height
</p>
</li>
<li>
<p><code>'sk'</code>: core roughness depth
</p>
</li>
<li>
<p><code>'smean'</code>: mean peak height
</p>
</li>
<li>
<p><code>'svk'</code>: reduced valley depth
</p>
</li>
<li>
<p><code>'spk'</code>: reduced peak height
</p>
</li>
<li>
<p><code>'scl'</code>: correlation length
</p>
</li>
<li>
<p><code>'sdc'</code>: bearing area curve height interval
</p>
</li>
</ol>
<h3>Value</h3>

<p>A raster of the metric calculated in windows over the raster or matrix.
If the input was a matrix, the function will return a raster with an extent of [0, 1, 0, 1].
</p>


<h3>References</h3>


<ol><li>
<p>Hesselbarth, M.H.K., Sciaini, M., With, K.A., Wiegand, K., Nowosad, J. 2019.
landscapemetrics: an open-source R tool to calculate landscape metrics. - Ecography 42:1648-1657(ver. 0).
</p>
</li></ol>
<h3>Examples</h3>

<pre><code class="language-R"># import raster image
data(normforest)
normforest &lt;- terra::unwrap(normforest)

# crop raster to smaller area
x &lt;- terra::crop(normforest, terra::ext(normforest[1:100, 1:100, drop = FALSE]))

# get a surface of root mean square roughness
sa_img &lt;- focal_metrics(x = x, window = matrix(1, 5, 5),
                        metrics = list('sa'), progress = TRUE)

# plot the result
terra::plot(sa_img$sa)
</code></pre>


</div>