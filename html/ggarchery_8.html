<div class="container">

<table style="width: 100%;"><tr>
<td>position_attractsegment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Nudge points towards each other along a line</h2>

<h3>Description</h3>

<p>This position function is primarily intended for use with <code>ggplot2::geom_segment()</code> or  <code>geom_arrowsegment()</code>,
and solves the problem that the user may, for reasons of clarity or aesthetics, not want their arrows to actually
start or end at the position that they are "pointing from" or "pointing to". It works by shifting the points towards
each other along the line joining them, by either a proportional amount or a fixed distance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">position_attractsegment(
  start_shave = 0,
  end_shave = 0,
  type_shave = c("proportion", "distance")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>start_shave, end_shave</code></td>
<td>
<p>The amount of distance to "shave" off the line between (<code>x</code>, <code>y</code>) and (<code>xend</code>, <code>yend</code>),
at, respectively, the start and the end. Can be zero; cannot be negative. Units are determined by <code>type_shave</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type_shave</code></td>
<td>
<p>If <code>"proportion"</code> (the default) then this is a proportion of the total line length. If "distance"
then it is instead the raw distance along the line. The is only really recommended in combination with
<code>ggplot2::coord_fixed()</code>; results can be quite odd otherwise.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A ggproto object
</p>


<h3>Examples</h3>

<pre><code class="language-R">
 library(ggplot2)
 library(magrittr)
 library(tidyr)

 # Generate some dummy data

 ten.points &lt;- data.frame(line.no = rep(1:5, each = 2), x = runif(10), y = runif(10),
                          position = rep(c("start", "end"), 5))
 five.segments &lt;- ten.points %&gt;% pivot_wider(names_from = position, values_from = c(x,y))

 # Ten percent off the start and end

 ggplot(five.segments) +
   geom_point(data = ten.points, aes(x = x, y = y)) +
   geom_arrowsegment(aes(x = x_start, xend = x_end, y = y_start, yend = y_end),
                     position = position_attractsegment(start_shave = 0.1, end_shave = 0.1))

 # Absolute distance of 0.02 at the end only

 ggplot(five.segments) +
   geom_point(data = ten.points, aes(x = x, y = y)) +
   geom_arrowsegment(aes(x = x_start, xend = x_end, y = y_start, yend = y_end),
                     position = position_attractsegment(end_shave = 0.02,
                                                        type_shave = "distance")) +
   coord_fixed()
</code></pre>


</div>