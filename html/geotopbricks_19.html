<div class="container">

<table style="width: 100%;"><tr>
<td>get.geotop.inpts.keyword.value</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Importing a GEOtop Keyword and its Value into R</h2>

<h3>Description</h3>

<p>It returns the values of a keyword of "geotop.inpts" file or data frame with the suitable format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get.geotop.inpts.keyword.value(
  keyword,
  inpts.frame = NULL,
  vector_sep = NULL,
  col_sep = ",",
  numeric = FALSE,
  format = "%d/%m/%Y %H:%M",
  date = FALSE,
  tz = "Etc/GMT-1",
  raster = FALSE,
  file_extension = ".asc",
  add_wpath = FALSE,
  wpath = NULL,
  use.read.raster.from.url = TRUE,
  data.frame = FALSE,
  formatter = "%04d",
  level = 1,
  date_field = "Date",
  isNA = -9999,
  matlab.syntax = TRUE,
  projfile = "geotop.proj",
  start_date = NULL,
  end_date = NULL,
  ContinuousRecovery = 0,
  ContinuousRecoveryFormatter = "_crec%04d",
  zlayer.formatter = NULL,
  z_unit = c("centimeters", "millimeters"),
  geotop_z_unit = "millimeters",
  add_suffix_dir = NULL,
  MAXNROW = 4,
  header.only = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>keyword</code></td>
<td>
<p>keyword name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inpts.frame</code></td>
<td>
<p>data frame returned by <code>declared.geotop.inpts.keywords</code> or <code>NULL</code>. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vector_sep</code></td>
<td>
<p>character value for the separator character if Keyword Value must be returned as a vector, otherwise it is <code>NULL</code>. Default is <code>NULL</code>, but if <code>numeric</code> or <code>date</code> are <code>FALSE</code>,  <code>vector_sep</code> is set <code>","</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_sep</code></td>
<td>
<p>character value for the separator character of columuns. It is used if Keyword Value is returned as a data frema or  zoo object or list of these objects. Default is <code>NULL</code>, but is set <code>","</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numeric</code></td>
<td>
<p>logical value. If <code>TRUE</code> the Value has numeric type, otherwise it is a string or string vector. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>string format representing the date, see <code>as.POSIXlt</code>, used if <code>date</code> is <code>TRUE</code>. Default is <code>"%d/%m/%Y %H:%M"</code> (which is the format used in <code>geotop.inpts</code> keyword <code>InitDateDDMMYYYYhhmm</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date</code></td>
<td>
<p>logical value. If <code>TRUE</code> the Value is retured as <code>POSIXlt</code> date, otherwise it is a string or string vector. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>format string representing the time zone, see <code>as.POSIXlt</code>, used if <code>date</code> is <code>TRUE</code>. Default is <code>"Etc/GMT-1"</code> (until the previous version it was <code>"A"</code>) which meens UTC +1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raster</code></td>
<td>
<p>logical value. Default is <code>FALSE</code>. If <code>TRUE</code> function returns direclty the raster map as <code>Raster-class</code> object built with <code>raster</code> method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_extension</code></td>
<td>
<p>Extension to be added to the keyword if keyword is a file name. Default is <code>".asc"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_wpath</code></td>
<td>
<p>logical value. Default is <code>FALSE</code>. If <code>TRUE</code>, the <code>wpath</code> string is attached to the keyword string value. It is automatically set <code>TRUE</code> if <code>raster</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wpath</code></td>
<td>
<p>working directory containing GEOtop files (included the inpts file). It is mandatory if <code>raster</code> is <code>TRUE</code>. See <code>declared.geotop.inpts.keywords</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.read.raster.from.url</code></td>
<td>
<p>logical value. Default is <code>TRUE</code>. If <code>TRUE</code> the RasterLayer are read with <code>read.raster.from.url</code>, istead of <code>raster</code> (otherwise). It is recomended in case the files whose paths are contained in <code>x</code> are remote and are 'http' addresses. In this cases the stand-alone method <code>raster(x)</code> does not always work and <code>use.read.raster.from.url</code> is necessary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.frame</code></td>
<td>
<p>logical value. It is an option for tabular data. If <code>TRUE</code> function returns direclty a data frame  or a list of  data frames as <code>data.frame</code> or <code>zoo</code> objects imported from the keyword-related files  using <code>read.table</code> function. In this case the argument <code>wpath</code> (see <code>declared.geotop.inpts.keywords</code>) is mandatory. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formatter</code></td>
<td>
<p>string value. It is the decimal formatter contained in the file name and used in case the tabular data are referred at several points. Default is <code>"%04d"</code> . It is used in case <code>data.frame</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>integer values. Numbers incating all the identandification numbers of the files containing the requested data frames. Default is 1, correspondig to the decimal formatter <code>"0001"</code>. See examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_field</code></td>
<td>
<p>string value. Default is "Date", otherwise defined by the value of <code>HeaderDateDDMMYYYYhhmmMeteo</code> geotop keyword. It is used only if the argument <code>data.frame</code> is <code>TRUE</code>. If it is <code>NULL</code> or <code>NA</code> the function return a list of generic <code>data.frame</code> object(s), otherwise <code>link{zoo}</code> object(s). See the arguments <code>tz</code> and <code>format</code> for Date formatting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isNA</code></td>
<td>
<p>numeric value indicating NA in geotop ascii files. Default is -9999.00</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matlab.syntax</code></td>
<td>
<p>logical value. Default is <code>FALSE</code>. If <code>TRUE</code> a vector is written in a string according to *.m file syntax. Warning: this synstax is not read by GEOtop.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projfile</code></td>
<td>
<p>fileneme of the GEOtop projection file. Default is <code>geotop.proj</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date, end_date</code></td>
<td>
<p>null objects or dates in <code>POSIXlt</code> format between which the variables are returned. It is enabled in case that <code>date_field</code> is not <code>NULL</code> or <code>NA</code> and <code>data.frame</code> is <code>TRUE</code>. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ContinuousRecovery</code></td>
<td>
<p>integer value. Default is 0. It is used for tabular output data and is the number of times GEOtop simulation broke  during its running and was re-launched with 'Contiuous Recovery' option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ContinuousRecoveryFormatter</code></td>
<td>
<p>character string. Default is <code>'_crec%04d'</code>. It is used only for tabular output data and if <code>ContinuousRecovery</code> is equal or greater than 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zlayer.formatter</code></td>
<td>
<p>decimal formatter. It is used if <code>data.frame==TRUE</code> and the columns refers to different soil depths. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z_unit</code></td>
<td>
<p>z coordinate measurement unit. GEOtop values expressed in millimeters which are converted to centimeters by default. Default is <code>c("centimeters","millimeters")</code>. Otherwise can be the ratio between the unit and one meter. It is used if <code>zlayer.formatter=="z%04d"</code> or similar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geotop_z_unit</code></td>
<td>
<p>z coordinate measurement unit used by GEOtop. Default is <code>millimeters</code>. It is used if <code>zlayer.formatter=="z%04d"</code> or similar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_suffix_dir</code></td>
<td>
<p>character string. Add a suffix at the directory reported in the keyword value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAXNROW</code></td>
<td>
<p>maximum number accepted for <code>data.frema</code> output. Default is 4. It is used in case of <code>data.frame==TRUE</code>. In case the number of records in the function output is less than <code>MAXNROW</code> , function returns neither <code>data.frame</code> nor <code>zoo</code> objects but only the keyword value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header.only</code></td>
<td>
<p>logical value. Default is <code>FALSE</code>. If it is <code>TRUE</code> and <code>data.frame==TRUE</code>, only file hedaer  with variable names is returned by the function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments of <code>declared.geotop.inpts.keywords</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the keyword value
</p>


<h3>Note</h3>

<p>If <code>inpts.frame</code> is <code>NULL</code>, <code>inpts.frame</code> will be obtained by calling the function <code>declared.geotop.inpts.keywords</code> with <code>...</code> arguments.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(geotopbricks)

#Simulation working path
 


wpath &lt;- 
'https://raw.githubusercontent.com/ecor/geotopbricks_doc/master/simulations/panola13_run2xC_test3'
## URL path (RAW VERSION) of
## https://github.com/ecor/geotopbricks_doc/tree/master/simulations/panola13_run2xC_test3
prefix &lt;- get.geotop.inpts.keyword.value("SoilLiqWaterPressTensorFile",wpath=wpath)

slope &lt;- get.geotop.inpts.keyword.value("SlopeMapFile",raster=TRUE,wpath=wpath) 
bedrock_depth &lt;- get.geotop.inpts.keyword.value("BedrockDepthMapFile",raster=TRUE,wpath=wpath) 

layers &lt;- get.geotop.inpts.keyword.value("SoilLayerThicknesses",numeric=TRUE,wpath=wpath)
names(layers) &lt;- paste("L",1:length(layers),sep="")

##### set van genuchten parameters to estimate water volume 
theta_sat &lt;- get.geotop.inpts.keyword.value("ThetaSat",numeric=TRUE,wpath=wpath)
theta_res &lt;- get.geotop.inpts.keyword.value("ThetaRes",numeric=TRUE,wpath=wpath)
alphaVG &lt;-  get.geotop.inpts.keyword.value("AlphaVanGenuchten",
numeric=TRUE,wpath=wpath) # expressed in mm^-1

nVG &lt;-  get.geotop.inpts.keyword.value("NVanGenuchten",numeric=TRUE,wpath=wpath) 


##### end set van genuchten parameters to estimate water volume


##### set meteo data


tz &lt;- "Etc/GMT-1"  ## See help(timezones) In particular:
## Most platforms support time zones of the form Etc/GMT+n 
## and Etc/GMT-n (possibly also without prefix Etc/), 
## which assume a fixed offset from UTC (hence no DST). 
## Contrary to some expectations 
## (but consistent with names such as PST8PDT), negative offsets are times ahead of (east of) UTC, 
## positive offsets are times behind (west of) UTC.
start &lt;-  get.geotop.inpts.keyword.value("InitDateDDMMYYYYhhmm",
date=TRUE,wpath=wpath,tz=tz) 
end &lt;- get.geotop.inpts.keyword.value("EndDateDDMMYYYYhhmm",
date=TRUE,wpath=wpath,tz=tz) 

nmeteo &lt;- get.geotop.inpts.keyword.value("NumberOfMeteoStations",
numeric=TRUE,wpath=wpath)
level &lt;- 1:nmeteo

## set meteo data

 meteo &lt;- get.geotop.inpts.keyword.value("MeteoFile",wpath=wpath,data.frame=TRUE,
       level=level,start_date=start,end_date=end,tz=tz)


##### end set meteo data

## IMPORTING AN OUTPUT SOIL MOISTURE PROFILE: 


wpath &lt;-  paste0(
'https://raw.githubusercontent.com/ecor/geotopbricks_doc/',
'master/simulations/Muntatschini_pnt_1_225_B2_004')
## URL Path (RAW VERSION) of 
## https://github.com/ecor/geotopbricks_doc/tree/master/simulations/Muntatschini_pnt_1_225_B2_004

	SMC  &lt;- get.geotop.inpts.keyword.value("SoilLiqContentProfileFile",
          wpath=wpath,data.frame=TRUE,date_field="Date12.DDMMYYYYhhmm.",
          formatter="%04d")

    SMCz  &lt;- get.geotop.inpts.keyword.value("SoilLiqContentProfileFile",
         wpath=wpath,data.frame=TRUE,date_field="Date12.DDMMYYYYhhmm.",
          formatter="%04d",zlayer.formatter="z%04d")



		




</code></pre>


</div>