<div class="container">

<table style="width: 100%;"><tr>
<td>init</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Initialize an Object of Class <code>GCPM</code> 
</h2>

<h3>Description</h3>

<p>The function helps to create a new object of class <code>GCPM</code>. The arguments 
of the function are passed to the object after performing some plausibility checks.
</p>


<h3>Usage</h3>

<pre><code class="language-R">init(model.type = "CRP", link.function = "CRP", N, seed,
loss.unit, alpha.max = 0.9999, loss.thr = Inf, sec.var,
random.numbers = matrix(), LHR, max.entries=1e3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.type</code></td>
<td>
<p>Character value, specifying the model type. One can choose
between “simulative” and “CRP” which corresponds to the
analytical version of the CreditRisk+ model (see First Boston Financial
Products, 1997)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link.function</code></td>
<td>

<p>character value, specifying the type of the link function. One can choose
between “CRP”, which corresponds to <code class="reqn">\overline{PD}=PD\cdot (w^Tx)</code>
and “CM” which corresponds to
<code class="reqn">\overline{PD}=\Phi\left(\frac{\Phi^{-1}PD-w^Tx}{\sqrt{1-w^T\Sigma w}}\right)</code>,
where PD is the original PD from portfolio data, x is the vector of sector
drawings, <code class="reqn">\Phi</code> is the CDF of the standard normal distribution, w is the
vector of sector weights given in the portfolio data and <code class="reqn">\Sigma</code> is the
correlation matrix of the sector variables estimated from <code>random.numbers</code>.
“CRP” will be used automatically if <code>model.type</code> == "CRP".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>

<p>numeric value, defining the number of simulations if
<code>model.type</code> == "simulative". If <code>N</code> is greater than the number of
scenarios provided via <code>random.numbers</code>, scenarios are reused.
This parameter is used only if <code>model.type</code> == "simulative".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>

<p>numeric value used to initialize the random number generator. If <code>seed</code> is 
not provided a value based on current system time will be used. This parameter 
is used only if <code>model.type</code> == "simulative".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loss.unit</code></td>
<td>

<p>numeric positive value used to discretize potential losses.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha.max</code></td>
<td>

<p>numeric value between 0 and 1 defining the maximum CDF-level which will be
computed in case of an analytical CreditRisk+ type model.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loss.thr</code></td>
<td>

<p>numeric value specifying a lower bound for portfolio losses to be stored in
order to derive risk contributions on counterparty level. Using a lower value
needs a lot of memory but will be necessary in order to calculate risk
contributions on lower CDF levels. This parameter is used only if
<code>model.type</code> == "simulative".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sec.var</code></td>
<td>

<p>named numeric vector defining the sector variances in case of a CreditRisk+
type model. The names have to correspond to the sector names given in the
portfolio. This parameter is used only if <code>model.type</code> == "CRP".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random.numbers</code></td>
<td>

<p>matrix with sector drawings. The columns represent the sectors,
whereas the rows represent the scenarios (number of different simulations).
The column names must correspond to the names used in the portfolio data
(see <code>analyze</code>) and to the names of <code>sec.var</code> if
<code>model.type</code> == "CRP". This parameter is used only if
<code>model.type</code> == "simulative".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LHR</code></td>
<td>

<p>numeric vector of length equal to <code>nrow(random.numbers)</code> defining the
likelihood ratio of each scenario. If not provided, all scenarios are assumed
to be equally likely.  This parameter is used only if
<code>model.type</code> == "simulative".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.entries</code></td>
<td>

<p>numeric value defining the maximum number of loss scenarios stored to
calculate risk contributions.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>object of class <code>GCPM</code>
</p>


<h3>Author(s)</h3>

<p>Kevin Jakob
</p>


<h3>References</h3>

<p>Jakob, K. &amp; Fischer, M. "GCPM: A flexible package to explore credit portfolio risk" Austrian Journal of Statistics 45.1 (2016): 25:44<br>
Morgan, J. P. "CreditMetrics-technical document." JP Morgan, New York, 1997<br> 
First Boston Financial Products, "CreditRisk+", 1997 <br>
Gundlach &amp; Lehrbass, "CreditRisk+ in the Banking Industry", Springer, 2003<br></p>


<h3>See Also</h3>

<p><code>GCPM</code>, <code>GCPM-class</code>, <code>analyze</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#create a random portfolio with NC counterparties
NC=100
#assign business lines and countries randomly
business.lines=c("A","B","C")
CP.business=business.lines[ceiling(runif(NC,0,length(business.lines)))] 
countries=c("A","B","C","D","E")
CP.country=countries[ceiling(runif(NC,0,length(countries)))]

#create matrix with sector weights (CreditRisk+ setting)
#according to business lines
NS=length(business.lines)
W=matrix(0,nrow = NC,ncol = length(business.lines),
dimnames = list(1:NC,business.lines)) 
for(i in 1:NC){W[i,CP.business[i]]=1}

#create portfolio data frame
portfolio=data.frame(Number=1:NC,Name=paste("Name ",1:NC),Business=CP.business,
                     Country=CP.country,EAD=runif(NC,1e3,1e6),LGD=runif(NC),
                     PD=runif(NC,0,0.3),Default=rep("Bernoulli",NC),W)

#draw sector variances randomly
sec.var=runif(NS,0.5,1.5)
names(sec.var)=business.lines

#draw N sector realizations (independent gamma distributed sectors)
N=5e4
random.numbers=matrix(NA,ncol=NS,nrow=N,dimnames=list(1:N,business.lines))
for(i in 1:NS){
random.numbers[,i]=rgamma(N,shape = 1/sec.var[i],scale=sec.var[i])}

#create a portfolio model and analyze the portfolio
TestModel=init(model.type = "simulative",link.function = "CRP",N = N,
loss.unit = 1e3, random.numbers = random.numbers,LHR=rep(1,N),loss.thr=5e6,
max.entries=2e4)
TestModel=analyze(TestModel,portfolio)

#plot of pdf of portfolio loss (in million) with indicators for EL, VaR and ES
alpha=c(0.995,0.999)
plot(TestModel,1e6,alpha=alpha)

#calculate portfolio VaR and ES
VaR=VaR(TestModel,alpha)
ES=ES(TestModel,alpha)

#Calculate risk contributions to VaR and ES 
risk.cont=cbind(VaR.cont(TestModel,alpha = alpha),
ES.cont(TestModel,alpha = alpha))
</code></pre>


</div>