<div class="container">

<table style="width: 100%;"><tr>
<td>mtc.run</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Running an <code>mtc.model</code> using an MCMC sampler</h2>

<h3>Description</h3>

<p>The function <code>mtc.run</code> is used to generate samples from a object of type <code>mtc.model</code> using a MCMC sampler.
The resulting <code>mtc.result</code> object can be coerced to an <code>mcmc.list</code> for further analysis of the dataset using the <code>coda</code> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mtc.run(model, sampler = NA, n.adapt = 5000, n.iter = 20000, thin = 1)

## S3 method for class 'mtc.result'
summary(object, ...)
## S3 method for class 'mtc.result'
plot(x, ...)
## S3 method for class 'mtc.result'
forest(x, use.description=FALSE, ...)
## S3 method for class 'mtc.result'
print(x, ...)
## S3 method for class 'mtc.result'
as.mcmc.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An object of S3 class <code>mtc.model</code> describing a network meta-analysis model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampler</code></td>
<td>
<p>Deprecated: gemtc now only supports the JAGS sampler. Specifying a sampler will result in a warning or error. This argument will be removed in future versions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.adapt</code></td>
<td>
<p>Amount of adaptation (or tuning) iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.iter</code></td>
<td>
<p>Amount of simulation iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thin</code></td>
<td>
<p>Thinning factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Object of S3 class <code>mtc.result</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object of S3 class <code>mtc.result</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.description</code></td>
<td>
<p>Display treatment descriptions instead of treatment IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>mtc.result</code>. This is a list with the following elements: 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>samples</code></td>
<td>
<p>The samples resulting from running the MCMC model, in <code>mcmc.list</code> format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>The <code>mtc.model</code> used to produce the samples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deviance</code></td>
<td>
<p>Residual deviance statistics, a list with the following elements. <code>DIC</code>: deviance information criterion at residual (Dbar + pD). <code>Dbar</code>: mean sum of residual deviance. <code>pD</code>: sum of leverage, also known as the effective number of parameters. <code>dev.ab</code>: mean posterior residual deviance of each arm (for arm-based data). <code>fit.ab</code>: deviance at the posterior mean of te fitted values (for arm-based data). <code>dev.re</code>: mean posterior residual deviance of each study (for relative-effect data). <code>fit.re</code>: deviance at the posterior mean of the fitted values (for relative-effect data).</p>
</td>
</tr>
</table>
<p>The object can be coerced to an <code>mcmc.list</code> from the <code>coda</code> package by the generic S3 method <code>as.mcmc.list</code>.
</p>


<h3>Analysis of the results</h3>

<p>Convergence of the model can be assessed using methods from the <code>coda</code> package.
For example the Brooks-Gelman-Rubin method (<code>coda::gelman.diag</code>, <code>coda::gelman.plot</code>).
The <code>summary</code> also provides useful information, such as the MCMC error and the time series and densities given by <code>plot</code> should also be inspected.
</p>
<p>The <code>forest</code> function can provide forest plots for <code>mtc.result</code> objects.
This is especially useful in combination with the <code>relative.effect</code> function that can be used to calculate relative effects compared to any baseline for consistency models.
The <code>rank.probability</code> function calculates rank probabilities for consistency models.
</p>


<h3>Author(s)</h3>

<p>Gert van Valkenhoef, JoÃ«l Kuiper</p>


<h3>See Also</h3>

<p><code>mtc.model</code>
</p>
<p><code>relative.effect.table</code>,
<code>relative.effect</code>,
<code>rank.probability</code>
</p>
<p><code>coda::gelman.diag</code>,
<code>coda::gelman.plot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">model &lt;- mtc.model(smoking)

## Not run: results &lt;- mtc.run(model, thin=10)
results &lt;- readRDS(system.file("extdata/luades-smoking-samples.rds", package="gemtc"))

# Convergence diagnostics
gelman.plot(results)

# Posterior summaries
summary(results)
## Iterations = 5010:25000
## Thinning interval = 10 
## Number of chains = 4 
## Sample size per chain = 2000 
## 
## 1. Empirical mean and standard deviation for each variable,
##    plus standard error of the mean:
## 
##         Mean     SD Naive SE Time-series SE
## d.A.B 0.4965 0.4081 0.004563       0.004989
## d.A.C 0.8359 0.2433 0.002720       0.003147
## d.A.D 1.1088 0.4355 0.004869       0.005280
## sd.d  0.8465 0.1913 0.002139       0.002965
## 
## 2. Quantiles for each variable:
## 
##          2.5%    25%    50%    75% 97.5%
## d.A.B -0.2985 0.2312 0.4910 0.7530 1.341
## d.A.C  0.3878 0.6720 0.8273 0.9867 1.353
## d.A.D  0.2692 0.8197 1.0983 1.3824 2.006
## sd.d   0.5509 0.7119 0.8180 0.9542 1.283

plot(results) # Shows time-series and density plots of the samples
forest(results) # Shows a forest plot
</code></pre>


</div>