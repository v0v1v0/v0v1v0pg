<div class="container">

<table style="width: 100%;"><tr>
<td>rbga.bin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R Based Genetic Algorithm (binary chromosome)</h2>

<h3>Description</h3>

<p>A R based genetic algorithm that optimizes, using a user set evaluation
function, a binary chromosome which can be used for variable selection.
The optimum is the chromosome for which the evaluation value is minimal.
</p>
<p>It requires a <code>evalFunc</code> method to be supplied that takes as argument
the binary chromosome, a vector of zeros and ones. 
Additionally, the GA optimization can be monitored by setting a 
<code>monitorFunc</code> that takes a <code>rbga</code> object as argument.
</p>
<p>Results can be visualized with <code>plot.rbga</code> and summarized with
<code>summary.rbga</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rbga.bin(size=10,
         suggestions=NULL,
         popSize=200, iters=100, 
         mutationChance=NA,
         elitism=NA, zeroToOneRatio=10,
         monitorFunc=NULL, evalFunc=NULL,
         showSettings=FALSE, verbose=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>the number of genes in the chromosome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popSize</code></td>
<td>
<p>the population size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters</code></td>
<td>
<p>the number of iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mutationChance</code></td>
<td>
<p>the chance that a gene in the chromosome mutates. By default 1/(size+1).
It affects the convergence rate and the probing of search space: a low chance results
in quicker convergence, while a high chance increases the span of the search space.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elitism</code></td>
<td>
<p>the number of chromosomes that are kept into the next generation.
By default is about 20% of the population size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zeroToOneRatio</code></td>
<td>
<p>the change for a zero for mutations and initialization. This option is used
to control the number of set genes in the chromosome. For example, when doing variable
selectionm this parameter should be set high to </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>monitorFunc</code></td>
<td>
<p>Method run after each generation to allow monitoring of the
optimization</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>evalFunc</code></td>
<td>
<p>User supplied method to calculate the evaluation function for
the given chromosome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showSettings</code></td>
<td>
<p>if true the settings will be printed to screen. By default False.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>if true the algorithm will be more verbose. By default False.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suggestions</code></td>
<td>
<p>optional list of suggested chromosomes</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>C.B. Lucasius and G. Kateman (1993).
Understanding and using genetic algorithms - Part 1. Concepts, properties and context.
<em>Chemometrics and Intelligent Laboratory Systems 19:1-33</em>.
</p>
<p>C.B. Lucasius and G. Kateman (1994).
Understanding and using genetic algorithms - Part 2. Representation, configuration and hybridization.
<em>Chemometrics and Intelligent Laboratory Systems 25:99-145</em>.
</p>


<h3>See Also</h3>

<p><code>rbga</code>
<code>plot.rbga</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># a very simplistic optimization
evaluate &lt;- function(string=c()) {
    returnVal = 1 / sum(string);
    returnVal
}

rbga.results = rbga.bin(size=10, mutationChance=0.01, zeroToOneRatio=0.5,
    evalFunc=evaluate)

plot(rbga.results)

# in this example the four variables in the IRIS data 
# set are complemented with 36 random variables. 
# Variable selection should find the four original
# variables back (example by Ron Wehrens).
## Not run: 
data(iris)
library(MASS)
X &lt;- cbind(scale(iris[,1:4]), matrix(rnorm(36*150), 150, 36))
Y &lt;- iris[,5]

iris.evaluate &lt;- function(indices) {
  result = 1
  if (sum(indices) &gt; 2) {
    huhn &lt;- lda(X[,indices==1], Y, CV=TRUE)$posterior
    result = sum(Y != dimnames(huhn)[[2]][apply(huhn, 1,
               function(x)
               which(x == max(x)))]) / length(Y)
  }
  result
}

monitor &lt;- function(obj) {
    minEval = min(obj$evaluations);
    plot(obj, type="hist");
}

woppa &lt;- rbga.bin(size=40, mutationChance=0.05, zeroToOneRatio=10,
  evalFunc=iris.evaluate, verbose=TRUE, monitorFunc=monitor)

## End(Not run)

# another realistic example: wavelenght selection for PLS on NIR data
## Not run: 
library(pls.pcr)
data(NIR)

numberOfWavelenghts = ncol(NIR$Xtrain)
evaluateNIR &lt;- function(chromosome=c()) {
    returnVal = 100
    minLV = 2
    if (sum(chromosome) &lt; minLV) {
        returnVal
    } else {
        xtrain = NIR$Xtrain[,chromosome == 1];
        pls.model = pls(xtrain, NIR$Ytrain, validation="CV", grpsize=1, 
                        ncomp=2:min(10,sum(chromosome)))
        returnVal = pls.model$val$RMS[pls.model$val$nLV-(minLV-1)]
        returnVal
    }
}

monitor &lt;- function(obj) {
    minEval = min(obj$evaluations);
    filter = obj$evaluations == minEval;
    bestObjectCount = sum(rep(1, obj$popSize)[filter]);
    # ok, deal with the situation that more than one object is best
    if (bestObjectCount &gt; 1) {
        bestSolution = obj$population[filter,][1,];
    } else {
        bestSolution = obj$population[filter,];
    }
    outputBest = paste(obj$iter, " #selected=", sum(bestSolution),
                       " Best (Error=", minEval, "): ", sep="");
    for (var in 1:length(bestSolution)) {
        outputBest = paste(outputBest,
            bestSolution[var], " ",
            sep="");
    }
    outputBest = paste(outputBest, "\n", sep="");

    cat(outputBest);
}

nir.results = rbga.bin(size=numberOfWavelenghts, zeroToOneRatio=10, 
    evalFunc=evaluateNIR, monitorFunc=monitor,
    popSize=200, iters=100, verbose=TRUE)

## End(Not run)
</code></pre>


</div>