<div class="container">

<table style="width: 100%;"><tr>
<td>forestplotRegrObj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Forest plot for multiple models</h2>

<h3>Description</h3>

<p>Plot different model fits with similar variables in order to
compare the model's estimates and confidence intervals. Each
model is represented by a separate line on top of eachother
and are therefore ideal for comparing different models. This
extra appealing when you have lots of variables included in
the models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  ...
)

## Default S3 method:
forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  ...
)

## S3 method for class 'coxph'
forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  xlab = "Hazard Ratio",
  estimate.txt = "HR",
  xlog = TRUE,
  zero = 1,
  exp = TRUE,
  ...
)

## S3 method for class 'lrm'
forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  xlab = "Odds ratio",
  estimate.txt = "HR",
  xlog = TRUE,
  zero = 1,
  exp = TRUE,
  ...
)

## S3 method for class 'lm'
forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  xlab = "Effect",
  estimate.txt = "Coef",
  xlog = FALSE,
  zero = 0,
  exp = FALSE,
  ...
)

## S3 method for class 'glm'
forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  xlab = NULL,
  xlog = NULL,
  zero = NULL,
  estimate.txt = NULL,
  exp = NULL,
  ...
)

## S3 method for class 'list'
forestplotRegrObj(
  regr.obj,
  postprocess_estimates.fn = function(x) x,
  rowname = "Variable",
  ci.txt = "CI",
  ci.glue = "{lower} to {higher}",
  digits = 1,
  get_box_size = fpBoxSize,
  xlab = NULL,
  xlog = NULL,
  zero = NULL,
  estimate.txt = NULL,
  exp = NULL,
  ...
)

fpBoxSize(p_values, variable_count, boxsize, significant = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>regr.obj</code></td>
<td>
<p>A regression model object. It should be of coxph, crr or glm class.
Warning: The glm is not fully tested.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>postprocess_estimates.fn</code></td>
<td>
<p>A function that takes the regression outputs and returns
the same data with modifications. The input columns are:
</p>
<p>* 'Rowname'
* 'Coef'
* 'Lower'
* 'Upper'
* 'Sort'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rowname</code></td>
<td>
<p>The name of the variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.txt</code></td>
<td>
<p>The text above the confidence interval, defaults to '"CI"'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.glue</code></td>
<td>
<p>The string used for [glue::glue()] the 'lower' and 'higher'
confidence intervals together.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>The number of digits to round presented values to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>get_box_size</code></td>
<td>
<p>A function for extracting the box sizes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Passed to <code>forestplot()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>x-axis label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate.txt</code></td>
<td>
<p>The text above the estimate, e.g. Est, HR</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlog</code></td>
<td>
<p>If TRUE, x-axis tick marks are to follow a logarithmic scale, e.g. for
logistic regression (OR), survival estimates (HR), Poisson regression etc.
<em>Note:</em> This is an intentional break with the original <code>forestplot</code>
function as I've found that exponentiated ticks/clips/zero effect are more
difficult to for non-statisticians and there are sometimes issues with rounding
the tick marks properly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero</code></td>
<td>
<p>Indicates what is zero effect. For survival/logistic fits the zero is
1 while in most other cases it's 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp</code></td>
<td>
<p>Report in exponential form. Default true since the function was built for
use with survival models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_values</code></td>
<td>
<p>The p-values that will work as the foundation for the box size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_count</code></td>
<td>
<p>The number of variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxsize</code></td>
<td>
<p>The default box size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>significant</code></td>
<td>
<p>Level of significance .05</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p>Other forestplot wrappers: 
<code>forestplotCombineRegrObj()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">org.par &lt;- par("ask" = TRUE)

library(tidyverse)
# simulated data to test
set.seed(102)
cov &lt;- tibble(ftime = rexp(200)) |&gt; 
  mutate(x1 = runif(n()),
         x2 = runif(n()),
         x3 = runif(n()),
         fstatus1 = if_else(x1 * 1 + 
                              x2 * 0.2 + 
                              x3 * 0.5 + 
                              runif(n()) * 0.5 &gt; 1, 
                            1, 0),
         fstatus2 = if_else(x1 * 0.2 + 
                              x2 * 0.5 + 
                              x3 * 0.1 + 
                              runif(n()) * 2 &gt; 1, 
                            1, 0)) |&gt; 
  # Add some column labels
  Gmisc::set_column_labels(x1 = "First variable",
                           x2 = "Second variable")

library(rms)
dd &lt;- datadist(cov)
options(datadist = "dd")

fit1 &lt;- cph(Surv(ftime, fstatus1 == 1) ~ x1 + x2 + x3, data = cov)

fit1 |&gt; 
  forestplotRegrObj() |&gt; 
  fp_set_zebra_style("#f0f0f0")

fit2 &lt;- update(fit1, Surv(ftime, fstatus2 == 1) ~ .)
list("Frist model" = fit1, "Second model"  = fit2) |&gt; 
  forestplotRegrObj(legend_args = fpLegend(title = "Type of regression"),
                    postprocess_estimates.fn = function(x) {
                      x |&gt; 
                        filter(str_detect(column_term, "(x2|x3)"))
                    }) |&gt; 
  fp_set_style(box = rep(c("darkblue", "darkred"), each = 3))


par(org.par)
</code></pre>


</div>