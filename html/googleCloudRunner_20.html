<div class="container">

<table style="width: 100%;"><tr>
<td>cr_buildstep_packagetests</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Do R package tests and upload to Codecov</h2>

<h3>Description</h3>

<p>This lets you run R package tests and is intended to be used in a trigger when you push to a repository so you can monitor code quality.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cr_buildstep_packagetests(
  test_script = NULL,
  codecov_script = NULL,
  codecov_token = "$_CODECOV_TOKEN",
  build_image = "gcr.io/gcer-public/packagetools:latest",
  env = c("NOT_CRAN=true")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>test_script</code></td>
<td>
<p>The script that will call rcmdcheck to perform tests.  If <code>NULL</code> a default script is used in <code>system.file("r_buildsteps", "devtools_tests.R", package="googlecloudRunner")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codecov_script</code></td>
<td>
<p>The script that will call codecov to perform coverage.  If <code>NULL</code> a default script is used in <code>system.file("r_buildsteps", "codecov_tests.R", package="googleCloudRunner")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codecov_token</code></td>
<td>
<p>If using codecov, supply your codecov token here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>build_image</code></td>
<td>
<p>The docker image that will be used to run the R code for the test scripts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>Environment arguments to be set during the test script runs</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If using codecov, these environment arguments are added to aid with the codecoverage:
</p>
<p><code>
* "CODECOV_TOKEN=$_CODECOV_TOKEN"
* "GCB_PROJECT_ID=$PROJECT_ID"
* "GCB_BUILD_ID=$BUILD_ID"
* "GCB_COMMIT_SHA=$COMMIT_SHA"
* "GCB_REPO_NAME=$REPO_NAME"
* "GCB_BRANCH_NAME=$BRANCH_NAME"
* "GCB_TAG_NAME=$TAG_NAME"
* "GCB_HEAD_BRANCH=$_HEAD_BRANCH"
* "GCB_BASE_BRANCH=$_BASE_BRANCH"
* "GCB_HEAD_REPO_URL=$_HEAD_REPO_URL"
* "GCB_PR_NUMBER=$_PR_NUMBER"
</code>
</p>


<h3>See Also</h3>

<p><a href="https://docs.codecov.com/reference">https://docs.codecov.com/reference</a>
</p>
<p>Other Cloud Buildsteps: 
<code>cr_buildstep_bash()</code>,
<code>cr_buildstep_decrypt()</code>,
<code>cr_buildstep_df()</code>,
<code>cr_buildstep_docker()</code>,
<code>cr_buildstep_edit()</code>,
<code>cr_buildstep_extract()</code>,
<code>cr_buildstep_gcloud()</code>,
<code>cr_buildstep_gitsetup()</code>,
<code>cr_buildstep_mailgun()</code>,
<code>cr_buildstep_nginx_setup()</code>,
<code>cr_buildstep_pkgdown()</code>,
<code>cr_buildstep_run()</code>,
<code>cr_buildstep_r()</code>,
<code>cr_buildstep_secret()</code>,
<code>cr_buildstep_slack()</code>,
<code>cr_buildstep_targets()</code>,
<code>cr_buildstep()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
cr_buildstep_packagetests()
</code></pre>


</div>