<div class="container">

<table style="width: 100%;"><tr>
<td>text_case_when</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform whole text replacements using a 'case-when'-expression approach</h2>

<h3>Description</h3>

<p><code>text_case_when()</code> provides a useful interface for a case-by-case approach to
replacing entire table cells. First off, you have to make sure you're
targeting the appropriate cells with the <code>.locations</code> argument. Following
that, you supply a sequence of two-sided formulas matching of the general
form: <code style="white-space: pre;">⁠&lt;logical_stmt&gt; ~ &lt;new_text&gt;⁠</code>. In the left hand side (LHS) there should
be a predicate statement that evaluates to a logical vector of length one
(i.e., either <code>TRUE</code> or <code>FALSE</code>). To refer to the values undergoing
transformation, you need to use the <code>x</code> variable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">text_case_when(.data, ..., .default = NULL, .locations = cells_body())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><em>Matching expressions</em>
</p>
<p><code style="white-space: pre;">⁠&lt;multiple expressions&gt;⁠</code> // <strong>required</strong>
</p>
<p>A sequence of two-sided formulas. The left hand side (LHS)
determines which values match this case. The right hand side (RHS) provides
the replacement text (it must resolve to a value of the <code>character</code> class).
The LHS inputs must evaluate to logical vectors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.default</code></td>
<td>
<p><em>Default replacement text</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>The replacement text to use when cell values aren't matched by any of the
LHS inputs. If <code>NULL</code>, the default, no replacement text will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.locations</code></td>
<td>
<p><em>Locations to target</em>
</p>
<p><code>&lt;locations expressions&gt;</code> // <em>default:</em> <code>cells_body()</code>
</p>
<p>The cell or set of cells to be associated with the text transformation.
Only <code>cells_column_spanners()</code>, <code>cells_column_labels()</code>,
<code>cells_row_groups()</code>, <code>cells_stub()</code>, and <code>cells_body()</code> can
be used here. We can enclose several of these calls within a <code>list()</code> if we
wish to make the transformation happen at different locations.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>Examples</h3>

<p>Use a portion of the <code>metro</code> dataset to create a <strong>gt</strong> table. We'll use
<code>text_case_when()</code> to supply pairs of predicate statements and replacement
text. For the <code>connect_rer</code> column, we will perform a count of pattern
matches with <code>stringr::str_count()</code> and determine which cells have 1, 2, or 3
matched patterns. For each of these cases, descriptive replacement text is
provided. Here, we use a <code>.default</code> value to replace the non-matched
cases with an empty string (<code>""</code>). Finally, we use <code>cols_label()</code> to modify
the labels of the three columns.
</p>
<div class="sourceCode r"><pre>metro |&gt;
  dplyr::arrange(desc(passengers)) |&gt;
  dplyr::select(name, lines, connect_rer) |&gt;
  dplyr::slice_head(n = 10) |&gt;
  gt() |&gt;
  text_case_when(
    stringr::str_count(x, pattern = "[ABCDE]") == 1 ~ "One connection.",
    stringr::str_count(x, pattern = "[ABCDE]") == 2 ~ "Two connections.",
    stringr::str_count(x, pattern = "[ABCDE]") == 3 ~ "Three connections.",
    .default = "", .locations = cells_body(columns = connect_rer)
  ) |&gt;
  cols_label(
    name = "Station",
    lines = "Lines Serviced",
    connect_rer = "RER Connections"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_text_case_when_1.png" alt="This image of a table was generated from the first code example in the `text_case_when()` help file." style="width:100%;"><h3>Function ID</h3>

<p>4-2
</p>


<h3>Function Introduced</h3>

<p><code>v0.9.0</code> (Mar 31, 2023)
</p>


<h3>See Also</h3>

<p>Other text transforming functions: 
<code>text_case_match()</code>,
<code>text_replace()</code>,
<code>text_transform()</code>
</p>


</div>