<div class="container">

<table style="width: 100%;"><tr>
<td>plot.greybox</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plots of the fit and residuals</h2>

<h3>Description</h3>

<p>The function produces diagnostics plots for a <code>greybox</code> model
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'greybox'
plot(x, which = c(1, 2, 4, 6), level = 0.95,
  legend = FALSE, ask = prod(par("mfcol")) &lt; length(which) &amp;&amp;
  dev.interactive(), lowess = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Estimated greybox model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>Which of the plots to produce. The possible options (see details for explanations):
</p>

<ol>
<li>
<p> Actuals vs Fitted values;
</p>
</li>
<li>
<p> Standardised residuals vs Fitted;
</p>
</li>
<li>
<p> Studentised residuals vs Fitted;
</p>
</li>
<li>
<p> Absolute residuals vs Fitted;
</p>
</li>
<li>
<p> Squared residuals vs Fitted;
</p>
</li>
<li>
<p> Q-Q plot with the specified distribution;
</p>
</li>
<li>
<p> Fitted over time;
</p>
</li>
<li>
<p> Standardised residuals over observations;
</p>
</li>
<li>
<p> Studentised residuals over observations;
</p>
</li>
<li>
<p> ACF of the residuals;
</p>
</li>
<li>
<p> PACF of the residuals;
</p>
</li>
<li>
<p> Cook's distance over observations with 0.5, 0.75 and 0.95 quantile lines from Fisher's distribution;
</p>
</li>
<li>
<p> Absolute standardised residuals vs Fitted;
</p>
</li>
<li>
<p> Squared standardised residuals vs Fitted;
</p>
</li>
<li>
<p> ACF of the squared residuals;
</p>
</li>
<li>
<p> PACF of the squared residuals.
</p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Confidence level. Defines width of confidence interval. Used in plots (2), (3), (7),
(8), (9), (10) and (11).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>If <code>TRUE</code>, then the legend is produced on plots (2), (3) and (7).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p>Logical; if <code>TRUE</code>, the user is asked to press Enter before each plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lowess</code></td>
<td>
<p>Logical; if <code>TRUE</code>, LOWESS lines are drawn on scatterplots, see lowess.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The parameters passed to the plot functions. Recommended to use with separate plots.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The list of produced plots includes:
</p>

<ol>
<li>
<p> Actuals vs Fitted values. Allows analysing, whether there are any issues in the fit.
Does the variability of actuals increase with the increase of fitted values? Is the relation
well captured? They grey line on the plot corresponds to the perfect fit of the model.
</p>
</li>
<li>
<p> Standardised residuals vs Fitted. Plots the points and the confidence bounds
(red lines) for the specified confidence <code>level</code>. Useful for the analysis of outliers;
</p>
</li>
<li>
<p> Studentised residuals vs Fitted. This is similar to the previous plot, but with the
residuals divided by the scales with the leave-one-out approach. Should be more sensitive
to outliers;
</p>
</li>
<li>
<p> Absolute residuals vs Fitted. Useful for the analysis of heteroscedasticity;
</p>
</li>
<li>
<p> Squared residuals vs Fitted - similar to (3), but with squared values;
</p>
</li>
<li>
<p> Q-Q plot with the specified distribution. Can be used in order to see if the
residuals follow the assumed distribution. The type of distribution depends on the one used
in the estimation (see <code>distribution</code> parameter in alm);
</p>
</li>
<li>
<p> Fitted over time. Plots actuals (black line), fitted values (purple line) and
prediction interval (red lines) of width <code>level</code>, but only in the case, when there
are some values lying outside of it. Can be used in order to make sure that the model
did not miss any important events over time;
</p>
</li>
<li>
<p> Standardised residuals vs Time. Useful if you want to see, if there is autocorrelation or
if there is heteroscedasticity in time. This also shows, when the outliers happen;
</p>
</li>
<li>
<p> Studentised residuals vs Time. Similar to previous, but with studentised residuals;
</p>
</li>
<li>
<p> ACF of the residuals. Are the residuals autocorrelated? See acf for
details;
</p>
</li>
<li>
<p> PACF of the residuals. No, really, are they autocorrelated? See pacf
for details;
</p>
</li>
<li>
<p> Cook's distance over time. Shows influential observations. 0.5, 0.75 and 0.95 quantile
lines from Fisher's distribution are also plotted. If the value is above them then the
observation is influencial. This does not work well for non-normal distributions;
</p>
</li>
<li>
<p> Absolute standardised residuals vs Fitted. Similar to the previous, but with absolute
values. This is more relevant to the models where scale is calculated as an absolute value of
something (e.g. Laplace);
</p>
</li>
<li>
<p> Squared standardised residuals vs Fitted. This is an additional plot needed to diagnose
heteroscedasticity in a model with varying scale. The variance on this plot will be constant if
the adequate model for <code>scale</code> was constructed. This is more appropriate for normal and
the related distributions.
</p>
</li>
</ol>
<p>Which of the plots to produce, is specified via the <code>which</code> parameter. The plots 2, 3, 7,
8 and 9 also use the parameters <code>level</code>, which specifies the confidence level for
the intervals.
</p>


<h3>Value</h3>

<p>The function produces the number of plots, specified in the parameter <code>which</code>.
</p>


<h3>Author(s)</h3>

<p>Ivan Svetunkov, <a href="mailto:ivan@svetunkov.ru">ivan@svetunkov.ru</a>
</p>


<h3>See Also</h3>

<p>plot.lm, rstandard, rstudent
</p>


<h3>Examples</h3>

<pre><code class="language-R">
xreg &lt;- cbind(rlaplace(100,10,3),rnorm(100,50,5))
xreg &lt;- cbind(100+0.5*xreg[,1]-0.75*xreg[,2]+rlaplace(100,0,3),xreg,rnorm(100,300,10))
colnames(xreg) &lt;- c("y","x1","x2","Noise")

ourModel &lt;- alm(y~x1+x2, xreg, distribution="dnorm")

par(mfcol=c(4,4))
plot(ourModel, c(1:14))

</code></pre>


</div>