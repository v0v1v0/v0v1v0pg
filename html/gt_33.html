<div class="container">

<table style="width: 100%;"><tr>
<td>cols_label</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Relabel one or more columns</h2>

<h3>Description</h3>

<p>Column labels can be modified from their default values (the names of the
columns from the input table data). When you create a <strong>gt</strong> table object
using <code>gt()</code>, column names effectively become the column labels. While this
serves as a good first approximation, column names as label defaults aren't
often as appealing in a <strong>gt</strong> table as the option for custom column labels.
<code>cols_label()</code> provides the flexibility to relabel one or more columns and
we even have the option to use <code>md()</code> or <code>html()</code> for rendering column labels
from Markdown or using HTML.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cols_label(.data, ..., .list = list2(...), .fn = NULL, .process_units = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p><em>The gt table data object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;gt_tbl&gt;⁠</code> // <strong>required</strong>
</p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code>gt()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><em>Column label assignments</em>
</p>
<p><code style="white-space: pre;">⁠&lt;multiple expressions&gt;⁠</code> // <strong>required</strong> (or, use <code>.list</code>)
</p>
<p>Expressions for the assignment of column labels for the table columns in
<code>.data</code>. Two-sided formulas (e.g., <code style="white-space: pre;">⁠&lt;LHS&gt; ~ &lt;RHS&gt;⁠</code>) can be used, where the
left-hand side corresponds to selections of columns and the right-hand side
evaluates to single-length values for the label to apply. Column names
should be enclosed in <code>c()</code>. Select helpers like <code>starts_with()</code>,
<code>ends_with()</code>, <code>contains()</code>, <code>matches()</code>, and <code>everything()</code> can be used
in the LHS. Named arguments are also valid as input for simple mappings of
column name to label text; they should be of the form
<code style="white-space: pre;">⁠&lt;column name&gt; = &lt;label&gt;⁠</code>. Subsequent expressions that operate on the
columns assigned previously will result in overwriting column label values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.list</code></td>
<td>
<p><em>Alternative to <code>...</code></em>
</p>
<p><code style="white-space: pre;">⁠&lt;list of multiple expressions&gt;⁠</code> // <strong>required</strong> (or, use <code>...</code>)
</p>
<p>Allows for the use of a list as an input alternative to <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.fn</code></td>
<td>
<p><em>Function to apply</em>
</p>
<p><code>function</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>An option to specify a function that will be applied to all of the provided
label values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.process_units</code></td>
<td>
<p><em>Option to process any available units throughout</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Should your column text contain text that is already in <strong>gt</strong>'s units
notation (and, importantly, is surrounded by <code>"{{"</code>/<code>"}}"</code>), using <code>TRUE</code>
here reprocesses all column such that the units are properly registered for
each of the column labels. This ignores any column label assignments in
<code>...</code> or <code>.list</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>gt_tbl</code>.
</p>


<h3>A note on column names and column labels</h3>

<p>It's important to note that while columns can be freely relabeled, we
continue to refer to columns by their original column names. Column names in
a tibble or data frame must be unique whereas column labels in <strong>gt</strong> have
no requirement for uniqueness (which is useful for labeling columns as, say,
measurement units that may be repeated several times—usually under
different spanner labels). Thus, we can still easily distinguish
between columns in other <strong>gt</strong> function calls (e.g., in all of the
<code style="white-space: pre;">⁠fmt*()⁠</code> functions) even though we may lose distinguishability between column
labels once they have undergone relabeling.
</p>


<h3>Incorporating units with <strong>gt</strong>'s units notation</h3>

<p>Measurement units are often seen as part of column labels and indeed it can
be much more straightforward to include them here rather than using other
devices to make readers aware of units for specific columns. The <strong>gt</strong>
package offers the function <code>cols_units()</code> to apply units to various columns
with an interface that's similar to that of this function. However, it is
also possible to define units here along with the column label, obviating the
need for pattern syntax that joins the two text components. To do this, we
have to surround the portion of text in the label that corresponds to the
units definition with <code>"{{"</code>/<code>"}}"</code>.
</p>
<p>Now that we know how to mark text for units definition, we know need to know
how to write proper units with the notation. Such notation uses a succinct
method of writing units and it should feel somewhat familiar though it is
particular to the task at hand. Each unit is treated as a separate entity
(parentheses and other symbols included) and the addition of subscript text
and exponents is flexible and relatively easy to formulate. This is all best
shown with a few examples:
</p>

<ul>
<li> <p><code>"m/s"</code> and <code>"m / s"</code> both render as <code>"m/s"</code>
</p>
</li>
<li> <p><code>"m s^-1"</code> will appear with the <code>"-1"</code> exponent intact
</p>
</li>
<li> <p><code>"m /s"</code> gives the same result, as <code>"/&lt;unit&gt;"</code> is equivalent to
<code>"&lt;unit&gt;^-1"</code>
</p>
</li>
<li> <p><code>"E_h"</code> will render an <code>"E"</code> with the <code>"h"</code> subscript
</p>
</li>
<li> <p><code>"t_i^2.5"</code> provides a <code>t</code> with an <code>"i"</code> subscript and a <code>"2.5"</code> exponent
</p>
</li>
<li> <p><code>"m[_0^2]"</code> will use overstriking to set both scripts vertically
</p>
</li>
<li> <p><code>"g/L %C6H12O6%"</code> uses a chemical formula (enclosed in a pair of <code>"%"</code>
characters) as a unit partial, and the formula will render correctly with
subscripted numbers
</p>
</li>
<li>
<p> Common units that are difficult to write using ASCII text may be implicitly
converted to the correct characters (e.g., the <code>"u"</code> in <code>"ug"</code>, <code>"um"</code>,
<code>"uL"</code>, and <code>"umol"</code> will be converted to the Greek <em>mu</em> symbol; <code>"degC"</code>
and <code>"degF"</code> will render a degree sign before the temperature unit)
</p>
</li>
<li>
<p> We can transform shorthand symbol/unit names enclosed in <code>":"</code> (e.g.,
<code>":angstrom:"</code>, <code>":ohm:"</code>, etc.) into proper symbols
</p>
</li>
<li>
<p> Greek letters can added by enclosing the letter name in <code>":"</code>; you can
use lowercase letters (e.g., <code>":beta:"</code>, <code>":sigma:"</code>, etc.) and uppercase
letters too (e.g., <code>":Alpha:"</code>, <code>":Zeta:"</code>, etc.)
</p>
</li>
<li>
<p> The components of a unit (unit name, subscript, and exponent) can be
fully or partially italicized/emboldened by surrounding text with <code>"*"</code> or
<code>"**"</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<p>Let's use a portion of the <code>countrypops</code> dataset to create a <strong>gt</strong> table.
We can relabel all the table's columns with the <code>cols_label()</code> function to
improve its presentation. In this simple case we are supplying the name of
the column on the left-hand side, and the label text on the right-hand side.
</p>
<div class="sourceCode r"><pre>countrypops |&gt;
  dplyr::select(-contains("code")) |&gt;
  dplyr::filter(
    country_name == "Uganda",
    year %in% 2017:2021
  ) |&gt;
  gt() |&gt;
  cols_label(
    country_name = "Name",
    year = "Year",
    population = "Population"
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_1.png" alt="This image of a table was generated from the first code example in the `cols_label()` help file." style="width:100%;"><p>Using the <code>countrypops</code> dataset again, we label columns similarly to before
but this time making the column labels be bold through Markdown formatting
(with the <code>md()</code> helper function). It's possible here to use either a <code>=</code> or
a <code>~</code> between the column name and the label text.
</p>
<div class="sourceCode r"><pre>countrypops |&gt;
  dplyr::select(-contains("code")) |&gt;
  dplyr::filter(
    country_name == "Uganda",
    year %in% 2017:2021
  ) |&gt;
  gt() |&gt;
  cols_label(
    country_name = md("**Name**"),
    year = md("**Year**"),
    population ~ md("**Population**")
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_2.png" alt="This image of a table was generated from the second code example in the `cols_label()` help file." style="width:100%;"><p>With a select portion of the <code>metro</code> dataset, let's create a small <strong>gt</strong>
table with three columns. Within <code>cols_label()</code> we'd like to provide column
labels that contain line breaks. For that, we can use <code style="white-space: pre;">⁠&lt;br&gt;⁠</code> to indicate
where the line breaks should be. We also need to use the <code>md()</code> helper
function to signal to <strong>gt</strong> that this text should be interpreted as
Markdown. Instead of calling <code>md()</code> on each of labels as before, we can more
conveniently use the <code>.fn</code> argument and provide the bare function there (it
will be applied to each label defined in the <code>cols_label()</code> call).
</p>
<div class="sourceCode r"><pre>metro |&gt;
  dplyr::select(name, lines, passengers, connect_other) |&gt;
  dplyr::slice_max(passengers, n = 10) |&gt;
  gt() |&gt;
  cols_hide(columns = passengers) |&gt;
  cols_label(
    name = "Name of&lt;br&gt;Metro Station",
    lines = "Metro&lt;br&gt;Lines",
    connect_other = "Train&lt;br&gt;Services",
    .fn = md
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_3.png" alt="This image of a table was generated from the third code example in the `cols_label()` help file." style="width:100%;"><p>Using a subset of the <code>towny</code> dataset, we can create an interesting <strong>gt</strong>
table. First, only certain columns are selected from the dataset, some
filtering of rows is done, rows are sorted, and then only the first 10 rows
are kept. After the data is introduced to <code>gt()</code>, we then apply some spanner
labels using two calls of <code>tab_spanner()</code>. Below those spanners, we want to
label the columns by the years of interest. Using <code>cols_label()</code> and select
expressions on the left side of the formulas, we can easily relabel multiple
columns with common label text. Note that we cannot use an <code>=</code> sign in any of
the expressions within <code>cols_label()</code>; because the left-hand side is not a
single column name, we must use formula syntax (i.e., with the <code>~</code>).
</p>
<div class="sourceCode r"><pre>towny |&gt;
  dplyr::select(
    name, ends_with("2001"), ends_with("2006"), matches("2001_2006")
  ) |&gt;
  dplyr::filter(population_2001 &gt; 100000) |&gt;
  dplyr::arrange(desc(pop_change_2001_2006_pct)) |&gt;
  dplyr::slice_head(n = 10) |&gt;
  gt() |&gt;
  fmt_integer() |&gt;
  fmt_percent(columns = matches("change"), decimals = 1) |&gt;
  tab_spanner(label = "Population", columns = starts_with("population")) |&gt;
  tab_spanner(label = "Density", columns = starts_with("density")) |&gt;
  cols_label(
    ends_with("01") ~ "2001",
    ends_with("06") ~ "2006",
    matches("change") ~ md("Population Change,&lt;br&gt;2001 to 2006")
  ) |&gt;
  cols_width(everything() ~ px(120))
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_4.png" alt="This image of a table was generated from the fourth code example in the `cols_label()` help file." style="width:100%;"><p>Here's another table that uses the <code>towny</code> dataset. The big difference
compared to the previous <em>gt</em> table is that <code>cols_label()</code> as used here
incorporates unit notation text (within <code>"{{"</code>/<code>"}}"</code>).
</p>
<div class="sourceCode r"><pre>towny |&gt;
  dplyr::select(
    name, population_2021, density_2021, land_area_km2, latitude, longitude
  ) |&gt;
  dplyr::filter(population_2021 &gt; 100000) |&gt;
  dplyr::arrange(desc(population_2021)) |&gt;
  dplyr::slice_head(n = 10) |&gt;
  gt() |&gt;
  fmt_integer(columns = population_2021) |&gt;
  fmt_number(
    columns = c(density_2021, land_area_km2),
    decimals = 1
  ) |&gt;
  fmt_number(columns = latitude, decimals = 2) |&gt;
  fmt_number(columns = longitude, decimals = 2, scale_by = -1) |&gt;
  cols_label(
    starts_with("population") ~ "Population",
    starts_with("density") ~ "Density, {{*persons* km^-2}}",
    land_area_km2 ~ "Area, {{km^2}}",
    latitude ~ "Latitude, {{:degrees:N}}",
    longitude ~ "Longitude, {{:degrees:W}}"
  ) |&gt;
  cols_width(everything() ~ px(120))
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_5.png" alt="This image of a table was generated from the fifth code example in the `cols_label()` help file." style="width:100%;"><p>The <code>illness</code> dataset has units within the <code>units</code> column. They're
formatted in just the right way for <strong>gt</strong> too. Let's do some text
manipulation through <code>dplyr::mutate()</code> and some pivoting with
<code>tidyr::pivot_longer()</code> and <code>tidyr::pivot_wider()</code> in order to include the
units as part of the column names in the reworked table. These column names
are in a format where the units are included within <code>"{{"</code>/<code>"}}"</code>, so, we can
use <code>cols_label()</code> with the <code>.process_units = TRUE</code> option to register the
measurement units. In addition to this, because there is a <code style="white-space: pre;">⁠&lt;br&gt;⁠</code> included
(for a line break), we should use the <code>.fn</code> option and provide the <code>md()</code>
helper function (as a bare function name). This ensures that any line breaks
will materialize.
</p>
<div class="sourceCode r"><pre>illness |&gt;
  dplyr::mutate(test = paste0(test, ",&lt;br&gt;{{", units, "}}")) |&gt;
  dplyr::slice_head(n = 8) |&gt;
  dplyr::select(-c(starts_with("norm"), units)) |&gt;
  tidyr::pivot_longer(
    cols = starts_with("day"),
    names_to = "day",
    names_prefix = "day_",
    values_to = "value"
  ) |&gt;
  tidyr::pivot_wider(
    names_from = test,
    values_from = value
  ) |&gt;
  gt(rowname_col = "day") |&gt;
  tab_stubhead(label = "Day") |&gt;
  cols_label(
    .fn = md,
    .process_units = TRUE
  ) |&gt;
  cols_width(
    stub() ~ px(50),
    everything() ~ px(120)
  )
</pre></div>

<img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_6.png" alt="This image of a table was generated from the sixth code example in the `cols_label()` help file." style="width:100%;"><h3>Function ID</h3>

<p>5-4
</p>


<h3>Function Introduced</h3>

<p><code>v0.2.0.5</code> (March 31, 2020)
</p>


<h3>See Also</h3>

<p>Other column modification functions: 
<code>cols_add()</code>,
<code>cols_align()</code>,
<code>cols_align_decimal()</code>,
<code>cols_hide()</code>,
<code>cols_label_with()</code>,
<code>cols_merge()</code>,
<code>cols_merge_n_pct()</code>,
<code>cols_merge_range()</code>,
<code>cols_merge_uncert()</code>,
<code>cols_move()</code>,
<code>cols_move_to_end()</code>,
<code>cols_move_to_start()</code>,
<code>cols_nanoplot()</code>,
<code>cols_unhide()</code>,
<code>cols_units()</code>,
<code>cols_width()</code>
</p>


</div>