<div class="container">

<table style="width: 100%;"><tr>
<td>get.intervals</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract an interval of data.</h2>

<h3>Description</h3>

<p>Function for extracting sub intervals of data, and implementation of just-in-time loading.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get.intervals(x, start=0, end = 1, length = NULL,
time.format = c("auto", "seconds", "days", "proportion", "measurements", "time"),
incl.date = FALSE, simplify = TRUE ,read.from.file=FALSE, size=Inf, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object to process. Can be array,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>Start of interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>End of interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>length</code></td>
<td>
<p>Length of interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.format</code></td>
<td>
<p>Method with which <code>start</code> and <code>end</code> should be understood.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incl.date</code></td>
<td>
<p>logical. Include a column denoting time?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p>logical. If TRUE, output an array. Otherwise output a AccData object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>read.from.file</code></td>
<td>
<p>logical. If TRUE, re-read the relevant time interval from the original bin file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>Desired number of samples in output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to <code>read.bin</code>, if <code>read.from.file</code> is TRUE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function extracts the desired analysis time window specified by <code>start</code> and <code>end</code>.
If length is specified, then the end is set to a point <code>length</code> units after start.
The times are interpreted in terms of <code>time.format</code>. For convenience, a variety of time
window formats are accepted: </p>

<ul>
<li>
<p> "seconds": Seconds since start of dataset.
</p>
</li>
<li>
<p> "days": Days since start of dataset.
</p>
</li>
<li>
<p> "proportion": Proportional point within dataset, given as a numeric between 0 and 1.
</p>
</li>
<li>
<p> "measurements": Raw number of samples since start of dataset.
</p>
</li>
<li>
<p> "time": Time string, as understood via <code>parse.time</code>.
</p>
</li>
<li>
<p> "auto": Default - attempt to determine time format from size and type of <code>start</code>.
</p>
</li>
</ul>
<p>Some capacity for using mixed types of inputs for <code>start</code> and <code>length</code> in particular is present.
</p>
<p>The input object <code>x</code> is typically an "AccData" object, though arrays are also accepted. "VirtAccData"
are dealt with by using the timestamp and call information recorded within them to do a new read of the
original bin file, assuming this is still available. This is useful for 'just in time' reads of data.
"AccData" can be dealt with in this way by setting <code>read.from.file</code>.
</p>
<p>Note that for <code>read.from.file</code>, only "time" and "proportion" <code>time.format</code> are presently supported.
</p>
<p>With <code>simplify = FALSE</code>, an "AccData" S3 object with the desired records.
Otherwise, an array containing either 3 or 4 columns, containing the x, y, z acceleration vectors and optionally a time vector.
</p>


<h3>See Also</h3>

<p><code>read.bin</code>, <code>AccData</code>, <code>get.intervals</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
binfile  = system.file("binfile/TESTfile.bin", package = "GENEAread")[1]

#Read in a highly downsampled version of the file
procfile&lt;-read.bin(binfile, downsample = 100)
print(procfile)

#Overlay some segments in different colour
lines(get.intervals(procfile, start = 0.4, end = 0.5,
                    time.format = "prop", incl.date = TRUE)[,1:2],
                    col=2)

lines(get.intervals(procfile, start = 0.4, end = 5,
                    time.format = "sec", incl.date = TRUE)[,1:2],
                    col=3)

lines(get.intervals(procfile, start = "16:51", end = "16:52",
                    time.format = "time", incl.date = TRUE)[,1:2],
                    col=4)

# Note that measurements will depend on the downsampling rate,
# not the original sampling rate of the data
lines(get.intervals(procfile, start = 100, length = 10,
                    time.format = "measurement", incl.date = TRUE)[,1:2],
                    col=5)

#This is also understood
lines(get.intervals(procfile, start = "16:52:10", 30,
                    incl.date = TRUE)[,1:2],
                    col=6)

#Now load in virtually
virtfile&lt;-read.bin(binfile, virtual = TRUE)
#Notice that get.intervals with simplify = FALSE gives a genuine AccData object
realfile = get.intervals(virtfile, start = 0.5, end = 1, simplify = FALSE)
virtfile
realfile
#get.intervals calls read.bin automatically
points(get.intervals(virtfile, start = "16:52:10", "16:52:40",
                     incl.date = TRUE)[,1:2], col=4, pch = ".")

#Alternatively, re-read procfile at a different resampling rate.
lines(get.intervals(procfile, start = "16:49:00", "16:49:30",
                    incl.date = TRUE, read.from.file = TRUE, downsample = 300)[,1:2],
                    col=2)

</code></pre>


</div>