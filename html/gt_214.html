<div class="container">

<table style="width: 100%;"><tr>
<td>vec_fmt_partsper</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Format a vector as parts-per quantities</h2>

<h3>Description</h3>

<p>With numeric values in a vector, we can format the values so that they
are rendered as <em>per mille</em>, <em>ppm</em>, <em>ppb</em>, etc., quantities. The following
list of keywords (with associated naming and scaling factors) is available to
use within <code>vec_fmt_partsper()</code>:
</p>

<ul>
<li> <p><code>"per-mille"</code>: Per mille, (1 part in <code style="white-space: pre;">⁠1,000⁠</code>)
</p>
</li>
<li> <p><code>"per-myriad"</code>: Per myriad, (1 part in <code style="white-space: pre;">⁠10,000⁠</code>)
</p>
</li>
<li> <p><code>"pcm"</code>: Per cent mille (1 part in <code style="white-space: pre;">⁠100,000⁠</code>)
</p>
</li>
<li> <p><code>"ppm"</code>: Parts per million, (1 part in <code style="white-space: pre;">⁠1,000,000⁠</code>)
</p>
</li>
<li> <p><code>"ppb"</code>: Parts per billion, (1 part in <code style="white-space: pre;">⁠1,000,000,000⁠</code>)
</p>
</li>
<li> <p><code>"ppt"</code>: Parts per trillion, (1 part in <code style="white-space: pre;">⁠1,000,000,000,000⁠</code>)
</p>
</li>
<li> <p><code>"ppq"</code>: Parts per quadrillion, (1 part in <code style="white-space: pre;">⁠1,000,000,000,000,000⁠</code>)
</p>
</li>
</ul>
<p>The function provides a lot of formatting control and we can use the
following options:
</p>

<ul>
<li>
<p> custom symbol/units: we can override the automatic symbol or units display
with our own choice as the situation warrants
</p>
</li>
<li>
<p> decimals: choice of the number of decimal places, option to drop
trailing zeros, and a choice of the decimal symbol
</p>
</li>
<li>
<p> digit grouping separators: options to enable/disable digit separators
and provide a choice of separator symbol
</p>
</li>
<li>
<p> value scaling toggle: choose to disable automatic value scaling in the
situation that values are already scaled coming in (and just require the
appropriate symbol or unit display)
</p>
</li>
<li>
<p> pattern: option to use a text pattern for decoration of the formatted
values
</p>
</li>
<li>
<p> locale-based formatting: providing a locale ID will result in number
formatting specific to the chosen locale
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">vec_fmt_partsper(
  x,
  to_units = c("per-mille", "per-myriad", "pcm", "ppm", "ppb", "ppt", "ppq"),
  symbol = "auto",
  decimals = 2,
  drop_trailing_zeros = FALSE,
  drop_trailing_dec_mark = TRUE,
  scale_values = TRUE,
  use_seps = TRUE,
  pattern = "{x}",
  sep_mark = ",",
  dec_mark = ".",
  force_sign = FALSE,
  incl_space = "auto",
  locale = NULL,
  output = c("auto", "plain", "html", "latex", "rtf", "word")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><em>The input vector</em>
</p>
<p><code>vector(numeric|integer)</code> // <strong>required</strong>
</p>
<p>This is the input vector that will undergo transformation to a character
vector of the same length. Values within the vector will be formatted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_units</code></td>
<td>
<p><em>Output Quantity</em>
</p>
<p><code style="white-space: pre;">⁠singl-kw:[per-mille|per-myriad|pcm|ppm|ppb|ppt|ppq]⁠</code> // <em>default:</em> <code>"per-mille"</code>
</p>
<p>A keyword that signifies the desired output quantity. This can be any from
the following set: <code>"per-mille"</code>, <code>"per-myriad"</code>, <code>"pcm"</code>, <code>"ppm"</code>,
<code>"ppb"</code>, <code>"ppt"</code>, or <code>"ppq"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol</code></td>
<td>
<p><em>Symbol or units to use in output display</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"auto"</code>
</p>
<p>The symbol/units to use for the quantity. By default, this is set to
<code>"auto"</code> and <strong>gt</strong> will choose the appropriate symbol based on the
<code>to_units</code> keyword and the output context. However, this can be changed by
supplying a string (e.g, using <code>symbol = "ppbV"</code> when <code>to_units = "ppb"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p><em>Number of decimal places</em>
</p>
<p><code>scalar&lt;numeric|integer&gt;(val&gt;=0)</code> // <em>default:</em> <code>2</code>
</p>
<p>This corresponds to the exact number of decimal places to use. A value
such as <code>2.34</code> can, for example, be formatted with <code>0</code> decimal places and
it would result in <code>"2"</code>. With <code>4</code> decimal places, the formatted value
becomes <code>"2.3400"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_trailing_zeros</code></td>
<td>
<p><em>Drop any trailing zeros</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code>
</p>
<p>A logical value that allows for removal of trailing zeros (those redundant
zeros after the decimal mark).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_trailing_dec_mark</code></td>
<td>
<p><em>Drop the trailing decimal mark</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>A logical value that determines whether decimal marks should always appear
even if there are no decimal digits to display after formatting (e.g., <code>23</code>
becomes <code>23.</code> if <code>FALSE</code>). By default trailing decimal marks are not shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_values</code></td>
<td>
<p><em>Scale input values accordingly</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>Should the values be scaled through multiplication according to the keyword
set in <code>to_units</code>? By default this is <code>TRUE</code> since the expectation is that
normally values are proportions. Setting to <code>FALSE</code> signifies that the
values are already scaled and require only the appropriate symbol/units
when formatted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_seps</code></td>
<td>
<p><em>Use digit group separators</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>An option to use digit group separators. The type of digit group separator
is set by <code>sep_mark</code> and overridden if a locale ID is provided to <code>locale</code>.
This setting is <code>TRUE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p><em>Specification of the formatting pattern</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"{x}"</code>
</p>
<p>A formatting pattern that allows for decoration of the formatted value. The
formatted value is represented by the <code>{x}</code> (which can be used multiple
times, if needed) and all other characters will be interpreted as string
literals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep_mark</code></td>
<td>
<p><em>Separator mark for digit grouping</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>","</code>
</p>
<p>The string to use as a separator between groups of digits. For example,
using <code>sep_mark = ","</code> with a value of <code>1000</code> would result in a formatted
value of <code>"1,000"</code>. This argument is ignored if a <code>locale</code> is supplied
(i.e., is not <code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec_mark</code></td>
<td>
<p><em>Decimal mark</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"."</code>
</p>
<p>The string to be used as the decimal mark. For example, using
<code>dec_mark = ","</code> with the value <code>0.152</code> would result in a formatted value
of <code>"0,152"</code>). This argument is ignored if a <code>locale</code> is supplied (i.e., is
not <code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force_sign</code></td>
<td>
<p><em>Forcing the display of a positive sign</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code>
</p>
<p>Should the positive sign be shown for positive values (effectively showing
a sign for all values except zero)? If so, use <code>TRUE</code> for this option. The
default is <code>FALSE</code>, where only negative numbers will display a minus sign.
This option is disregarded when using accounting notation with
<code>accounting = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incl_space</code></td>
<td>
<p><em>Include a space between the value and the symbol/units</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;|scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>"auto"</code>
</p>
<p>An option for whether to include a space between the value and the
symbol/units. The default is <code>"auto"</code> which provides spacing dependent on
the mark itself. This can be directly controlled by using either <code>TRUE</code> or
<code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locale</code></td>
<td>
<p><em>Locale identifier</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>An optional locale identifier that can be used for formatting values
according the locale's rules. Examples include <code>"en"</code> for English (United
States) and <code>"fr"</code> for French (France). We can call <code>info_locales()</code> for a
useful reference for all of the locales that are supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p><em>Output format</em>
</p>
<p><code style="white-space: pre;">⁠singl-kw:[auto|plain|html|latex|rtf|word]⁠</code> // <em>default:</em> <code>"auto"</code>
</p>
<p>The output style of the resulting character vector. This can either be
<code>"auto"</code> (the default), <code>"plain"</code>, <code>"html"</code>, <code>"latex"</code>, <code>"rtf"</code>, or
<code>"word"</code>. In <strong>knitr</strong> rendering (i.e., Quarto or R Markdown), the <code>"auto"</code>
option will choose the correct <code>output</code> value</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A character vector.
</p>


<h3>Examples</h3>

<p>Let's create a numeric vector for the next few examples:
</p>
<div class="sourceCode r"><pre>num_vals &lt;- c(10^(-3:-5), NA)
</pre></div>
<p>Using <code>vec_fmt_partsper()</code> with the default options will create a character
vector where the resultant per mille values have two decimal places and <code>NA</code>
values will render as <code>"NA"</code>. The rendering context will be autodetected
unless specified in the <code>output</code> argument (here, it is of the <code>"plain"</code>
output type).
</p>
<div class="sourceCode r"><pre>vec_fmt_partsper(num_vals)
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "1.00%." "0.10%." "0.01%." "NA"
</pre></div>
<p>We can change the output units to a different measure. If ppm units are
desired then <code>to_units = "ppm"</code> can be used.
</p>
<div class="sourceCode r"><pre>vec_fmt_partsper(num_vals, to_units = "ppm")
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "1,000.00 ppm" "100.00 ppm" "10.00 ppm" "NA"
</pre></div>
<p>We can change the decimal mark to a comma, and we have to be sure to change
the digit separator mark from the default comma to something else (a period
works here):
</p>
<div class="sourceCode r"><pre>vec_fmt_partsper(
  num_vals,
  to_units = "ppm",
  sep_mark = ".",
  dec_mark = ","
)
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "1.000,00 ppm" "100,00 ppm" "10,00 ppm" "NA"
</pre></div>
<p>If we are formatting for a different locale, we could supply the locale ID
and let <strong>gt</strong> handle these locale-specific formatting options:
</p>
<div class="sourceCode r"><pre>vec_fmt_partsper(num_vals, to_units = "ppm", locale = "es")
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "1.000,00 ppm" "100,00 ppm" "10,00 ppm" "NA"
</pre></div>
<p>As a last example, one can wrap the values in a pattern with the <code>pattern</code>
argument. Note here that <code>NA</code> values won't have the pattern applied.
</p>
<div class="sourceCode r"><pre>vec_fmt_partsper(num_vals, to_units = "ppm", pattern = "{x}V")
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "1,000.00 ppmV" "100.00 ppmV" "10.00 ppmV" "NA"
</pre></div>


<h3>Function ID</h3>

<p>15-6
</p>


<h3>Function Introduced</h3>

<p><code>v0.7.0</code> (Aug 25, 2022)
</p>


<h3>See Also</h3>

<p>The variant function intended for formatting <strong>gt</strong> table data:
<code>fmt_partsper()</code>.
</p>
<p>Other vector formatting functions: 
<code>vec_fmt_bytes()</code>,
<code>vec_fmt_currency()</code>,
<code>vec_fmt_date()</code>,
<code>vec_fmt_datetime()</code>,
<code>vec_fmt_duration()</code>,
<code>vec_fmt_engineering()</code>,
<code>vec_fmt_fraction()</code>,
<code>vec_fmt_index()</code>,
<code>vec_fmt_integer()</code>,
<code>vec_fmt_markdown()</code>,
<code>vec_fmt_number()</code>,
<code>vec_fmt_percent()</code>,
<code>vec_fmt_roman()</code>,
<code>vec_fmt_scientific()</code>,
<code>vec_fmt_spelled_num()</code>,
<code>vec_fmt_time()</code>
</p>


</div>