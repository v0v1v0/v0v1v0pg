<div class="container">

<table style="width: 100%;"><tr>
<td>vec_fmt_duration</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Format a vector of numeric or duration values as styled time duration strings</h2>

<h3>Description</h3>

<p>Format input values to time duration values whether those input values are
numbers or of the <code>difftime</code> class. We can specify which time units any
numeric input values have (as weeks, days, hours, minutes, or seconds) and
the output can be customized with a duration style (corresponding to narrow,
wide, colon-separated, and ISO forms) and a choice of output units ranging
from weeks to seconds.
</p>


<h3>Usage</h3>

<pre><code class="language-R">vec_fmt_duration(
  x,
  input_units = NULL,
  output_units = NULL,
  duration_style = c("narrow", "wide", "colon-sep", "iso"),
  trim_zero_units = TRUE,
  max_output_units = NULL,
  pattern = "{x}",
  use_seps = TRUE,
  sep_mark = ",",
  force_sign = FALSE,
  locale = NULL,
  output = c("auto", "plain", "html", "latex", "rtf", "word")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><em>The input vector</em>
</p>
<p><code>vector(numeric|integer)</code> // <strong>required</strong>
</p>
<p>This is the input vector that will undergo transformation to a character
vector of the same length. Values within the vector will be formatted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_units</code></td>
<td>
<p><em>Declaration of duration units for numerical values</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>If one or more selected columns contains numeric values (not <code>difftime</code>
values, which contain the duration units), a keyword must be provided for
<code>input_units</code> for <strong>gt</strong> to determine how those values are to be
interpreted in terms of duration. The accepted units are: <code>"seconds"</code>,
<code>"minutes"</code>, <code>"hours"</code>, <code>"days"</code>, and <code>"weeks"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_units</code></td>
<td>
<p><em>Choice of output units</em>
</p>
<p><code style="white-space: pre;">⁠mult-kw:[weeks|days|hours|minutes|seconds]⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Controls the output time units. The default, <code>NULL</code>, means that <strong>gt</strong> will
automatically choose time units based on the input duration value. To
control which time units are to be considered for output (before trimming
with <code>trim_zero_units</code>) we can specify a vector of one or more of the
following keywords: <code>"weeks"</code>, <code>"days"</code>, <code>"hours"</code>, <code>"minutes"</code>, or
<code>"seconds"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>duration_style</code></td>
<td>
<p><em>Style for representing duration values</em>
</p>
<p><code style="white-space: pre;">⁠singl-kw:[narrow|wide|colon-sep|iso]⁠</code> // <em>default:</em> <code>"narrow"</code>
</p>
<p>A choice of four formatting styles for the output duration values. With
<code>"narrow"</code> (the default style), duration values will be formatted with
single letter time-part units (e.g., 1.35 days will be styled as
<code>"1d 8h 24m"</code>). With <code>"wide"</code>, this example value will be expanded to
<code>"1 day 8 hours 24 minutes"</code> after formatting. The <code>"colon-sep"</code> style will
put days, hours, minutes, and seconds in the <code>"([D]/)[HH]:[MM]:[SS]"</code>
format. The <code>"iso"</code> style will produce a value that conforms to the ISO
8601 rules for duration values (e.g., 1.35 days will become <code>"P1DT8H24M"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim_zero_units</code></td>
<td>
<p><em>Trimming of zero values</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;|mult-kw:[leading|trailing|internal]⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>Provides methods to remove output time units that have zero values. By
default this is <code>TRUE</code> and duration values that might otherwise be
formatted as <code>"0w 1d 0h 4m 19s"</code> with <code>trim_zero_units = FALSE</code> are instead
displayed as <code>"1d 4m 19s"</code>. Aside from using <code>TRUE</code>/<code>FALSE</code> we could
provide a vector of keywords for more precise control. These keywords are:
(1) <code>"leading"</code>, to omit all leading zero-value time units (e.g., <code>"0w 1d"</code>
-&gt; <code>"1d"</code>), (2) <code>"trailing"</code>, to omit all trailing zero-value time units
(e.g., <code>"3d 5h 0s"</code> -&gt; <code>"3d 5h"</code>), and <code>"internal"</code>, which removes all
internal zero-value time units (e.g., <code>"5d 0h 33m"</code> -&gt; <code>"5d 33m"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_output_units</code></td>
<td>
<p><em>Maximum number of time units to display</em>
</p>
<p><code>scalar&lt;numeric|integer&gt;(val&gt;=1)</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>If <code>output_units</code> is <code>NULL</code>, where the output time units are unspecified
and left to <strong>gt</strong> to handle, a numeric value provided for
<code>max_output_units</code> will be taken as the maximum number of time units to
display in all output time duration values. By default, this is <code>NULL</code> and
all possible time units will be displayed. This option has no effect when
<code>duration_style = "colon-sep"</code> (only <code>output_units</code> can be used to
customize that type of duration output).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p><em>Specification of the formatting pattern</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"{x}"</code>
</p>
<p>A formatting pattern that allows for decoration of the formatted value. The
formatted value is represented by the <code>{x}</code> (which can be used multiple
times, if needed) and all other characters will be interpreted as string
literals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_seps</code></td>
<td>
<p><em>Use digit group separators</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>An option to use digit group separators. The type of digit group separator
is set by <code>sep_mark</code> and overridden if a locale ID is provided to <code>locale</code>.
This setting is <code>TRUE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep_mark</code></td>
<td>
<p><em>Separator mark for digit grouping</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>","</code>
</p>
<p>The string to use as a separator between groups of digits. For example,
using <code>sep_mark = ","</code> with a value of <code>1000</code> would result in a formatted
value of <code>"1,000"</code>. This argument is ignored if a <code>locale</code> is supplied
(i.e., is not <code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force_sign</code></td>
<td>
<p><em>Forcing the display of a positive sign</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code>
</p>
<p>Should the positive sign be shown for positive values (effectively showing
a sign for all values except zero)? If so, use <code>TRUE</code> for this option. By
default only negative values will display a minus sign.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locale</code></td>
<td>
<p><em>Locale identifier</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>An optional locale identifier that can be used for formatting values
according the locale's rules. Examples include <code>"en"</code> for English (United
States) and <code>"fr"</code> for French (France). We can call <code>info_locales()</code> for a
useful reference for all of the locales that are supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p><em>Output format</em>
</p>
<p><code style="white-space: pre;">⁠singl-kw:[auto|plain|html|latex|rtf|word]⁠</code> // <em>default:</em> <code>"auto"</code>
</p>
<p>The output style of the resulting character vector. This can either be
<code>"auto"</code> (the default), <code>"plain"</code>, <code>"html"</code>, <code>"latex"</code>, <code>"rtf"</code>, or
<code>"word"</code>. In <strong>knitr</strong> rendering (i.e., Quarto or R Markdown), the <code>"auto"</code>
option will choose the correct <code>output</code> value</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A character vector.
</p>


<h3>Output units for the colon-separated duration style</h3>

<p>The colon-separated duration style (enabled when
<code>duration_style = "colon-sep"</code>) is essentially a clock-based output format
which uses the display logic of chronograph watch functionality. It will, by
default, display duration values in the <code style="white-space: pre;">⁠(D/)HH:MM:SS⁠</code> format. Any duration
values greater than or equal to 24 hours will have the number of days
prepended with an adjoining slash mark. While this output format is
versatile, it can be changed somewhat with the <code>output_units</code> option. The
following combinations of output units are permitted:
</p>

<ul>
<li> <p><code>c("minutes", "seconds")</code> -&gt; <code>MM:SS</code>
</p>
</li>
<li> <p><code>c("hours", "minutes")</code> -&gt; <code>HH:MM</code>
</p>
</li>
<li> <p><code>c("hours", "minutes", "seconds")</code> -&gt; <code>HH:MM:SS</code>
</p>
</li>
<li> <p><code>c("days", "hours", "minutes")</code> -&gt; <code style="white-space: pre;">⁠(D/)HH:MM⁠</code>
</p>
</li>
</ul>
<p>Any other specialized combinations will result in the default set being used,
which is <code>c("days", "hours", "minutes", "seconds")</code>
</p>


<h3>Examples</h3>

<p>Let's create a <code>difftime</code>-based vector for the next few examples:
</p>
<div class="sourceCode r"><pre>difftimes &lt;-
  difftime(
    lubridate::ymd("2017-01-15"),
    lubridate::ymd(c("2015-06-25", "2016-03-07", "2017-01-10"))
  )
</pre></div>
<p>Using <code>vec_fmt_duration()</code> with its defaults provides us with a succinct
vector of formatted durations.
</p>
<div class="sourceCode r"><pre>vec_fmt_duration(difftimes)
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "81w 3d" "44w 6d" "5d"
</pre></div>
<p>We can elect to use just only the time units of days to describe the duration
values.
</p>
<div class="sourceCode r"><pre>vec_fmt_duration(difftimes, output_units = "days")
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "570d" "314d" "5d"
</pre></div>
<p>We can also use numeric values in the input vector <code>vec_fmt_duration()</code>.
Here's a numeric vector for use with examples:
</p>
<div class="sourceCode r"><pre>num_vals &lt;- c(3.235, 0.23, 0.005, NA)
</pre></div>
<p>The necessary thing with numeric values as an input is defining what time
unit those values have.
</p>
<div class="sourceCode r"><pre>vec_fmt_duration(num_vals, input_units = "days")
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "3d 5h 38m 24s" "5h 31m 12s" "7m 12s" "NA"
</pre></div>
<p>We can define a set of output time units that we want to see.
</p>
<div class="sourceCode r"><pre>vec_fmt_duration(
  num_vals,
  input_units = "days",
  output_units = c("hours", "minutes")
)
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "77h 38m" "5h 31m" "7m" "NA"
</pre></div>
<p>There are many duration 'styles' to choose from. We could opt for the
<code>"wide"</code> style.
</p>
<div class="sourceCode r"><pre>vec_fmt_duration(
  num_vals,
  input_units = "days",
  duration_style = "wide"
)
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "3 days 5 hours 38 minutes 24 seconds"
#&gt; [2] "5 hours 31 minutes 12 seconds"
#&gt; [3] "7 minutes 12 seconds"
#&gt; [4] "NA"
</pre></div>
<p>We can always perform locale-specific formatting with <code>vec_fmt_duration()</code>.
Let's attempt the same type of duration formatting as before with the <code>"nl"</code>
locale.
</p>
<div class="sourceCode r"><pre>vec_fmt_duration(
  num_vals,
  input_units = "days",
  duration_style = "wide",
  locale = "nl"
)
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] "3 dagen 5 uur 38 minuten 24 seconden"
#&gt; [2] "5 uur 31 minuten 12 seconden"
#&gt; [3] "7 minuten 12 seconden"
#&gt; [4] "NA"
</pre></div>


<h3>Function ID</h3>

<p>15-16
</p>


<h3>Function Introduced</h3>

<p><code>v0.7.0</code> (Aug 25, 2022)
</p>


<h3>See Also</h3>

<p>The variant function intended for formatting <strong>gt</strong> table data:
<code>fmt_duration()</code>.
</p>
<p>Other vector formatting functions: 
<code>vec_fmt_bytes()</code>,
<code>vec_fmt_currency()</code>,
<code>vec_fmt_date()</code>,
<code>vec_fmt_datetime()</code>,
<code>vec_fmt_engineering()</code>,
<code>vec_fmt_fraction()</code>,
<code>vec_fmt_index()</code>,
<code>vec_fmt_integer()</code>,
<code>vec_fmt_markdown()</code>,
<code>vec_fmt_number()</code>,
<code>vec_fmt_partsper()</code>,
<code>vec_fmt_percent()</code>,
<code>vec_fmt_roman()</code>,
<code>vec_fmt_scientific()</code>,
<code>vec_fmt_spelled_num()</code>,
<code>vec_fmt_time()</code>
</p>


</div>