<div class="container">

<table style="width: 100%;"><tr>
<td>gisco_get_units</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get geospatial units data from GISCO API</h2>

<h3>Description</h3>

<p>Download individual shapefiles of units. Unlike <code>gisco_get_countries()</code>,
<code>gisco_get_nuts()</code> or <code>gisco_get_urban_audit()</code>, that downloads a full
dataset and applies filters, <code>gisco_get_units()</code> downloads a single
shapefile for each unit.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gisco_get_units(
  id_giscoR = c("nuts", "countries", "urban_audit"),
  unit = "ES4",
  mode = c("sf", "df"),
  year = "2016",
  epsg = "4326",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "20",
  spatialtype = "RG"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id_giscoR</code></td>
<td>
<p>Select the <code>unit</code> type to be downloaded. Accepted values are
<code>"nuts"</code>, <code>"countries"</code> or <code>"urban_audit"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>Unit ID to be downloaded. See <strong>Details</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Controls the output of the function. Possible values are <code>"sf"</code>
or <code>"df"</code>. See <strong>Value</strong> and <strong>Details</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>Release year of the file. One
of <code>"2001"</code>, <code>"2006"</code>, <code>"2010"</code>, <code>"2013"</code>, <code>"2016"</code>, <code>"2020"</code> or <code>"2024"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source
<code>.geojson</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>Resolution of the geospatial data. One of
</p>

<ul>
<li> <p><code>"60"</code>: 1:60million
</p>
</li>
<li> <p><code>"20"</code>: 1:20million
</p>
</li>
<li> <p><code>"10"</code>: 1:10million
</p>
</li>
<li> <p><code>"03"</code>: 1:3million
</p>
</li>
<li> <p><code>"01"</code>: 1:1million
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spatialtype</code></td>
<td>
<p>Type of geometry to be returned: <code>"RG"</code>, for <code>POLYGON</code> and
<code>"LB"</code> for <code>POINT</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function can return a data frame on <code>mode = "df"</code> or a <code>sf</code>
object on <code>mode = "sf"</code>.
</p>
<p>In order to see the available <code>unit</code> ids with the required
combination of <code style="white-space: pre;">⁠spatialtype, year⁠</code>, first run the function on <code>"df"</code>
mode. Once that you get the data frame you can select the required ids
on the <code>unit</code> parameter.
</p>
<p>On <code>mode = "df"</code> the only relevant parameters are <code style="white-space: pre;">⁠spatialtype, year⁠</code>.
</p>


<h3>Value</h3>

<p>A <code>sf</code> object on <code>mode = "sf"</code> or a data frame on <code>mode = "df"</code>.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code>gisco_set_cache_dir()</code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding <code>.geojson</code> file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>
<p>For a complete list of files available check gisco_db.
</p>


<h3>Note</h3>

<p>Country-level files would be renamed on your <code>cache_dir</code>
to avoid naming conflicts with NUTS-0 datasets.
</p>
<p>Please check the download and usage provisions on <code>gisco_attributions()</code>.
</p>


<h3>Author(s)</h3>

<p>dieghernan, <a href="https://github.com/dieghernan/">https://github.com/dieghernan/</a>
</p>


<h3>Source</h3>

<p><a href="https://gisco-services.ec.europa.eu/distribution/v2/">https://gisco-services.ec.europa.eu/distribution/v2/</a>
</p>


<h3>See Also</h3>

<p><code>gisco_get_countries()</code>
</p>
<p>Other political: 
<code>gisco_bulk_download()</code>,
<code>gisco_get_coastallines()</code>,
<code>gisco_get_countries()</code>,
<code>gisco_get_lau()</code>,
<code>gisco_get_nuts()</code>,
<code>gisco_get_postalcodes()</code>,
<code>gisco_get_urban_audit()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

cities &lt;- gisco_get_units(
  id_giscoR = "urban_audit",
  mode = "df",
  year = "2020"
)
VAL &lt;- cities[grep("Valencia", cities$URAU_NAME), ]
#   Order from big to small
VAL &lt;- VAL[order(as.double(VAL$AREA_SQM), decreasing = TRUE), ]

VAL.sf &lt;- gisco_get_units(
  id_giscoR = "urban_audit",
  year = "2020",
  unit = VAL$URAU_CODE
)
# Provincia
Provincia &lt;-
  gisco_get_units(
    id_giscoR = "nuts",
    unit = c("ES523"),
    resolution = "01"
  )

# Reorder
VAL.sf$URAU_CATG &lt;- factor(VAL.sf$URAU_CATG, levels = c("F", "K", "C"))

# Plot
library(ggplot2)

ggplot(Provincia) +
  geom_sf(fill = "gray1") +
  geom_sf(data = VAL.sf, aes(fill = URAU_CATG)) +
  scale_fill_viridis_d() +
  labs(
    title = "Valencia",
    subtitle = "Urban Audit",
    fill = "Urban Audit\ncategory"
  )


</code></pre>


</div>