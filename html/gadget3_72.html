<div class="container">

<table style="width: 100%;"><tr>
<td>stock_time</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gadget3 stock time dimensions</h2>

<h3>Description</h3>

<p>Add time dimensions to g3_stock classes
</p>


<h3>Usage</h3>

<pre><code class="language-R">g3s_time_convert(year_or_time, step = NULL)

g3s_time(inner_stock, times, year = NULL, step = NULL)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>year_or_time</code></td>
<td>

<p>Etiher vector of years, or vector of year &amp; step strings, e.g. "1999-01".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>

<p>Vector of years, used to generate <var>times</var> if provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step</code></td>
<td>

<p>Vector of steps, used to generate <var>times</var> if provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inner_stock</code></td>
<td>

<p>A <code>g3_stock</code> that we extend with a time dimension
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>

<p>A vector of year/step integers as generated by <var>g3s_time_convert</var>
</p>
</td>
</tr>
</table>
<h3>Value</h3>



<h4>g3s_time_convert</h4>

<p>A single integer vector representing <var>year</var> and <var>step</var>.
</p>
<p>If <var>step</var> is <code>NULL</code>, returns <var>year</var>, otherwise <code><var>year</var> * 1000 + <var>step</var></code>.
</p>



<h4>g3s_time</h4>

<p>A <code>g3_stock</code> with an additional 'time' dimension.
</p>
<p>If <var>year</var>/<var>step</var> provided, time is defined by those, otherwise <var>times</var>.
</p>
<p>The <code>g3_stock</code> will not support iterating,
only intersecting.
</p>
<p>When intersecting with another stock, only do anything if
<var>cur_year</var> and <var>cur_step</var> matches a time stored in the vector
</p>



<h3>Examples</h3>

<pre><code class="language-R">

# Define a stock with 3 lengthgroups and 3 years, not continuous
# When used, all steps within a year will be aggregated, year 2002 will be ignored.
stock &lt;- g3_stock('name', c(1, 10, 100)) %&gt;%
    g3s_time(year = c(2000, 2001, 2003))

# Use stock_instance to see what the array would look like
g3_stock_instance(stock)

# Define a stock with 3 lengthgroups and 3 years, 2 steps
# The dimension will have 6 entries, 2000.1, 2000.2, 2001.1, 2001.2, 2002.1, 2002.2
stock &lt;- g3_stock('name', c(1, 10, 100)) %&gt;%
    g3s_time(year = c(2000, 2001, 2002), step = 1:2)

# Use stock_instance to see what the array would look like
g3_stock_instance(stock)

# g3s_time_convert is best used with a data.frame
data &lt;- read.table(header = TRUE, text = '
year step
2001 1
2001 2
# NB: No "2002 1"
2002 2
')
stock &lt;- g3_stock('name', c(1, 10, 100)) %&gt;%
    g3s_time(times = g3s_time_convert(data$year, data$step))

# Will also parse strings
g3s_time_convert(c("1999-01", "1999-02"))

# Use stock_instance to see what the array would look like
g3_stock_instance(stock)
</code></pre>


</div>