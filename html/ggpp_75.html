<div class="container">

<table style="width: 100%;"><tr>
<td>position_nudge_center</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Nudge labels away from a central point</h2>

<h3>Description</h3>

<p><code>position_nudge_center()</code> is generally useful for adjusting the position of
labels or text, both on a discrete or continuous scale. In contrast to
<code>position_nudge</code>, <code>position_nudge_center()</code> returns in <code>data</code> both
the original coordinates and the nudged coordinates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">position_nudge_center(
  x = 0,
  y = 0,
  center_x = NULL,
  center_y = NULL,
  direction = NULL,
  obey_grouping = NULL,
  kept.origin = c("original", "none")
)

position_nudge_centre(
  x = 0,
  y = 0,
  center_x = NULL,
  center_y = NULL,
  direction = NULL,
  obey_grouping = NULL,
  kept.origin = c("original", "none")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>Amount of vertical and horizontal distance to move. A numeric
vector, that is recycled if shorter than the number of rows in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center_x, center_y</code></td>
<td>
<p>The coordinates of the virtual origin out from which
nudging radiates or splits in opposite directions. A numeric vector of
length 1 or of the same length as rows there are in <code>data</code>, or a
function returning either of these vectors computed from the variables in
data mapped to <code>x</code> or <code>y</code>, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction</code></td>
<td>
<p>One of <code>"none"</code>, <code>"radial"</code>, or <code>"split"</code>. A
value of <code>"none"</code> replicates the behavior of
<code>position_nudge</code>. Which of these three values is the
default depends on the values passed to the other parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obey_grouping</code></td>
<td>
<p>A logical flag indicating whether to obey or not
groupings of the observations. By default, grouping is obeyed when both of
the variables mapped to <em>x</em> and <em>y</em> are continuous numeric and
ignored otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kept.origin</code></td>
<td>
<p>One of <code>"original"</code> or <code>"none"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This position function is backwards compatible with <code>position_nudge</code>
but extends it by adding support for nudging that varies across the plotting
region, either in opposite directions or radially from a virtual <em>center
point</em>.
</p>
<p>Positive values as arguments to <code>x</code> and <code>y</code> are added to
the original position along either axis. If no arguments are passed to
<code>center_x</code>, <code>center_y</code> or <code>direction</code>, the nudging is
applied as is, as is the case if <code>direction = "none"</code>. If
non-<code>NULL</code> arguments are passed to both <code>center_x</code> and
<code>center_y</code>, <code>direction = "radial"</code> is assumed. In this case, if
<code>x</code> and/or <code>y</code> positive nudging is applied radially outwards from
the center, while if negative, inwards towards the center. When a
non-<code>NULL</code> argument is passed only to one of <code>center_x</code> or
<code>center_y</code>, <code>direction = "split"</code> is assumed. In this case when
the initial location of the point is to the left of <code>center_x</code>,
<code>-x</code> is used instead of <code>x</code> for nudging, and when the initial
location of the point is to the below of <code>center_y</code>, <code>-y</code> is used
instead of <code>y</code> for nudging. If non-<code>NULL</code> arguments are passed to
both <code>center_x</code> and <code>center_y</code>, and <code>direction</code> is passed
<code>"split"</code> as argument, then the split as described above is applied to
both to <em>x</em> and <em>y</em> coordinates.
</p>


<h3>Value</h3>

<p>A <code>"Position"</code> object.
</p>


<h3>Note</h3>

<p>Some situations are handled as special cases. When <code>direction =
  "split"</code> or <code>direction = "radial"</code>, observations at exactly the _center_
are nudged using <code>x</code> and <code>y</code> unchanged. When<code>direction = "split"</code>,
and
both <code>center_x</code> and <code>center_y</code> have been supplied, segments are drawn at
eight different possible angles. When segments are exactly horizontal or
vertical they would be shorter than when drawn at the other four angles, in
which case <code>x</code> or <code>y</code> are adjusted to ensure these segments are of the same
lengths as those at other angles.
</p>
<p>This position is most useful when labelling points forming a cloud or
grouped along vertical or horizontal lines or "divides".
</p>


<h3>See Also</h3>

<p>[ggplot2::position_nudge()], [ggrepel::position_nudge_repel()].
</p>
<p>Other position adjustments: 
<code>position_dodgenudge()</code>,
<code>position_jitternudge()</code>,
<code>position_nudge_keep()</code>,
<code>position_nudge_line()</code>,
<code>position_nudge_to()</code>,
<code>position_stacknudge()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">df &lt;- data.frame(
  x = c(1,3,2,5,4,2.5),
  y = c("abc","cd","d","c","bcd","a")
)

# Plain nudging, same as with ggplot2::position_nudge()

ggplot(df, aes(x, y, label = y)) +
  geom_point() +
  geom_text_s(hjust = "left", vjust = "bottom",
              position = position_nudge(x = 0.2, y = 0.2))

ggplot(df, aes(x, y, label = y)) +
  geom_point() +
  geom_text_s(add.segments = FALSE,
              position = position_nudge_center(x = 0.2, y = 0.2)
  )

# "split" nudging

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              add.segments = FALSE,
              position = position_nudge_center(x = 0.2,
                                               y = 0.2,
                                               direction = "split"))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.4,
                                               direction = "split"))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(y = 0.2,
                                               direction = "split"))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.2,
                                               y = 0.3,
                                               center_y = 2,
                                               center_x = 1.5,
                                               direction = "split"))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.06,
                                               y = 0.08,
                                               center_y = 2))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.1,
                                               center_x = 2.51))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.06,
                                               y = 0.08,
                                               center_x = median,
                                               center_y = median,
                                               direction = "split"))

# "Radial" nudging

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.1,
                                               y = 0.2,
                                               direction = "radial"))

ggplot(df, aes(x, y)) +
  geom_point() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = -0.1,
                                               y = -0.1,
                                               direction = "radial"))

df &lt;- data.frame(
  x = -10:10,
  z = (-10:10)^2,
  y = letters[1:21],
  group = rep(c("a", "b"), rep(c(11, 10)))
)

ggplot(df, aes(x, z)) +
  geom_point() +
  geom_line() +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = 0.9,
                                               y = 2.7,
                                               center_x = mean,
                                               center_y = max))

ggplot(df, aes(x, z, color = group)) +
  geom_point() +
  geom_line(color = "black", linetype = "dotted") +
  geom_text_s(aes(label = y),
              position = position_nudge_center(x = -1.2,
                                               y = -3,
                                               center_x = 0,
                                               center_y = "above_max"))

ggplot(df, aes(x, z, color = group)) +
  geom_point() +
  geom_line(color = "black", linetype = "dotted") +
  geom_text(aes(label = y),
            vjust = "inward", hjust = "inward",
            position = position_nudge_center(x = -0.9,
                                             y = -2.7,
                                             center_x = mean,
                                             center_y = max,
                                             obey_grouping = FALSE))

</code></pre>


</div>