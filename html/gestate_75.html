<div class="container">

<table style="width: 100%;"><tr>
<td>plot_ep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot event prediction output</h2>

<h3>Description</h3>

<p>This function plots the output from event_prediction().<br>
By default, produces a plot of predicted events over time, with confidence intervals if available.<br>
Alternatively, produces a plot with the fitting CI over time with same percentage as prediction interval.<br>
By default, both conditional and unconditional trajectories are plotted (if conditional event prediction is available).<br>
Options are available to customise inclusion.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">plot_ep(
  data,
  trajectory = c("both", "conditional", "unconditional"),
  which_PI = c("both", "conditional", "unconditional", "none"),
  prediction_fitting = c("prediction", "fitting"),
  observed = NULL,
  target = NULL,
  max_time = NULL,
  max_E = NULL,
  legend_position = c("top_left", "bottom_right"),
  no_legend = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Full output list from event_prediction().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trajectory</code></td>
<td>
<p>String, choice of "both","conditional","unconditional", for which trajectory to plot. (Default="both")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which_PI</code></td>
<td>
<p>String, choice of "both","conditional","unconditional","none", for which PIs to plot. (Default="both")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prediction_fitting</code></td>
<td>
<p>String, choice of "prediction" or "fitting" (Default = "prediction"). Determines the nature of the intervals; PIs are relevant for prediction of the observation of future trajectories (sample level), whereas fitting CIs concern the interval for the mean trajectory itself (population level).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed</code></td>
<td>
<p>Optional trajectory of observed event numbers. If vector specified, will plot values at integer times starting from 1. If 2-column matrix specified, will take x-values from column 1 and y-values from column 2. (Default=NULL; not plotted).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>Optional target number of events to plot. (Default=NULL; not plotted)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_time</code></td>
<td>
<p>Optional maximum time to plot up to if you do not want to plot full trajectory. (Default=NULL; maximum time determined by input data)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_E</code></td>
<td>
<p>Optional maximum number of events to plot up to. (Default=NULL; maximum event number is the number of patients)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_position</code></td>
<td>
<p>String with any of "top_left", or "bottom_right", corresponding to legend position in power plot. (Default="top_left").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_legend</code></td>
<td>
<p>Boolean to turn off legend. Default is FALSE; legend shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional graphical parameters.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns NULL
</p>


<h3>Author(s)</h3>

<p>James Bell
</p>


<h3>Examples</h3>

<pre><code class="language-R">recruit &lt;- PieceR(matrix(c(rep(1,12),10,15,25,30,45,60,55,50,65,60,55,30),ncol=2),1)
trial_long &lt;- simulate_trials(active_ecurve=Weibull(50,0.8),control_ecurve=Weibull(50,0.8),
rcurve=recruit,fix_events=200, iterations=1,seed=12345,detailed_output=TRUE)
trial_short &lt;- set_assess_time(data=trial_long,time=10,detailed_output = FALSE)

maxtime &lt;- max(ceiling(trial_long[,"Assess"]))
events &lt;- rep(NA,maxtime)
for (i in 1:maxtime){events[i] &lt;- sum(1-set_assess_time(trial_long,i)[,"Censored"])}

predictions &lt;- event_prediction(data=trial_short, Event="Censored", censoringOne=TRUE, 
type="Weibull", rcurve=recruit, max_time=60, cond_Events=49, cond_NatRisk=451, 
cond_Time=10, units="Months")

plot_ep(predictions,trajectory="conditional",which_PI="conditional",max_time=40,observed=events,
target=200,max_E=200)

plot_ep(predictions,trajectory="unconditional",which_PI="unconditional",max_time=40,
observed=events,target=200,max_E=200)

plot_ep(predictions,trajectory="conditional",which_PI="none",observed=events[1:10],max_time=20,
max_E=150)

</code></pre>


</div>