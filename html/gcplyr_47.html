<div class="container">

<table style="width: 100%;"><tr>
<td>smooth_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Smooth data</h2>

<h3>Description</h3>

<p>This function calls other functions to smooth growth curve data
</p>


<h3>Usage</h3>

<pre><code class="language-R">smooth_data(
  ...,
  x = NULL,
  y = NULL,
  sm_method,
  subset_by = NULL,
  return_fitobject = FALSE,
  warn_ungrouped = TRUE,
  warn_gam_no_s = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to loess, gam,
moving_average, moving_median, or 
smooth.spline. Typically includes tuning 
parameter(s), which in some cases are required.
See Details for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An (often optional) vector of predictor values to smooth along 
(e.g. time)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of response values to be smoothed (e.g. density). If NULL,
<code>formula</code> and <code>data</code> *must* be provided via <code>...</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sm_method</code></td>
<td>
<p>Argument specifying which smoothing method should
be used to smooth data. Options include 
"moving-average", "moving-median", "loess", "gam",
and "smooth.spline".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset_by</code></td>
<td>
<p>An optional vector as long as <code>y</code>. 
<code>y</code> will be split by the unique values of this vector 
and the smoothed data for each group will be calculated 
independently of the others.
</p>
<p>This provides an internally-implemented approach similar
to group_by and mutate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_fitobject</code></td>
<td>
<p>logical whether entire object returned
by fitting function should be returned. If FALSE,
just fitted values are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_ungrouped</code></td>
<td>
<p>logical whether warning should be issued when
<code>smooth_data</code> is being called on ungrouped data
and <code>subset_by = NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_gam_no_s</code></td>
<td>
<p>logical whether warning should be issued when gam is 
used without <code>s()</code> in the formula.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For moving_average and moving_median, 
passing <code>window_width</code> or <code>window_width_n</code> via 
<code>...</code> is required. <code>window_width</code> sets the width
of the moving window in units of <code>x</code>, while 
<code>window_width_n</code> sets the width in units of number
of data points. Larger values for either will produce more 
"smoothed" data.
</p>
<p>For loess, the <code>span</code> argument sets the fraction of
data points that should be included in each calculation. It's
typically best to specify, since the default of 0.75 is often
too large for growth curves data. Larger values of <code>span</code> 
will produce more more "smoothed" data
</p>
<p>For <code>gam</code>, both arguments to gam and 
s can be provided via <code>...</code>. Most frequently, 
the <code>k</code> argument to s sets the number of 
"knots" the spline-fitting can use. Smaller values will be more 
"smoothed".
</p>
<p>When using <code>sm_method = "gam"</code>, advanced users may also modify 
other parameters of <code>s()</code>, including the smoothing basis 
<code>bs</code>. These bases can be thin plate (<code>bs = "tp"</code>, 
the default), cubic regressions (<code>bs = "cr"</code>), or many other 
options (see s). I recommend leaving the default 
thin plate regressions, whose main drawback is that they are 
computationally intensive to calculate. For growth curves data, 
this is unlikely to be relevant.
</p>
<p>As an alternative to passing <code>y</code>, for more advanced needs 
with loess or gam, <code>formula</code> and <code>data</code> 
can be passed to <code>smooth_data</code> via the <code>...</code> argument 
(in lieu of <code>y</code>).
</p>
<p>In this case, the formula should specify the response (e.g. density) 
and predictors. For <code>gam</code> smoothing, the formula should
typically be of the format: y ~ s(x), which uses 
s to smooth the data. The data argument should be a 
<code>data.frame</code> containing the variables in the formula.
In such cases, <code>subset_by</code> can still be specified as a vector
with length <code>nrow(data)</code>
</p>


<h3>Value</h3>

<p>If <code>return_fitobject == FALSE:</code>
</p>
<p>A vector, the same length as <code>y</code>, with the now-smoothed y values
</p>
<p>If <code>return_fitobject == TRUE:</code>
</p>
<p>A list the same length as unique(subset_by) where each element is
an object of the same class as returned by the smoothing method
(typically a named list-like object)
</p>


</div>