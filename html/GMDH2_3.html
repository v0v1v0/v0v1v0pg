<div class="container">

<table style="width: 100%;"><tr>
<td>confMat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Confusion Matrix
</h2>

<h3>Description</h3>

<p><code>confMat</code> constructs a 2<code class="reqn">\times</code>2 confusion matrix and returns some statistics related to confusion matrix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">confMat(data, ...)

## Default S3 method:
confMat(data, reference, positive = NULL, verbose = TRUE, ...)

## S3 method for class 'table'
confMat(data, positive = NULL, verbose = TRUE, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a factor of predicted classes (for the default method) or an object of class <code>table</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>option to be passed to <code>table</code>. Note: do not include <code>reference</code> here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference</code></td>
<td>
<p>a factor of classes to be used as the true results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positive</code></td>
<td>
<p>an optional character string for the factor level that corresponds to a "positive" result.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical for printing output to R console.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>confMat</code> function requires that the factors have exactly the same levels. The function constructs 2<code class="reqn">\times</code>2 confusion matrix and calculates accuracy, no information rate (NIR), unweighted Kappa statistic, Matthews correlation coefficient, sensitivity, specificity, positive predictive value (PPV), negative predictive value (NPV), prevalence, balanced accuracy, youden index, detection rate, detection prevalence, precision, recall and F1 measure.
</p>
<p>Suppose a 2<code class="reqn">\times</code>2 table with notation
</p>

<table>
<tr>
<td style="text-align: right;"> </td>
<td style="text-align: center;"> Reference </td>
<td style="text-align: center;"> </td>
</tr>
<tr>
<td style="text-align: right;"> Predicted </td>
<td style="text-align: center;"> Event </td>
<td style="text-align: center;"> No Event
</td>
</tr>
<tr>
<td style="text-align: right;"> Event </td>
<td style="text-align: center;"> TP </td>
<td style="text-align: center;"> FP </td>
</tr>
<tr>
<td style="text-align: right;"> No Event </td>
<td style="text-align: center;"> FN </td>
<td style="text-align: center;"> TN </td>
</tr>
<tr>
<td style="text-align: right;"> </td>
</tr>
</table>
<p>TP is the number of true positives, FP is the number of false positives, FN is the number of false negatives and TN is the number of true negatives.
</p>
<p style="text-align: center;"><code class="reqn">Accuracy = \frac{TP + TN}{TP + FP + FN + TN}</code>
</p>
 
<p style="text-align: center;"><code class="reqn">NIR = max(Prevalence, 1 - Prevalence)</code>
</p>

<p style="text-align: center;"><code class="reqn">Kappa = \frac{Accuracy - \frac{(TP + FP)(TP + FN)+(FN + TN)(FP + TN)}{(TP + FP + FN + TN)^2}}{1 - \frac{(TP + FP)(TP + FN)+(FN + TN)(FP + TN)}{(TP + FP + FN + TN)^2}}</code>
</p>

<p style="text-align: center;"><code class="reqn">MCC = \frac{TP \times TN - FP \times FN}{\sqrt{(TP+FP) \times (FN+TN) \times (TP+FN) \times (FP+TN)}} </code>
</p>

<p style="text-align: center;"><code class="reqn">Sensitivity = \frac{TP}{TP+FN}</code>
</p>

<p style="text-align: center;"><code class="reqn">Specificity = \frac{TN}{TN+FP}</code>
</p>

<p style="text-align: center;"><code class="reqn">PPV = \frac{TP}{TP+FP}</code>
</p>

<p style="text-align: center;"><code class="reqn">NPV = \frac{TN}{TN+FN}</code>
</p>

<p style="text-align: center;"><code class="reqn">Prevalence = \frac{TP + FN}{TP + FP + FN + TN}</code>
</p>

<p style="text-align: center;"><code class="reqn">Balanced\ accuracy = \frac{Sensitivity + Specificity}{2}</code>
</p>

<p style="text-align: center;"><code class="reqn">Youden\ index = Sensitivity + Specificity -1</code>
</p>

<p style="text-align: center;"><code class="reqn">Detection\ rate = \frac{TP}{TP + FP + FN + TN}</code>
</p>

<p style="text-align: center;"><code class="reqn">Detection\ prevalence = \frac{TP+FP}{TP + FP + FN + TN}</code>
</p>

<p style="text-align: center;"><code class="reqn">Precision = \frac{TP}{TP + FP}</code>
</p>

<p style="text-align: center;"><code class="reqn">Recall = \frac{TP}{TP+FN}</code>
</p>

<p style="text-align: center;"><code class="reqn">F1 = \frac{2}{\frac{1}{Recall}+\frac{1}{Precision}}</code>
</p>



<h3>Value</h3>

<p>Returns a list containing following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>confusion matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accuracy</code></td>
<td>
<p>accuracy</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NIR</code></td>
<td>
<p>no information rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa</code></td>
<td>
<p>unweighted kappa</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MCC</code></td>
<td>
<p>Matthews correlation coefficient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensitivity</code></td>
<td>
<p>sensitivity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specificity</code></td>
<td>
<p>specificity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PPV</code></td>
<td>
<p>positive predictive value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NPV</code></td>
<td>
<p>negative predictive value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prevalence</code></td>
<td>
<p>prevalence</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baccuracy</code></td>
<td>
<p>balanced accuracy</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>youden</code></td>
<td>
<p>youden index</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detectRate</code></td>
<td>
<p>detection rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detectPrev</code></td>
<td>
<p>detection prevalence</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>precision</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recall</code></td>
<td>
<p>recall</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>F1</code></td>
<td>
<p>F1 measure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p>returns a matrix containing all statistics</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>If the factors, reference and data, have the same levels, but in the incorrect order, the <code>confMat</code> will reorder data with the order of reference.
</p>


<h3>Author(s)</h3>

<p>Osman Dag
</p>


<h3>See Also</h3>

<p><code>confusionMatrix</code> 
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(GMDH2)

library(mlbench)
data(BreastCancer)

data &lt;- BreastCancer

# to obtain complete observations
completeObs &lt;- complete.cases(data)
data &lt;- data[completeObs,]

x &lt;- data.matrix(data[,2:10])
y &lt;- data[,11]

seed &lt;- 12345
set.seed(seed)
nobs &lt;- length(y)

# to split train, validation and test sets

indices &lt;- sample(1:nobs)

ntrain &lt;- round(nobs*0.6,0)
nvalid &lt;- round(nobs*0.2,0)
ntest &lt;- nobs-(ntrain+nvalid)

train.indices &lt;- sort(indices[1:ntrain])
valid.indices &lt;- sort(indices[(ntrain+1):(ntrain+nvalid)])
test.indices &lt;- sort(indices[(ntrain+nvalid+1):nobs])


x.train &lt;- x[train.indices,]
y.train &lt;- y[train.indices]

x.valid &lt;- x[valid.indices,]
y.valid &lt;- y[valid.indices]

x.test &lt;- x[test.indices,]
y.test &lt;- y[test.indices]


set.seed(seed)
# to construct model via dce-GMDH algorithm
model &lt;- dceGMDH(x.train, y.train, x.valid, y.valid)

# to obtain predicted classes for test set
y.test_pred &lt;- predict(model, x.test, type = "class")

# to obtain confusion matrix and some statistics for test set
confMat(y.test_pred, y.test, positive = "malignant")

# to obtain statistics from table
result &lt;- table(y.test_pred, y.test)
confMat(result, positive = "malignant")


</code></pre>


</div>