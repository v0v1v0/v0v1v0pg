<div class="container">

<table style="width: 100%;"><tr>
<td>FormatData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Formats Data Into Correct Form</h2>

<h3>Description</h3>

<p>Takes a dataset in long format and puts it into the required format for use
with the g-estimation functions. Specifically it ensures there exists a data
entry for each individual at each time period, by adding empty rows, and orders the dataset by
time and identifier. It can also create variables for the exposure histories of all time-varying
variables in the data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">FormatData(
  data,
  idvar,
  timevar,
  An,
  varying,
  Cn = NA,
  GenerateHistory = FALSE,
  GenerateHistoryMax = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame in long format containing the data to be analysed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idvar</code></td>
<td>
<p>A character string specifying the name of of the variable specifying
an individuals identifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timevar</code></td>
<td>
<p>A character string specifying the name of the time variable.
Note that time periods must be labeled as integers starting from 1
(<code class="reqn">1,2,\ldots</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>An</code></td>
<td>
<p>A character string specifying the name of the exposure variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varying</code></td>
<td>
<p>A vector of character strings specifying the names of the variables
to be included in the analysis which are time-varying. Specifically
the exposure, time-varying confounders and (if applicable) the time-varying outcome.
If <code>Cn</code> is specified, it is added to <code>varying</code> automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Cn</code></td>
<td>
<p>Optional character string specifying the name of the censoring indicator if present.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>GenerateHistory</code></td>
<td>
<p>A TRUE or FALSE indicator. If set to TRUE, variables are generated
corresponding to the lagged histories of all variables included in <code>varying</code>.
These will be labeled as <code>LagVari</code> where <code>Var</code> is the variable name and <code>i</code>
indicates how much the variable is lagged by. For example <code>LagAn2</code> is the value of <code>An</code>, 2
time periods prior.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>GenerateHistoryMax</code></td>
<td>
<p>An optional positive integer specifying <code>GenerateHistory</code> to generate exposure histories
up to <code>GenerateHistoryMax</code> time periods prior.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that any variable in <code>varying</code> that is strictly categorical MUST be declared as
an <code>as.factor()</code> variable. Binary or continuous variables should be declared as an
<code>as.numeric()</code> variable.
</p>


<h3>Value</h3>

<p>A data frame in long format with additional rows added as necessary. If
<code>data</code> is already in the correct format then no additional rows will be added.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data &lt;- dataexamples(n = 1000, seed = 3456, Censoring = TRUE)$datagest
# To demonstrate the function we
# Delete the third row, corresponding to the entry for ID 1 at time 3
data &lt;- data[-3, ]
datanew &lt;- FormatData(
  data = data, idvar = "id", timevar = "time", An = "A",
  Cn = "C", varying = c("A", "L"), GenerateHistory = TRUE, GenerateHistoryMax = 1
)
head(datanew)
# Note that the missing entry has been re-added,
# with missing values for A and L in the third row
# An example with lagged history of time varying variables created.
data &lt;- dataexamples(n = 1000, seed = 3456, Censoring = TRUE)$datagestmultcat
datanew &lt;- FormatData(
  data = data, idvar = "id", timevar = "time", An = "A",
  Cn = "C", varying = c("Y","A", "L"), GenerateHistory = TRUE, GenerateHistoryMax = NA
)
head(datanew)
</code></pre>


</div>